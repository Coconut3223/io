<!DOCTYPE html>

<html lang="zh-CN" data-content_root="../">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" /><meta name="viewport" content="width=device-width, initial-scale=1" />

  <meta name="viewport" content="width=device-width,initial-scale=1">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <meta name="lang:clipboard.copy" content="Copy to clipboard">
  <meta name="lang:clipboard.copied" content="Copied to clipboard">
  <meta name="lang:search.language" content="en">
  <meta name="lang:search.pipeline.stopwords" content="True">
  <meta name="lang:search.pipeline.trimmer" content="True">
  <meta name="lang:search.result.none" content="No matching documents">
  <meta name="lang:search.result.one" content="1 matching document">
  <meta name="lang:search.result.other" content="# matching documents">
  <meta name="lang:search.tokenizer" content="[\s\-]+">

  
    <link href="https://fonts.gstatic.com/" rel="preconnect" crossorigin>
    <link href="https://fonts.googleapis.com/css?family=Roboto+Mono:400,500,700|Roboto:300,400,400i,700&display=fallback" rel="stylesheet">

    <style>
      body,
      input {
        font-family: "Roboto", "Helvetica Neue", Helvetica, Arial, sans-serif
      }

      code,
      kbd,
      pre {
        font-family: "Roboto Mono", "Courier New", Courier, monospace
      }
    </style>
  

  <link rel="stylesheet" href="../_static/stylesheets/application.css"/>
  <link rel="stylesheet" href="../_static/stylesheets/application-palette.css"/>
  <link rel="stylesheet" href="../_static/stylesheets/application-fixes.css"/>
  
  <link rel="stylesheet" href="../_static/fonts/material-icons.css"/>
  
  <meta name="theme-color" content="#3f51b5">
  <script src="../_static/javascripts/modernizr.js"></script>
  
  
  
    <title>SQL &#8212; HomePage</title>
    <link rel="stylesheet" type="text/css" href="../_static/pygments.css?v=83e35b93" />
    <link rel="stylesheet" type="text/css" href="../_static/material.css?v=79c92029" />
    <link rel="stylesheet" type="text/css" href="../_static/copybutton.css?v=76b2166b" />
    <link rel="stylesheet" type="text/css" href="../_static/sphinx-design.min.css?v=87e54e7c" />
    <link rel="stylesheet" type="text/css" href="https://cdn.jsdelivr.net/npm/katex@0.16.10/dist/katex.min.css" />
    <link rel="stylesheet" type="text/css" href="../_static/katex-math.css?v=91adb8b6" />
    <link rel="stylesheet" type="text/css" href="../_static/css/def.css?v=5a9d86bd" />
    <script src="../_static/documentation_options.js?v=7d86a446"></script>
    <script src="../_static/doctools.js?v=9a2dae69"></script>
    <script src="../_static/sphinx_highlight.js?v=dc90522c"></script>
    <script src="../_static/clipboard.min.js?v=a7894cd8"></script>
    <script src="../_static/copybutton.js?v=6dbb43f8"></script>
    <script src="../_static/translations.js?v=beaddf03"></script>
    <script src="../_static/design-tabs.js?v=f930bc37"></script>
    <link rel="index" title="ç´¢å¼•" href="../genindex.html" />
    <link rel="search" title="æœç´¢" href="../search.html" />
    <link rel="next" title="æ‚" href="../utils/index.html" />
    <link rel="prev" title="SQL" href="index.html" />
  
   

  </head>
  <body dir=ltr
        data-md-color-primary=blue data-md-color-accent=light-blue>
  
  <svg class="md-svg">
    <defs data-children-count="0">
      
      <svg xmlns="http://www.w3.org/2000/svg" width="416" height="448" viewBox="0 0 416 448" id="__github"><path fill="currentColor" d="M160 304q0 10-3.125 20.5t-10.75 19T128 352t-18.125-8.5-10.75-19T96 304t3.125-20.5 10.75-19T128 256t18.125 8.5 10.75 19T160 304zm160 0q0 10-3.125 20.5t-10.75 19T288 352t-18.125-8.5-10.75-19T256 304t3.125-20.5 10.75-19T288 256t18.125 8.5 10.75 19T320 304zm40 0q0-30-17.25-51T296 232q-10.25 0-48.75 5.25Q229.5 240 208 240t-39.25-2.75Q130.75 232 120 232q-29.5 0-46.75 21T56 304q0 22 8 38.375t20.25 25.75 30.5 15 35 7.375 37.25 1.75h42q20.5 0 37.25-1.75t35-7.375 30.5-15 20.25-25.75T360 304zm56-44q0 51.75-15.25 82.75-9.5 19.25-26.375 33.25t-35.25 21.5-42.5 11.875-42.875 5.5T212 416q-19.5 0-35.5-.75t-36.875-3.125-38.125-7.5-34.25-12.875T37 371.5t-21.5-28.75Q0 312 0 260q0-59.25 34-99-6.75-20.5-6.75-42.5 0-29 12.75-54.5 27 0 47.5 9.875t47.25 30.875Q171.5 96 212 96q37 0 70 8 26.25-20.5 46.75-30.25T376 64q12.75 25.5 12.75 54.5 0 21.75-6.75 42 34 40 34 99.5z"/></svg>
      
    </defs>
  </svg>
  
  <input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="__drawer">
  <input class="md-toggle" data-md-toggle="search" type="checkbox" id="__search">
  <label class="md-overlay" data-md-component="overlay" for="__drawer"></label>
  <a href="#SQL/main" tabindex="1" class="md-skip"> Skip to content </a>
  <header class="md-header" data-md-component="header">
  <nav class="md-header-nav md-grid">
    <div class="md-flex navheader">
      <div class="md-flex__cell md-flex__cell--shrink">
        <a href="../index.html" title="HomePage"
           class="md-header-nav__button md-logo">
          
            <i class="md-icon">&#xe869</i>
          
        </a>
      </div>
      <div class="md-flex__cell md-flex__cell--shrink">
        <label class="md-icon md-icon--menu md-header-nav__button" for="__drawer"></label>
      </div>
      <div class="md-flex__cell md-flex__cell--stretch">
        <div class="md-flex__ellipsis md-header-nav__title" data-md-component="title">
          <span class="md-header-nav__topic">Cocobook</span>
          <span class="md-header-nav__topic"> SQL </span>
        </div>
      </div>
      <div class="md-flex__cell md-flex__cell--shrink">
        <label class="md-icon md-icon--search md-header-nav__button" for="__search"></label>
        
<div class="md-search" data-md-component="search" role="dialog">
  <label class="md-search__overlay" for="__search"></label>
  <div class="md-search__inner" role="search">
    <form class="md-search__form" action="../search.html" method="get" name="search">
      <input type="text" class="md-search__input" name="q" placeholder=""Search""
             autocapitalize="off" autocomplete="off" spellcheck="false"
             data-md-component="query" data-md-state="active">
      <label class="md-icon md-search__icon" for="__search"></label>
      <button type="reset" class="md-icon md-search__icon" data-md-component="reset" tabindex="-1">
        &#xE5CD;
      </button>
    </form>
    <div class="md-search__output">
      <div class="md-search__scrollwrap" data-md-scrollfix>
        <div class="md-search-result" data-md-component="result">
          <div class="md-search-result__meta">
            Type to start searching
          </div>
          <ol class="md-search-result__list"></ol>
        </div>
      </div>
    </div>
  </div>
</div>

      </div>
      
        <div class="md-flex__cell md-flex__cell--shrink">
          <div class="md-header-nav__source">
            <a href="https://github.com/Coconut3223/io/" title="Go to repository" class="md-source" data-md-source="github">

    <div class="md-source__icon">
      <svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" viewBox="0 0 24 24" width="28" height="28">
        <use xlink:href="#__github" width="24" height="24"></use>
      </svg>
    </div>
  
  <div class="md-source__repository">
    io
  </div>
</a>
          </div>
        </div>
      
      
  
  <script src="../_static/javascripts/version_dropdown.js"></script>
  <script>
    var json_loc = "../"versions.json"",
        target_loc = "../../",
        text = "Versions";
    $( document ).ready( add_version_dropdown(json_loc, target_loc, text));
  </script>
  

    </div>
  </nav>
</header>

  
  <div class="md-container">
    
    
    
  <nav class="md-tabs" data-md-component="tabs">
    <div class="md-tabs__inner md-grid">
      <ul class="md-tabs__list">
          <li class="md-tabs__item"><a href="../index.html" class="md-tabs__link">HomePage</a></li>
            
            <li class="md-tabs__item"><a href="../index.html" class="md-tabs__link">Homepage</a></li>
            
            <li class="md-tabs__item"><a href="../AI/index.html" class="md-tabs__link">AI</a></li>
            
            <li class="md-tabs__item"><a href="../python/index.html" class="md-tabs__link">Python</a></li>
            
            <li class="md-tabs__item"><a href="../NLP/index.html" class="md-tabs__link">NLP</a></li>
            
            <li class="md-tabs__item"><a href="index.html" class="md-tabs__link">SQL</a></li>
            
            <li class="md-tabs__item"><a href="../utils/index.html" class="md-tabs__link">Utils</a></li>
          <li class="md-tabs__item"><a href="index.html" class="md-tabs__link">SQL</a></li>
      </ul>
    </div>
  </nav>
    <main class="md-main">
      <div class="md-main__inner md-grid" data-md-component="container">
        
          <div class="md-sidebar md-sidebar--primary" data-md-component="navigation">
            <div class="md-sidebar__scrollwrap">
              <div class="md-sidebar__inner">
                <nav class="md-nav md-nav--primary" data-md-level="0">
  <label class="md-nav__title md-nav__title--site" for="__drawer">
    <a href="../index.html" title="HomePage" class="md-nav__button md-logo">
      
        <i class="md-icon">&#xe869</i>
      
    </a>
    <a href="../index.html"
       title="HomePage">Cocobook</a>
  </label>
    <div class="md-nav__source">
      <a href="https://github.com/Coconut3223/io/" title="Go to repository" class="md-source" data-md-source="github">

    <div class="md-source__icon">
      <svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" viewBox="0 0 24 24" width="28" height="28">
        <use xlink:href="#__github" width="24" height="24"></use>
      </svg>
    </div>
  
  <div class="md-source__repository">
    io
  </div>
</a>
    </div>
  
  

  
  <ul class="md-nav__list">
    <li class="md-nav__item">
    
      <span class="md-nav__link caption"><span class="caption-text">Content</span></span>
    
    </li>
    <li class="md-nav__item">
    
    
      <a href="../AI/index.html" class="md-nav__link">AI</a>
      
    
    </li>
    <li class="md-nav__item">
    
    
      <a href="../AI/ML/index.html" class="md-nav__link">ML</a>
      
    
    </li>
    <li class="md-nav__item">
    
    
      <a href="../AI/DL/index.html" class="md-nav__link">DL</a>
      
    
    </li>
    <li class="md-nav__item">
    
    
      <a href="../CV/index.html" class="md-nav__link">CV</a>
      
    
    </li>
    <li class="md-nav__item">
    
    
      <a href="../NLP/index.html" class="md-nav__link">NLP</a>
      
    
    </li>
    <li class="md-nav__item">
    
    
      <a href="../python/index.html" class="md-nav__link">python</a>
      
    
    </li>
    <li class="md-nav__item">
    
    
      <a href="index.html" class="md-nav__link">SQL</a>
      
    
    </li>
    <li class="md-nav__item">
    
    
      <a href="../utils/index.html" class="md-nav__link">utils</a>
      
    
    </li>
  </ul>
  

</nav>
              </div>
            </div>
          </div>
          <div class="md-sidebar md-sidebar--secondary" data-md-component="toc">
            <div class="md-sidebar__scrollwrap">
              <div class="md-sidebar__inner">
                
<nav class="md-nav md-nav--secondary">
    <label class="md-nav__title" for="__toc">"Contents"</label>
  <ul class="md-nav__list" data-md-scrollfix="">
        <li class="md-nav__item"><a href="#sql-main--page-root" class="md-nav__link">SQL</a><nav class="md-nav">
              <ul class="md-nav__list">
        <li class="md-nav__item"><a href="#datatype" class="md-nav__link">datatype</a><nav class="md-nav">
              <ul class="md-nav__list">
        <li class="md-nav__item"><a href="#div-id-unicode-div" class="md-nav__link"><div id =â€™unicodeâ€™ > ç¼–ç </div></a><nav class="md-nav">
              <ul class="md-nav__list">
        <li class="md-nav__item"><a href="#charset" class="md-nav__link">charset</a>
        </li>
        <li class="md-nav__item"><a href="#collate" class="md-nav__link">collate</a>
        </li></ul>
            </nav>
        </li>
        <li class="md-nav__item"><a href="#int" class="md-nav__link">int</a>
        </li>
        <li class="md-nav__item"><a href="#char" class="md-nav__link">char</a>
        </li>
        <li class="md-nav__item"><a href="#format" class="md-nav__link">format</a>
        </li></ul>
            </nav>
        </li>
        <li class="md-nav__item"><a href="#query" class="md-nav__link">query</a><nav class="md-nav">
              <ul class="md-nav__list">
        <li class="md-nav__item"><a href="#id1" class="md-nav__link">ä¸€äº›ç‰¹åˆ«çš„é€‰å–</a><nav class="md-nav">
              <ul class="md-nav__list">
        <li class="md-nav__item"><a href="#id2" class="md-nav__link">æ—¥æœŸ</a>
        </li>
        <li class="md-nav__item"><a href="#id3" class="md-nav__link">æ•°å­—</a>
        </li>
        <li class="md-nav__item"><a href="#id4" class="md-nav__link">å­—ç¬¦ä¸²å­—æ®µ</a>
        </li>
        <li class="md-nav__item"><a href="#long-string" class="md-nav__link">é•¿å­—ç¬¦ä¸² long string</a>
        </li>
        <li class="md-nav__item"><a href="#id5" class="md-nav__link">æ¨¡ç³ŠæŸ¥è¯¢</a>
        </li>
        <li class="md-nav__item"><a href="#id6" class="md-nav__link">å¤åˆæ¡ä»¶çš„æŸ¥è¯¢</a>
        </li>
        <li class="md-nav__item"><a href="#with-group-by" class="md-nav__link">ç»Ÿè®¡- èšåˆå‡½æ•° with  <code class="docutils literal notranslate"><span class="pre">group</span> <span class="pre">by</span></code></a>
        </li>
        <li class="md-nav__item"><a href="#id7" class="md-nav__link">è¿è¡¨æŸ¥è¯¢</a>
        </li>
        <li class="md-nav__item"><a href="#id8" class="md-nav__link">æ‹¼æ¥</a>
        </li></ul>
            </nav>
        </li>
        <li class="md-nav__item"><a href="#id9" class="md-nav__link">åˆ†ç»„</a><nav class="md-nav">
              <ul class="md-nav__list">
        <li class="md-nav__item"><a href="#id10" class="md-nav__link">çª—å£å‡½æ•°</a><nav class="md-nav">
              <ul class="md-nav__list">
        <li class="md-nav__item"><a href="#id11" class="md-nav__link">å¸¸è§ä¸šåŠ¡</a>
        </li></ul>
            </nav>
        </li></ul>
            </nav>
        </li></ul>
            </nav>
        </li>
        <li class="md-nav__item"><a href="#operations" class="md-nav__link">operations</a><nav class="md-nav">
              <ul class="md-nav__list">
        <li class="md-nav__item"><a href="#insert" class="md-nav__link">insert</a>
        </li>
        <li class="md-nav__item"><a href="#alter-update" class="md-nav__link">alter & update</a><nav class="md-nav">
              <ul class="md-nav__list">
        <li class="md-nav__item"><a href="#alter-scheme" class="md-nav__link"><code class="docutils literal notranslate"><span class="pre">alter</span></code>  åŸºäºè¡¨ scheme</a>
        </li>
        <li class="md-nav__item"><a href="#update-records" class="md-nav__link"><code class="docutils literal notranslate"><span class="pre">update</span></code>   åŸºäºè®°å½• records</a>
        </li></ul>
            </nav>
        </li>
        <li class="md-nav__item"><a href="#delete-truncate" class="md-nav__link">delete & truncate</a>
        </li>
        <li class="md-nav__item"><a href="#create" class="md-nav__link">create</a>
        </li>
        <li class="md-nav__item"><a href="#index" class="md-nav__link">index</a><nav class="md-nav">
              <ul class="md-nav__list">
        <li class="md-nav__item"><a href="#create2" class="md-nav__link">create2</a>
        </li>
        <li class="md-nav__item"><a href="#delete" class="md-nav__link">delete</a>
        </li></ul>
            </nav>
        </li></ul>
            </nav>
        </li>
        <li class="md-nav__item"><a href="#id12" class="md-nav__link">ä¸šåŠ¡</a>
        </li></ul>
            </nav>
        </li>
  </ul>
</nav>
              </div>
            </div>
          </div>
        
        <div class="md-content">
          <article class="md-content__inner md-typeset" role="main">
            
  <section id="sql">
<h1 id="sql-main--page-root">SQL<a class="headerlink" href="#sql-main--page-root" title="Link to this heading">Â¶</a></h1>
<p>mysql åº•å±‚çš„ç´¢å¼•æ˜¯B+ tree</p>
<div class="admonition- admonition danger">
<p class="admonition-title">é›†åˆæ“ä½œæé«˜è¿è¡¨æ•ˆç‡</p>
<p>æŸ¥æ‰¾ç”·å¥³é‡åçš„åå­—</p>
<div class="highlight-sql notranslate"><div class="highlight"><pre><span></span><span class="k">select</span><span class="w"> </span><span class="n">name</span><span class="p">,</span><span class="w"> </span><span class="k">count</span><span class="p">(</span><span class="n">name</span><span class="p">)</span>
<span class="k">from</span><span class="p">(</span>
<span class="w">    </span><span class="k">select</span><span class="w"> </span><span class="k">distinct</span><span class="w"> </span><span class="n">name</span>
<span class="w">    </span><span class="k">from</span><span class="w"> </span><span class="n">student</span>
<span class="w">    </span><span class="k">where</span><span class="w"> </span><span class="n">sex</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s1">'male'</span>
<span class="w">    </span><span class="k">union</span><span class="w"> </span><span class="k">all</span>
<span class="w">    </span><span class="k">select</span><span class="w"> </span><span class="n">distince</span><span class="w"> </span><span class="n">name</span>
<span class="w">    </span><span class="k">from</span><span class="w"> </span><span class="n">student</span>
<span class="w">    </span><span class="k">where</span><span class="w"> </span><span class="n">sex</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s1">'female'</span>
<span class="w">    </span><span class="p">)</span><span class="w"> </span><span class="k">as</span><span class="w"> </span><span class="n">s1</span>
<span class="k">group</span><span class="w"> </span><span class="k">by</span><span class="w"> </span><span class="n">name</span>
<span class="k">having</span><span class="w"> </span><span class="k">count</span><span class="p">(</span><span class="n">name</span><span class="p">)</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">2</span>
</pre></div>
</div>
</div>
<section id="datatype">
<h2 id="datatype">datatype<a class="headerlink" href="#datatype" title="Link to this heading">Â¶</a></h2>
<section id="div-id-unicode-div">
<h3 id="div-id-unicode-div">&lt;div id =â€™unicodeâ€™ &gt; ç¼–ç &lt;/div&gt;<a class="headerlink" href="#div-id-unicode-div" title="Link to this heading">Â¶</a></h3>
<section id="charset">
<h4 id="charset">charset<a class="headerlink" href="#charset" title="Link to this heading">Â¶</a></h4>
<table>
<thead>
<tr class="row-odd"><th class="head"><p>charset</p></th>
<th class="head"></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">utf8</span></code></p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">utf8_general_ci</span></code></p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">utf8mb4</span></code></p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">utf8mb4_unicode_ci</span></code></p></td>
</tr>
</tbody>
</table>
</section>
<section id="collate">
<h4 id="collate">collate<a class="headerlink" href="#collate" title="Link to this heading">Â¶</a></h4>
<p>å®é™…ä¸Šç¬¦å·éƒ½æ˜¯ç¼–ç å‚¨å­˜çš„ï¼Œç¼–ç ä¼šå½±å“è¯»å–çš„é€Ÿåº¦ã€æ’åºçš„ä½ç½®ã€æ˜¯å¦åŒºåˆ†å¤§å°å†™ã€æ”¯æŒçš„ç¬¦å·ç­‰ç­‰é—®é¢˜ã€‚</p>
<table>
<thead>
<tr class="row-odd"><th class="head"></th>
<th class="head"><p>example</p></th>
<th class="head"></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p><cite>general</cite></p></td>
<td><p><cite>utf8mb4_general_ci</cite></p></td>
<td><p>åœ¨æ’åºæ™‚æ¯”è¼ƒå¿«ï¼Œä½†åœ¨æŸäº›ç‰¹æ®Šæƒ…æ³æœƒæ’éŒ¯</p></td>
</tr>
<tr class="row-odd"><td><p><cite>unicode</cite> ğŸ‘</p></td>
<td><p><cite>utf8mb4_unicode_ci</cite></p></td>
<td><p>å®Œæ•´çš„ Unicode æ¨™æº–ï¼Œæœƒå­˜ä¸­æ–‡ã€å¾·æ–‡ã€Emoji</p></td>
</tr>
</tbody>
</table>
<table>
<thead>
<tr class="row-odd"><th class="head"><p>å¤§å°å†™åŒºåˆ†</p></th>
<th class="head"></th>
<th class="head"><p>å¤§å°å¯«</p></th>
<th class="head"><p>ç‰¹æ®Šç¬¦å·</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p><cite>ci</cite> <strong>default</strong></p></td>
<td><p>case-insensitive</p></td>
<td><p>âŒ</p></td>
<td><p>âŒ</p></td>
</tr>
<tr class="row-odd"><td><p><cite>bin</cite></p></td>
<td><p>binary value</p></td>
<td><p>âœ…</p></td>
<td><p>âŒ</p></td>
</tr>
<tr class="row-even"><td><p><cite>cs</cite></p></td>
<td><p>case-sensitive</p></td>
<td><p>âœ…</p></td>
<td><p>âœ…</p></td>
</tr>
</tbody>
</table>
<ul class="simple">
<li><p>[MySQL ç·¨ç¢¼æŒ‘é¸èˆ‡å·®ç•°æ¯”è¼ƒ]</p></li>
</ul>
</section>
</section>
<section id="int">
<h3 id="int">int<a class="headerlink" href="#int" title="Link to this heading">Â¶</a></h3>
<div class="admonition-int-m admonition note">
<p class="admonition-title">int(M)</p>
<p><code class="docutils literal notranslate"><span class="pre">int(M:max_display_width)</span></code>  ,æ— è®º M æ˜¯å¤šå°‘ï¼Œéƒ½æ˜¯ int ç±»å‹ï¼Œä¹Ÿå°±æ˜¯å­˜å‚¨  <code class="docutils literal notranslate"><span class="pre">bytes</span> <span class="pre">=</span> <span class="pre">4</span></code></p>
<ul class="simple">
<li><p>[int(1)å’Œint(11)çš„åŒºåˆ«]</p></li>
</ul>
</div>
<table>
<thead>
<tr class="row-odd"><th class="head"><p>datatype</p></th>
<th class="head"><p>bytes</p></th>
<th class="head"><p>default_M</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>tinyint</p></td>
<td><p>1</p></td>
<td></td>
</tr>
<tr class="row-odd"><td><p>smallint</p></td>
<td><p>2</p></td>
<td></td>
</tr>
<tr class="row-even"><td><p>mediumint</p></td>
<td><p>3</p></td>
<td></td>
</tr>
<tr class="row-odd"><td><p><strong>int</strong></p></td>
<td><p>4</p></td>
<td></td>
</tr>
<tr class="row-even"><td><p>bigint</p></td>
<td><p>8</p></td>
<td></td>
</tr>
</tbody>
</table>
</section>
<section id="char">
<h3 id="char">char<a class="headerlink" href="#char" title="Link to this heading">Â¶</a></h3>
<div class="admonition-mysql-varchar-char admonition note">
<p class="admonition-title">â€œæ ¹æ® Mysql å®˜æ–¹å»ºè®®ï¼Œä½¿ç”¨ VARCHAR æ›¿ä»£ CHARâ€</p>
</div>
</section>
<section id="format">
<h3 id="format">format<a class="headerlink" href="#format" title="Link to this heading">Â¶</a></h3>
<ul class="simple">
<li><p>å››èˆäº”å…¥ï¼Œä¿ç•™nä½å°æ•°  <code class="docutils literal notranslate"><span class="pre">round(col,</span> <span class="pre">n)</span></code></p></li>
<li><p>å¤§å°å†™  <code class="docutils literal notranslate"><span class="pre">lower(col)</span></code> ,  <code class="docutils literal notranslate"><span class="pre">upper(col)</span></code></p></li>
</ul>
</section>
</section>
<section id="query">
<h2 id="query">query<a class="headerlink" href="#query" title="Link to this heading">Â¶</a></h2>
<div class="line-block">
<div class="line"><code class="docutils literal notranslate"><span class="pre">select</span> <span class="pre">*</span> <span class="pre">from</span> <span class="pre">users;</span></code></div>
<div class="line"><code class="docutils literal notranslate"><span class="pre">select</span> <span class="pre">&lt;old_col_name&gt;</span> <span class="pre">as</span> <span class="pre">&lt;new_col_name&gt;</span> <span class="pre">from</span> <span class="pre">users;</span></code></div>
</div>
<div class="admonition-select-select-col1-col2 admonition note">
<p class="admonition-title">å°½é‡ä¸è¦ä½¿ç”¨  <code class="docutils literal notranslate"><span class="pre">select</span> <span class="pre">*</span></code> , è€Œæ˜¯æ˜¾å¼åˆ—åˆ—è¡¨  <code class="docutils literal notranslate"><span class="pre">select</span> <span class="pre">col1,</span> <span class="pre">col2,...</span></code></p>
<p>åœ¨é¡¹ç›®ä¸­  <code class="docutils literal notranslate"><span class="pre">select</span> <span class="pre">*</span></code>  ä¼šå½±å“åˆ°æ•´ä¸ªé¡¹ç›®çš„æ€§èƒ½ï¼Œä¼šç»™æœåŠ¡å™¨é€ æˆä¸€å®šçš„å‹åŠ›ã€‚</p>
</div>
<div class="admonition-select-1-from-table admonition note">
<p class="admonition-title"><code class="docutils literal notranslate"><span class="pre">select</span> <span class="pre">1</span> <span class="pre">from</span> <span class="pre">table;</span></code>  çš„ç”¨æ³•</p>
<div class="line-block">
<div class="line">å½“æˆ‘ä»¬åªå…³å¿ƒæ•°æ®è¡¨æœ‰å¤šå°‘è®°å½•è¡Œè€Œä¸éœ€è¦çŸ¥é“å…·ä½“çš„å­—æ®µå€¼ã€‚</div>
<div class="line">é€šå¸¸ç”¨äºå­æŸ¥è¯¢ã€‚</div>
</div>
<ul>
<li><dl class="simple">
<dt>ç»“æœ</dt><dd><p>å¯¹ç¬¦åˆæ¡ä»¶çš„è®°å½•è¿”å›çš„æ°¸è¿œåªæœ‰ä¸€ä¸ªå€¼  <code class="docutils literal notranslate"><span class="pre">1</span></code> ï¼Œå½“ç„¶ï¼Œå¦‚æœæœ‰è¿”å›å€¼çš„è¯ã€‚ æŸ¥è¯¢åˆ°æœ‰å¤šå°‘è®°å½•è¡Œå­˜åœ¨å°±è¾“å‡ºå¤šå°‘ä¸ªâ€œ1â€ï¼Œæ¯ä¸ªâ€œ1â€ä»£è¡¨æœ‰1è¡Œè®°å½•</p>
</dd>
</dl>
</li>
<li><p>ä¼˜ç‚¹</p>
<blockquote>
<div><ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">select</span> <span class="pre">1</span> <span class="pre">...</span></code>  &gt;  <code class="docutils literal notranslate"><span class="pre">select</span> <span class="pre">constant</span>Â  <span class="pre">...</span></code>  &gt;  <code class="docutils literal notranslate"><span class="pre">select</span> <span class="pre">col</span> <span class="pre">...</span></code>  &gt;   <code class="docutils literal notranslate"><span class="pre">select</span> <span class="pre">*</span> <span class="pre">...</span></code></p></li>
<li><p>æ­¤æ—¶æ•°æ®åº“å°±ä¸ä¼šå»æ£€ç´¢æ•°æ®è¡¨é‡Œæ¯æ¡å…·ä½“çš„è®°å½•å’Œæ¯æ¡è®°å½•é‡Œæ¯ä¸ªå…·ä½“çš„å­—æ®µå€¼å¹¶å°†å®ƒä»¬æ”¾åˆ°å†…å­˜é‡Œï¼Œå¯ä»¥ <strong>å‡å°‘ç³»ç»Ÿå¼€é”€ï¼Œæé«˜è¿è¡Œæ•ˆç‡</strong></p></li>
<li><p>é€‰ç”¨æ•°å­— <code class="docutils literal notranslate"><span class="pre">1</span></code> æ˜¯å› ä¸ºå®ƒæ‰€å ç”¨çš„å†…å­˜ç©ºé—´æœ€å°ï¼Œè€Œä¸”å…·æœ‰ç»Ÿè®¡ç”¨é€”</p></li>
</ul>
</div></blockquote>
</li>
</ul>
<div class="highlight-sql notranslate"><div class="highlight"><pre><span></span><span class="o">#</span><span class="w"> </span><span class="mi">1</span><span class="p">.</span><span class="w"> </span><span class="err">æŸ¥çœ‹å­˜ä¸å­˜åœ¨</span>
<span class="err">$</span><span class="w"> </span><span class="k">select</span><span class="w"> </span><span class="mi">1</span><span class="w"> </span><span class="k">from</span><span class="w"> </span><span class="n">usrs</span><span class="w"> </span><span class="k">where</span><span class="w"> </span><span class="p">[</span><span class="n">conditions</span><span class="p">]</span><span class="w"> </span><span class="k">limit</span><span class="w"> </span><span class="mi">1</span>

<span class="o">#</span><span class="w"> </span><span class="mi">2</span><span class="p">.</span><span class="w"> </span><span class="err">å¿«é€Ÿç»Ÿè®¡æœ‰å¤šå°‘æ¡</span>
<span class="err">$</span><span class="w"> </span><span class="k">select</span><span class="w"> </span><span class="k">count</span><span class="p">(</span><span class="mi">1</span><span class="p">)</span><span class="w"> </span><span class="k">from</span><span class="w"> </span><span class="n">users</span><span class="w"> </span><span class="k">where</span><span class="w"> </span><span class="p">[</span><span class="n">conditions</span><span class="p">]</span>

<span class="o">#</span><span class="w"> </span><span class="mi">3</span><span class="p">.</span><span class="w"> </span><span class="err">å­æŸ¥è¯¢</span>
<span class="k">select</span><span class="w"> </span><span class="o">*</span><span class="w"> </span><span class="k">from</span><span class="w"> </span><span class="n">t1</span><span class="w"> </span><span class="k">where</span><span class="w"> </span><span class="k">exists</span><span class="w"> </span><span class="p">(</span><span class="k">select</span><span class="w"> </span><span class="mi">1</span><span class="w"> </span><span class="k">from</span><span class="w"> </span><span class="n">t2</span><span class="w"> </span><span class="k">where</span><span class="w"> </span><span class="n">t1</span><span class="p">.</span><span class="n">id</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">t2</span><span class="p">.</span><span class="n">id</span><span class="p">)</span>
</pre></div>
</div>
</div>
<img alt="../_images/select_1.PNG" src="../_images/select_1.PNG"/>
<ul class="simple">
<li><p>[SELECT 1 FROM TABLEçš„ä½œç”¨]</p></li>
<li><p>[select 1 in SQL]</p></li>
</ul>
<section id="id1">
<h3 id="id1">ä¸€äº›ç‰¹åˆ«çš„é€‰å–<a class="headerlink" href="#id1" title="Link to this heading">Â¶</a></h3>
<ul>
<li><dl>
<dt>æ¡ä»¶</dt><dd><ul class="simple">
<li><p>ä¸ºç©º  <code class="docutils literal notranslate"><span class="pre">null</span></code></p></li>
</ul>
<div class="highlight-sql notranslate"><div class="highlight"><pre><span></span><span class="k">select</span><span class="w"> </span><span class="n">cols</span>
<span class="k">from</span><span class="w"> </span><span class="n">users</span>
<span class="k">where</span><span class="w"> </span><span class="n">col</span><span class="w"> </span><span class="k">is</span><span class="w"> </span><span class="k">not</span><span class="w"> </span><span class="k">null</span>
</pre></div>
</div>
</dd>
</dl>
</li>
</ul>
<section id="id2">
<h4 id="id2">æ—¥æœŸ<a class="headerlink" href="#id2" title="Link to this heading">Â¶</a></h4>
<ul>
<li><dl>
<dt>æ ¼å¼</dt><dd><ul>
<li><dl>
<dt>å¸¸è§çš„æ—¥æœŸæ•°æ®æ ¼å¼ <code class="docutils literal notranslate"><span class="pre">'yyyy-mm-dd</span> <span class="pre">h:m:s'</span></code>  å’Œ  <code class="docutils literal notranslate"><span class="pre">'yyyymmdd'</span></code></dt><dd><div class="admonition- admonition danger">
<p class="admonition-title">è¦åŠ å¼•å·</p>
</div>
</dd>
</dl>
</li>
<li><p>è½¬æ¢</p></li>
<li><p>è½‰æ›æ ¼å¼  <code class="docutils literal notranslate"><span class="pre">date_format(date,</span> <span class="pre">format)</span></code></p>
<blockquote>
<div><table>
<thead>
<tr class="row-odd"><th class="head"><p>format</p></th>
<th class="head"><p>description</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">%Y</span></code></p></td>
<td><p>4ä½ï¼Œ2022</p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">%y</span></code></p></td>
<td><p>2ä½ï¼Œ22</p></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">%M</span></code></p></td>
<td><p>æœˆåï¼ŒJune</p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">%m</span></code></p></td>
<td><p>æœˆï¼ˆ00-12ï¼‰ï¼Œ06</p></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">%d</span></code></p></td>
<td><p>å¤©ï¼ˆ00-31ï¼‰ï¼Œ06</p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">%e</span></code></p></td>
<td><p>å¤©ï¼ˆ0-31ï¼‰ï¼Œ6</p></td>
</tr>
</tbody>
</table>
</div></blockquote>
</li>
<li><p>æ—¶é—´æˆ³</p>
<blockquote>
<div><div class="admonition- admonition note">
<p class="admonition-title">â€œæ—¶é—´æˆ³å’Œæ—¥æœŸæ ¼å¼ä¹‹é—´â€</p>
<p>åœ¨å®é™…å·¥ä½œç¯å¢ƒä¸­ï¼Œå¯¹äºç”¨æˆ·è¡Œä¸ºå‘ç”Ÿçš„æ—¶é—´é€šå¸¸éƒ½æ˜¯ç”¨**æ—¶é—´æˆ³**è¿›è¡Œè®°å½•ï¼Œæ—¶é—´æˆ³å’Œæ—¥æœŸæ ¼å¼ä¹‹é—´å¯ä»¥åˆ©ç”¨ <code class="docutils literal notranslate"><span class="pre">from_unixtime</span></code>  å’Œ  <code class="docutils literal notranslate"><span class="pre">unix_timestamp</span></code>  è¿›è¡Œè½¬æ¢ã€‚</p>
<div class="highlight-sql notranslate"><div class="highlight"><pre><span></span><span class="o">#</span><span class="w"> </span><span class="mi">1</span><span class="p">.</span><span class="w"> </span><span class="err">æ—¶é—´æˆ³</span><span class="w"> </span><span class="o">-&gt;</span><span class="w"> </span><span class="err">æ—¥æœŸ</span>
<span class="k">select</span><span class="w"> </span><span class="n">from_unixtime</span><span class="p">(</span><span class="k">timestamp</span><span class="p">,</span><span class="s1">'yyyy-MM-dd'</span><span class="p">)</span><span class="w"> </span><span class="k">as</span><span class="w"> </span><span class="nb">date</span>
<span class="k">From</span><span class="w"> </span><span class="n">question_practice_detail</span><span class="p">;</span>

<span class="o">#</span><span class="w"> </span><span class="mi">2</span><span class="p">.</span><span class="w"> </span><span class="err">æ—¥æœŸ</span><span class="w"> </span><span class="o">-&gt;</span><span class="w"> </span><span class="err">æ—¶é—´æˆ³</span>
<span class="k">select</span><span class="w"> </span><span class="n">unix_timestamp</span><span class="p">(</span><span class="nb">date</span><span class="p">,</span><span class="s1">'yyyy-MM-dd'</span><span class="p">)</span><span class="w"> </span><span class="k">as</span><span class="w"> </span><span class="k">timestamp</span>
<span class="k">From</span><span class="w"> </span><span class="n">question_practice_detail</span><span class="p">;</span>
</pre></div>
</div>
</div>
</div></blockquote>
</li>
</ul>
</dd>
</dl>
</li>
<li><p>æ‹¿åˆ°ä¿¡æ¯ï¼Œbased on å¸¸è§æ—¶é—´æ ¼å¼</p>
<blockquote>
<div><table>
<thead>
<tr class="row-odd"><th class="head"></th>
<th class="head"></th>
<th class="head"><p>examples</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">year(date),</span> <span class="pre">month(date),</span> <span class="pre">day(date)</span></code></p></td>
<td><p>æå–å¹´æœˆæ—¥</p></td>
<td><p>return int</p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">last_day(date)</span></code></p></td>
<td><p>é€™å¹´é€™æœˆçš„æœ€å¾Œä¸€å¤©çš„date</p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">last_day('20170221')</span></code> -&gt; 2017-02-28</p></td>
</tr>
</tbody>
</table>
</div></blockquote>
</li>
<li><p>æ—¥æœŸå·®è¨ˆç®—</p>
<blockquote>
<div><table>
<thead>
<tr class="row-odd"><th class="head"><p>case</p></th>
<th class="head"><p>è®¡ç®—æ—¶é—´é—´éš”ï¼š <strong>åœ¨è¿™ä¹‹å‰ï¼Œåœ¨è¿™ä¹‹å</strong></p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>å¤©æ•°</p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">datediff(date_1,</span> <span class="pre">date_2)</span></code></p></td>
</tr>
<tr class="row-odd"><td><p>è‡ªå®šä¹‰</p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">timestampdiff(unit,date_1,date_2)</span></code> , unit: <code class="docutils literal notranslate"><span class="pre">day,month,miniute</span></code></p></td>
</tr>
</tbody>
</table>
<ul class="simple">
<li><p>å¦‚æœ date_1 or date_2 is null , return null</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">date_sub(start_date,</span> <span class="pre">interval</span> <span class="pre">n</span> <span class="pre">day)</span></code>  è¿”å›start_date <strong>å‡å°‘</strong> n å¤©åçš„æ—¥æœŸã€‚</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">date_add(start_date,</span> <span class="pre">interval</span> <span class="pre">n</span> <span class="pre">day)</span></code>  è¿”å› start_date <strong>å¢åŠ </strong> n å¤©åçš„æ—¥æœŸ</p></li>
</ul>
</div></blockquote>
</li>
</ul>
<div class="highlight-sql notranslate"><div class="highlight"><pre><span></span><span class="o">#</span><span class="w"> </span><span class="mi">1</span><span class="p">.</span><span class="w"> </span><span class="err">è¿”å›æ¥çš„å•ä½æ˜¯å¤©æ•°</span>
<span class="k">select</span><span class="w"> </span><span class="n">datediff</span><span class="p">(</span><span class="s1">'2021-08â€“01'</span><span class="p">,</span><span class="w"> </span><span class="s1">'2021-08â€“05'</span><span class="p">)</span><span class="w"> </span><span class="p">...</span><span class="w"> </span><span class="p">;</span>
<span class="k">select</span><span class="w"> </span><span class="n">timestampdiff</span><span class="p">(</span><span class="k">minute</span><span class="p">,</span><span class="s1">'2021-08â€“01'</span><span class="p">,</span><span class="w"> </span><span class="s1">'2021-08â€“05'</span><span class="p">)</span><span class="w"> </span><span class="p">...;</span>

<span class="o">#</span><span class="w"> </span><span class="mi">2</span><span class="p">.</span>
<span class="k">select</span><span class="w"> </span><span class="n">date_sub</span><span class="p">(</span><span class="s1">'2021-08â€“01'</span><span class="p">,</span><span class="nb">interval</span><span class="w"> </span><span class="mi">8</span><span class="w"> </span><span class="k">day</span><span class="p">)</span><span class="w"> </span><span class="p">...;</span>

<span class="o">#</span><span class="w"> </span><span class="mi">3</span><span class="p">.</span>
<span class="k">select</span><span class="w"> </span><span class="n">date_add</span><span class="p">(</span><span class="s1">'2021-08â€“01'</span><span class="p">,</span><span class="nb">interval</span><span class="w"> </span><span class="mi">8</span><span class="w"> </span><span class="k">day</span><span class="p">)</span><span class="w"> </span><span class="p">...;</span>
</pre></div>
</div>
<div class="admonition-exam-record202191-2099-01-01-00-00-00-0 admonition hint">
<p class="admonition-title">è¯·æŠŠexam_recordè¡¨ä¸­2021å¹´9æœˆ1æ—¥ä¹‹å‰å¼€å§‹ä½œç­”çš„æœªå®Œæˆè®°å½•å…¨éƒ¨æ”¹ä¸ºè¢«åŠ¨å®Œæˆï¼Œå³ï¼šå°†å®Œæˆæ—¶é—´æ”¹ä¸ºâ€™2099-01-01 00:00:00â€™ï¼Œåˆ†æ•°æ”¹ä¸º0</p>
<div class="highlight-sql notranslate"><div class="highlight"><pre><span></span><span class="k">update</span><span class="w"> </span><span class="n">exam_record</span>
<span class="k">set</span><span class="w"> </span><span class="n">submit_time</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s1">'2099-01-01 00:00:00'</span><span class="p">,</span><span class="w"> </span><span class="n">score</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">0</span>
<span class="k">where</span><span class="w"> </span><span class="n">datediff</span><span class="p">(</span><span class="n">start_time</span><span class="p">,</span><span class="w"> </span><span class="s1">'2021-09-01'</span><span class="p">)</span><span class="w"> </span><span class="o">&lt;</span><span class="w"> </span><span class="mi">0</span><span class="w"> </span><span class="k">and</span>
<span class="n">submit_time</span><span class="w"> </span><span class="k">is</span><span class="w"> </span><span class="k">null</span><span class="p">;</span>
</pre></div>
</div>
</div>
<div class="admonition-exam-record5-60 admonition hint">
<p class="admonition-title">è¯·åˆ é™¤exam_recordè¡¨ä¸­ä½œç­”æ—¶é—´å°äº5åˆ†é’Ÿæ•´ä¸”åˆ†æ•°ä¸åŠæ ¼ï¼ˆåŠæ ¼çº¿ä¸º60åˆ†ï¼‰çš„è®°å½•ï¼›</p>
<div class="highlight-sql notranslate"><div class="highlight"><pre><span></span><span class="k">delete</span><span class="w"> </span><span class="k">from</span><span class="w"> </span><span class="n">exam_record</span>
<span class="k">where</span><span class="w"> </span><span class="n">timestampdiff</span><span class="p">(</span><span class="k">minute</span><span class="p">,</span><span class="w"> </span><span class="n">start_time</span><span class="p">,</span><span class="w"> </span><span class="n">submit_time</span><span class="p">)</span><span class="w"> </span><span class="o">&lt;</span><span class="w"> </span><span class="mi">5</span><span class="w"> </span><span class="k">and</span><span class="w"> </span><span class="n">score</span><span class="w"> </span><span class="o">&lt;</span><span class="w"> </span><span class="mi">60</span><span class="p">;</span>
</pre></div>
</div>
</div>
<ul>
<li><p>[æ—¥æœŸå‡½æ•°]</p>
<blockquote>
<div><div class="admonition- admonition hint">
<p class="admonition-title">ç°åœ¨è¿è¥æƒ³è¦è®¡ç®—å‡º2021å¹´8æœˆæ¯å¤©ç”¨æˆ·ç»ƒä¹ é¢˜ç›®çš„æ•°é‡</p>
<div class="highlight-sql notranslate"><div class="highlight"><pre><span></span><span class="k">select</span><span class="w"> </span><span class="k">day</span><span class="p">(</span><span class="nb">date</span><span class="p">)</span><span class="w"> </span><span class="k">as</span><span class="w"> </span><span class="k">day</span><span class="p">,</span><span class="w"> </span><span class="k">count</span><span class="p">(</span><span class="mi">1</span><span class="p">)</span><span class="w"> </span><span class="k">as</span><span class="w"> </span><span class="n">question_cnt</span>
<span class="k">from</span><span class="p">(</span>
<span class="w">    </span><span class="k">select</span><span class="w"> </span><span class="nb">date</span>
<span class="w">    </span><span class="k">from</span><span class="w"> </span><span class="n">question_practice_detail</span>
<span class="w">    </span><span class="k">where</span><span class="w"> </span><span class="k">year</span><span class="p">(</span><span class="nb">date</span><span class="p">)</span><span class="o">=</span><span class="mi">2021</span><span class="w"> </span><span class="k">and</span><span class="w"> </span><span class="k">month</span><span class="p">(</span><span class="nb">date</span><span class="p">)</span><span class="o">=</span><span class="mi">8</span>
<span class="w">    </span><span class="p">)</span><span class="w"> </span><span class="k">as</span><span class="w"> </span><span class="k">new</span>
<span class="k">group</span><span class="w"> </span><span class="k">by</span><span class="w"> </span><span class="k">day</span><span class="p">;</span>
</pre></div>
</div>
</div>
</div></blockquote>
</li>
</ul>
</section>
<section id="id3">
<h4 id="id3">æ•°å­—<a class="headerlink" href="#id3" title="Link to this heading">Â¶</a></h4>
<div class="highlight-sql notranslate"><div class="highlight"><pre><span></span><span class="o">#</span><span class="w"> </span><span class="mi">1</span><span class="p">.</span><span class="w"> </span><span class="err">åŒºé—´å†…</span><span class="w"> </span><span class="p">[</span><span class="n">m</span><span class="w"> </span><span class="p">,</span><span class="w"> </span><span class="n">n</span><span class="p">]</span>
<span class="k">select</span><span class="w"> </span><span class="n">cols</span>
<span class="k">from</span><span class="w"> </span><span class="n">users</span>
<span class="k">where</span><span class="w"> </span><span class="n">col</span><span class="w"> </span><span class="o">&gt;=</span><span class="w"> </span><span class="n">m</span><span class="w"> </span><span class="k">and</span><span class="w"> </span><span class="n">col</span><span class="w"> </span><span class="o">&lt;=</span><span class="w"> </span><span class="n">n</span>

<span class="o">#</span><span class="w"> </span><span class="err">åœ¨ç”¨</span><span class="w"> </span><span class="k">between</span><span class="w"> </span><span class="k">and</span><span class="w"> </span><span class="err">çš„æ—¶å€™è¦å…ˆå»çœ‹çœ‹æ•°æ®åº“çš„è¿™ä¸ªè¯­æ³•çš„è§„å®š</span>
<span class="o">#</span><span class="w"> </span><span class="err">åœ¨</span><span class="w"> </span><span class="n">mysql</span><span class="w"> </span><span class="err">é‡Œæ˜¯</span><span class="n">__åŒé—­åŒºé—´__</span>
<span class="k">select</span><span class="w"> </span><span class="n">cols</span>
<span class="k">from</span><span class="w"> </span><span class="n">users</span>
<span class="k">where</span><span class="w"> </span><span class="n">col</span><span class="w"> </span><span class="k">between</span><span class="w"> </span><span class="n">m</span><span class="w"> </span><span class="k">and</span><span class="w"> </span><span class="n">n</span><span class="p">;</span>
</pre></div>
</div>
</section>
<section id="id4">
<h4 id="id4">å­—ç¬¦ä¸²å­—æ®µ<a class="headerlink" href="#id4" title="Link to this heading">Â¶</a></h4>
<div class="highlight-sql notranslate"><div class="highlight"><pre><span></span><span class="o">#</span><span class="w"> </span><span class="mi">1</span><span class="p">.</span><span class="w"> </span><span class="err">ç­‰äº</span>
<span class="k">select</span><span class="w"> </span><span class="n">cols</span>
<span class="k">from</span><span class="w"> </span><span class="n">users</span>
<span class="k">where</span><span class="w"> </span><span class="n">col</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s1">''</span><span class="p">;</span>

<span class="k">select</span><span class="w"> </span><span class="n">cols</span>
<span class="k">from</span><span class="w"> </span><span class="n">users</span>
<span class="k">where</span><span class="w"> </span><span class="n">col</span><span class="w"> </span><span class="o">!=</span><span class="w"> </span><span class="s1">''</span><span class="p">;</span>

<span class="o">#</span><span class="w"> </span><span class="mi">2</span><span class="p">.</span><span class="w"> </span><span class="err">åŒºé—´</span>
<span class="k">select</span><span class="w"> </span><span class="n">cols</span>
<span class="k">from</span><span class="w"> </span><span class="n">users</span>
<span class="k">where</span><span class="w"> </span><span class="n">col</span><span class="w"> </span><span class="k">in</span><span class="w"> </span><span class="p">(</span><span class="s1">'val1'</span><span class="p">,</span><span class="w"> </span><span class="s1">'val2'</span><span class="p">,</span><span class="w"> </span><span class="p">...);</span>
</pre></div>
</div>
</section>
<section id="long-string">
<h4 id="long-string">é•¿å­—ç¬¦ä¸² long string<a class="headerlink" href="#long-string" title="Link to this heading">Â¶</a></h4>
<p>éœ€è¦è¿›è¡Œå†ä¸€æ­¥æå–å¤„ç†</p>
<ul>
<li><p>æ‰¾ä½ç½®ï¼Œ return ä½ç½®ç´¢å¼•</p>
<blockquote>
<div><p>è¿”å›å­ä¸²  <code class="docutils literal notranslate"><span class="pre">substr</span></code>  åœ¨å­—ç¬¦ä¸²  <code class="docutils literal notranslate"><span class="pre">str</span></code>  ä¸­ç¬¬ä¸€æ¬¡å‡ºç°çš„ä½ç½®ï¼Œif not exist: 0ï¼›</p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">locate(substr,</span> <span class="pre">str)</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">find_in_set(substr,str)</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">str</span></code> <strong>å¿…é¡»ä»¥â€,â€åˆ†å‰²å¼€</strong></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">instr(str,</span> <span class="pre">substr)</span></code></p></li>
</ul>
<div class="admonition- admonition danger">
<p class="admonition-title">å‚æ•°ä½ç½®</p>
<div class="line-block">
<div class="line">locateã€position å’Œ instr çš„å·®åˆ¥åªæ˜¯å‚æ•°çš„ä½ç½®ä¸åŒï¼Œ</div>
<div class="line">åŒæ—¶locate å¤šä¸€ä¸ªè¯·å§‹ä½ç½®çš„å‚æ•°å¤–,å¯ä»¥è‡ªå®šä¹‰é€‰æ‹©çš„èµ·å§‹ä½ç½®</div>
</div>
</div>
</div></blockquote>
</li>
<li><p>æ›¿ä»£ like</p>
<blockquote>
<div><div class="highlight-sql notranslate"><div class="highlight"><pre><span></span><span class="o">#</span><span class="w"> </span><span class="mi">1</span><span class="p">.</span><span class="w"> </span><span class="err">æ›¿ä»£</span><span class="w"> </span><span class="k">like</span>
<span class="k">select</span><span class="w"> </span><span class="n">cols</span><span class="w"> </span><span class="k">from</span><span class="w"> </span><span class="n">users</span>
<span class="k">where</span><span class="w"> </span><span class="n">locate</span><span class="p">(</span><span class="n">substr</span><span class="p">,</span><span class="w"> </span><span class="n">str</span><span class="p">)</span><span class="w"> </span><span class="o">&gt;</span><span class="w"> </span><span class="mi">0</span><span class="p">;</span>
<span class="c1">----------------------------</span>
<span class="k">select</span><span class="w"> </span><span class="n">cols</span><span class="w"> </span><span class="k">from</span><span class="w"> </span><span class="n">users</span>
<span class="k">where</span><span class="w"> </span><span class="k">position</span><span class="p">(</span><span class="n">substr</span><span class="w"> </span><span class="k">in</span><span class="w"> </span><span class="n">str</span><span class="p">);</span>
<span class="c1">------------------------------</span>
<span class="k">select</span><span class="w"> </span><span class="n">cols</span><span class="w"> </span><span class="k">from</span><span class="w"> </span><span class="n">users</span>
<span class="k">where</span><span class="w"> </span><span class="n">instr</span><span class="p">(</span><span class="n">str</span><span class="p">,</span><span class="w"> </span><span class="n">substr</span><span class="p">)</span><span class="w"> </span><span class="o">&gt;</span><span class="w"> </span><span class="mi">0</span><span class="p">,</span>
<span class="c1">-------------------------------</span>
<span class="k">select</span><span class="w"> </span><span class="n">cols</span><span class="w"> </span><span class="k">from</span><span class="w"> </span><span class="n">users</span>
<span class="k">where</span><span class="w"> </span><span class="n">find_in_set</span><span class="p">(</span><span class="n">substr</span><span class="p">,</span><span class="n">str</span><span class="p">);</span>
</pre></div>
</div>
<div class="admonition-locate-position-instr-like admonition note">
<p class="admonition-title"><code class="docutils literal notranslate"><span class="pre">locate,</span> <span class="pre">position,</span> <span class="pre">instr,</span> <span class="pre">like</span></code></p>
<p>é€Ÿåº¦ä¸Šè¿™ä¸‰ä¸ªæ¯”ç”¨ like ç¨å¿«äº†ä¸€é»ã€‚</p>
</div>
</div></blockquote>
</li>
<li><dl>
<dt>æˆªå–</dt><dd><ul>
<li><dl class="simple">
<dt>å•çº¯æ ¹æ® ä½ç½®ç´¢å¼•</dt><dd><ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">left(str,</span> <span class="pre">n)</span></code> ,  <code class="docutils literal notranslate"><span class="pre">right(str,</span> <span class="pre">n)</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">substring(str,</span> <span class="pre">n,</span> <span class="pre">m)</span></code> ï¼šstr[n:n+m] ç¬¬ n ä¸ªå¼€å§‹ï¼Œm ä¸ª</p></li>
</ul>
</dd>
</dl>
</li>
<li><dl>
<dt>æ ¹æ®  <code class="docutils literal notranslate"><span class="pre">substr</span></code></dt><dd><ul>
<li><dl>
<dt><code class="docutils literal notranslate"><span class="pre">substring_index(str,</span> <span class="pre">substr,</span> <span class="pre">n)</span></code> ï¼š   <code class="docutils literal notranslate"><span class="pre">substr</span></code>  åœ¨  <code class="docutils literal notranslate"><span class="pre">str</span></code>  ä¸­**ç¬¬ n æ¬¡å‡ºç°ä¹‹å‰çš„å­—ç¬¦ä¸²**;</dt><dd><div class="math">
<span class="katex-display"><span class="katex"><span class="katex-mathml"><math display="block" xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mstyle mathsize="0.9em"><mrow><mi>n</mi><mrow><mo fence="true">{</mo><mtable columnalign="left left" columnspacing="1em" rowspacing="0.36em"><mtr><mtd><mstyle displaystyle="false" scriptlevel="0"><mrow><mo>&gt;</mo><mn>0</mn></mrow></mstyle></mtd><mtd><mstyle displaystyle="false" scriptlevel="0"><mtext>ä»å·¦å¾€å³æ•°ï¼Œç¬¬nä¸ªçš„å·¦è¾¹çš„æ‰€æœ‰å†…å®¹</mtext></mstyle></mtd></mtr><mtr><mtd><mstyle displaystyle="false" scriptlevel="0"><mrow><mo>&lt;</mo><mn>0</mn></mrow></mstyle></mtd><mtd><mstyle displaystyle="false" scriptlevel="0"><mtext>ä»å³å¾€å·¦æ•°ï¼Œç¬¬nä¸ªçš„å³è¾¹çš„æ‰€æœ‰å†…å®¹</mtext></mstyle></mtd></mtr></mtable></mrow></mrow></mstyle></mrow><annotation encoding="application/x-tex">\small{n\begin{cases}&gt;0&amp;\text{ä»å·¦å¾€å³æ•°ï¼Œç¬¬nä¸ªçš„å·¦è¾¹çš„æ‰€æœ‰å†…å®¹}\\&lt;0&amp;\text{ä»å³å¾€å·¦æ•°ï¼Œç¬¬nä¸ªçš„å³è¾¹çš„æ‰€æœ‰å†…å®¹}\end{cases}}

</annotation></semantics></math></span><span aria-hidden="true" class="katex-html"><span class="base"><span class="strut" style="height:2.592em;vertical-align:-1.071em;"></span><span class="mord sizing reset-size6 size5"><span class="mord mathnormal">n</span><span class="mspace" style="margin-right:0.1667em;"></span><span class="minner"><span class="mopen sizing reset-size5 size6 delimcenter" style="top:0.025em;"><span class="delimsizing size3">{</span></span><span class="mord"><span class="mtable"><span class="col-align-l"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:1.69em;"><span style="top:-3.69em;"><span class="pstrut" style="height:3.008em;"></span><span class="mord"><span class="mrel">&gt;</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mord">0</span></span></span><span style="top:-2.25em;"><span class="pstrut" style="height:3.008em;"></span><span class="mord"><span class="mrel">&lt;</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mord">0</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:1.19em;"><span></span></span></span></span></span><span class="arraycolsep" style="width:1em;"></span><span class="col-align-l"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:1.69em;"><span style="top:-3.69em;"><span class="pstrut" style="height:3.008em;"></span><span class="mord"><span class="mord text"><span class="mord cjk_fallback">ä»å·¦å¾€å³æ•°ï¼Œç¬¬</span><span class="mord">n</span><span class="mord cjk_fallback">ä¸ªçš„å·¦è¾¹çš„æ‰€æœ‰å†…å®¹</span></span></span></span><span style="top:-2.25em;"><span class="pstrut" style="height:3.008em;"></span><span class="mord"><span class="mord text"><span class="mord cjk_fallback">ä»å³å¾€å·¦æ•°ï¼Œç¬¬</span><span class="mord">n</span><span class="mord cjk_fallback">ä¸ªçš„å³è¾¹çš„æ‰€æœ‰å†…å®¹</span></span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:1.19em;"><span></span></span></span></span></span></span></span><span class="mclose nulldelimiter sizing reset-size5 size6"></span></span></span></span></span></span></span></div></dd>
</dl>
</li>
</ul>
</dd>
</dl>
</li>
</ul>
</dd>
</dl>
</li>
<li><dl class="simple">
<dt>æ›¿æ¢</dt><dd><ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">replace(str,</span> <span class="pre">substr_a,</span> <span class="pre">substr_b)</span></code> ï¼š <code class="docutils literal notranslate"><span class="pre">str</span></code>  ä¸­çš„  <code class="docutils literal notranslate"><span class="pre">substr_a</span></code>  æ›¿æ¢æˆ  <code class="docutils literal notranslate"><span class="pre">substr_b</span></code> ï¼›</p></li>
</ul>
</dd>
</dl>
</li>
<li><dl class="simple">
<dt>ä¿¡æ¯</dt><dd><ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">length(str)</span></code></p></li>
</ul>
</dd>
</dl>
</li>
<li><p>[MySQLå¸¸ç”¨å‡½æ•°â€”â€”å­—ç¬¦å‡½æ•°]</p></li>
</ul>
<div class="admonition- admonition hint">
<p class="admonition-title">ç°åœ¨è¿è¥ä¸¾åŠäº†ä¸€åœºæ¯”èµ›ï¼Œæ”¶åˆ°äº†ä¸€äº›å‚èµ›ç”³è¯·ï¼Œè¡¨æ•°æ®è®°å½•å½¢å¼å¦‚ä¸‹æ‰€ç¤ºï¼Œ</p>
<ol class="arabic simple">
<li><p>ç°åœ¨è¿è¥æƒ³è¦ç»Ÿè®¡æ¯ä¸ªæ€§åˆ«çš„ç”¨æˆ·åˆ†åˆ«æœ‰å¤šå°‘å‚èµ›è€…</p></li>
<li><p>ç°åœ¨è¿è¥æƒ³è¦ç»Ÿè®¡æ¯ä¸ªå¹´é¾„çš„ç”¨æˆ·åˆ†åˆ«æœ‰å¤šå°‘å‚èµ›è€…ï¼Œè¯·å–å‡ºç›¸åº”ç»“æœ</p></li>
</ol>
<table>
<thead>
<tr class="row-odd"><th class="head"><p>user_submit</p></th>
<th class="head"></th>
<th class="head"></th>
<th class="head"><p>result</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>dvice_id</p></td>
<td><p>profile</p></td>
<td><p>gender</p></td>
<td><p>number</p></td>
</tr>
<tr class="row-odd"><td><p>2138</p></td>
<td><p>180cm,75kg,27,male</p></td>
<td><p>male</p></td>
<td><p>2</p></td>
</tr>
</tbody>
</table>
<div class="highlight-sql notranslate"><div class="highlight"><pre><span></span><span class="o">#</span><span class="w"> </span><span class="mi">1</span><span class="p">.</span><span class="w"> </span><span class="err">æ¯ä¸ªæ€§åˆ«</span>
<span class="k">select</span><span class="w"> </span><span class="n">substring_index</span><span class="p">(</span><span class="n">profile</span><span class="p">,</span><span class="w"> </span><span class="s1">','</span><span class="p">,</span><span class="w"> </span><span class="o">-</span><span class="mi">1</span><span class="p">)</span><span class="w"> </span><span class="k">as</span><span class="w"> </span><span class="n">gender</span><span class="p">,</span><span class="w"> </span><span class="k">count</span><span class="p">(</span><span class="mi">1</span><span class="p">)</span><span class="w"> </span><span class="k">as</span><span class="w"> </span><span class="nb">number</span>
<span class="k">from</span><span class="w"> </span><span class="n">user_submit</span>
<span class="k">group</span><span class="w"> </span><span class="k">by</span><span class="w"> </span><span class="n">gender</span><span class="p">;</span>

<span class="o">#</span><span class="w"> </span><span class="mi">2</span><span class="p">.</span><span class="w"> </span><span class="err">æ¯ä¸ªå¹´é¾„</span>
<span class="k">select</span><span class="w"> </span><span class="n">substring_index</span><span class="p">(</span><span class="n">substring_index</span><span class="p">(</span><span class="n">profile</span><span class="p">,</span><span class="s1">','</span><span class="p">,</span><span class="o">-</span><span class="mi">2</span><span class="p">),</span><span class="s1">','</span><span class="p">,</span><span class="mi">1</span><span class="p">)</span><span class="w"> </span><span class="k">as</span><span class="w"> </span><span class="n">age</span><span class="p">,</span>
<span class="w">    </span><span class="k">count</span><span class="p">(</span><span class="mi">1</span><span class="p">)</span><span class="w"> </span><span class="k">as</span><span class="w"> </span><span class="nb">number</span>
<span class="k">from</span><span class="w"> </span><span class="n">user_submit</span>
<span class="k">group</span><span class="w"> </span><span class="k">by</span><span class="w"> </span><span class="n">age</span><span class="p">;</span>
</pre></div>
</div>
</div>
<div class="admonition-sql-id-cust-id-cust-name-user-login-cust-contact-cust-city admonition hint">
<p class="admonition-title">ç¼–å†™ SQL è¯­å¥ï¼Œè¿”å›é¡¾å®¢ IDï¼ˆcust_idï¼‰ã€é¡¾å®¢åç§°ï¼ˆcust_nameï¼‰å’Œç™»å½•åï¼ˆuser_loginï¼‰ï¼Œå…¶ä¸­ç™»å½•åå…¨éƒ¨ä¸ºå¤§å†™å­—æ¯ï¼Œå¹¶ç”±é¡¾å®¢è”ç³»äººçš„å‰ä¸¤ä¸ªå­—ç¬¦ï¼ˆcust_contactï¼‰å’Œå…¶æ‰€åœ¨åŸå¸‚çš„å‰ä¸‰ä¸ªå­—ç¬¦ï¼ˆcust_cityï¼‰ç»„æˆã€‚</p>
<div class="highlight-sql notranslate"><div class="highlight"><pre><span></span><span class="k">select</span><span class="w"> </span><span class="n">cust_id</span><span class="p">,</span><span class="w"> </span><span class="n">cust_name</span><span class="p">,</span>
<span class="w">    </span><span class="k">upper</span><span class="p">(</span><span class="n">concat</span><span class="p">(</span><span class="k">left</span><span class="p">(</span><span class="n">cust_name</span><span class="p">,</span><span class="mi">2</span><span class="p">),</span><span class="w"> </span><span class="k">left</span><span class="p">(</span><span class="n">cust_city</span><span class="p">,</span><span class="w"> </span><span class="mi">3</span><span class="p">)))</span><span class="w"> </span><span class="k">as</span><span class="w"> </span><span class="n">user_login</span>
<span class="k">from</span><span class="w"> </span><span class="n">Customers</span><span class="p">;</span>
</pre></div>
</div>
</div>
</section>
<section id="id5">
<h4 id="id5">æ¨¡ç³ŠæŸ¥è¯¢<a class="headerlink" href="#id5" title="Link to this heading">Â¶</a></h4>
<div class="admonition- admonition danger">
<p class="admonition-title">â€œå°½é‡é¿å…é€šé…ç¬¦åœ¨å¼€å¤´â€</p>
<div class="line-block">
<div class="line">å½“  <code class="docutils literal notranslate"><span class="pre">like</span></code>  æ¨¡å¼ä»¥é€šé…ç¬¦ï¼ˆä¾‹å¦‚â€œ%xyzâ€ï¼‰å¼€å¤´æ—¶ï¼ŒMySQLä¸èƒ½ä½¿ç”¨ç´¢å¼•ï¼Œå¹¶åœ¨è¿™ç§æƒ…å†µä¸‹æ‰§è¡Œå®Œæ•´è¡¨æ‰«æã€‚</div>
<div class="line">é€šå¸¸ä¼šå¯¼è‡´æœåŠ¡å™¨æ€§èƒ½ä¸‹é™ã€‚</div>
</div>
<ul>
<li><p>åç¼€æœç´¢</p>
<blockquote>
<div><div class="admonition- admonition note">
<p class="admonition-title">å¯¹åç¼€æœç´¢çš„ä¼˜åŒ–ï¼š</p>
<p>å¯ä»¥é€šè¿‡åˆ›å»ºæ–°åˆ—ã€å°†å…¶å€¼è®¾ç½®ä¸ºä¸ç›®æ ‡åˆ—é€†åºçš„å€¼å¹¶å¯¹å…¶å»ºç«‹ç´¢å¼•æ¥æ‰§è¡Œé«˜æ•ˆçš„åç¼€æœç´¢ã€‚ä»åç¼€è½¬ä¸ºå‰ç¼€</p>
<div class="highlight-sql notranslate"><div class="highlight"><pre><span></span><span class="k">select</span><span class="w"> </span><span class="n">name</span>
<span class="k">from</span><span class="w"> </span><span class="k">table</span>
<span class="k">where</span><span class="w"> </span><span class="n">name</span><span class="w"> </span><span class="k">like</span><span class="w"> </span><span class="s1">'%ic'</span><span class="p">;</span>
<span class="o">#</span><span class="w"> </span><span class="c1">---------------------- åç¼€è½¬å‰ç¼€</span>
<span class="k">where</span><span class="w"> </span><span class="n">name_reversed</span><span class="w"> </span><span class="k">like</span><span class="w"> </span><span class="s1">'ic%'</span>
</pre></div>
</div>
</div>
</div></blockquote>
</li>
<li><p>ä¸­ç¼€æœç´¢</p>
<blockquote>
<div><div class="admonition-fulltext-index admonition danger">
<p class="admonition-title"><code class="docutils literal notranslate"><span class="pre">fulltext</span> <span class="pre">index</span></code></p>
<p>æ²¡æœ‰æœ‰æ•ˆçš„æ–¹æ³•æ¥æ‰§è¡Œ <strong>ä¸­ç¼€æœç´¢</strong>ï¼Œæ— è®ºæ˜¯LIKEåœ¨ç´¢å¼•åˆ—ä¸Šè¿˜æ˜¯ä½¿ç”¨å…¨æ–‡ç´¢å¼•ã€‚</p>
</div>
</div></blockquote>
</li>
</ul>
</div>
<ol class="arabic">
<li><p>sql è‡ªå¸¦ æ¨¡å¼åŒ¹é…  <code class="docutils literal notranslate"><span class="pre">like</span></code>  + é€šé…ç¬¦  <code class="docutils literal notranslate"><span class="pre">%_</span></code></p>
<blockquote>
<div><table>
<thead>
<tr class="row-odd"><th class="head"><p>é€šé…ç¬¦</p></th>
<th class="head"><p>å«ä¹‰</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">%</span></code></p></td>
<td><p>ä»»æ„å¤šä¸ªï¼ŒåŒ…æ‹¬0</p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">_</span></code></p></td>
<td><p>å•ä¸ªï¼Œæœ‰é•¿åº¦é™åˆ¶</p></td>
</tr>
</tbody>
</table>
<ul>
<li><p>ç²¾ç¡®åŒ¹é…ã€‚å¦‚æœä¸è·Ÿé€šé…ç¬¦åˆç”¨å°±ç­‰äº  <code class="docutils literal notranslate"><span class="pre">=</span></code> ï¼šç²¾ç¡®ç­‰äºã€‚ä¸èƒ½è¿”å›åŒ…å«å…³ç³»çš„è¡Œ</p>
<blockquote>
<div><div class="highlight-sql notranslate"><div class="highlight"><pre><span></span><span class="o">#</span><span class="w"> </span><span class="err">ç²¾ç¡®åŒ¹é…</span>
<span class="k">select</span><span class="w"> </span><span class="n">cols</span>
<span class="k">from</span><span class="w"> </span><span class="n">users</span>
<span class="k">where</span><span class="w"> </span><span class="n">col</span><span class="w"> </span><span class="k">like</span><span class="w"> </span><span class="s1">'yes'</span>
<span class="c1">---------------------- # åªæœ‰'yes'èƒ½è¢«åŒ¹é…åˆ°</span>
</pre></div>
</div>
</div></blockquote>
</li>
<li><p><strong>æ³¨æ„å¤§å°å†™</strong>ï¼Œ å› ä¸ºsqlè‡ªå¸¦çš„ï¼Œæ‰€ä»¥æ˜¯å¦åŒºåˆ†å¤§å°å†™çœ‹ç”¨æˆ·å¯¹MySQLçš„é…ç½®æ–¹å¼</p></li>
<li><p><strong>ä¸èƒ½åŒ¹é…åˆ°</strong> <code class="docutils literal notranslate"><span class="pre">null</span></code></p>
<blockquote>
<div><div class="highlight-sql notranslate"><div class="highlight"><pre><span></span><span class="o">#</span><span class="w"> </span><span class="mi">1</span><span class="p">.</span><span class="w"> </span><span class="err">ä»¥</span><span class="w"> </span><span class="err">â€˜</span><span class="n">yes</span><span class="err">â€˜</span><span class="w"> </span><span class="err">å¼€å¤´</span>
<span class="k">select</span><span class="w"> </span><span class="n">cols</span>
<span class="k">from</span><span class="w"> </span><span class="n">users</span>
<span class="k">where</span><span class="w"> </span><span class="n">col</span><span class="w"> </span><span class="k">like</span><span class="w"> </span><span class="s1">'yes%'</span><span class="p">;</span>

<span class="o">#</span><span class="w"> </span><span class="mi">2</span><span class="p">.</span><span class="w"> </span><span class="err">ä»¥</span><span class="w"> </span><span class="err">â€˜</span><span class="n">yes</span><span class="err">â€™å¼€å¤´ï¼Œé•¿åº¦ä¸º</span><span class="mi">6</span><span class="err">çš„å­—ç¬¦ä¸²</span>
<span class="k">select</span><span class="w"> </span><span class="n">cols</span>
<span class="k">from</span><span class="w"> </span><span class="k">user</span>
<span class="k">where</span><span class="w"> </span><span class="n">col</span><span class="w"> </span><span class="k">like</span><span class="w"> </span><span class="s1">'yes___'</span><span class="p">;</span>
</pre></div>
</div>
</div></blockquote>
</li>
</ul>
<div class="admonition-products-prod-name-prod-desc-toy-carrots admonition hint">
<p class="admonition-title">ä» Products è¡¨ä¸­æ£€ç´¢äº§å“åç§°ï¼ˆprod_nameï¼‰å’Œæè¿°ï¼ˆprod_descï¼‰ï¼Œä»…è¿”å›åœ¨æè¿°ä¸­ä»¥å…ˆåé¡ºåºåŒæ—¶å‡ºç° toy å’Œ carrots çš„äº§å“ã€‚</p>
<div class="highlight-sql notranslate"><div class="highlight"><pre><span></span><span class="k">select</span><span class="w"> </span><span class="n">prod_name</span><span class="p">,</span><span class="w"> </span><span class="n">prod_desc</span>
<span class="k">from</span><span class="w"> </span><span class="n">Products</span>
<span class="k">where</span><span class="w"> </span><span class="n">prod_desc</span><span class="w"> </span><span class="k">like</span><span class="w"> </span><span class="s1">'%toy%carrots%'</span><span class="p">;</span>
</pre></div>
</div>
</div>
</div></blockquote>
</li>
<li><dl>
<dt>æ­£åˆ™è¡¨è¾¾  <code class="docutils literal notranslate"><span class="pre">regexp</span></code></dt><dd><ul>
<li><p>æ¨¡ç³ŠåŒ¹é…ã€‚å¦‚æœä¸è·Ÿä»»ä½•ç¬¦å·ç”¨ä¹Ÿèƒ½æ¨¡ç³ŠåŒ¹é…ï¼Œèƒ½è¿”å›åŒ…å«å…³ç³»çš„è¡Œ</p>
<blockquote>
<div><div class="highlight-sql notranslate"><div class="highlight"><pre><span></span><span class="o">#</span><span class="w"> </span><span class="err">æ¨¡ç³ŠåŒ¹é…</span>
<span class="k">select</span><span class="w"> </span><span class="n">cols</span>
<span class="k">from</span><span class="w"> </span><span class="n">users</span>
<span class="k">where</span><span class="w"> </span><span class="n">col</span><span class="w"> </span><span class="n">regexp</span><span class="w"> </span><span class="s1">'yes'</span><span class="p">;</span>
<span class="c1">----------------------- # åªè¦æœ‰'yes'éƒ½èƒ½è¢«åŒ¹é…åˆ°</span>

<span class="k">select</span><span class="w"> </span><span class="n">prod_name</span><span class="p">,</span><span class="n">prod_desc</span>
<span class="k">from</span><span class="w"> </span><span class="n">Products</span>
<span class="k">where</span><span class="w"> </span><span class="n">prod_desc</span><span class="w"> </span><span class="k">not</span><span class="w"> </span><span class="n">REGEXP</span><span class="w"> </span><span class="s1">'toy'</span>
<span class="k">order</span><span class="w"> </span><span class="k">by</span><span class="w"> </span><span class="n">prod_name</span><span class="p">;</span>
</pre></div>
</div>
</div></blockquote>
</li>
</ul>
</dd>
</dl>
</li>
</ol>
</section>
<section id="id6">
<h4 id="id6">å¤åˆæ¡ä»¶çš„æŸ¥è¯¢<a class="headerlink" href="#id6" title="Link to this heading">Â¶</a></h4>
<div class="admonition-or-union-union-all admonition note">
<p class="admonition-title">å¤åˆæ¡ä»¶çš„æŸ¥è¯¢  <code class="docutils literal notranslate"><span class="pre">or,</span> <span class="pre">union,</span> <span class="pre">union</span> <span class="pre">all</span></code></p>
<ol class="arabic">
<li><dl>
<dt>æ˜¯å¦å»é‡</dt><dd><div class="line-block">
<div class="line">åªè¦æ»¡è¶³ä¸€ä¸ªæ¡ä»¶å°±è¢«ç­›é€‰å‡ºæ¥ï¼Œä½†æ€»ä¼šå­˜åœ¨ä¸€ä¸ªäººæ»¡è¶³äº†å¤šä¸ªæ¡ä»¶ï¼Œ ä½†è¿”å›çš„ç»“æœæ˜¯å¤šå°‘æ¡å‘¢ï¼Ÿ</div>
<div class="line">æ¯æ¡è®°å½•åªè¿”å›ä¸€æ¬¡å°±æ˜¯ <strong>å»é‡</strong>ï¼Œ æ»¡è¶³å¤šå°‘ä¸ªæ¡ä»¶å°±è¿”å›å¤šå°‘æ¬¡æ˜¯ <strong>ä¸å»é‡</strong></div>
</div>
</dd>
</dl>
</li>
<li><dl>
<dt>æ€ä¹ˆçœ‹</dt><dd><p>å…ˆçœ‹å®Œ condition1 å†çœ‹ condition2ï¼Œ æœ‰åˆ†ç•Œçº¿çš„æ˜¯ <strong>åˆ†åˆ«</strong></p>
<blockquote>
<div><ul class="simple">
<li><p>å…ˆ match  <code class="docutils literal notranslate"><span class="pre">condition1</span></code>  ç„¶ååˆå† match  <code class="docutils literal notranslate"><span class="pre">condition2</span></code> ã€‚æ¯ä¸€æ¡éƒ½å…ˆè¿‡å®Œä¸€é  <code class="docutils literal notranslate"><span class="pre">condition1</span></code> ï¼Œå†è¿‡ä¸€é  <code class="docutils literal notranslate"><span class="pre">condition2</span></code></p></li>
</ul>
</div></blockquote>
<p>æ— æ‰€è°“åŒºåˆ†ï¼Œcondition1 å’Œ condition2 æ··æ‚çš„æ˜¯ <strong>æŒ‰ç´¢å¼•æ’åº</strong></p>
<blockquote>
<div><ul class="simple">
<li><p>æ¯ä¸€æ¡éƒ½è¿‡ä¸€éæ’æŸ¥ <code class="docutils literal notranslate"><span class="pre">condition1</span></code> æˆ–è€… <code class="docutils literal notranslate"><span class="pre">condition2</span></code> ã€‚</p></li>
<li><p>æ„Ÿè§‰è¿™ä¸ªä¼šå¿«ä¸€ç‚¹ï¼Œå› ä¸º match  <code class="docutils literal notranslate"><span class="pre">condition1</span></code>  å°±ä¸ç”¨å† check  <code class="docutils literal notranslate"><span class="pre">condition2</span></code></p></li>
</ul>
</div></blockquote>
</dd>
</dl>
</li>
</ol>
<table>
<thead>
<tr class="row-odd"><th class="head"><p>code</p></th>
<th class="head"><p>å»é‡</p></th>
<th class="head"><p>åˆ†åˆ«</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">or</span></code></p></td>
<td><p>âœ…</p></td>
<td><p>âŒ</p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">union</span></code></p></td>
<td><p>âœ…</p></td>
<td><p>âœ…</p></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">union</span> <span class="pre">all</span></code></p></td>
<td><p>âŒ</p></td>
<td><p>âœ…</p></td>
</tr>
</tbody>
</table>
<div class="admonition-device-idgenderagegpa admonition hint">
<p class="admonition-title">ç°åœ¨è¿è¥æƒ³è¦åˆ†åˆ«æŸ¥çœ‹å­¦æ ¡ä¸ºå±±ä¸œå¤§å­¦æˆ–è€…æ€§åˆ«ä¸ºç”·æ€§çš„ç”¨æˆ·çš„device_idã€genderã€ageå’Œgpaæ•°æ®</p>
</div>
<div class="highlight-sql notranslate"><div class="highlight"><pre><span></span><span class="o">#</span><span class="w"> </span><span class="mi">1</span><span class="p">.</span><span class="w"> </span><span class="k">or</span>
<span class="k">select</span><span class="w"> </span><span class="n">device_id</span><span class="p">,</span><span class="w"> </span><span class="n">gender</span><span class="p">,</span><span class="w"> </span><span class="n">age</span><span class="p">,</span><span class="w"> </span><span class="n">gpa</span>
<span class="k">from</span><span class="w"> </span><span class="n">user_profile</span>
<span class="k">where</span><span class="w"> </span><span class="n">university</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s1">'å±±ä¸œå¤§å­¦'</span><span class="w"> </span><span class="k">or</span>
<span class="w">    </span><span class="n">gender</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s1">'male'</span><span class="p">;</span>
<span class="c1">------------------------------------ # å±±ä¸œå’Œç”·çš„äº¤ç»‡ï¼Œæ²¡æœ‰åˆ†ç•Œçº¿ï¼Œè®°å½•å»é‡</span>

<span class="o">#</span><span class="w"> </span><span class="mi">2</span><span class="p">.</span><span class="w"> </span><span class="k">union</span>
<span class="k">select</span><span class="w"> </span><span class="n">device_id</span><span class="p">,</span><span class="w"> </span><span class="n">gender</span><span class="p">,</span><span class="w"> </span><span class="n">age</span><span class="p">,</span><span class="w"> </span><span class="n">gpa</span>
<span class="k">from</span><span class="w"> </span><span class="n">user_profile</span>
<span class="k">where</span><span class="w"> </span><span class="n">university</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s1">'å±±ä¸œå¤§å­¦'</span>
<span class="k">union</span>
<span class="k">select</span><span class="w"> </span><span class="n">device_id</span><span class="p">,</span><span class="w"> </span><span class="n">gender</span><span class="p">,</span><span class="w"> </span><span class="n">age</span><span class="p">,</span><span class="w"> </span><span class="n">gpa</span>
<span class="k">from</span><span class="w"> </span><span class="n">user_profile</span>
<span class="k">where</span><span class="w"> </span><span class="n">gender</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s1">'male'</span><span class="p">;</span>
<span class="c1">------------------------------------ # å…ˆæ˜¯å±±ä¸œå†æ˜¯ç”·çš„ï¼Œè®°å½•å»é‡</span>

<span class="o">#</span><span class="w"> </span><span class="mi">3</span><span class="p">.</span><span class="w"> </span><span class="k">union</span><span class="w"> </span><span class="k">all</span>
<span class="k">select</span><span class="w"> </span><span class="n">device_id</span><span class="p">,</span><span class="w"> </span><span class="n">gender</span><span class="p">,</span><span class="w"> </span><span class="n">age</span><span class="p">,</span><span class="w"> </span><span class="n">gpa</span>
<span class="k">from</span><span class="w"> </span><span class="n">user_profile</span>
<span class="k">where</span><span class="w"> </span><span class="n">university</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s1">'å±±ä¸œå¤§å­¦'</span>
<span class="k">union</span><span class="w"> </span><span class="k">all</span>
<span class="k">select</span><span class="w"> </span><span class="n">device_id</span><span class="p">,</span><span class="w"> </span><span class="n">gender</span><span class="p">,</span><span class="w"> </span><span class="n">age</span><span class="p">,</span><span class="w"> </span><span class="n">gpa</span>
<span class="k">from</span><span class="w"> </span><span class="n">user_profile</span>
<span class="k">where</span><span class="w"> </span><span class="n">gender</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s1">'male'</span><span class="p">;</span>
<span class="c1">------------------------------------ # å…ˆæ˜¯å±±ä¸œå†æ˜¯ç”·çš„ï¼Œè®°å½•ä¸å»é‡</span>
</pre></div>
</div>
</div>
<div class="admonition-and-or admonition note">
<p class="admonition-title">and &amp; or çš„ä¼˜å…ˆçº§</p>
<p>and çš„ä¼˜å…ˆçº§å¤§äº orï¼Œæ‰€ä»¥å¯ä»¥è€ƒé‡æ‹¬å·åŠ çš„æƒ…å†µ</p>
</div>
<div class="admonition-order-by-union admonition danger">
<p class="admonition-title">å¤šå€‹  <code class="docutils literal notranslate"><span class="pre">order</span> <span class="pre">by</span></code>  å’Œ  <code class="docutils literal notranslate"><span class="pre">union</span></code>  ä¸€èµ·ç”¨</p>
<p>order byä¸èƒ½ç›´æ¥å‡ºç°åœ¨unionçš„å­å¥ä¸­ï¼Œä½†æ˜¯å¯ä»¥å‡ºç°åœ¨å­å¥çš„å­å¥ä¸­ã€‚æ‰€ä»¥åœ¨å¤–é¢å†å¥—ä¸€å±‚ .</p>
<div class="highlight-sql notranslate"><div class="highlight"><pre><span></span><span class="k">select</span><span class="w"> </span><span class="o">*</span><span class="w"> </span><span class="k">from</span><span class="w"> </span><span class="p">(</span><span class="k">select</span><span class="w"> </span><span class="p">...</span><span class="w"> </span><span class="k">order</span><span class="w"> </span><span class="k">by</span><span class="p">)</span>
<span class="k">union</span><span class="w"> </span><span class="k">all</span>
<span class="k">select</span><span class="w"> </span><span class="o">*</span><span class="w"> </span><span class="k">from</span><span class="w"> </span><span class="p">(</span><span class="k">select</span><span class="w"> </span><span class="p">...</span><span class="w"> </span><span class="k">order</span><span class="w"> </span><span class="k">by</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="admonition-uv-pv admonition hint">
<p class="admonition-title">è¯·ç»Ÿè®¡æ¯ä¸ªé¢˜ç›®å’Œæ¯ä»½è¯•å·è¢«ä½œç­”çš„äººæ•°å’Œæ¬¡æ•°ï¼Œåˆ†åˆ«æŒ‰ç…§â€è¯•å·â€å’Œâ€é¢˜ç›®â€çš„uv &amp; pvé™åºæ˜¾ç¤º</p>
<div class="highlight-sql notranslate"><div class="highlight"><pre><span></span><span class="k">select</span><span class="w"> </span><span class="o">*</span>
<span class="k">from</span><span class="w"> </span><span class="p">(</span>
<span class="w">    </span><span class="k">select</span><span class="w"> </span><span class="n">exam_id</span><span class="w"> </span><span class="k">as</span><span class="w"> </span><span class="n">tid</span><span class="p">,</span><span class="w"> </span><span class="k">count</span><span class="p">(</span><span class="k">distinct</span><span class="w"> </span><span class="n">uid</span><span class="p">)</span><span class="w"> </span><span class="k">as</span><span class="w"> </span><span class="n">uv</span><span class="p">,</span><span class="w"> </span><span class="k">count</span><span class="p">(</span><span class="mi">1</span><span class="p">)</span><span class="w"> </span><span class="k">as</span><span class="w"> </span><span class="n">pv</span>
<span class="w">    </span><span class="k">from</span><span class="w"> </span><span class="n">exam_record</span>
<span class="w">    </span><span class="k">group</span><span class="w"> </span><span class="k">by</span><span class="w"> </span><span class="n">tid</span>
<span class="w">    </span><span class="k">order</span><span class="w"> </span><span class="k">by</span><span class="w"> </span><span class="n">uv</span><span class="o">+</span><span class="n">pv</span><span class="w"> </span><span class="k">desc</span>
<span class="w">    </span><span class="p">)</span><span class="w"> </span><span class="n">exam</span>
<span class="k">union</span><span class="w"> </span><span class="k">all</span>
<span class="k">select</span><span class="w"> </span><span class="o">*</span>
<span class="k">from</span><span class="p">(</span>
<span class="w">    </span><span class="k">select</span><span class="w"> </span><span class="n">question_id</span><span class="w"> </span><span class="k">as</span><span class="w"> </span><span class="n">tid</span><span class="p">,</span><span class="w"> </span><span class="k">count</span><span class="p">(</span><span class="k">distinct</span><span class="w"> </span><span class="n">uid</span><span class="p">)</span><span class="w"> </span><span class="k">as</span><span class="w"> </span><span class="n">uv</span><span class="p">,</span><span class="w"> </span><span class="k">count</span><span class="p">(</span><span class="mi">1</span><span class="p">)</span><span class="w"> </span><span class="k">as</span><span class="w"> </span><span class="n">pv</span>
<span class="w">    </span><span class="k">from</span><span class="w"> </span><span class="n">practice_record</span>
<span class="w">    </span><span class="k">group</span><span class="w"> </span><span class="k">by</span><span class="w"> </span><span class="n">tid</span>
<span class="w">    </span><span class="k">order</span><span class="w"> </span><span class="k">by</span><span class="w"> </span><span class="n">uv</span><span class="o">+</span><span class="n">pv</span><span class="w"> </span><span class="k">desc</span>
<span class="w">    </span><span class="p">)</span><span class="w"> </span><span class="n">question</span><span class="p">;</span>
</pre></div>
</div>
</div>
<ul class="simple">
<li><p>å»é‡</p></li>
</ul>
<div class="admonition-distinct-union admonition note">
<p class="admonition-title">â€œè°¨æ…ä½¿ç”¨ DISTINCT &amp; UNIONâ€</p>
<p>æŸ¥è¯¢è°ƒä¼˜çš„å¦ä¸€ä¸ªå¥½å»ºè®®æ˜¯ä»…åœ¨å¿…è¦æ—¶ä½¿ç”¨DISTINCTå’ŒUNIONè¿ç®—ç¬¦ï¼Œå› ä¸ºä¸å®ƒä»¬çš„æŸ¥è¯¢ä¼šå¯¼è‡´æœåŠ¡å™¨å¼€é”€ï¼Œå¹¶é€šå¸¸ä¼šå¢åŠ å“åº”æ—¶é—´ã€‚è€ƒè™‘ç”¨UNION ALLå–ä»£UNIONï¼Œç”¨GROUP BYå–ä»£DISTINCTï¼Œä»¥æé«˜æµç¨‹çš„æ•ˆç‡</p>
<div class="highlight-sql notranslate"><div class="highlight"><pre><span></span><span class="o">#</span><span class="w"> </span><span class="mi">1</span><span class="p">.</span>
<span class="k">select</span><span class="w"> </span><span class="k">distinct</span><span class="w"> </span><span class="n">cols</span>
<span class="k">from</span><span class="w"> </span><span class="n">users</span><span class="p">;</span>

<span class="o">#</span><span class="w"> </span><span class="mi">2</span><span class="p">.</span>
</pre></div>
</div>
</div>
</section>
<section id="with-group-by">
<h4 id="with-group-by">ç»Ÿè®¡- èšåˆå‡½æ•° with  <code class="docutils literal notranslate"><span class="pre">group</span> <span class="pre">by</span></code><a class="headerlink" href="#with-group-by" title="Link to this heading">Â¶</a></h4>
<p><code class="docutils literal notranslate"><span class="pre">select</span> <span class="pre">cols</span> <span class="pre">from</span> <span class="pre">users</span> <span class="pre">group</span> <span class="pre">by</span> <span class="pre">col</span> <span class="pre">having</span> <span class="pre">condition</span></code></p>
<div class="admonition-null admonition danger">
<p class="admonition-title">èšåˆå‡½æ•°ï¼ˆåˆ—ï¼‰éƒ½æ˜¯å¯¹énullè¿›è¡Œ</p>
</div>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">max(col)</span></code> ï¼Œ <code class="docutils literal notranslate"><span class="pre">avg(col)</span></code> ï¼Œ</p></li>
</ul>
<div class="admonition- admonition hint">
<p class="admonition-title">ç°åœ¨è¿è¥æƒ³è¦äº†è§£æµ™æ±Ÿå¤§å­¦çš„ç”¨æˆ·åœ¨ä¸åŒéš¾åº¦é¢˜ç›®ä¸‹ç­”é¢˜çš„æ­£ç¡®ç‡æƒ…å†µ</p>
<ul class="simple">
<li><p>user_profile,device_id,university</p></li>
<li><p>question_practice_detail, device_id, question_id, result</p></li>
<li><p>question_detail, question_id,difficult_level</p></li>
</ul>
<div class="highlight-sql notranslate"><div class="highlight"><pre><span></span><span class="k">select</span><span class="w"> </span><span class="n">qd</span><span class="p">.</span><span class="n">difficult_level</span><span class="p">,</span>
<span class="w">    </span><span class="n">round</span><span class="p">(</span><span class="k">sum</span><span class="p">(</span><span class="k">case</span><span class="w"> </span><span class="k">when</span><span class="w"> </span><span class="n">qpd</span><span class="p">.</span><span class="k">result</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s1">'right'</span><span class="w"> </span><span class="k">then</span><span class="w"> </span><span class="mi">1</span><span class="w"> </span><span class="k">else</span><span class="w"> </span><span class="mi">0</span><span class="w"> </span><span class="k">end</span><span class="p">)</span><span class="o">/</span><span class="k">count</span><span class="p">(</span><span class="mi">1</span><span class="p">),</span><span class="w"> </span><span class="mi">4</span><span class="p">)</span><span class="w"> </span><span class="k">as</span><span class="w"> </span><span class="n">correct_rate</span>
<span class="k">from</span><span class="w"> </span><span class="p">(</span>
<span class="w">    </span><span class="k">select</span><span class="w"> </span><span class="n">device_id</span>
<span class="w">    </span><span class="k">from</span><span class="w"> </span><span class="n">user_profile</span>
<span class="w">    </span><span class="k">where</span><span class="w"> </span><span class="n">university</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s1">'æµ™æ±Ÿå¤§å­¦'</span>
<span class="p">)</span><span class="w"> </span><span class="n">up</span>
<span class="k">inner</span><span class="w"> </span><span class="k">join</span><span class="w"> </span><span class="n">question_practice_detail</span><span class="w"> </span><span class="n">qpd</span>
<span class="k">on</span><span class="w"> </span><span class="n">up</span><span class="p">.</span><span class="n">device_id</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">qpd</span><span class="p">.</span><span class="n">device_id</span>
<span class="k">left</span><span class="w"> </span><span class="k">join</span><span class="w"> </span><span class="n">question_detail</span><span class="w"> </span><span class="n">qd</span>
<span class="k">on</span><span class="w"> </span><span class="n">qpd</span><span class="p">.</span><span class="n">question_id</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">qd</span><span class="p">.</span><span class="n">question_id</span>
<span class="k">group</span><span class="w"> </span><span class="k">by</span><span class="w"> </span><span class="n">qd</span><span class="p">.</span><span class="n">difficult_level</span>
<span class="k">order</span><span class="w"> </span><span class="k">by</span><span class="w"> </span><span class="n">correct_rate</span><span class="p">;</span>
</pre></div>
</div>
</div>
<div class="admonition- admonition hint">
<p class="admonition-title">è¿è¥æƒ³è¦äº†è§£æ¯ä¸ªå­¦æ ¡ <strong>ç­”è¿‡é¢˜</strong> çš„ç”¨æˆ·å¹³å‡ç­”é¢˜æ•°é‡æƒ…å†µã€‚</p>
<div class="line-block">
<div class="line">user_profileï¼Œ device_idæŒ‡ç»ˆç«¯ç¼–å·ï¼ˆè®¤ä¸ºæ¯ä¸ªç”¨æˆ·æœ‰å”¯ä¸€çš„ä¸€ä¸ªç»ˆç«¯ï¼‰ï¼Œuniversity</div>
<div class="line">question_practice_detailï¼Œquestion_idæ˜¯é¢˜ç›®ç¼–å·ï¼Œresultæ˜¯ç­”é¢˜ç»“æœ</div>
<div class="line">å­˜åœ¨å­¦æ ¡æ²¡ç­”è¿‡é¢˜çš„æƒ…å†µï¼Œ éœ€è¦ç”¨ inner join å¹¶ä¸”éœ€è¦æŒ‡æ˜  <code class="docutils literal notranslate"><span class="pre">device_id</span></code>  ï¼Œå› ä¸º user_profile é‡Œçš„ id åœ¨ question_practice_detail æ²¡å‡ºç°è¿‡ï¼Œå°±ä¼š ambiguilous</div>
</div>
<div class="highlight-sql notranslate"><div class="highlight"><pre><span></span><span class="k">select</span><span class="w"> </span><span class="n">u</span><span class="p">.</span><span class="n">university</span><span class="p">,</span>
<span class="w">    </span><span class="n">round</span><span class="p">(</span><span class="k">count</span><span class="p">(</span><span class="mi">1</span><span class="p">)</span><span class="o">/</span><span class="k">count</span><span class="p">(</span><span class="k">distinct</span><span class="p">(</span><span class="n">q</span><span class="p">.</span><span class="n">device_id</span><span class="p">)),</span><span class="w"> </span><span class="mi">4</span><span class="p">)</span><span class="w"> </span><span class="k">as</span><span class="w"> </span><span class="n">avg_answer_cnt</span>
<span class="k">from</span><span class="w"> </span><span class="n">user_profile</span><span class="w"> </span><span class="n">u</span>
<span class="k">inner</span><span class="w"> </span><span class="k">join</span><span class="w"> </span><span class="n">question_practice_detail</span><span class="w"> </span><span class="n">q</span>
<span class="k">on</span><span class="w"> </span><span class="n">u</span><span class="p">.</span><span class="n">device_id</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">q</span><span class="p">.</span><span class="n">device_id</span>
<span class="k">group</span><span class="w"> </span><span class="k">by</span><span class="w"> </span><span class="n">university</span>
<span class="k">order</span><span class="w"> </span><span class="k">by</span><span class="w"> </span><span class="n">university</span><span class="p">;</span>
</pre></div>
</div>
</div>
<ul>
<li><dl>
<dt>é™åˆ¶è®°å½•æ•°é‡</dt><dd><p>è®¡æ•°åŒæ ·ä» 0 å¼€å§‹</p>
<div class="highlight-sql notranslate"><div class="highlight"><pre><span></span><span class="o">#</span><span class="w"> </span><span class="mi">1</span><span class="p">.</span><span class="w"> </span><span class="err">å‰</span><span class="w"> </span><span class="n">n</span><span class="w"> </span><span class="err">æ¡</span><span class="w"> </span><span class="p">[</span><span class="mi">0</span><span class="p">,</span><span class="n">n</span><span class="p">)</span>
<span class="k">select</span><span class="w"> </span><span class="n">cols</span>
<span class="k">from</span><span class="w"> </span><span class="n">users</span>
<span class="k">limit</span><span class="w"> </span><span class="n">n</span><span class="p">;</span>

<span class="o">#</span><span class="w"> </span><span class="mi">2</span><span class="p">.</span><span class="w"> </span><span class="err">ä¸€ä¸ªè¿ç»­çš„åŒºé—´</span><span class="p">[</span><span class="n">m</span><span class="p">,</span><span class="w"> </span><span class="n">m</span><span class="o">+</span><span class="n">n</span><span class="p">)</span>
<span class="k">select</span><span class="w"> </span><span class="n">cols</span>
<span class="k">from</span><span class="w"> </span><span class="n">users</span>
<span class="k">limit</span><span class="w"> </span><span class="n">m</span><span class="p">,</span><span class="w"> </span><span class="n">n</span><span class="p">;</span>
<span class="c1">-----------</span>
<span class="k">select</span><span class="w"> </span><span class="n">cols</span>
<span class="k">from</span><span class="w"> </span><span class="n">users</span>
<span class="k">limit</span><span class="w"> </span><span class="n">n</span><span class="p">,</span><span class="w"> </span><span class="k">offset</span><span class="w"> </span><span class="n">m</span><span class="p">;</span>
</pre></div>
</div>
</dd>
</dl>
</li>
<li><dl>
<dt>åˆ†ç»„</dt><dd><p><code class="docutils literal notranslate"><span class="pre">select</span> <span class="pre">cols</span> <span class="pre">from</span> <span class="pre">users</span> <span class="pre">group</span> <span class="pre">by</span> <span class="pre">col</span> <span class="pre">having</span> <span class="pre">condition;</span></code></p>
<div class="admonition-having-where admonition note">
<p class="admonition-title">â€œ <code class="docutils literal notranslate"><span class="pre">HAVING</span></code>  ç”¨äºäºŒæ¬¡è¿‡æ»¤; åœ¨åˆ†ç»„å‰å…ˆç”¨  <code class="docutils literal notranslate"><span class="pre">WHERE</span></code>  è¿‡æ»¤ä¸€äº›æ•°æ®,åˆ†ç»„çš„æ•ˆç‡å°±ä¼šæ›´é«˜â€</p>
</div>
<div class="admonition- admonition hint">
<p class="admonition-title">è¿è¥æƒ³è¦æŸ¥çœ‹å‚åŠ äº†ç­”é¢˜çš„å±±ä¸œå¤§å­¦çš„ç”¨æˆ·åœ¨ä¸åŒéš¾åº¦ä¸‹çš„å¹³å‡ç­”é¢˜é¢˜ç›®æ•°ï¼Œè¯·å–å‡ºç›¸åº”æ•°æ®</p>
<ul class="simple">
<li><p>user_profile, device_id, university</p></li>
<li><p>question_practice_detail, device_id, question_id</p></li>
<li><p>question_detail, question_id, difficult_level</p></li>
</ul>
<p>WHEREåœ¨å‰é¢å…ˆç­›äº†å±±ä¸œå¤§å­¦ï¼Œæ•´ä¸ªæ‰§è¡Œèµ·æ¥æ•ˆç‡å°±ä¼šé«˜å¾ˆå¤š</p>
<div class="highlight-sql notranslate"><div class="highlight"><pre><span></span><span class="k">select</span><span class="w"> </span><span class="n">sdU</span><span class="p">.</span><span class="n">university</span><span class="p">,</span><span class="w"> </span><span class="n">qd</span><span class="p">.</span><span class="n">difficult_level</span><span class="p">,</span><span class="n">round</span><span class="p">(</span><span class="k">count</span><span class="p">(</span><span class="mi">1</span><span class="p">)</span><span class="o">/</span><span class="k">count</span><span class="p">(</span><span class="k">distinct</span><span class="p">(</span><span class="n">qpd</span><span class="p">.</span><span class="n">device_id</span><span class="p">)),</span><span class="w"> </span><span class="mi">4</span><span class="p">)</span><span class="w"> </span><span class="k">as</span><span class="w"> </span><span class="n">avg_answer_cnt</span>
<span class="k">from</span>
<span class="w">    </span><span class="p">(</span>
<span class="w">        </span><span class="k">select</span><span class="w"> </span><span class="n">university</span><span class="p">,</span><span class="w"> </span><span class="n">device_id</span>
<span class="w">        </span><span class="k">from</span><span class="w"> </span><span class="n">user_profile</span>
<span class="w">        </span><span class="k">where</span><span class="w"> </span><span class="n">university</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s1">'å±±ä¸œå¤§å­¦'</span>
<span class="w">    </span><span class="p">)</span><span class="w"> </span><span class="k">as</span><span class="w"> </span><span class="n">sdU</span>
<span class="k">inner</span><span class="w"> </span><span class="k">join</span><span class="w"> </span><span class="n">question_practice_detail</span><span class="w"> </span><span class="n">qpd</span>
<span class="k">on</span><span class="w"> </span><span class="n">sdU</span><span class="p">.</span><span class="n">device_id</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">qpd</span><span class="p">.</span><span class="n">device_id</span>
<span class="k">inner</span><span class="w"> </span><span class="k">join</span><span class="w"> </span><span class="n">question_detail</span><span class="w"> </span><span class="n">qd</span>
<span class="k">on</span><span class="w"> </span><span class="n">qpd</span><span class="p">.</span><span class="n">question_id</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">qd</span><span class="p">.</span><span class="n">question_id</span>
<span class="k">group</span><span class="w"> </span><span class="k">by</span><span class="w"> </span><span class="n">qd</span><span class="p">.</span><span class="n">difficult_level</span><span class="p">;</span>
</pre></div>
</div>
</div>
<div class="admonition-only-full-group-by admonition danger">
<p class="admonition-title">only_full_group_by</p>
<p>â€œExpression #1 of SELECT list is not in GROUP BY clause and contains nonaggregated column â€¦ which is not functionally dependent on columns in GROUP BY clause; this is incompatible with sql_mode=only_full_group_byâ€</p>
<div class="line-block">
<div class="line">å¯¹äºGROUP BYèšåˆæ“ä½œï¼Œå¦‚æœåœ¨SELECTä¸­çš„åˆ—ï¼Œæ²¡æœ‰åœ¨GROUP BYä¸­å‡ºç°ï¼Œé‚£ä¹ˆè¿™ä¸ªSQLæ˜¯ä¸åˆæ³•çš„ï¼Œå› ä¸ºåˆ—ä¸åœ¨GROUP BYä»å¥ä¸­</div>
<div class="line"><strong>æŸ¥å‡ºæ¥çš„åˆ—å¿…é¡»åœ¨group byåé¢å‡ºç°å¦åˆ™å°±ä¼šæŠ¥é”™ï¼Œæˆ–è€…è¿™ä¸ªå­—æ®µå‡ºç°åœ¨èšåˆå‡½æ•°é‡Œé¢ã€‚</strong></div>
<div class="line"><strong>Sol: åªéœ€è¦åœ¨égroup byçš„åˆ—ä¸ŠåŠ any_value()</strong></div>
</div>
</div>
<div class="admonition-gpa-gpa2021month-q-cnt-avg-day-q-cnt admonition hint">
<p class="admonition-title">ç°åœ¨è¿è¥æƒ³è¦æ‰¾åˆ°æ¯ä¸ªå­¦æ ¡gpaæœ€ä½çš„åŒå­¦æ¥åšè°ƒç ”ï¼Œè¯·ä½ å–å‡ºæ¯ä¸ªå­¦æ ¡çš„æœ€ä½gpaã€‚è¯·ä»ä¸­ç»Ÿè®¡å‡º2021å¹´æ¯ä¸ªæœˆé‡Œç”¨æˆ·çš„æœˆæ€»åˆ·é¢˜æ•°month_q_cnt å’Œæ—¥å‡åˆ·é¢˜æ•°avg_day_q_cntï¼ˆæŒ‰æœˆä»½å‡åºæ’åºï¼‰ä»¥åŠè¯¥å¹´çš„æ€»ä½“æƒ…å†µ</p>
<div class="highlight-sql notranslate"><div class="highlight"><pre><span></span><span class="k">select</span><span class="w"> </span><span class="n">date_format</span><span class="p">(</span><span class="n">submit_time</span><span class="p">,</span><span class="s1">'%Y%m'</span><span class="p">)</span><span class="w"> </span><span class="k">as</span><span class="w"> </span><span class="n">submit_month</span><span class="p">,</span>
<span class="w">    </span><span class="k">count</span><span class="p">(</span><span class="mi">1</span><span class="p">)</span><span class="w"> </span><span class="k">as</span><span class="w"> </span><span class="n">month_q_cnt</span><span class="p">,</span>
<span class="w">    </span><span class="n">any_value</span><span class="p">(</span><span class="n">round</span><span class="p">(</span><span class="k">count</span><span class="p">(</span><span class="mi">1</span><span class="p">)</span><span class="w"> </span><span class="o">/</span><span class="k">day</span><span class="p">(</span><span class="n">last_day</span><span class="p">(</span><span class="n">submit_time</span><span class="p">)),</span><span class="w"> </span><span class="mi">3</span><span class="p">))</span><span class="w"> </span><span class="k">as</span><span class="w"> </span><span class="n">avg_day_q_cnt</span>
<span class="k">from</span><span class="w"> </span><span class="n">practice_record</span>
<span class="k">where</span><span class="w"> </span><span class="k">year</span><span class="p">(</span><span class="n">submit_time</span><span class="p">)</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">2021</span>
<span class="k">group</span><span class="w"> </span><span class="k">by</span><span class="w"> </span><span class="n">submit_month</span>
<span class="k">union</span><span class="w"> </span><span class="k">all</span><span class="w"> </span><span class="o">#</span><span class="w"> </span><span class="k">union</span><span class="w"> </span><span class="k">all</span>
<span class="k">select</span><span class="w"> </span><span class="s1">'2021æ±‡æ€»'</span><span class="w"> </span><span class="k">as</span><span class="w"> </span><span class="n">submit_month</span><span class="p">,</span>
<span class="w">    </span><span class="k">count</span><span class="p">(</span><span class="mi">1</span><span class="p">)</span><span class="w"> </span><span class="k">as</span><span class="w"> </span><span class="n">month_q_cnt</span><span class="p">,</span>
<span class="w">    </span><span class="n">round</span><span class="p">(</span><span class="k">count</span><span class="p">(</span><span class="mi">1</span><span class="p">)</span><span class="w"> </span><span class="o">/</span><span class="mi">31</span><span class="p">,</span><span class="w"> </span><span class="mi">3</span><span class="p">)</span><span class="w"> </span><span class="k">as</span><span class="w"> </span><span class="n">avg_day_q_cnt</span>
<span class="k">from</span><span class="w"> </span><span class="n">practice_record</span>
<span class="k">where</span><span class="w"> </span><span class="k">year</span><span class="p">(</span><span class="n">submit_time</span><span class="p">)</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">2021</span>
<span class="k">order</span><span class="w"> </span><span class="k">by</span><span class="w"> </span><span class="n">submit_month</span><span class="p">;</span>
</pre></div>
</div>
</div>
</dd>
</dl>
</li>
<li><p>åˆ’åˆ†</p>
<blockquote>
<div><div class="highlight-sql notranslate"><div class="highlight"><pre><span></span><span class="k">select</span><span class="w"> </span><span class="n">cols</span><span class="p">,</span>
<span class="w">    </span><span class="p">(</span>
<span class="w">        </span><span class="k">case</span>
<span class="w">            </span><span class="k">WHEN</span><span class="w"> </span><span class="n">SCORE</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s1">'A'</span><span class="w"> </span><span class="k">THEN</span><span class="w"> </span><span class="s1">'ä¼˜'</span>
<span class="w">            </span><span class="k">WHEN</span><span class="w"> </span><span class="n">SCORE</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s1">'B'</span><span class="w"> </span><span class="k">THEN</span><span class="w"> </span><span class="s1">'è‰¯'</span>
<span class="w">            </span><span class="k">WHEN</span><span class="w"> </span><span class="n">SCORE</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s1">'C'</span><span class="w"> </span><span class="k">THEN</span><span class="w"> </span><span class="s1">'ä¸­'</span>
<span class="w">            </span><span class="k">ELSE</span><span class="w"> </span><span class="s1">'ä¸åŠæ ¼'</span>
<span class="w">        </span><span class="k">end</span>
<span class="w">    </span><span class="p">)</span><span class="w"> </span><span class="k">as</span><span class="w"> </span><span class="n">new_col</span><span class="p">;</span>
</pre></div>
</div>
<div class="admonition- admonition hint">
<p class="admonition-title">ç°åœ¨è¿è¥æƒ³è¦å°†ç”¨æˆ·åˆ’åˆ†ä¸º25å²ä»¥ä¸‹å’Œ25å²åŠä»¥ä¸Šä¸¤ä¸ªå¹´é¾„æ®µï¼Œåˆ†åˆ«æŸ¥çœ‹è¿™ä¸¤ä¸ªå¹´é¾„æ®µç”¨æˆ·æ•°é‡.</p>
<p>æœ¬é¢˜æ³¨æ„ï¼šageä¸ºnull ä¹Ÿè®°ä¸º 25å²ä»¥ä¸‹</p>
<div class="highlight-sql notranslate"><div class="highlight"><pre><span></span><span class="k">select</span><span class="w"> </span><span class="p">(</span><span class="k">case</span>
<span class="w">        </span><span class="k">when</span><span class="w"> </span><span class="n">age</span><span class="o">&gt;=</span><span class="mi">25</span><span class="w"> </span><span class="k">then</span><span class="w"> </span><span class="s1">'25å²åŠä»¥ä¸Š'</span>
<span class="w">        </span><span class="k">else</span><span class="w"> </span><span class="s1">'25å²ä»¥ä¸‹'</span>
<span class="w">        </span><span class="k">end</span><span class="p">)</span><span class="w"> </span><span class="k">as</span><span class="w"> </span><span class="n">age_cut</span><span class="p">,</span>
<span class="w">        </span><span class="k">count</span><span class="p">(</span><span class="mi">1</span><span class="p">)</span><span class="w"> </span><span class="k">as</span><span class="w"> </span><span class="nb">number</span>
<span class="k">from</span><span class="w"> </span><span class="n">user_profile</span>
<span class="k">group</span><span class="w"> </span><span class="k">by</span><span class="w"> </span><span class="n">age_cut</span><span class="p">;</span>
</pre></div>
</div>
</div>
</div></blockquote>
</li>
<li><dl>
<dt>åºåˆ—</dt><dd><div class="line-block">
<div class="line"><code class="docutils literal notranslate"><span class="pre">select</span> <span class="pre">cols</span> <span class="pre">from</span> <span class="pre">users</span> <span class="pre">order</span> <span class="pre">by</span> <span class="pre">col;</span></code></div>
<div class="line"><code class="docutils literal notranslate"><span class="pre">select</span> <span class="pre">cols</span> <span class="pre">from</span> <span class="pre">users</span> <span class="pre">order</span> <span class="pre">by</span> <span class="pre">n;</span></code> æ ¹æ“šåˆ—ç´¢å¼•</div>
</div>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">asc</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">desc</span></code></p></li>
</ul>
<div class="highlight-sql notranslate"><div class="highlight"><pre><span></span><span class="k">select</span><span class="w"> </span><span class="n">quantity</span><span class="p">,</span><span class="w"> </span><span class="n">item_price</span>
<span class="k">from</span><span class="w"> </span><span class="n">OrderItems</span>
<span class="k">order</span><span class="w"> </span><span class="k">by</span><span class="w"> </span><span class="mi">1</span><span class="w"> </span><span class="k">desc</span><span class="p">,</span><span class="w"> </span><span class="mi">2</span><span class="w"> </span><span class="k">desc</span><span class="p">;</span>
</pre></div>
</div>
</dd>
</dl>
</li>
</ul>
</section>
<section id="id7">
<h4 id="id7">è¿è¡¨æŸ¥è¯¢<a class="headerlink" href="#id7" title="Link to this heading">Â¶</a></h4>
<div class="admonition- admonition note">
<p class="admonition-title">è¿æ¥å¤šå¼ è¡¨</p>
<p>å°±ä¸€ç›´å†™ä¸€ç›´å†™å°±è¡Œ</p>
<div class="highlight-sql notranslate"><div class="highlight"><pre><span></span><span class="k">select</span><span class="w"> </span><span class="n">cols</span>
<span class="k">from</span><span class="w"> </span><span class="n">t1</span>
<span class="k">inner</span><span class="w"> </span><span class="k">join</span><span class="w"> </span><span class="n">t2</span>
<span class="k">on</span><span class="w"> </span><span class="n">t1</span><span class="p">.</span><span class="n">col</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">t2</span><span class="p">.</span><span class="n">col2</span>
<span class="k">inner</span><span class="w"> </span><span class="k">join</span><span class="w"> </span><span class="n">t3</span>
<span class="k">on</span><span class="w"> </span><span class="n">t1</span><span class="p">.</span><span class="n">col</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">t3</span><span class="p">.</span><span class="n">col</span>
<span class="p">...;</span>
</pre></div>
</div>
</div>
<div class="admonition-every-derived-table-must-have-its-own-alias admonition danger">
<p class="admonition-title">Every derived table must have its own alias</p>
<div class="line-block">
<div class="line">æ¯ä¸ªæ´¾ç”Ÿå‡ºæ¥çš„è¡¨éƒ½å¿…é¡»æœ‰ä¸€ä¸ªè‡ªå·±çš„åˆ«åã€‚ä¸€èˆ¬åœ¨å¤šè¡¨æŸ¥è¯¢æ—¶ï¼Œä¼šå‡ºç°æ­¤é”™è¯¯ã€‚</div>
<div class="line">å› ä¸ºè¿›è¡ŒåµŒå¥—æŸ¥è¯¢çš„æ—¶å€™å­æŸ¥è¯¢å‡ºæ¥çš„çš„ç»“æœæ˜¯ä½œä¸ºä¸€ä¸ª <strong>æ´¾ç”Ÿè¡¨</strong> æ¥è¿›è¡Œä¸Šä¸€çº§çš„æŸ¥è¯¢çš„ï¼Œæ‰€ä»¥å­æŸ¥è¯¢çš„ç»“æœå¿…é¡»è¦æœ‰ä¸€ä¸ªåˆ«å</div>
<div class="line">æŠŠMySQLè¯­å¥æ”¹æˆï¼š <code class="docutils literal notranslate"><span class="pre">select</span> <span class="pre">*</span> <span class="pre">from</span> <span class="pre">(select</span> <span class="pre">*</span> <span class="pre">from</span> <span class="pre">â€¦â€¦)</span> <span class="pre">as</span> <span class="pre">åˆ«å;</span></code></div>
<div class="line">[mysqlé”™è¯¯Every derived table must have its own aliasè§£å†³]</div>
</div>
</div>
<div class="admonition- admonition note">
<p class="admonition-title">å­æŸ¥è¯¢å’Œè¿è¡¨æŸ¥è¯¢</p>
<div class="line-block">
<div class="line">å­æŸ¥è¯¢å¦‚æœèƒ½å¤§é‡å‡å°ä¿¡æ¯ç†µï¼Œä¼šæ¯”è”è¡¨æŸ¥å¿«å¾ˆå¤šï¼Œæ•°æ®å¤šçš„æ—¶å€™è”è¡¨ä¼šè®©è¡¨çš„å¤§å°æˆæŒ‡æ•°çº§å¢é•¿ï¼Œä¸¤è€…çœ‹å…·ä½“æƒ…å†µé€‰æ‹©ã€‚</div>
<div class="line">æ‰§è¡Œå­æŸ¥è¯¢æ—¶ï¼ŒMYSQL éœ€è¦åˆ›å»ºä¸´æ—¶è¡¨ï¼ŒæŸ¥è¯¢å®Œæ¯•åå†åˆ é™¤è¿™äº›ä¸´æ—¶è¡¨ï¼Œæ‰€ä»¥ï¼Œå­æŸ¥è¯¢çš„é€Ÿåº¦ä¼šå—åˆ°ä¸€å®šçš„å½±å“ï¼Œè¿™é‡Œå¤šäº†ä¸€ä¸ªåˆ›å»ºå’Œé”€æ¯ä¸´æ—¶è¡¨çš„è¿‡ç¨‹ã€‚</div>
<div class="line"><a class="reference external" href="https://blog.csdn.net/qiuchaoxi/article/details/81123920">https://blog.csdn.net/qiuchaoxi/article/details/81123920</a></div>
<div class="line"><a class="reference external" href="https://learnku.com/articles/43105">https://learnku.com/articles/43105</a></div>
</div>
</div>
<div class="admonition- admonition hint">
<p class="admonition-title">ç°åœ¨è¿è¥æƒ³è¦æŸ¥çœ‹ç”¨æˆ·åœ¨æŸå¤©åˆ·é¢˜åç¬¬äºŒå¤©è¿˜ä¼šå†æ¥åˆ·é¢˜çš„å¹³å‡æ¦‚ç‡ã€‚</p>
<div class="line-block">
<div class="line">keys</div>
<div class="line">ã€å»é‡ã€‘ï¼ŒåŒä¸€ä¸ªç”¨æˆ·å¯èƒ½åœ¨æŸå¤©åˆ·äº†å¤šæ¬¡é¢˜ï¼Œä¹Ÿå¯èƒ½åœ¨ç¬¬äºŒå¤©åˆ·äº†å¤šæ¬¡é¢˜ã€‚æ‰€ä»¥è¦åŒæ—¶  <code class="docutils literal notranslate"><span class="pre">distinct</span> <span class="pre">debice_id,</span> <span class="pre">date</span></code></div>
<div class="line">ã€å…ˆç­›å†è¿è¡¨ã€‘</div>
</div>
<div class="highlight-sql notranslate"><div class="highlight"><pre><span></span><span class="k">select</span><span class="w"> </span><span class="n">round</span><span class="p">(</span><span class="k">count</span><span class="p">(</span><span class="n">tmr</span><span class="p">.</span><span class="nb">date</span><span class="p">)</span><span class="w"> </span><span class="o">/</span><span class="w"> </span><span class="k">count</span><span class="p">(</span><span class="mi">1</span><span class="p">),</span><span class="w"> </span><span class="mi">4</span><span class="p">)</span><span class="w"> </span><span class="k">as</span><span class="w"> </span><span class="n">avg_ret</span>
<span class="k">from</span><span class="p">(</span>
<span class="w">        </span><span class="k">select</span><span class="w"> </span><span class="k">distinct</span><span class="w"> </span><span class="n">device_id</span><span class="p">,</span><span class="w"> </span><span class="nb">date</span>
<span class="w">        </span><span class="k">from</span><span class="w"> </span><span class="n">question_practice_detail</span>
<span class="w">    </span><span class="p">)</span><span class="w"> </span><span class="n">td</span>
<span class="k">left</span><span class="w"> </span><span class="k">join</span><span class="w"> </span><span class="p">(</span>
<span class="w">        </span><span class="k">select</span><span class="w"> </span><span class="k">distinct</span><span class="w"> </span><span class="n">device_id</span><span class="p">,</span><span class="w"> </span><span class="n">date_sub</span><span class="p">(</span><span class="nb">date</span><span class="p">,</span><span class="w"> </span><span class="nb">interval</span><span class="w"> </span><span class="mi">1</span><span class="w"> </span><span class="k">day</span><span class="p">)</span><span class="w"> </span><span class="k">as</span><span class="w"> </span><span class="nb">date</span>
<span class="w">        </span><span class="k">from</span><span class="w"> </span><span class="n">question_practice_detail</span>
<span class="w">    </span><span class="p">)</span><span class="w"> </span><span class="n">tmr</span>
<span class="k">on</span><span class="w"> </span><span class="n">td</span><span class="p">.</span><span class="n">device_id</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">tmr</span><span class="p">.</span><span class="n">device_id</span><span class="w"> </span><span class="k">and</span><span class="w"> </span><span class="n">td</span><span class="p">.</span><span class="nb">date</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">tmr</span><span class="p">.</span><span class="nb">date</span><span class="p">;</span>
</pre></div>
</div>
</div>
<div class="admonition- admonition hint">
<p class="admonition-title">ç°åœ¨è¿è¥æƒ³è¦äº†è§£å¤æ—¦å¤§å­¦çš„æ¯ä¸ªç”¨æˆ·åœ¨8æœˆä»½ç»ƒä¹ çš„æ€»é¢˜ç›®æ•°å’Œå›ç­”æ­£ç¡®çš„é¢˜ç›®æ•°æƒ…å†µï¼Œè¯·å–å‡ºç›¸åº”æ˜ç»†æ•°æ®ï¼Œå¯¹äºåœ¨8æœˆä»½æ²¡æœ‰ç»ƒä¹ è¿‡çš„ç”¨æˆ·ï¼Œç­”é¢˜æ•°ç»“æœè¿”å›0.</p>
<div class="highlight-sql notranslate"><div class="highlight"><pre><span></span><span class="k">select</span><span class="w"> </span><span class="n">up</span><span class="p">.</span><span class="n">device_id</span><span class="p">,</span><span class="w"> </span><span class="n">up</span><span class="p">.</span><span class="n">university</span><span class="p">,</span>
<span class="w">    </span><span class="k">count</span><span class="p">(</span><span class="k">result</span><span class="p">)</span><span class="w"> </span><span class="k">as</span><span class="w"> </span><span class="n">question_cnt</span><span class="p">,</span>
<span class="w">    </span><span class="k">sum</span><span class="p">(</span><span class="k">case</span><span class="w"> </span><span class="k">when</span><span class="w"> </span><span class="n">qpd</span><span class="p">.</span><span class="k">result</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s1">'right'</span><span class="w"> </span><span class="k">then</span><span class="w"> </span><span class="mi">1</span><span class="w"> </span><span class="k">else</span><span class="w"> </span><span class="mi">0</span><span class="w"> </span><span class="k">end</span><span class="p">)</span><span class="w"> </span><span class="k">as</span><span class="w"> </span><span class="n">right_question_cnt</span>
<span class="k">from</span><span class="p">(</span>
<span class="w">    </span><span class="k">select</span><span class="w"> </span><span class="n">device_id</span><span class="p">,</span><span class="w"> </span><span class="n">university</span><span class="w"> </span><span class="k">from</span><span class="w"> </span><span class="n">user_profile</span>
<span class="w">    </span><span class="k">where</span><span class="w"> </span><span class="n">university</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s1">'å¤æ—¦å¤§å­¦'</span>
<span class="w">    </span><span class="p">)</span><span class="w"> </span><span class="k">as</span><span class="w"> </span><span class="n">up</span>
<span class="k">left</span><span class="w"> </span><span class="k">join</span><span class="p">(</span>
<span class="w">    </span><span class="k">select</span><span class="w"> </span><span class="n">device_id</span><span class="p">,</span><span class="w"> </span><span class="k">result</span><span class="w"> </span><span class="k">from</span><span class="w"> </span><span class="n">question_practice_detail</span>
<span class="w">    </span><span class="k">where</span><span class="w"> </span><span class="k">month</span><span class="p">(</span><span class="nb">date</span><span class="p">)</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">08</span>
<span class="w">    </span><span class="p">)</span><span class="w"> </span><span class="k">as</span><span class="w"> </span><span class="n">qpd</span>
<span class="k">on</span><span class="w"> </span><span class="n">up</span><span class="p">.</span><span class="n">device_id</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">qpd</span><span class="p">.</span><span class="n">device_id</span>
<span class="k">group</span><span class="w"> </span><span class="k">by</span><span class="w"> </span><span class="n">device_id</span><span class="p">;</span>
</pre></div>
</div>
</div>
<div class="admonition- admonition hint">
<p class="admonition-title">è¯·ä»è¡¨ä¸­ç»Ÿè®¡å‡º â€œå½“æœˆå‡å®Œæˆè¯•å·æ•°â€ä¸å°äº3çš„ç”¨æˆ·ä»¬çˆ±ä½œç­”çš„ç±»åˆ«åŠä½œç­”æ¬¡æ•°ï¼ŒæŒ‰æ¬¡æ•°é™åºè¾“å‡º</p>
<div class="admonition- admonition danger">
<p class="admonition-title">æ³¨æ„é¡Œæ„</p>
<ol class="arabic simple">
<li><p>å…ˆçœ‹ç”¨æˆ¶</p></li>
<li><p>å†çµ±è¨ˆæ„›ä½œç­”çš„åˆ—åˆ¥</p></li>
</ol>
<div class="highlight-sql notranslate"><div class="highlight"><pre><span></span><span class="k">select</span><span class="w"> </span><span class="n">tag</span><span class="p">,</span><span class="w"> </span><span class="k">count</span><span class="p">(</span><span class="mi">1</span><span class="p">)</span><span class="w"> </span><span class="k">as</span><span class="w"> </span><span class="n">tag_cnt</span>
<span class="k">from</span><span class="w"> </span><span class="n">examination_info</span><span class="w"> </span><span class="n">info</span>
<span class="k">inner</span><span class="w"> </span><span class="k">join</span><span class="w"> </span><span class="n">exam_record</span><span class="w"> </span><span class="n">rec</span><span class="w"> </span><span class="k">using</span><span class="p">(</span><span class="n">exam_id</span><span class="p">)</span>
<span class="k">where</span><span class="w"> </span><span class="n">rec</span><span class="p">.</span><span class="n">uid</span><span class="w"> </span><span class="k">in</span><span class="w"> </span><span class="p">(</span>
<span class="w">    </span><span class="k">select</span><span class="w"> </span><span class="k">distinct</span><span class="w"> </span><span class="n">uid</span>
<span class="w">    </span><span class="k">from</span><span class="w"> </span><span class="n">exam_record</span>
<span class="w">    </span><span class="k">group</span><span class="w"> </span><span class="k">by</span><span class="w"> </span><span class="n">date_format</span><span class="p">(</span><span class="n">submit_time</span><span class="p">,</span><span class="w"> </span><span class="s1">'%Y%m'</span><span class="p">),</span><span class="w"> </span><span class="n">uid</span>
<span class="w">    </span><span class="k">having</span><span class="w"> </span><span class="k">count</span><span class="p">(</span><span class="n">submit_time</span><span class="p">)</span><span class="w"> </span><span class="o">&gt;=</span><span class="w"> </span><span class="mi">3</span>
<span class="w">    </span><span class="p">)</span>
<span class="k">group</span><span class="w"> </span><span class="k">by</span><span class="w"> </span><span class="n">tag</span>
<span class="k">order</span><span class="w"> </span><span class="k">by</span><span class="w"> </span><span class="n">tag_cnt</span><span class="w"> </span><span class="k">desc</span><span class="p">;</span>
</pre></div>
</div>
</div>
</div>
<div class="admonition-sql-5uvavg-score admonition hint">
<p class="admonition-title">è¯·è®¡ç®—æ¯å¼ SQLç±»åˆ«è¯•å·å‘å¸ƒåï¼Œå½“å¤©5çº§ä»¥ä¸Šçš„ç”¨æˆ·ä½œç­”çš„äººæ•°uvå’Œå¹³å‡åˆ†avg_scoreï¼ŒæŒ‰äººæ•°é™åºï¼Œç›¸åŒäººæ•°çš„æŒ‰å¹³å‡åˆ†å‡åº</p>
<div class="highlight-sql notranslate"><div class="highlight"><pre><span></span><span class="k">select</span><span class="w"> </span><span class="n">rec</span><span class="p">.</span><span class="n">exam_id</span><span class="p">,</span>
<span class="w">    </span><span class="k">count</span><span class="p">(</span><span class="k">distinct</span><span class="w"> </span><span class="n">user_info</span><span class="p">.</span><span class="n">uid</span><span class="p">)</span><span class="w"> </span><span class="k">as</span><span class="w"> </span><span class="n">uv</span><span class="p">,</span>
<span class="w">    </span><span class="n">round</span><span class="p">(</span><span class="k">avg</span><span class="p">(</span><span class="n">rec</span><span class="p">.</span><span class="n">score</span><span class="p">),</span><span class="w"> </span><span class="mi">1</span><span class="p">)</span><span class="w"> </span><span class="k">as</span><span class="w"> </span><span class="n">avg_score</span>
<span class="k">from</span><span class="w"> </span><span class="n">exam_record</span><span class="w"> </span><span class="n">rec</span>
<span class="k">inner</span><span class="w"> </span><span class="k">join</span><span class="w"> </span><span class="p">(</span>
<span class="w">    </span><span class="k">select</span><span class="w"> </span><span class="n">exam_id</span><span class="p">,</span><span class="w"> </span><span class="n">release_time</span>
<span class="w">    </span><span class="k">from</span><span class="w"> </span><span class="n">examination_info</span>
<span class="w">    </span><span class="k">where</span><span class="w"> </span><span class="n">tag</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s1">'SQL'</span>
<span class="w">    </span><span class="p">)</span><span class="w"> </span><span class="n">exam_info</span>
<span class="k">on</span><span class="w"> </span><span class="p">(</span><span class="n">rec</span><span class="p">.</span><span class="n">exam_id</span><span class="p">,</span><span class="w"> </span><span class="nb">date</span><span class="p">(</span><span class="n">rec</span><span class="p">.</span><span class="n">submit_time</span><span class="p">))</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">(</span><span class="n">exam_info</span><span class="p">.</span><span class="n">exam_id</span><span class="p">,</span><span class="w"> </span><span class="nb">date</span><span class="p">(</span><span class="n">exam_info</span><span class="p">.</span><span class="n">release_time</span><span class="p">))</span>
<span class="k">inner</span><span class="w"> </span><span class="k">join</span><span class="w"> </span><span class="p">(</span>
<span class="w">    </span><span class="k">select</span><span class="w"> </span><span class="n">uid</span>
<span class="w">    </span><span class="k">from</span><span class="w"> </span><span class="n">user_info</span>
<span class="w">    </span><span class="k">where</span><span class="w"> </span><span class="k">level</span><span class="w"> </span><span class="o">&gt;</span><span class="w"> </span><span class="mi">5</span>
<span class="w">    </span><span class="p">)</span><span class="w"> </span><span class="n">user_info</span>
<span class="k">on</span><span class="w"> </span><span class="n">rec</span><span class="p">.</span><span class="n">uid</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">user_info</span><span class="p">.</span><span class="n">uid</span>
<span class="k">group</span><span class="w"> </span><span class="k">by</span><span class="w"> </span><span class="n">rec</span><span class="p">.</span><span class="n">exam_id</span>
<span class="k">order</span><span class="w"> </span><span class="k">by</span><span class="w"> </span><span class="n">uv</span><span class="w"> </span><span class="k">desc</span><span class="p">,</span><span class="w"> </span><span class="n">avg_score</span><span class="w"> </span><span class="k">asc</span><span class="p">;</span>
</pre></div>
</div>
</div>
</section>
<section id="id8">
<h4 id="id8">æ‹¼æ¥<a class="headerlink" href="#id8" title="Link to this heading">Â¶</a></h4>
<table>
<thead>
<tr class="row-odd"><th class="head"></th>
<th class="head"></th>
<th class="head"><p>Notes</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>é€£æ¥å¤šè¡Œ</p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">group_concat([distincrt]</span> <span class="pre">col</span> <span class="pre">[order</span> <span class="pre">by</span> <span class="pre">asc/desc</span> <span class="pre">col][separator</span> <span class="pre">','])</span></code></p></td>
<td></td>
</tr>
<tr class="row-odd"><td><p>é€£æ¥å¤šåˆ—</p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">select</span> <span class="pre">concat(col1,</span> <span class="pre">',',</span> <span class="pre">col2,...)...;</span></code></p></td>
<td><p>æœ‰ä»€éº½é€£æ¥ä»€éº½</p></td>
</tr>
<tr class="row-even"><td></td>
<td><p><code class="docutils literal notranslate"><span class="pre">select</span> <span class="pre">concat_ws(',',</span> <span class="pre">col1,</span> <span class="pre">col2,</span> <span class="pre">...;)</span></code></p></td>
<td><p>æŒ‡å®šåˆ†éš”ç¬¦</p></td>
</tr>
</tbody>
</table>
<div class="admonition-idtag admonition hint">
<p class="admonition-title">è¯·ç»Ÿè®¡2021å¹´æ¯ä¸ªæœªå®Œæˆè¯•å·ä½œç­”æ•°å¤§äº1çš„æœ‰æ•ˆç”¨æˆ·çš„æ•°æ®ï¼ˆæœ‰æ•ˆç”¨æˆ·æŒ‡å®Œæˆè¯•å·ä½œç­”æ•°è‡³å°‘ä¸º1ä¸”æœªå®Œæˆæ•°å°äº5ï¼‰ï¼Œè¾“å‡ºç”¨æˆ·IDã€æœªå®Œæˆè¯•å·ä½œç­”æ•°ã€å®Œæˆè¯•å·ä½œç­”æ•°ã€ä½œç­”è¿‡çš„è¯•å·tagé›†åˆï¼ŒæŒ‰æœªå®Œæˆè¯•å·æ•°é‡ç”±å¤šåˆ°å°‘æ’åºã€‚</p>
<div class="admonition-distinct admonition danger">
<p class="admonition-title">å¦‚æœæ²’æœ‰ distinct</p>
</div>
<table>
<thead>
<tr class="row-odd"><th class="head"><p>å¯¦éš›</p></th>
<th class="head"><p>expected</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>dd2021-07-02:SQL;2021-07-05:SQL;</p></td>
<td><p>2021-07-02:SQL 2021-07-05:SQL;</p></td>
</tr>
<tr class="row-odd"><td><p><strong>2021-09-01:ç®—æ³•;2021-09-01:ç®—æ³•;</strong></p></td>
<td><p><strong>2021-09-01:ç®—æ³•</strong>;2021-09-02:SQL;</p></td>
</tr>
<tr class="row-even"><td><p>2021-09-02:SQL;2021-09-05:SQL</p></td>
<td><p>2021-09-05:SQL</p></td>
</tr>
</tbody>
</table>
<div class="highlight-sql notranslate"><div class="highlight"><pre><span></span><span class="k">select</span><span class="w"> </span><span class="n">rec</span><span class="p">.</span><span class="n">uid</span><span class="p">,</span>
<span class="w">    </span><span class="n">any_value</span><span class="p">(</span><span class="k">sum</span><span class="p">(</span><span class="k">case</span><span class="w"> </span><span class="k">when</span><span class="w"> </span><span class="n">rec</span><span class="p">.</span><span class="n">submit_time</span><span class="w"> </span><span class="k">is</span><span class="w"> </span><span class="k">null</span><span class="w"> </span><span class="k">then</span><span class="w"> </span><span class="mi">1</span><span class="w"> </span><span class="k">else</span><span class="w"> </span><span class="mi">0</span><span class="w"> </span><span class="k">end</span><span class="p">))</span><span class="w"> </span><span class="k">as</span><span class="w"> </span><span class="n">incomplete_cnt</span><span class="p">,</span>
<span class="w">    </span><span class="n">any_value</span><span class="p">(</span><span class="k">count</span><span class="p">(</span><span class="n">rec</span><span class="p">.</span><span class="n">submit_time</span><span class="p">))</span><span class="w"> </span><span class="k">as</span><span class="w"> </span><span class="n">complete_cnt</span><span class="p">,</span>
<span class="w">    </span><span class="n">any_value</span><span class="p">(</span><span class="n">group_concat</span><span class="p">(</span><span class="w"> </span><span class="k">distinct</span>
<span class="w">        </span><span class="n">concat_ws</span><span class="p">(</span><span class="s1">':'</span><span class="p">,</span><span class="w"> </span><span class="nb">date</span><span class="p">(</span><span class="n">rec</span><span class="p">.</span><span class="n">start_time</span><span class="p">),</span><span class="w"> </span><span class="n">info</span><span class="p">.</span><span class="n">tag</span><span class="p">)</span>
<span class="w">        </span><span class="k">order</span><span class="w"> </span><span class="k">by</span><span class="w"> </span><span class="n">rec</span><span class="p">.</span><span class="n">start_time</span><span class="w"> </span><span class="n">separator</span><span class="w"> </span><span class="s1">';'</span>
<span class="w">    </span><span class="p">))</span><span class="w"> </span><span class="k">as</span><span class="w"> </span><span class="n">detail</span>
<span class="k">from</span><span class="w"> </span><span class="p">(</span>
<span class="w">    </span><span class="k">select</span><span class="w"> </span><span class="n">submit_time</span><span class="p">,</span><span class="w"> </span><span class="n">start_time</span><span class="p">,</span><span class="w"> </span><span class="n">exam_id</span><span class="p">,</span><span class="w"> </span><span class="n">uid</span>
<span class="w">    </span><span class="k">from</span><span class="w"> </span><span class="n">exam_record</span>
<span class="w">    </span><span class="k">where</span><span class="w"> </span><span class="k">year</span><span class="p">(</span><span class="n">start_time</span><span class="p">)</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">2021</span>
<span class="w">    </span><span class="p">)</span><span class="w"> </span><span class="k">as</span><span class="w"> </span><span class="n">rec</span>
<span class="k">inner</span><span class="w"> </span><span class="k">join</span><span class="w"> </span><span class="n">examination_info</span><span class="w"> </span><span class="n">info</span>
<span class="k">on</span><span class="w"> </span><span class="n">rec</span><span class="p">.</span><span class="n">exam_id</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">info</span><span class="p">.</span><span class="n">exam_id</span>
<span class="k">group</span><span class="w"> </span><span class="k">by</span><span class="w"> </span><span class="n">rec</span><span class="p">.</span><span class="n">uid</span>
<span class="k">having</span><span class="w"> </span><span class="n">incomplete_cnt</span><span class="w"> </span><span class="o">&lt;</span><span class="w"> </span><span class="mi">5</span><span class="w"> </span><span class="k">and</span><span class="w"> </span><span class="n">complete_cnt</span><span class="w"> </span><span class="o">&gt;=</span><span class="w"> </span><span class="mi">1</span><span class="w"> </span><span class="k">and</span><span class="w"> </span><span class="n">incomplete_cnt</span><span class="w"> </span><span class="o">&gt;</span><span class="w"> </span><span class="mi">1</span>
<span class="k">order</span><span class="w"> </span><span class="k">by</span><span class="w"> </span><span class="n">incomplete_cnt</span><span class="w"> </span><span class="k">desc</span>
</pre></div>
</div>
</div>
</section>
</section>
<section id="id9">
<h3 id="id9">åˆ†ç»„<a class="headerlink" href="#id9" title="Link to this heading">Â¶</a></h3>
<div class="admonition- admonition hint">
<p class="admonition-title">åœ¨æ—¥å¸¸å·¥ä½œä¸­ï¼Œç»å¸¸ä¼šé‡åˆ°éœ€è¦åœ¨æ¯ç»„å†…æ’åï¼Œæ¯”å¦‚ä¸‹é¢çš„ä¸šåŠ¡éœ€æ±‚ï¼š</p>
<ul class="simple">
<li><p><strong>æ’åé—®é¢˜</strong>ï¼šæ¯ä¸ªéƒ¨é—¨æŒ‰ä¸šç»©æ¥æ’å</p></li>
<li><p><strong>topN é—®é¢˜</strong>ï¼šæ‰¾å‡ºæ¯ä¸ªéƒ¨é—¨æ’åå‰Nçš„å‘˜å·¥è¿›è¡Œå¥–åŠ±</p></li>
</ul>
<p>éå…¨å±€æ’åºï¼Œéœ€è¦åœ¨æŸä¸ªç»´åº¦ä¸‹è¿›è¡Œæ’åº</p>
</div>
<section id="id10">
<h4 id="id10">çª—å£å‡½æ•°<a class="headerlink" href="#id10" title="Link to this heading">Â¶</a></h4>
<p>çª—å£å‡½æ•°, OLAP, Online Anallytical Processingï¼Œè”æœºåˆ†æå¤„ç†ï¼Œå¯ä»¥å¯¹æ•°æ®åº“æ•°æ®è¿›è¡Œå®æ—¶åˆ†æå¤„ç†ã€‚</p>
<ul>
<li><p>åŒæ—¶å…·æœ‰åˆ†ç»„å’Œæ’åºçš„åŠŸèƒ½</p></li>
<li><p>ä¸å‡å°‘åŸè¡¨çš„è¡Œæ•°</p>
<blockquote>
<div><p><code class="docutils literal notranslate"><span class="pre">&lt;çª—å£å‡½æ•°&gt;</span> <span class="pre">over</span> <span class="pre">(partition</span> <span class="pre">by</span> <span class="pre">&lt;ç”¨äºåˆ†ç»„çš„åˆ—å&gt;</span> <span class="pre">order</span> <span class="pre">by</span> <span class="pre">&lt;ç”¨äºæ’åºçš„åˆ—å&gt;)</span></code></p>
</div></blockquote>
</li>
<li><dl>
<dt><code class="docutils literal notranslate"><span class="pre">&lt;çª—å£å‡½æ•°&gt;</span></code></dt><dd><p>æ˜¯å¯¹ <code class="docutils literal notranslate"><span class="pre">where</span></code> æˆ–è€… <code class="docutils literal notranslate"><span class="pre">group</span> <span class="pre">by</span></code> å­å¥å¤„ç†åçš„ç»“æœè¿›è¡Œæ“ä½œï¼Œæ‰€ä»¥çª—å£å‡½æ•°åŸåˆ™ä¸Šåªèƒ½å†™åœ¨ <code class="docutils literal notranslate"><span class="pre">select</span></code> å­å¥ä¸­</p>
<ul>
<li><dl>
<dt>ä¸“ç”¨çª—å£å‡½æ•°ï¼Œ <code class="docutils literal notranslate"><span class="pre">rank,</span> <span class="pre">dense_rank,</span> <span class="pre">row_number</span></code></dt><dd><table>
<thead>
<tr class="row-odd"><th class="head"><p>æ’åºç›¸åŒæ—¶</p></th>
<th class="head"><p>ä¼šé‡å¤</p></th>
<th class="head"><p>ç»´æŒæ€»æ•°</p></th>
<th class="head"><p>æ’åºç»“æœ</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">rank()</span></code></p></td>
<td><p>âœ…</p></td>
<td><p>âœ…</p></td>
<td><p>1ã€1ã€3</p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">dense_rank()</span></code></p></td>
<td><p>âœ…</p></td>
<td><p>âŒ</p></td>
<td><p>1ã€1ã€2</p></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">row_number()</span></code></p></td>
<td><p>âŒ</p></td>
<td><p>âœ…</p></td>
<td><p>1ã€2ã€3ï¼ˆæ ¹æ®primary key æ¥ï¼‰</p></td>
</tr>
</tbody>
</table>
</dd>
</dl>
</li>
<li><p>èšåˆå‡½æ•°ï¼Œå¦‚ <code class="docutils literal notranslate"><span class="pre">sum.</span> <span class="pre">avg,</span> <span class="pre">count,</span> <span class="pre">max,</span> <span class="pre">min</span></code> ç­‰</p></li>
</ul>
</dd>
</dl>
</li>
<li><dl class="simple">
<dt><code class="docutils literal notranslate"><span class="pre">partition</span> <span class="pre">by</span></code></dt><dd><p>å¯çœç•¥ï¼Œçœç•¥å°±æ˜¯ä¸æŒ‡å®šåˆ†ç»„, ä½†æ˜¯ï¼Œè¿™å°±å¤±å»äº†çª—å£å‡½æ•°çš„åŠŸèƒ½ï¼Œæ‰€ä»¥ä¸€èˆ¬ä¸è¦è¿™ä¹ˆä½¿ç”¨</p>
</dd>
</dl>
</li>
</ul>
<div class="highlight-sql notranslate"><div class="highlight"><pre><span></span><span class="o">#</span><span class="w"> </span><span class="mi">1</span><span class="p">.</span><span class="w"> </span><span class="err">ã€ä¸“ç”¨çª—å£å‡½æ•°ã€‘ä¸è¦åˆ†ç»„</span>
<span class="k">select</span><span class="w"> </span><span class="n">id</span><span class="p">,</span><span class="w"> </span><span class="k">class</span><span class="p">,</span><span class="w"> </span><span class="n">score</span><span class="p">,</span>
<span class="w">    </span><span class="n">rank</span><span class="p">()</span><span class="w"> </span><span class="n">over</span><span class="w"> </span><span class="p">(</span><span class="k">order</span><span class="w"> </span><span class="k">by</span><span class="w"> </span><span class="n">score</span><span class="w"> </span><span class="k">desc</span><span class="p">)</span><span class="w"> </span><span class="k">as</span><span class="w"> </span><span class="n">ranking</span><span class="p">,</span>
<span class="w">    </span><span class="n">dense_rank</span><span class="p">()</span><span class="w"> </span><span class="n">over</span><span class="w"> </span><span class="p">(</span><span class="k">order</span><span class="w"> </span><span class="k">by</span><span class="w"> </span><span class="n">score</span><span class="w"> </span><span class="k">desc</span><span class="p">)</span><span class="w"> </span><span class="k">as</span><span class="w"> </span><span class="n">dese_rank</span><span class="p">,</span>
<span class="w">    </span><span class="n">row_number</span><span class="p">()</span><span class="w"> </span><span class="n">over</span><span class="w"> </span><span class="p">(</span><span class="k">order</span><span class="w"> </span><span class="k">by</span><span class="w"> </span><span class="n">score</span><span class="w"> </span><span class="k">desc</span><span class="p">)</span><span class="w"> </span><span class="k">as</span><span class="w"> </span><span class="n">row_num</span>
<span class="k">from</span><span class="w"> </span><span class="n">scores</span><span class="p">;</span>

<span class="o">#</span><span class="w"> </span><span class="mi">2</span><span class="p">.</span><span class="w"> </span><span class="err">ã€ä¸“ç”¨çª—å£å‡½æ•°ã€‘è¦åˆ†ç»„</span>
<span class="k">select</span><span class="w"> </span><span class="n">id</span><span class="p">,</span><span class="w"> </span><span class="k">class</span><span class="p">,</span><span class="w"> </span><span class="n">score</span><span class="p">,</span>
<span class="w">    </span><span class="n">rank</span><span class="p">()</span><span class="w"> </span><span class="n">over</span><span class="w"> </span><span class="p">(</span><span class="n">partition</span><span class="w"> </span><span class="k">by</span><span class="w"> </span><span class="k">class</span><span class="w"> </span><span class="k">order</span><span class="w"> </span><span class="k">by</span><span class="w"> </span><span class="n">score</span><span class="w"> </span><span class="k">desc</span><span class="p">)</span><span class="w"> </span><span class="k">as</span><span class="w"> </span><span class="n">ranking</span><span class="p">,</span>
<span class="w">    </span><span class="n">dense_rank</span><span class="p">()</span><span class="w"> </span><span class="n">over</span><span class="w"> </span><span class="p">(</span><span class="n">partition</span><span class="w"> </span><span class="k">by</span><span class="w"> </span><span class="k">class</span><span class="w"> </span><span class="k">order</span><span class="w"> </span><span class="k">by</span><span class="w"> </span><span class="n">score</span><span class="w"> </span><span class="k">desc</span><span class="p">)</span><span class="w"> </span><span class="k">as</span><span class="w"> </span><span class="n">dese_rank</span><span class="p">,</span>
<span class="w">    </span><span class="n">row_number</span><span class="p">()</span><span class="w"> </span><span class="n">over</span><span class="w"> </span><span class="p">(</span><span class="n">partition</span><span class="w"> </span><span class="k">by</span><span class="w"> </span><span class="k">class</span><span class="w">  </span><span class="k">order</span><span class="w"> </span><span class="k">by</span><span class="w"> </span><span class="n">score</span><span class="w"> </span><span class="k">desc</span><span class="p">)</span><span class="w"> </span><span class="k">as</span><span class="w"> </span><span class="n">row_num</span>
<span class="k">from</span><span class="w"> </span><span class="n">scores</span><span class="p">;</span>

<span class="o">#</span><span class="w"> </span><span class="mi">3</span><span class="p">.</span><span class="w"> </span><span class="err">ã€èšåˆå‡½æ•°ã€‘è¦åˆ†ç»„</span>
</pre></div>
</div>
<ul class="simple">
<li><p>[é€šä¿—æ˜“æ‡‚çš„å­¦ä¼šï¼šSQLçª—å£å‡½æ•°]</p></li>
</ul>
<section id="id11">
<h5 id="id11">å¸¸è§ä¸šåŠ¡<a class="headerlink" href="#id11" title="Link to this heading">Â¶</a></h5>
<ul>
<li><dl>
<dt>æœ€ä½æœ€é«˜</dt><dd><div class="admonition-gpa-gpa admonition hint">
<p class="admonition-title">ç°åœ¨è¿è¥æƒ³è¦æ‰¾åˆ°æ¯ä¸ªå­¦æ ¡gpaæœ€ä½çš„åŒå­¦æ¥åšè°ƒç ”ï¼Œè¯·ä½ å–å‡ºæ¯ä¸ªå­¦æ ¡çš„æœ€ä½gpa</p>
<p>å…ˆæŒ‰ å­¦æ ¡åˆ†ç»„å’Œå¯¹æˆç»©æ’åï¼Œè€Œä¸èƒ½ç”¨ <code class="docutils literal notranslate"><span class="pre">min</span></code></p>
<div class="highlight-sql notranslate"><div class="highlight"><pre><span></span><span class="k">select</span><span class="w"> </span><span class="n">device_id</span><span class="p">,</span><span class="w"> </span><span class="n">university</span><span class="p">,</span><span class="w"> </span><span class="n">gpa</span>
<span class="k">from</span><span class="p">(</span>
<span class="w">    </span><span class="k">select</span><span class="w"> </span><span class="n">device_id</span><span class="p">,</span><span class="w"> </span><span class="n">university</span><span class="p">,</span><span class="w"> </span><span class="n">gpa</span><span class="p">,</span>
<span class="w">        </span><span class="n">rank</span><span class="p">()</span><span class="w"> </span><span class="n">over</span><span class="w"> </span><span class="p">(</span><span class="n">partition</span><span class="w"> </span><span class="k">by</span><span class="w"> </span><span class="n">university</span><span class="w"> </span><span class="k">order</span><span class="w"> </span><span class="k">by</span><span class="w"> </span><span class="n">gpa</span><span class="p">)</span><span class="w"> </span><span class="k">as</span><span class="w"> </span><span class="n">rk</span>
<span class="w">    </span><span class="k">from</span><span class="w"> </span><span class="n">user_profile</span>
<span class="w">    </span><span class="p">)</span><span class="w"> </span><span class="n">olap</span>
<span class="k">where</span><span class="w"> </span><span class="n">olap</span><span class="p">.</span><span class="n">rk</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">1</span><span class="p">;</span>
</pre></div>
</div>
</div>
</dd>
</dl>
</li>
<li><dl>
<dt>ç´¯ç§¯ç™¾åˆ†æ¯”</dt><dd><div class="admonition-xx-xx admonition hint">
<p class="admonition-title">æƒ³çœ‹å‰XX%çš„ç”¨æˆ·è´¡çŒ®äº†XX%çš„æ€»é¢ã€‚</p>
</div>
</dd>
</dl>
</li>
<li><p>[hive sql]</p></li>
</ul>
</section>
</section>
</section>
</section>
<section id="operations">
<h2 id="operations">operations<a class="headerlink" href="#operations" title="Link to this heading">Â¶</a></h2>
<section id="insert">
<h3 id="insert">insert<a class="headerlink" href="#insert" title="Link to this heading">Â¶</a></h3>
<table>
<thead>
<tr class="row-odd"><th class="head"><p>ä½¿ç”¨åœºæ™¯</p></th>
<th class="head"></th>
<th class="head"><p>è¯­å¥</p></th>
<th class="head"></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>å†™ä¸Šcols</p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">insert</span> <span class="pre">into</span> <span class="pre">users(col1,</span> <span class="pre">col2,...)</span> <span class="pre">values</span> <span class="pre">(row1),</span> <span class="pre">(row2),..;</span></code></p></td>
<td><p>å­—æ®µå’Œvalueä¸€ä¸€å¯¹åº”, nullå¯ä»¥ä¸å†™</p></td>
<td></td>
</tr>
<tr class="row-odd"><td><p>å¯¼å…¥æ•°æ®</p></td>
<td><p>Ta-&gt; Tb</p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">insert</span> <span class="pre">into</span> <span class="pre">Tb(b1,</span> <span class="pre">b2,</span> <span class="pre">...)</span> <span class="pre">select</span> <span class="pre">a1,</span> <span class="pre">a2,...</span> <span class="pre">from</span> <span class="pre">Ta</span> <span class="pre">where</span> <span class="pre">conditions;</span></code></p></td>
<td><p>åå­—å¯ä»¥ä¸ä¸€æ ·ä½†æ˜¯æ•°æ®ç±»å‹è¦ä¸€æ ·</p></td>
</tr>
</tbody>
</table>
<div class="admonition-insert-into-tb-b1-b2-select-a1-a2-from-ta-where-conditions-values admonition danger">
<p class="admonition-title"><code class="docutils literal notranslate"><span class="pre">insert</span> <span class="pre">into</span> <span class="pre">Tb(b1,</span> <span class="pre">b2,</span> <span class="pre">...)</span> <span class="pre">select</span> <span class="pre">a1,</span> <span class="pre">a2,...</span> <span class="pre">from</span> <span class="pre">Ta</span> <span class="pre">where</span> <span class="pre">conditions;</span></code>  æ²¡æœ‰values</p>
<p>selectè¯»å‡ºæ¥æ˜¯å¤šè¡Œå¤šåˆ—ï¼Œè€Œvaluesä¸€ä¸ªæ‹¬å·ä¸€æ¬¡åªèƒ½å­˜å…¥ä¸€è¡Œæ•°æ®</p>
</div>
<ul class="simple">
<li><dl class="simple">
<dt>primary key</dt><dd><ul>
<li><dl class="simple">
<dt>è‡ªå¢ id</dt><dd><ul>
<li><p>é»˜è®¤ä» 0 å¼€å§‹</p></li>
<li><p>æ’å…¥æ—¶å†™  <code class="docutils literal notranslate"><span class="pre">0,</span> <span class="pre">null,</span> <span class="pre">default</span></code>  ï¼Œå°±ä¼šè‡ªåŠ¨å¡«å…… id</p></li>
<li><p>å†™åˆ—åçš„æ—¶å€™å¯ä»¥è·³ï¼Œä½†æ˜¯ä¸å†™å­—æ®µåçš„æ—¶å€™è¦å†™</p></li>
</ul>
</dd>
</dl>
</li>
</ul>
</dd>
</dl>
</li>
</ul>
<div class="admonition- admonition danger">
<p class="admonition-title">æ’å…¥é‡å¤é—®é¢˜</p>
<div class="line-block">
<div class="line">æŒ‡çš„æ˜¯ primary key</div>
<div class="line">Duplicate entry â€˜1â€™ for key â€˜PRIMARYâ€™</div>
</div>
</div>
<table>
<thead>
<tr class="row-odd"><th class="head"><p>sql</p></th>
<th class="head"><p>meaning</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">insert</span> <span class="pre">into</span> <span class="pre">users</span> <span class="pre">values</span> <span class="pre">...;</span></code></p></td>
<td><p>å¦‚æœå·²ç»æœ‰äº†å°±æŠ¥é”™</p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">insert</span> <span class="pre">ignore</span> <span class="pre">into</span> <span class="pre">users</span> <span class="pre">values</span> <span class="pre">...;</span></code></p></td>
<td><p>å¦‚æœæœ‰äº†å°± ignoreï¼Œç»§ç»­</p></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">replace</span> <span class="pre">users</span> <span class="pre">values</span> <span class="pre">...;</span></code></p></td>
<td><p>æ— è®ºå¦‚ä½•éƒ½è¦æ’å…¥ï¼Œæœ‰äº†å°± update</p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">insert</span> <span class="pre">into</span> <span class="pre">users</span> <span class="pre">values</span> <span class="pre">...</span> <span class="pre">on</span> <span class="pre">duplicate</span> <span class="pre">key</span> <span class="pre">update</span> <span class="pre">col1</span> <span class="pre">=</span> <span class="pre">value1,</span> <span class="pre">col2</span> <span class="pre">=</span> <span class="pre">value2;</span></code></p></td>
<td><p>æ— è®ºå¦‚ä½•éƒ½è¦æ’å…¥ï¼Œæœ‰äº†å°± update æŒ‡å®šçš„å­—æ®µ</p></td>
</tr>
</tbody>
</table>
<div class="admonition-exam-record-10012021911011129001-50-90-10022021947129002-10exam-record admonition hint">
<p class="admonition-title">ç‰›å®¢åå°ä¼šè®°å½•æ¯ä¸ªç”¨æˆ·çš„è¯•å·ä½œç­”è®°å½•åˆ°exam_recordè¡¨ï¼Œç°åœ¨æœ‰ä¸¤ä¸ªç”¨æˆ·çš„ä½œç­”è®°å½•è¯¦æƒ…å¦‚ä¸‹ï¼šç”¨æˆ·1001åœ¨2021å¹´9æœˆ1æ—¥æ™šä¸Š10ç‚¹11åˆ†12ç§’å¼€å§‹ä½œç­”è¯•å·9001ï¼Œå¹¶åœ¨50åˆ†é’Ÿåæäº¤ï¼Œå¾—äº†90åˆ†ï¼›ç”¨æˆ·1002åœ¨2021å¹´9æœˆ4æ—¥ä¸Šåˆ7ç‚¹1åˆ†2ç§’å¼€å§‹ä½œç­”è¯•å·9002ï¼Œå¹¶åœ¨10åˆ†é’Ÿåé€€å‡ºäº†å¹³å°ã€‚è¯•å·ä½œç­”è®°å½•è¡¨exam_recordä¸­ï¼Œè¡¨å·²å»ºå¥½ï¼Œå…¶ç»“æ„å¦‚ä¸‹ï¼Œè¯·ç”¨ä¸€æ¡è¯­å¥å°†è¿™ä¸¤æ¡è®°å½•æ’å…¥è¡¨ä¸­ã€‚</p>
<p>æ²¡æœ‰æäº¤å°±æ˜¯null submit time</p>
</div>
<div class="highlight-sql notranslate"><div class="highlight"><pre><span></span><span class="k">insert</span><span class="w"> </span><span class="k">into</span><span class="w"> </span><span class="n">exam_record</span>
<span class="k">values</span>
<span class="w">    </span><span class="p">(</span><span class="k">default</span><span class="p">,</span><span class="w"> </span><span class="mi">1001</span><span class="p">,</span><span class="w"> </span><span class="mi">9001</span><span class="p">,</span><span class="w"> </span><span class="s1">'2021-09-01 22:11:12'</span><span class="p">,</span><span class="w"> </span><span class="n">date_add</span><span class="p">(</span><span class="s1">'2021-09-01 22:11:12'</span><span class="p">,</span><span class="w"> </span><span class="nb">interval</span><span class="w"> </span><span class="mi">50</span><span class="w"> </span><span class="k">minute</span><span class="p">),</span><span class="w"> </span><span class="mi">90</span><span class="p">),</span>
<span class="w">    </span><span class="p">(</span><span class="k">default</span><span class="p">,</span><span class="w"> </span><span class="mi">1002</span><span class="p">,</span><span class="w"> </span><span class="mi">9002</span><span class="p">,</span><span class="w"> </span><span class="s1">'2021-09-04 07:01:02'</span><span class="p">,</span><span class="w"> </span><span class="k">default</span><span class="p">,</span><span class="w"> </span><span class="k">default</span><span class="p">);</span>
</pre></div>
</div>
<div class="admonition-exam-record admonition hint">
<p class="admonition-title">ç°æœ‰ä¸€å¼ è¯•å·ä½œç­”è®°å½•è¡¨exam_recordï¼Œç»“æ„å¦‚ä¸‹è¡¨ï¼Œå…¶ä¸­åŒ…å«å¤šå¹´æ¥çš„ç”¨æˆ·ä½œç­”è¯•å·è®°å½•ï¼Œç”±äºæ•°æ®è¶Šæ¥è¶Šå¤šï¼Œç»´æŠ¤éš¾åº¦è¶Šæ¥è¶Šå¤§ï¼Œéœ€è¦å¯¹æ•°æ®è¡¨å†…å®¹åšç²¾ç®€ï¼Œå†å²æ•°æ®åšå¤‡ä»½ã€‚</p>
</div>
</section>
<section id="alter-update">
<h3 id="alter-update">alter &amp; update<a class="headerlink" href="#alter-update" title="Link to this heading">Â¶</a></h3>
<section id="alter-scheme">
<h4 id="alter-scheme"><code class="docutils literal notranslate"><span class="pre">alter</span></code>  åŸºäºè¡¨ scheme<a class="headerlink" href="#alter-scheme" title="Link to this heading">Â¶</a></h4>
<div class="admonition-alter-table-users admonition danger">
<p class="admonition-title"><code class="docutils literal notranslate"><span class="pre">alter</span> <span class="pre">table</span> <span class="pre">users</span></code>  æ¯ä¸€å¥éƒ½è¦å†™</p>
</div>
<table>
<thead>
<tr class="row-odd"><th class="head"><p>cases</p></th>
<th class="head"><p>åŸºäºè¡¨ scheme</p></th>
<th class="head"></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>æ·»åŠ åˆ—</p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">alter</span> <span class="pre">table</span> <span class="pre">users</span> <span class="pre">add</span> <span class="pre">column</span> <span class="pre">col1</span> <span class="pre">int</span> <span class="pre">[first_after</span> <span class="pre">col5]</span></code></p></td>
<td><p>é»˜è®¤æ·»åŠ åˆ°æœ€åä¸€åˆ—</p></td>
</tr>
<tr class="row-odd"><td><p>ä¿®æ”¹åˆ—çš„ç±»å‹æˆ–çº¦æŸ</p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">alter</span> <span class="pre">table</span> <span class="pre">users</span> <span class="pre">modify</span> <span class="pre">column</span> <span class="pre">col1</span> <span class="pre">char</span> <span class="pre">constraint;</span></code></p></td>
<td></td>
</tr>
<tr class="row-even"><td><p>ä¿®æ”¹åˆ—å</p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">alter</span> <span class="pre">table</span> <span class="pre">users</span> <span class="pre">change</span> <span class="pre">column</span> <span class="pre">old_col1</span> <span class="pre">new_col1</span> <span class="pre">char;</span></code></p></td>
<td></td>
</tr>
<tr class="row-odd"><td><p>åˆ é™¤åˆ—</p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">alter</span> <span class="pre">table</span> <span class="pre">users</span> <span class="pre">drop</span> <span class="pre">column</span> <span class="pre">col1;</span></code></p></td>
<td></td>
</tr>
<tr class="row-even"><td><p>ä¿®æ”¹è¡¨å</p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">alter</span> <span class="pre">table</span> <span class="pre">old_users</span> <span class="pre">rename</span> <span class="pre">new_users;</span></code></p></td>
<td></td>
</tr>
<tr class="row-odd"><td><p>å°†æŸä¸€åˆ—æ”¾åˆ°ç¬¬ä¸€åˆ—</p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">alter</span> <span class="pre">table</span> <span class="pre">usrs</span> <span class="pre">modify</span> <span class="pre">column</span> <span class="pre">col1</span> <span class="pre">int</span> <span class="pre">first;</span></code></p></td>
<td></td>
</tr>
</tbody>
</table>
<div class="admonition-level15school-jobprofession-varchar10-achievement0 admonition hint">
<p class="admonition-title">è¯·åœ¨ç”¨æˆ·ä¿¡æ¯è¡¨ï¼Œå­—æ®µlevelçš„åé¢å¢åŠ ä¸€åˆ—æœ€å¤šå¯ä¿å­˜15ä¸ªæ±‰å­—çš„å­—æ®µschoolï¼›å¹¶å°†è¡¨ä¸­jobåˆ—åæ”¹ä¸ºprofessionï¼ŒåŒæ—¶varcharå­—æ®µé•¿åº¦å˜ä¸º10ï¼›achievementçš„é»˜è®¤å€¼è®¾ç½®ä¸º0ã€‚</p>
</div>
<div class="highlight-sql notranslate"><div class="highlight"><pre><span></span><span class="k">alter</span><span class="w"> </span><span class="k">table</span><span class="w"> </span><span class="n">user_info</span><span class="w"> </span><span class="k">add</span><span class="w"> </span><span class="k">column</span><span class="w"> </span><span class="n">school</span><span class="w"> </span><span class="nb">varchar</span><span class="p">(</span><span class="mi">15</span><span class="p">)</span><span class="w"> </span><span class="k">after</span><span class="w"> </span><span class="k">level</span><span class="p">;</span>
<span class="k">alter</span><span class="w"> </span><span class="k">table</span><span class="w"> </span><span class="n">user_info</span><span class="w"> </span><span class="n">change</span><span class="w"> </span><span class="k">column</span><span class="w"> </span><span class="n">job</span><span class="w"> </span><span class="n">profession</span><span class="w"> </span><span class="nb">varchar</span><span class="p">(</span><span class="mi">10</span><span class="p">);</span>
<span class="k">alter</span><span class="w"> </span><span class="k">table</span><span class="w"> </span><span class="n">user_info</span><span class="w"> </span><span class="k">modify</span><span class="w"> </span><span class="k">column</span><span class="w"> </span><span class="n">achievement</span><span class="w"> </span><span class="nb">int</span><span class="p">(</span><span class="mi">11</span><span class="p">)</span><span class="w"> </span><span class="k">default</span><span class="w"> </span><span class="mi">0</span><span class="p">;</span>
</pre></div>
</div>
</section>
<section id="update-records">
<h4 id="update-records"><code class="docutils literal notranslate"><span class="pre">update</span></code>   åŸºäºè®°å½• records<a class="headerlink" href="#update-records" title="Link to this heading">Â¶</a></h4>
<div class="admonition-update admonition danger">
<p class="admonition-title">update</p>
<ul class="simple">
<li><p>æ›´æ–°çš„å€¼è¦æ»¡è¶³å»ºè¡¨æ—¶çš„å­—æ®µç±»å‹ã€‚æ¯”å¦‚scoreæ˜¯intç±»å‹å°±ä¸èƒ½æ›´æ–°ä¸ºcharç±»å‹ã€‚</p></li>
<li><p>æ›´æ–°çš„æ—¶å€™æ˜¯æŒ‰ç…§ä»£ç è¯­å¥çš„å…ˆåé¡ºåºæ›´æ–°çš„ã€‚</p></li>
</ul>
</div>
<table>
<thead>
<tr class="row-odd"><th class="head"><p>when</p></th>
<th class="head"><p>åŸºäºè®°å½• records</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>å®Œå…¨ä¸€ä¸ªå€¼</p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">update</span> <span class="pre">users</span> <span class="pre">set</span> <span class="pre">col1</span> <span class="pre">=</span> <span class="pre">val1,</span> <span class="pre">col2</span> <span class="pre">=</span> <span class="pre">val2,...</span> <span class="pre">where</span> <span class="pre">condition;</span></code></p></td>
</tr>
<tr class="row-odd"><td><p>partialä¸€ä¸ªå€¼</p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">update</span> <span class="pre">users</span> <span class="pre">set</span> <span class="pre">col1</span> <span class="pre">=</span> <span class="pre">replace(col1,</span> <span class="pre">'old','new'),...;</span></code></p></td>
</tr>
<tr class="row-even"><td><p>å¤šä¸ªå€¼</p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">update</span> <span class="pre">users</span> <span class="pre">set</span> <span class="pre">col1</span> <span class="pre">if(condition,val1,</span> <span class="pre">val2);</span></code> <code class="docutils literal notranslate"><span class="pre">case</span></code>  ä¹Ÿå¯ä»¥</p></td>
</tr>
</tbody>
</table>
</section>
</section>
<section id="delete-truncate">
<h3 id="delete-truncate">delete &amp; truncate<a class="headerlink" href="#delete-truncate" title="Link to this heading">Â¶</a></h3>
<div class="admonition-truncate-drop admonition danger">
<p class="admonition-title">â€œéå¿…è¦ä¸è¦ç”¨ truncate æˆ– dropâ€</p>
</div>
<table>
<thead>
<tr class="row-odd"><th class="head"><p>case</p></th>
<th class="head"><p>sql</p></th>
<th class="head"></th>
<th class="head"><p>è‡ªå¢å€¼é‡ç½®</p></th>
<th class="head"><p>rollback</p></th>
<th class="head"><p>é€Ÿåº¦</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>åˆ é™¤è®°å½•</p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">delete</span> <span class="pre">from</span> <span class="pre">users</span> <span class="pre">where</span> <span class="pre">condition;</span></code></p></td>
<td><p>DMLï¼Œå¯åŠ where</p></td>
<td><p>âŒ</p></td>
<td><p>âœ…</p></td>
<td><p>3</p></td>
</tr>
<tr class="row-odd"><td><p>æ¸…ç©ºæˆªæ–­è¡¨</p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">truncate</span> <span class="pre">users;</span></code></p></td>
<td><p>DDLï¼Œdrop ä¹‹åå† create æ–°çš„ï¼Œæœ‰dropçš„æƒé™</p></td>
<td><p>âœ…</p></td>
<td><p>âŒ</p></td>
<td><p>2</p></td>
</tr>
<tr class="row-even"><td><p>é”€æ¯è¡¨ã€è§†å›¾</p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">drop</span> <span class="pre">users;</span></code></p></td>
<td><p>DDLï¼Œ</p></td>
<td><p>éƒ½æ²¡äº†</p></td>
<td><p>âŒ</p></td>
<td><p>1</p></td>
</tr>
</tbody>
</table>
<div class="admonition-exam-record-5-3-exam-record-start-time-submit-time admonition hint">
<p class="admonition-title">è¯·åˆ é™¤ exam_record è¡¨ä¸­æœªå®Œæˆä½œç­”æˆ–ä½œç­”æ—¶é—´å°äº5åˆ†é’Ÿæ•´çš„è®°å½•ä¸­ï¼Œå¼€å§‹ä½œç­”æ—¶é—´æœ€æ—©çš„3æ¡è®°å½•ã€‚ä½œç­”è®°å½•è¡¨ exam_record, start_time æ˜¯è¯•å·å¼€å§‹æ—¶é—´ã€‚submit_time æ˜¯äº¤å·æ—¶é—´ï¼Œå³ç»“æŸæ—¶é—´ï¼Œå¦‚æœæœªå®Œæˆçš„è¯ï¼Œåˆ™ä¸ºç©ºã€‚</p>
<div class="highlight-sql notranslate"><div class="highlight"><pre><span></span><span class="k">delete</span><span class="w"> </span><span class="k">from</span><span class="w"> </span><span class="n">exam_record</span>
<span class="k">where</span><span class="w"> </span><span class="n">submit_time</span><span class="w"> </span><span class="k">is</span><span class="w"> </span><span class="k">null</span><span class="w"> </span><span class="k">or</span>
<span class="w">    </span><span class="n">timestampdiff</span><span class="p">(</span><span class="k">minute</span><span class="p">,</span><span class="w"> </span><span class="n">start_time</span><span class="p">,</span><span class="w"> </span><span class="n">submit_time</span><span class="p">)</span><span class="w"> </span><span class="o">&lt;</span><span class="w"> </span><span class="mi">5</span>
<span class="k">order</span><span class="w"> </span><span class="k">by</span><span class="w"> </span><span class="n">start_time</span>
<span class="k">limit</span><span class="w"> </span><span class="mi">3</span><span class="p">;</span>
</pre></div>
</div>
</div>
</section>
<section id="create">
<h3 id="create">create<a class="headerlink" href="#create" title="Link to this heading">Â¶</a></h3>
<div class="highlight-sql notranslate"><div class="highlight"><pre><span></span><span class="k">create</span><span class="w"> </span><span class="k">table</span><span class="w"> </span><span class="p">[</span><span class="k">if</span><span class="w"> </span><span class="k">not</span><span class="w"> </span><span class="k">exists</span><span class="p">]</span><span class="w"> </span><span class="n">users</span>
<span class="p">(</span>
<span class="w">    </span><span class="n">col1</span><span class="w"> </span><span class="nb">int</span><span class="w"> </span><span class="p">[</span><span class="w"> </span><span class="k">primary</span><span class="w"> </span><span class="k">key</span>
<span class="w">                </span><span class="k">foreign</span><span class="w"> </span><span class="k">key</span>
<span class="w">                </span><span class="n">auto_increment</span><span class="w">  </span><span class="o">#</span><span class="err">è‡ªå¢</span>
<span class="w">                </span><span class="k">comment</span><span class="w"> </span><span class="p">...</span><span class="w">  </span><span class="o">#</span><span class="err">æ³¨é‡Š</span>
<span class="w">                </span><span class="k">default</span><span class="w"> </span><span class="n">default_val</span><span class="o">/</span><span class="w"> </span><span class="k">current_timestamp</span><span class="w"> </span><span class="o">#</span><span class="w"> </span><span class="err">å½“å‰æ—¶é—´æˆ³</span>
<span class="w">                </span><span class="k">unique</span>
<span class="w">                </span><span class="k">not</span><span class="w"> </span><span class="k">null</span><span class="w"> </span><span class="o">#</span><span class="w"> </span><span class="err">ä¸å…è®¸ç©º</span>
<span class="w">                </span><span class="p">],</span>
<span class="w">    </span><span class="n">col2</span><span class="w">  </span><span class="nb">char</span><span class="w">  </span><span class="p">...</span><span class="w"> </span><span class="p">,</span>
<span class="w">    </span><span class="p">...</span>
<span class="p">)[</span><span class="k">default</span><span class="w"> </span><span class="n">charset</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">]</span><span class="w"> </span><span class="p">[</span><span class="k">collate</span><span class="w"> </span><span class="err">ç¼–ç </span><span class="p">];</span>
</pre></div>
</div>
<ul class="simple">
<li><p>[collate ç¼–ç ](#unicode)</p></li>
</ul>
<table>
<thead>
<tr class="row-odd"><th class="head"><p>charset</p></th>
<th class="head"><p>default collayte</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">utf8</span></code></p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">utf8_general_ci</span></code></p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">utf8mb4</span></code> ğŸ‘</p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">utf8mb4_unicode_ci</span></code></p></td>
</tr>
</tbody>
</table>
<div class="highlight-sql notranslate"><div class="highlight"><pre><span></span><span class="k">create</span><span class="w"> </span><span class="k">table</span><span class="w"> </span><span class="k">if</span><span class="w"> </span><span class="k">not</span><span class="w"> </span><span class="k">exists</span><span class="w"> </span><span class="n">user_info_vip</span>
<span class="p">(</span>
<span class="w">    </span><span class="n">id</span><span class="w"> </span><span class="nb">int</span><span class="w"> </span><span class="k">primary</span><span class="w"> </span><span class="k">key</span><span class="w"> </span><span class="n">auto_increment</span><span class="w"> </span><span class="k">comment</span><span class="w"> </span><span class="s1">'è‡ªå¢ID'</span><span class="p">,</span>
<span class="w">    </span><span class="n">uid</span><span class="w"> </span><span class="nb">int</span><span class="w"> </span><span class="k">unique</span><span class="w"> </span><span class="k">not</span><span class="w"> </span><span class="k">null</span><span class="w"> </span><span class="k">comment</span><span class="w"> </span><span class="s1">'ç”¨æˆ·ID'</span><span class="p">,</span>
<span class="w">    </span><span class="n">nick_name</span><span class="w"> </span><span class="nb">varchar</span><span class="p">(</span><span class="mi">64</span><span class="p">)</span><span class="w"> </span><span class="k">comment</span><span class="w"> </span><span class="s1">'æ˜µç§°'</span><span class="p">,</span>
<span class="w">    </span><span class="n">achievement</span><span class="w"> </span><span class="nb">int</span><span class="w"> </span><span class="k">default</span><span class="w"> </span><span class="mi">0</span><span class="w"> </span><span class="k">comment</span><span class="w"> </span><span class="s1">'æˆå°±å€¼'</span><span class="p">,</span>
<span class="w">    </span><span class="k">level</span><span class="w"> </span><span class="nb">int</span><span class="w"> </span><span class="k">comment</span><span class="w"> </span><span class="s1">'ç”¨æˆ·ç­‰çº§'</span><span class="p">,</span>
<span class="w">    </span><span class="n">job</span><span class="w"> </span><span class="nb">varchar</span><span class="p">(</span><span class="mi">32</span><span class="p">)</span><span class="w"> </span><span class="k">comment</span><span class="w"> </span><span class="s1">'èŒä¸šæ–¹å‘'</span><span class="p">,</span>
<span class="w">    </span><span class="n">register_time</span><span class="w"> </span><span class="n">datetime</span><span class="w"> </span><span class="k">default</span><span class="w"> </span><span class="k">current_timestamp</span><span class="w"> </span><span class="k">comment</span><span class="w"> </span><span class="s1">'æ³¨å†Œæ—¶é—´'</span>
<span class="p">)</span><span class="w"> </span><span class="k">default</span><span class="w"> </span><span class="n">charset</span><span class="o">=</span><span class="n">utf8</span><span class="p">;</span>
</pre></div>
</div>
<table>
<thead>
<tr class="row-odd"><th class="head"><p>case</p></th>
<th class="head"></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>å­˜åœ¨å°±è¦†ç›–</p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">drop</span> <span class="pre">table</span> <span class="pre">if</span> <span class="pre">exist</span> <span class="pre">users</span> <span class="pre">(...);</span></code>  &amp;  <code class="docutils literal notranslate"><span class="pre">create</span></code></p></td>
</tr>
<tr class="row-odd"><td><p>å­˜åœ¨å°±è¿”å›</p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">create</span> <span class="pre">table</span> <span class="pre">if</span> <span class="pre">not</span> <span class="pre">exists</span> <span class="pre">(...);</span></code></p></td>
</tr>
</tbody>
</table>
</section>
<section id="index">
<h3 id="index">index<a class="headerlink" href="#index" title="Link to this heading">Â¶</a></h3>
<div class="admonition- admonition danger">
<p class="admonition-title">â€œæ²¡æœ‰å†…ç½®ä¿®æ”¹ç´¢å¼•æ“ä½œçš„ï¼Œéœ€è¦å…ˆæ‰§è¡Œåˆ é™¤æ“ä½œåœ¨é‡æ–°å»ºç«‹ä¸€ä¸ªç´¢å¼•â€</p>
</div>
<div class="admonition-create-fulltime-index admonition danger">
<p class="admonition-title">â€œå…ˆå¯¼æ•°æ®å†è®¾  <code class="docutils literal notranslate"><span class="pre">create</span> <span class="pre">fulltime</span> <span class="pre">index</span></code> â€œ</p>
<p>åœ¨æ•°æ®é‡è¾ƒå¤§æ—¶å€™ï¼Œå…ˆå°†æ•°æ®æ”¾å…¥ä¸€ä¸ªæ²¡æœ‰å…¨æ–‡ç´¢å¼•çš„è¡¨ä¸­ï¼Œç„¶åå†ç”¨CREATE INDEXåˆ›å»ºFULLTEXTç´¢å¼•ï¼Œè¦æ¯”å…ˆä¸ºä¸€å¼ è¡¨å»ºç«‹FULLTEXTç„¶åå†å°†æ•°æ®å†™å…¥çš„é€Ÿåº¦å¿«å¾ˆå¤šã€‚</p>
</div>
<section id="create2">
<h4 id="create2">create2<a class="headerlink" href="#create2" title="Link to this heading">Â¶</a></h4>
<div class="highlight-sql notranslate"><div class="highlight"><pre><span></span><span class="o">#</span><span class="w"> </span><span class="mi">1</span><span class="p">.</span><span class="w"> </span><span class="err">åˆ›å»ºè¡¨æ—¶</span>
<span class="k">create</span><span class="w"> </span><span class="k">table</span><span class="w"> </span><span class="n">users</span><span class="p">(</span>
<span class="n">id</span><span class="w"> </span><span class="nb">int</span><span class="w"> </span><span class="k">not</span><span class="w"> </span><span class="k">null</span><span class="p">,</span><span class="w"> </span><span class="p">...,</span>
<span class="k">index</span><span class="w"> </span><span class="n">index_name</span><span class="w"> </span><span class="p">[</span><span class="n">description</span><span class="p">]</span><span class="w"> </span><span class="p">(</span><span class="n">col</span><span class="p">);</span>
<span class="p">);</span>

<span class="o">#</span><span class="w"> </span><span class="mi">2</span><span class="p">.</span><span class="w"> </span><span class="err">å¦å¤–åˆ›å»º</span>
<span class="k">create</span><span class="w"> </span><span class="p">[</span><span class="n">description</span><span class="p">]</span><span class="w"> </span><span class="k">index</span><span class="w"> </span><span class="n">index_name</span><span class="w"> </span><span class="k">on</span><span class="w"> </span><span class="n">users</span><span class="p">(</span><span class="n">col</span><span class="p">);</span>

<span class="o">#</span><span class="w"> </span><span class="mi">3</span><span class="p">.</span><span class="w"> </span><span class="err">ä¿®æ”¹è¡¨æ—¶</span>
<span class="k">alter</span><span class="w"> </span><span class="k">table</span><span class="w"> </span><span class="n">users</span>
<span class="k">add</span><span class="w"> </span><span class="p">[</span><span class="n">description</span><span class="p">]</span><span class="w"> </span><span class="k">index</span><span class="w"> </span><span class="n">index_name</span><span class="p">(</span><span class="n">col</span><span class="p">);</span>
</pre></div>
</div>
<div class="admonition-unique-index-primary-key admonition note">
<p class="admonition-title">â€œ <code class="docutils literal notranslate"><span class="pre">unique</span> <span class="pre">index</span></code>  &amp;  <code class="docutils literal notranslate"><span class="pre">primary</span> <span class="pre">key</span></code> â€œ</p>
<div class="line-block">
<div class="line">éƒ½æ˜¯å”¯ä¸€çš„å€¼ï¼Œä¸å¯ä»¥å‡ºç°ç›¸åŒçš„å€¼</div>
<div class="line"><code class="docutils literal notranslate"><span class="pre">unqiue</span> <span class="pre">index</span></code>  å¯ä»¥ä¸€ä¸ªè¡¨å¤šä¸ª</div>
<div class="line"><code class="docutils literal notranslate"><span class="pre">primary</span> <span class="pre">key</span></code>  åªèƒ½ä¸€è¡¨ä¸€ä¸ª</div>
</div>
</div>
<table>
<thead>
<tr class="row-odd"><th class="head"><p>cases</p></th>
<th class="head"><p>[description]</p></th>
<th class="head"></th>
<th class="head"><p>NULL</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>å”¯ä¸€</p></td>
<td><p>unique</p></td>
<td><p>ä¸å¯ä»¥å‡ºç°ç›¸åŒçš„å€¼</p></td>
<td><p>âœ…</p></td>
</tr>
<tr class="row-odd"><td><p>å…¨æ–‡</p></td>
<td><p>fulltxt</p></td>
<td><p>é’ˆå¯¹å€¼ä¸­çš„æŸä¸ªå•è¯ï¼Œä½†æ•ˆç‡ä½ï¼ˆä¸å»ºè®®ï¼Œå¯åˆ©ç”¨æ·»åŠ å…³é”®è¯å…³è”åˆ—æ¥å®ç°ï¼‰,æŒ‰ç…§åˆ†è¯åŸç†å»ºç«‹ç´¢å¼•çš„</p></td>
<td></td>
</tr>
<tr class="row-even"><td><p>æ™®é€š</p></td>
<td></td>
<td><p>å…è®¸å‡ºç°ç›¸åŒçš„ç´¢å¼•å†…å®¹</p></td>
<td></td>
</tr>
</tbody>
</table>
<p>æ™®é€šç´¢å¼•ï¼šINDEX  (normal)</p>
<p>[mysql ä¸åŒç´¢å¼•çš„åŒºåˆ«å’Œé€‚ç”¨æƒ…å†µæ€»ç»“]</p>
<div class="admonition-examination-info-examination-info admonition hint">
<p class="admonition-title">ç°æœ‰ä¸€å¼ è¯•å·ä¿¡æ¯è¡¨examination_infoï¼Œå…¶ä¸­åŒ…å«å„ç§ç±»å‹è¯•å·çš„ä¿¡æ¯ã€‚ä¸ºäº†å¯¹è¡¨æ›´æ–¹ä¾¿å¿«æ·åœ°æŸ¥è¯¢ï¼Œéœ€è¦åœ¨examination_infoè¡¨åˆ›å»ºä»¥ä¸‹ç´¢å¼•ï¼Œè§„åˆ™å¦‚ä¸‹ï¼š</p>
<p>åœ¨durationåˆ—åˆ›å»ºæ™®é€šç´¢å¼•idx_durationã€åœ¨exam_idåˆ—åˆ›å»ºå”¯ä¸€æ€§ç´¢å¼•uniq_idx_exam_idã€åœ¨tagåˆ—åˆ›å»ºå…¨æ–‡ç´¢å¼•full_idx_tag</p>
<div class="highlight-sql notranslate"><div class="highlight"><pre><span></span><span class="k">create</span><span class="w"> </span><span class="k">index</span><span class="w"> </span><span class="n">idx_duration</span><span class="w"> </span><span class="k">on</span><span class="w"> </span><span class="n">examination_info</span><span class="p">(</span><span class="n">duration</span><span class="p">);</span>
<span class="k">create</span><span class="w"> </span><span class="k">unique</span><span class="w"> </span><span class="k">index</span><span class="w"> </span><span class="n">uniq_idx_exam_id</span><span class="w"> </span><span class="k">on</span><span class="w"> </span><span class="n">examination_info</span><span class="p">(</span><span class="n">exam_id</span><span class="p">);</span>
<span class="k">create</span><span class="w"> </span><span class="n">fulltext</span><span class="w"> </span><span class="k">index</span><span class="w"> </span><span class="n">full_idx_tag</span><span class="w"> </span><span class="k">on</span><span class="w"> </span><span class="n">examination_info</span><span class="p">(</span><span class="n">tag</span><span class="p">);</span>
</pre></div>
</div>
</div>
</section>
<section id="delete">
<h4 id="delete">delete<a class="headerlink" href="#delete" title="Link to this heading">Â¶</a></h4>
<div class="highlight-sql notranslate"><div class="highlight"><pre><span></span><span class="k">drop</span><span class="w"> </span><span class="k">index</span><span class="w"> </span><span class="n">index_name</span><span class="w"> </span><span class="k">on</span><span class="w"> </span><span class="n">users</span><span class="p">;</span>

<span class="k">alter</span><span class="w"> </span><span class="k">table</span><span class="w"> </span><span class="n">users</span>
<span class="k">drop</span><span class="w"> </span><span class="k">index</span><span class="w"> </span><span class="n">index_name</span><span class="p">;</span>
</pre></div>
</div>
</section>
</section>
</section>
<section id="id12">
<h2 id="id12">ä¸šåŠ¡<a class="headerlink" href="#id12" title="Link to this heading">Â¶</a></h2>
<div class="admonition-sqlexam-recordsql admonition hint">
<p class="admonition-title">ç‰›å®¢çš„è¿è¥åŒå­¦æƒ³è¦æŸ¥çœ‹å¤§å®¶åœ¨SQLç±»åˆ«ä¸­é«˜éš¾åº¦è¯•å·çš„å¾—åˆ†æƒ…å†µã€‚è¯·ä½ å¸®å¥¹ä»exam_recordæ•°æ®è¡¨ä¸­è®¡ç®—æ‰€æœ‰ç”¨æˆ·å®ŒæˆSQLç±»åˆ«é«˜éš¾åº¦è¯•å·å¾—åˆ†çš„æˆªæ–­å¹³å‡å€¼ï¼ˆå»æ‰ä¸€ä¸ªæœ€å¤§å€¼å’Œä¸€ä¸ªæœ€å°å€¼åçš„å¹³å‡å€¼ï¼‰ã€‚</p>
<p><span class="math"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mo>=</mo><mstyle displaystyle="true" scriptlevel="0"><mfrac><mrow><mo>âˆ‘</mo><mo>âˆ’</mo><mi>max</mi><mo>â¡</mo><mo>âˆ’</mo><mi>min</mi><mo>â¡</mo></mrow><mrow><mi mathvariant="normal">#</mi><mo>âˆ’</mo><mn>2</mn></mrow></mfrac></mstyle></mrow><annotation encoding="application/x-tex">=\cfrac{\sum-\max-\min}{\#-2}</annotation></semantics></math></span><span aria-hidden="true" class="katex-html"><span class="base"><span class="strut" style="height:0.3669em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2778em;"></span></span><span class="base"><span class="strut" style="height:2.4704em;vertical-align:-0.8804em;"></span><span class="mord"><span class="mopen nulldelimiter"></span><span class="mfrac"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:1.59em;"><span style="top:-2.314em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord">#</span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mbin">âˆ’</span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mord">2</span></span></span><span style="top:-3.23em;"><span class="pstrut" style="height:3em;"></span><span class="frac-line" style="border-bottom-width:0.04em;"></span></span><span style="top:-3.74em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mop op-symbol small-op" style="position:relative;top:0em;">âˆ‘</span><span class="mspace" style="margin-right:0.1667em;"></span><span class="mord">âˆ’</span><span class="mspace" style="margin-right:0.1667em;"></span><span class="mop">max</span><span class="mspace" style="margin-right:0.1667em;"></span><span class="mord">âˆ’</span><span class="mspace" style="margin-right:0.1667em;"></span><span class="mop">min</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.8804em;"><span></span></span></span></span></span><span></span></span></span></span></span></span></p>
<div class="highlight-sql notranslate"><div class="highlight"><pre><span></span><span class="k">select</span><span class="w"> </span><span class="n">tag</span><span class="p">,</span><span class="w"> </span><span class="n">difficulty</span><span class="p">,</span>
<span class="w">    </span><span class="n">round</span><span class="p">((</span><span class="k">sum</span><span class="p">(</span><span class="n">score</span><span class="p">)</span><span class="o">-</span><span class="k">min</span><span class="p">(</span><span class="n">score</span><span class="p">)</span><span class="o">-</span><span class="k">max</span><span class="p">(</span><span class="n">score</span><span class="p">))</span><span class="o">/</span>
<span class="w">        </span><span class="p">(</span><span class="k">count</span><span class="p">(</span><span class="n">score</span><span class="p">)</span><span class="o">-</span><span class="mi">2</span><span class="p">),</span><span class="mi">1</span><span class="p">)</span><span class="w"> </span><span class="k">as</span><span class="w"> </span><span class="n">avg_score</span>
<span class="k">from</span><span class="w"> </span><span class="n">exam_record</span>
<span class="k">inner</span><span class="w"> </span><span class="k">join</span><span class="w"> </span><span class="p">(</span>
<span class="w">    </span><span class="k">select</span><span class="w"> </span><span class="n">exam_id</span><span class="p">,</span><span class="w"> </span><span class="n">tag</span><span class="p">,</span><span class="w"> </span><span class="n">difficulty</span>
<span class="w">    </span><span class="k">from</span><span class="w"> </span><span class="n">examination_info</span>
<span class="w">    </span><span class="k">where</span><span class="w"> </span><span class="n">tag</span><span class="o">=</span><span class="s1">'SQL'</span><span class="w"> </span><span class="k">and</span><span class="w"> </span><span class="n">difficulty</span><span class="o">=</span><span class="s1">'hard'</span>
<span class="w">    </span><span class="p">)</span><span class="n">info</span>
<span class="k">on</span><span class="w"> </span><span class="n">info</span><span class="p">.</span><span class="n">exam_id</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">exam_record</span><span class="p">.</span><span class="n">exam_id</span><span class="p">;</span>
</pre></div>
</div>
</div>
<div class="admonition-exam-record-total-pvcomplete-pvcomplete-exam-cnt admonition hint">
<p class="admonition-title">æœ‰ä¸€ä¸ªè¯•å·ä½œç­”è®°å½•è¡¨exam_recordï¼Œè¯·ä»ä¸­ç»Ÿè®¡å‡ºæ€»ä½œç­”æ¬¡æ•°total_pvã€è¯•å·å·²å®Œæˆä½œç­”æ•°complete_pvã€å·²å®Œæˆçš„è¯•å·æ•°complete_exam_cntã€‚</p>
<p>ç¤ºä¾‹æ•°æ® exam_recordè¡¨ï¼ˆuidç”¨æˆ·ID, exam_idè¯•å·ID, start_timeå¼€å§‹ä½œç­”æ—¶é—´, submit_timeäº¤å·æ—¶é—´, scoreå¾—åˆ†ï¼‰</p>
<p>ä¸»è¦åœ¨äºå·²å®Œæˆçš„è¯•å·æ•°çš„ç»Ÿè®¡ï¼Œå› ä¸ºè¿™ä¸ªå¸¦æœ‰æ¡ä»¶ï¼Œä¸”éœ€è¦ç»Ÿè®¡èšåˆç»“æœï¼Œå¾ˆè‡ªç„¶å¯ä»¥æƒ³åˆ° ä½¿ç”¨ èšåˆå‡½æ•°ä¸case when ç»“åˆã€‚</p>
<div class="highlight-sql notranslate"><div class="highlight"><pre><span></span><span class="k">select</span><span class="w"> </span><span class="k">count</span><span class="p">(</span><span class="mi">1</span><span class="p">)</span><span class="w"> </span><span class="k">as</span><span class="w"> </span><span class="n">total_pv</span><span class="p">,</span>
<span class="w">    </span><span class="k">count</span><span class="p">(</span><span class="n">submit_time</span><span class="p">)</span><span class="w"> </span><span class="k">as</span><span class="w"> </span><span class="n">complete_pv</span><span class="p">,</span>
<span class="w">    </span><span class="k">count</span><span class="p">(</span><span class="k">distinct</span><span class="w"> </span><span class="p">(</span><span class="k">case</span><span class="w"> </span><span class="k">when</span><span class="w"> </span><span class="n">score</span><span class="w"> </span><span class="k">is</span><span class="w"> </span><span class="k">not</span><span class="w"> </span><span class="k">null</span><span class="w"> </span><span class="k">then</span><span class="w"> </span><span class="n">exam_id</span><span class="w"> </span><span class="k">else</span><span class="w"> </span><span class="k">null</span><span class="w"> </span><span class="k">end</span><span class="p">))</span><span class="w"> </span><span class="k">as</span><span class="w"> </span><span class="n">complete_exam_cnt</span>
<span class="k">from</span><span class="w"> </span><span class="n">exam_record</span>
</pre></div>
</div>
</div>
<div class="admonition-sql admonition hint">
<p class="admonition-title">è¯·ä»è¯•å·ä½œç­”è®°å½•è¡¨ä¸­æ‰¾åˆ°SQLè¯•å·å¾—åˆ†ä¸å°äºè¯¥ç±»è¯•å·å¹³å‡å¾—åˆ†çš„ç”¨æˆ·æœ€ä½å¾—åˆ†ã€‚</p>
<p>ç¤ºä¾‹æ•°æ® exam_recordè¡¨ï¼ˆuidç”¨æˆ·ID, exam_idè¯•å·ID, start_timeå¼€å§‹ä½œç­”æ—¶é—´, submit_timeäº¤å·æ—¶é—´, scoreå¾—åˆ†ï¼‰ï¼š</p>
<div class="highlight-sql notranslate"><div class="highlight"><pre><span></span><span class="k">select</span><span class="w"> </span><span class="k">min</span><span class="p">(</span><span class="n">score</span><span class="p">)</span><span class="w"> </span><span class="k">as</span><span class="w"> </span><span class="n">min_score_over_avg</span>
<span class="k">from</span><span class="w"> </span><span class="n">exam_record</span>
<span class="k">inner</span><span class="w"> </span><span class="k">join</span><span class="w"> </span><span class="p">(</span>
<span class="w">    </span><span class="k">select</span><span class="w"> </span><span class="n">exam_id</span>
<span class="w">    </span><span class="k">from</span><span class="w"> </span><span class="n">examination_info</span>
<span class="w">    </span><span class="k">where</span><span class="w"> </span><span class="n">tag</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s1">'SQL'</span>
<span class="w">    </span><span class="p">)</span><span class="n">info</span>
<span class="k">on</span><span class="w"> </span><span class="n">exam_record</span><span class="p">.</span><span class="n">exam_id</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">info</span><span class="p">.</span><span class="n">exam_id</span>
<span class="k">where</span><span class="w"> </span><span class="n">score</span><span class="w"> </span><span class="o">&gt;=</span><span class="w"> </span><span class="p">(</span>
<span class="w">    </span><span class="k">select</span><span class="w"> </span><span class="k">avg</span><span class="p">(</span><span class="n">score</span><span class="p">)</span>
<span class="w">    </span><span class="k">from</span><span class="w"> </span><span class="n">exam_record</span>
<span class="w">    </span><span class="k">inner</span><span class="w"> </span><span class="k">join</span><span class="w"> </span><span class="p">(</span>
<span class="w">        </span><span class="k">select</span><span class="w"> </span><span class="n">exam_id</span>
<span class="w">        </span><span class="k">from</span><span class="w"> </span><span class="n">examination_info</span>
<span class="w">        </span><span class="k">where</span><span class="w"> </span><span class="n">tag</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s1">'SQL'</span>
<span class="w">        </span><span class="p">)</span><span class="n">info</span>
<span class="w">    </span><span class="k">on</span><span class="w"> </span><span class="n">exam_record</span><span class="p">.</span><span class="n">exam_id</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">info</span><span class="p">.</span><span class="n">exam_id</span>
<span class="w">    </span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="admonition-avg-active-daysmau admonition hint">
<p class="admonition-title">è¯·è®¡ç®—2021å¹´æ¯ä¸ªæœˆé‡Œè¯•å·ä½œç­”åŒºç”¨æˆ·å¹³å‡æœˆæ´»è·ƒå¤©æ•°avg_active_dayså’Œæœˆåº¦æ´»è·ƒäººæ•°mauï¼Œä¸Šé¢æ•°æ®çš„ç¤ºä¾‹è¾“å‡ºå¦‚ä¸‹ï¼š</p>
<div class="highlight-sql notranslate"><div class="highlight"><pre><span></span><span class="k">select</span><span class="w"> </span><span class="n">DATE_FORMAT</span><span class="p">(</span><span class="n">submit_time</span><span class="p">,</span><span class="w"> </span><span class="ss">"%Y%m"</span><span class="p">)</span><span class="w"> </span><span class="k">as</span><span class="w"> </span><span class="k">month</span><span class="p">,</span>
<span class="w">    </span><span class="n">round</span><span class="p">(</span><span class="k">count</span><span class="p">(</span><span class="k">distinct</span><span class="w"> </span><span class="n">uid</span><span class="p">,</span><span class="w"> </span><span class="n">DATE_FORMAT</span><span class="p">(</span><span class="n">submit_time</span><span class="p">,</span><span class="w"> </span><span class="ss">"%Y%m%d"</span><span class="p">))</span><span class="o">/</span><span class="k">count</span><span class="p">(</span><span class="k">distinct</span><span class="w"> </span><span class="n">uid</span><span class="p">),</span><span class="w"> </span><span class="mi">2</span><span class="p">)</span><span class="w"> </span><span class="k">as</span><span class="w"> </span><span class="n">avg_active_days</span><span class="p">,</span>
<span class="w">    </span><span class="k">count</span><span class="p">(</span><span class="k">distinct</span><span class="w"> </span><span class="n">uid</span><span class="p">)</span><span class="w"> </span><span class="k">as</span><span class="w"> </span><span class="n">mau</span>
<span class="k">from</span><span class="w"> </span><span class="n">exam_record</span>
<span class="k">where</span><span class="w"> </span><span class="k">year</span><span class="p">(</span><span class="n">submit_time</span><span class="p">)</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">2021</span>
<span class="k">group</span><span class="w"> </span><span class="k">by</span><span class="w"> </span><span class="k">month</span>
</pre></div>
</div>
</div>
<div class="admonition-sql807-2021-2021 admonition hint">
<p class="admonition-title">è¯·ä½ æ‰¾åˆ°é«˜éš¾åº¦SQLè¯•å·å¾—åˆ†å¹³å‡å€¼å¤§äº80å¹¶ä¸”æ˜¯7çº§çš„çº¢åå¤§ä½¬ï¼Œç»Ÿè®¡ä»–ä»¬çš„2021å¹´è¯•å·æ€»å®Œæˆæ¬¡æ•°å’Œé¢˜ç›®æ€»ç»ƒä¹ æ¬¡æ•°ï¼Œåªä¿ç•™2021å¹´æœ‰è¯•å·å®Œæˆè®°å½•çš„ç”¨æˆ·ã€‚ç»“æœæŒ‰è¯•å·å®Œæˆæ•°å‡åºï¼ŒæŒ‰é¢˜ç›®ç»ƒä¹ æ•°é™åºã€‚</p>
<div class="highlight-sql notranslate"><div class="highlight"><pre><span></span><span class="k">select</span><span class="w"> </span><span class="n">red_users</span><span class="p">.</span><span class="n">uid</span><span class="p">,</span>
<span class="w">    </span><span class="k">count</span><span class="p">(</span><span class="k">distinct</span><span class="w"> </span><span class="n">exam_id</span><span class="p">,</span><span class="w"> </span><span class="n">exam_submit</span><span class="p">)</span><span class="w"> </span><span class="k">as</span><span class="w"> </span><span class="n">exam_cnt</span><span class="p">,</span>
<span class="w">    </span><span class="k">count</span><span class="p">(</span><span class="k">distinct</span><span class="w"> </span><span class="n">question_id</span><span class="p">,</span><span class="w"> </span><span class="n">prac_submit</span><span class="p">)</span><span class="w"> </span><span class="k">as</span><span class="w"> </span><span class="n">question_cnt</span>
<span class="k">from</span><span class="w"> </span><span class="p">(</span>
<span class="w">    </span><span class="k">select</span><span class="w"> </span><span class="n">uid</span>
<span class="w">    </span><span class="k">from</span><span class="w"> </span><span class="n">exam_record</span>
<span class="w">    </span><span class="k">where</span><span class="w"> </span><span class="n">exam_id</span><span class="w"> </span><span class="k">in</span><span class="w"> </span><span class="p">(</span><span class="k">select</span><span class="w"> </span><span class="n">exam_id</span><span class="w"> </span><span class="k">from</span><span class="w"> </span><span class="n">examination_info</span>
<span class="w">                        </span><span class="k">where</span><span class="w"> </span><span class="n">tag</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s1">'SQL'</span><span class="w"> </span><span class="k">and</span><span class="w"> </span><span class="n">difficulty</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s1">'hard'</span><span class="p">)</span>
<span class="w">            </span><span class="k">and</span><span class="w"> </span><span class="n">uid</span><span class="w"> </span><span class="k">in</span><span class="w"> </span><span class="p">(</span><span class="k">select</span><span class="w"> </span><span class="n">uid</span><span class="w"> </span><span class="k">from</span><span class="w"> </span><span class="n">user_info</span>
<span class="w">                        </span><span class="k">where</span><span class="w"> </span><span class="k">level</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">7</span><span class="p">)</span>
<span class="w">    </span><span class="k">group</span><span class="w"> </span><span class="k">by</span><span class="w"> </span><span class="n">uid</span>
<span class="w">    </span><span class="k">having</span><span class="w"> </span><span class="k">avg</span><span class="p">(</span><span class="n">score</span><span class="p">)</span><span class="w"> </span><span class="o">&gt;</span><span class="w"> </span><span class="mi">80</span>
<span class="w">    </span><span class="p">)</span><span class="w"> </span><span class="n">red_users</span>
<span class="k">left</span><span class="w"> </span><span class="k">join</span><span class="w"> </span><span class="p">(</span>
<span class="w">    </span><span class="k">select</span><span class="w"> </span><span class="n">uid</span><span class="p">,</span><span class="w"> </span><span class="n">exam_id</span><span class="p">,</span><span class="w"> </span><span class="n">submit_time</span><span class="w"> </span><span class="k">as</span><span class="w"> </span><span class="n">exam_submit</span>
<span class="w">    </span><span class="k">from</span><span class="w"> </span><span class="n">exam_record</span>
<span class="w">    </span><span class="k">where</span><span class="w"> </span><span class="k">year</span><span class="p">(</span><span class="n">submit_time</span><span class="p">)</span><span class="o">=</span><span class="mi">2021</span>
<span class="w">    </span><span class="p">)</span><span class="w"> </span><span class="n">exam_rec</span>
<span class="k">on</span><span class="w"> </span><span class="n">red_users</span><span class="p">.</span><span class="n">uid</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">exam_rec</span><span class="p">.</span><span class="n">uid</span>
<span class="k">left</span><span class="w"> </span><span class="k">join</span><span class="w"> </span><span class="p">(</span>
<span class="w">    </span><span class="k">select</span><span class="w"> </span><span class="n">uid</span><span class="p">,</span><span class="w"> </span><span class="n">question_id</span><span class="p">,</span><span class="w"> </span><span class="n">submit_time</span><span class="w"> </span><span class="k">as</span><span class="w"> </span><span class="n">prac_submit</span>
<span class="w">    </span><span class="k">from</span><span class="w"> </span><span class="n">practice_record</span>
<span class="w">    </span><span class="k">where</span><span class="w"> </span><span class="k">year</span><span class="p">(</span><span class="n">submit_time</span><span class="p">)</span><span class="o">=</span><span class="mi">2021</span>
<span class="w">    </span><span class="p">)</span><span class="w"> </span><span class="n">prac_rec</span>
<span class="k">on</span><span class="w"> </span><span class="n">red_users</span><span class="p">.</span><span class="n">uid</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">prac_rec</span><span class="p">.</span><span class="n">uid</span>
<span class="k">group</span><span class="w"> </span><span class="k">by</span><span class="w"> </span><span class="n">uid</span>
<span class="k">order</span><span class="w"> </span><span class="k">by</span><span class="w"> </span><span class="n">exam_cnt</span><span class="w"> </span><span class="k">asc</span><span class="p">,</span><span class="w"> </span><span class="n">question_cnt</span><span class="w"> </span><span class="k">desc</span><span class="p">;</span>
</pre></div>
</div>
</div>
<p>[SELECT 1 FROM TABLEçš„ä½œç”¨]: <a class="reference external" href="https://blog.51cto.com/knifeedge/5786611">https://blog.51cto.com/knifeedge/5786611</a>
[select 1 in SQL]: <a class="reference external" href="https://www.jianshu.com/p/0c5dbee8838b">https://www.jianshu.com/p/0c5dbee8838b</a>
[int(1)å’Œint(11)çš„åŒºåˆ«]: <a class="reference external" href="https://www.modb.pro/db/336129">https://www.modb.pro/db/336129</a>
[æ—¥æœŸå‡½æ•°]: <a class="reference external" href="https://www.nowcoder.com/knowledge/intro-index?kcid=20">https://www.nowcoder.com/knowledge/intro-index?kcid=20</a>
[MySQLå¸¸ç”¨å‡½æ•°â€”â€”å­—ç¬¦å‡½æ•°]: <a class="reference external" href="https://ost.51cto.com/posts/12630">https://ost.51cto.com/posts/12630</a>
[mysqlé”™è¯¯Every derived table must have its own aliasè§£å†³]: <a class="reference external" href="https://www.jianshu.com/p/c52180dd259a">https://www.jianshu.com/p/c52180dd259a</a>
[hive sql]: <a class="reference external" href="https://zhuanlan.zhihu.com/p/114921777">https://zhuanlan.zhihu.com/p/114921777</a>
[é€šä¿—æ˜“æ‡‚çš„å­¦ä¼šï¼šSQLçª—å£å‡½æ•°]: <a class="reference external" href="https://www.zhihu.com/tardis/zm/art/92654574?source_id=1003">https://www.zhihu.com/tardis/zm/art/92654574?source_id=1003</a>
[MySQL ç·¨ç¢¼æŒ‘é¸èˆ‡å·®ç•°æ¯”è¼ƒ]: <a class="reference external" href="https://khiav223577.github.io/blog/2019/06/30/MySQL-%E7%B7%A8%E7%A2%BC%E6%8C%91%E9%81%B8%E8%88%87%E5%B7%AE%E7%95%B0%E6%AF%94%E8%BC%83/">https://khiav223577.github.io/blog/2019/06/30/MySQL-%E7%B7%A8%E7%A2%BC%E6%8C%91%E9%81%B8%E8%88%87%E5%B7%AE%E7%95%B0%E6%AF%94%E8%BC%83/</a>
[mysql ä¸åŒç´¢å¼•çš„åŒºåˆ«å’Œé€‚ç”¨æƒ…å†µæ€»ç»“]: <a class="reference external" href="https://www.cnblogs.com/DDgougou/p/10286709.html">https://www.cnblogs.com/DDgougou/p/10286709.html</a></p>
</section>
</section>


          </article>
        </div>
      </div>
    </main>
  </div>
  <footer class="md-footer">
    <div class="md-footer-nav">
      <nav class="md-footer-nav__inner md-grid">
          
            <a href="index.html" title="SQL"
               class="md-flex md-footer-nav__link md-footer-nav__link--prev"
               rel="prev">
              <div class="md-flex__cell md-flex__cell--shrink">
                <i class="md-icon md-icon--arrow-back md-footer-nav__button"></i>
              </div>
              <div class="md-flex__cell md-flex__cell--stretch md-footer-nav__title">
                <span class="md-flex__ellipsis">
                  <span
                      class="md-footer-nav__direction"> "Previous" </span> SQL </span>
              </div>
            </a>
          
          
            <a href="../utils/index.html" title="æ‚"
               class="md-flex md-footer-nav__link md-footer-nav__link--next"
               rel="next">
            <div class="md-flex__cell md-flex__cell--stretch md-footer-nav__title"><span
                class="md-flex__ellipsis"> <span
                class="md-footer-nav__direction"> "Next" </span> æ‚ </span>
            </div>
            <div class="md-flex__cell md-flex__cell--shrink"><i
                class="md-icon md-icon--arrow-forward md-footer-nav__button"></i>
            </div>
          
        </a>
        
      </nav>
    </div>
    <div class="md-footer-meta md-typeset">
      <div class="md-footer-meta__inner md-grid">
        <div class="md-footer-copyright">
          <div class="md-footer-copyright__highlight">
              &#169; Copyright 2024, coconut.
              
          </div>
            Created using
            <a href="http://www.sphinx-doc.org/">Sphinx</a> 7.3.7.
             and
            <a href="https://github.com/bashtage/sphinx-material/">Material for
              Sphinx</a>
        </div>
      </div>
    </div>
  </footer>
  <script src="../_static/javascripts/application.js"></script>
  <script>app.initialize({version: "1.0.4", url: {base: ".."}})</script>
  </body>
</html>