<!DOCTYPE html>

<html lang="zh-CN" data-content_root="../">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" /><meta name="viewport" content="width=device-width, initial-scale=1" />

  <meta name="viewport" content="width=device-width,initial-scale=1">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <meta name="lang:clipboard.copy" content="Copy to clipboard">
  <meta name="lang:clipboard.copied" content="Copied to clipboard">
  <meta name="lang:search.language" content="en">
  <meta name="lang:search.pipeline.stopwords" content="True">
  <meta name="lang:search.pipeline.trimmer" content="True">
  <meta name="lang:search.result.none" content="No matching documents">
  <meta name="lang:search.result.one" content="1 matching document">
  <meta name="lang:search.result.other" content="# matching documents">
  <meta name="lang:search.tokenizer" content="[\s\-]+">

  
    <link href="https://fonts.gstatic.com/" rel="preconnect" crossorigin>
    <link href="https://fonts.googleapis.com/css?family=Roboto+Mono:400,500,700|Roboto:300,400,400i,700&display=fallback" rel="stylesheet">

    <style>
      body,
      input {
        font-family: "Roboto", "Helvetica Neue", Helvetica, Arial, sans-serif
      }

      code,
      kbd,
      pre {
        font-family: "Roboto Mono", "Courier New", Courier, monospace
      }
    </style>
  

  <link rel="stylesheet" href="../_static/stylesheets/application.css"/>
  <link rel="stylesheet" href="../_static/stylesheets/application-palette.css"/>
  <link rel="stylesheet" href="../_static/stylesheets/application-fixes.css"/>
  
  <link rel="stylesheet" href="../_static/fonts/material-icons.css"/>
  
  <meta name="theme-color" content="#3f51b5">
  <script src="../_static/javascripts/modernizr.js"></script>
  
  
  
    <title>Elegant Python &#8212; HomePage</title>
    <link rel="stylesheet" type="text/css" href="../_static/pygments.css?v=83e35b93" />
    <link rel="stylesheet" type="text/css" href="../_static/material.css?v=79c92029" />
    <link rel="stylesheet" type="text/css" href="../_static/copybutton.css?v=76b2166b" />
    <link rel="stylesheet" type="text/css" href="../_static/sphinx-design.min.css?v=87e54e7c" />
    <link rel="stylesheet" type="text/css" href="https://cdn.jsdelivr.net/npm/katex@0.16.10/dist/katex.min.css" />
    <link rel="stylesheet" type="text/css" href="../_static/katex-math.css?v=91adb8b6" />
    <link rel="stylesheet" type="text/css" href="../_static/css/def.css?v=5a9d86bd" />
    <script src="../_static/documentation_options.js?v=7d86a446"></script>
    <script src="../_static/doctools.js?v=9a2dae69"></script>
    <script src="../_static/sphinx_highlight.js?v=dc90522c"></script>
    <script src="../_static/clipboard.min.js?v=a7894cd8"></script>
    <script src="../_static/copybutton.js?v=6dbb43f8"></script>
    <script src="../_static/translations.js?v=beaddf03"></script>
    <script src="../_static/design-tabs.js?v=36754332"></script>
    <link rel="index" title="索引" href="../genindex.html" />
    <link rel="search" title="搜索" href="../search.html" />
  
   

  </head>
  <body dir=ltr
        data-md-color-primary=blue-grey data-md-color-accent=blue>
  
  <svg class="md-svg">
    <defs data-children-count="0">
      
      <svg xmlns="http://www.w3.org/2000/svg" width="416" height="448" viewBox="0 0 416 448" id="__github"><path fill="currentColor" d="M160 304q0 10-3.125 20.5t-10.75 19T128 352t-18.125-8.5-10.75-19T96 304t3.125-20.5 10.75-19T128 256t18.125 8.5 10.75 19T160 304zm160 0q0 10-3.125 20.5t-10.75 19T288 352t-18.125-8.5-10.75-19T256 304t3.125-20.5 10.75-19T288 256t18.125 8.5 10.75 19T320 304zm40 0q0-30-17.25-51T296 232q-10.25 0-48.75 5.25Q229.5 240 208 240t-39.25-2.75Q130.75 232 120 232q-29.5 0-46.75 21T56 304q0 22 8 38.375t20.25 25.75 30.5 15 35 7.375 37.25 1.75h42q20.5 0 37.25-1.75t35-7.375 30.5-15 20.25-25.75T360 304zm56-44q0 51.75-15.25 82.75-9.5 19.25-26.375 33.25t-35.25 21.5-42.5 11.875-42.875 5.5T212 416q-19.5 0-35.5-.75t-36.875-3.125-38.125-7.5-34.25-12.875T37 371.5t-21.5-28.75Q0 312 0 260q0-59.25 34-99-6.75-20.5-6.75-42.5 0-29 12.75-54.5 27 0 47.5 9.875t47.25 30.875Q171.5 96 212 96q37 0 70 8 26.25-20.5 46.75-30.25T376 64q12.75 25.5 12.75 54.5 0 21.75-6.75 42 34 40 34 99.5z"/></svg>
      
    </defs>
  </svg>
  
  <input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="__drawer">
  <input class="md-toggle" data-md-toggle="search" type="checkbox" id="__search">
  <label class="md-overlay" data-md-component="overlay" for="__drawer"></label>
  <a href="#python/python_elegant" tabindex="1" class="md-skip"> Skip to content </a>
  <header class="md-header" data-md-component="header">
  <nav class="md-header-nav md-grid">
    <div class="md-flex navheader">
      <div class="md-flex__cell md-flex__cell--shrink">
        <a href="../index.html" title="HomePage"
           class="md-header-nav__button md-logo">
          
            <i class="md-icon">&#xe869</i>
          
        </a>
      </div>
      <div class="md-flex__cell md-flex__cell--shrink">
        <label class="md-icon md-icon--menu md-header-nav__button" for="__drawer"></label>
      </div>
      <div class="md-flex__cell md-flex__cell--stretch">
        <div class="md-flex__ellipsis md-header-nav__title" data-md-component="title">
          <span class="md-header-nav__topic">Cocobook</span>
          <span class="md-header-nav__topic"> Elegant Python </span>
        </div>
      </div>
      <div class="md-flex__cell md-flex__cell--shrink">
        <label class="md-icon md-icon--search md-header-nav__button" for="__search"></label>
        
<div class="md-search" data-md-component="search" role="dialog">
  <label class="md-search__overlay" for="__search"></label>
  <div class="md-search__inner" role="search">
    <form class="md-search__form" action="../search.html" method="get" name="search">
      <input type="text" class="md-search__input" name="q" placeholder=""Search""
             autocapitalize="off" autocomplete="off" spellcheck="false"
             data-md-component="query" data-md-state="active">
      <label class="md-icon md-search__icon" for="__search"></label>
      <button type="reset" class="md-icon md-search__icon" data-md-component="reset" tabindex="-1">
        &#xE5CD;
      </button>
    </form>
    <div class="md-search__output">
      <div class="md-search__scrollwrap" data-md-scrollfix>
        <div class="md-search-result" data-md-component="result">
          <div class="md-search-result__meta">
            Type to start searching
          </div>
          <ol class="md-search-result__list"></ol>
        </div>
      </div>
    </div>
  </div>
</div>

      </div>
      
      
  
  <script src="../_static/javascripts/version_dropdown.js"></script>
  <script>
    var json_loc = "../"versions.json"",
        target_loc = "../../",
        text = "Versions";
    $( document ).ready( add_version_dropdown(json_loc, target_loc, text));
  </script>
  

    </div>
  </nav>
</header>

  
  <div class="md-container">
    
    
    
  <nav class="md-tabs" data-md-component="tabs">
    <div class="md-tabs__inner md-grid">
      <ul class="md-tabs__list">
          <li class="md-tabs__item"><a href="../index.html" class="md-tabs__link">HomePage</a></li>
            
            <li class="md-tabs__item"><a href="../AI/index.html" class="md-tabs__link">AI</a></li>
            
            <li class="md-tabs__item"><a href="index.html" class="md-tabs__link">Python</a></li>
            
            <li class="md-tabs__item"><a href="../NLP/index.html" class="md-tabs__link">NLP</a></li>
      </ul>
    </div>
  </nav>
    <main class="md-main">
      <div class="md-main__inner md-grid" data-md-component="container">
        
          <div class="md-sidebar md-sidebar--primary" data-md-component="navigation">
            <div class="md-sidebar__scrollwrap">
              <div class="md-sidebar__inner">
                <nav class="md-nav md-nav--primary" data-md-level="0">
  <label class="md-nav__title md-nav__title--site" for="__drawer">
    <a href="../index.html" title="HomePage" class="md-nav__button md-logo">
      
        <i class="md-icon">&#xe869</i>
      
    </a>
    <a href="../index.html"
       title="HomePage">Cocobook</a>
  </label>
  

  
  <ul class="md-nav__list">
    <li class="md-nav__item">
    
      <span class="md-nav__link caption"><span class="caption-text">AI</span></span>
    
    </li>
    <li class="md-nav__item">
    
    
      <a href="../AI/main.html" class="md-nav__link">Artificial Intelligence, AI</a>
      
    
    </li>
  </ul>
  

</nav>
              </div>
            </div>
          </div>
          <div class="md-sidebar md-sidebar--secondary" data-md-component="toc">
            <div class="md-sidebar__scrollwrap">
              <div class="md-sidebar__inner">
                
<nav class="md-nav md-nav--secondary">
    <label class="md-nav__title" for="__toc">"Contents"</label>
  <ul class="md-nav__list" data-md-scrollfix="">
        <li class="md-nav__item"><a href="#python-python-elegant--page-root" class="md-nav__link">Elegant Python</a><nav class="md-nav">
              <ul class="md-nav__list">
        <li class="md-nav__item"><a href="#id1" class="md-nav__link">对象</a>
        </li>
        <li class="md-nav__item"><a href="#some" class="md-nav__link">Some</a><nav class="md-nav">
              <ul class="md-nav__list">
        <li class="md-nav__item"><a href="#path" class="md-nav__link">环境变量 系统路径 PATH</a>
        </li></ul>
            </nav>
        </li>
        <li class="md-nav__item"><a href="#id2" class="md-nav__link">对象引用机制</a><nav class="md-nav">
              <ul class="md-nav__list">
        <li class="md-nav__item"><a href="#is" class="md-nav__link">is & == 标识 & 相等性</a>
        </li>
        <li class="md-nav__item"><a href="#id15" class="md-nav__link">内存管理</a><nav class="md-nav">
              <ul class="md-nav__list">
        <li class="md-nav__item"><a href="#id16" class="md-nav__link">栈区和堆区</a>
        </li>
        <li class="md-nav__item"><a href="#id17" class="md-nav__link">垃圾回收机制</a>
        </li></ul>
            </nav>
        </li>
        <li class="md-nav__item"><a href="#id18" class="md-nav__link">不变 & 可变</a><nav class="md-nav">
              <ul class="md-nav__list">
        <li class="md-nav__item"><a href="#id25" class="md-nav__link">深浅拷贝</a>
        </li>
        <li class="md-nav__item"><a href="#id34" class="md-nav__link">整数池</a>
        </li></ul>
            </nav>
        </li></ul>
            </nav>
        </li>
        <li class="md-nav__item"><a href="#general" class="md-nav__link">General</a><nav class="md-nav">
              <ul class="md-nav__list">
        <li class="md-nav__item"><a href="#convention" class="md-nav__link">convention</a><nav class="md-nav">
              <ul class="md-nav__list">
        <li class="md-nav__item"><a href="#naming-conventions" class="md-nav__link">naming conventions</a>
        </li></ul>
            </nav>
        </li></ul>
            </nav>
        </li>
        <li class="md-nav__item"><a href="#id45" class="md-nav__link">函数</a><nav class="md-nav">
              <ul class="md-nav__list">
        <li class="md-nav__item"><a href="#id58" class="md-nav__link">参数传递</a><nav class="md-nav">
              <ul class="md-nav__list">
        <li class="md-nav__item"><a href="#id59" class="md-nav__link">共享传参</a>
        </li>
        <li class="md-nav__item"><a href="#args-kwargs" class="md-nav__link">args & kwargs</a>
        </li></ul>
            </nav>
        </li>
        <li class="md-nav__item"><a href="#id128" class="md-nav__link">变量作用域</a>
        </li>
        <li class="md-nav__item"><a href="#id145" class="md-nav__link">函数分类</a><nav class="md-nav">
              <ul class="md-nav__list">
        <li class="md-nav__item"><a href="#id146" class="md-nav__link">用户定义的函数</a><nav class="md-nav">
              <ul class="md-nav__list">
        <li class="md-nav__item"><a href="#lambda" class="md-nav__link">lambda 匿名函数</a>
        </li></ul>
            </nav>
        </li>
        <li class="md-nav__item"><a href="#id147" class="md-nav__link">内置函数</a><nav class="md-nav">
              <ul class="md-nav__list">
        <li class="md-nav__item"><a href="#map" class="md-nav__link">map</a>
        </li>
        <li class="md-nav__item"><a href="#id156" class="md-nav__link">规约函数</a>
        </li></ul>
            </nav>
        </li>
        <li class="md-nav__item"><a href="#id159" class="md-nav__link">装饰器</a>
        </li></ul>
            </nav>
        </li></ul>
            </nav>
        </li>
        <li class="md-nav__item"><a href="#id186" class="md-nav__link">不需要就注释</a><nav class="md-nav">
              <ul class="md-nav__list">
        <li class="md-nav__item"><a href="#id223" class="md-nav__link">函数式编程</a>
        </li></ul>
            </nav>
        </li>
        <li class="md-nav__item"><a href="#class" class="md-nav__link">Class</a><nav class="md-nav">
              <ul class="md-nav__list">
        <li class="md-nav__item"><a href="#none" class="md-nav__link">空 <cite>None</cite></a>
        </li>
        <li class="md-nav__item"><a href="#id242" class="md-nav__link">原子不可变对象</a><nav class="md-nav">
              <ul class="md-nav__list">
        <li class="md-nav__item"><a href="#int-float" class="md-nav__link">数值 <cite>int</cite> & <cite>float</cite></a>
        </li></ul>
            </nav>
        </li>
        <li class="md-nav__item"><a href="#id251" class="md-nav__link">序列</a><nav class="md-nav">
              <ul class="md-nav__list">
        <li class="md-nav__item"><a href="#id252" class="md-nav__link">序列操作</a><nav class="md-nav">
              <ul class="md-nav__list">
        <li class="md-nav__item"><a href="#listcomps-genexps" class="md-nav__link">listcomps & genexps</a>
        </li></ul>
            </nav>
        </li></ul>
            </nav>
        </li></ul>
            </nav>
        </li></ul>
            </nav>
        </li>
        <li class="md-nav__item"><a href="#id257" class="md-nav__link">2. 二层， 可以将二维的列表展平</a>
        </li>
        <li class="md-nav__item"><a href="#mix" class="md-nav__link">3. mix 两个</a>
        </li>
        <li class="md-nav__item"><a href="#id306" class="md-nav__link">用途</a><nav class="md-nav">
              <ul class="md-nav__list">
        <li class="md-nav__item"><a href="#basic-operaions" class="md-nav__link">Basic operaions</a><nav class="md-nav">
              <ul class="md-nav__list">
        <li class="md-nav__item"><a href="#n" class="md-nav__link">查找最大或最小的 N 个元素</a><nav class="md-nav">
              <ul class="md-nav__list">
        <li class="md-nav__item"><a href="#id371" class="md-nav__link">复杂对象</a>
        </li>
        <li class="md-nav__item"><a href="#id372" class="md-nav__link">其他常用</a><nav class="md-nav">
              <ul class="md-nav__list">
        <li class="md-nav__item"><a href="#id373" class="md-nav__link">并行迭代对象</a>
        </li></ul>
            </nav>
        </li></ul>
            </nav>
        </li></ul>
            </nav>
        </li>
        <li class="md-nav__item"><a href="#id382" class="md-nav__link">基本操作</a><nav class="md-nav">
              <ul class="md-nav__list">
        <li class="md-nav__item"><a href="#id383" class="md-nav__link">运算符</a>
        </li>
        <li class="md-nav__item"><a href="#iterator" class="md-nav__link">iterator 迭代器</a>
        </li></ul>
            </nav>
        </li></ul>
            </nav>
        </li>
        <li class="md-nav__item"><a href="#iter-data" class="md-nav__link">1. iter -> data</a>
        </li>
        <li class="md-nav__item"><a href="#enumerate-index-data" class="md-nav__link">2. enumerate -> (index, data)</a>
        </li>
        <li class="md-nav__item"><a href="#zip" class="md-nav__link">3. zip -></a>
        </li>
        <li class="md-nav__item"><a href="#enumerate-zip" class="md-nav__link">4. enumerate + zip</a><nav class="md-nav">
              <ul class="md-nav__list">
        <li class="md-nav__item"><a href="#id396" class="md-nav__link">循环</a>
        </li>
        <li class="md-nav__item"><a href="#cls" class="md-nav__link">类 cls</a><nav class="md-nav">
              <ul class="md-nav__list">
        <li class="md-nav__item"><a href="#id409" class="md-nav__link">协议</a>
        </li>
        <li class="md-nav__item"><a href="#id426" class="md-nav__link">借口</a>
        </li>
        <li class="md-nav__item"><a href="#id427" class="md-nav__link">继承类</a><nav class="md-nav">
              <ul class="md-nav__list">
        <li class="md-nav__item"><a href="#id428" class="md-nav__link">可继承的类</a><nav class="md-nav">
              <ul class="md-nav__list">
        <li class="md-nav__item"><a href="#userdict" class="md-nav__link">UserDict</a>
        </li></ul>
            </nav>
        </li></ul>
            </nav>
        </li>
        <li class="md-nav__item"><a href="#id429" class="md-nav__link">魔法方法</a><nav class="md-nav">
              <ul class="md-nav__list">
        <li class="md-nav__item"><a href="#example" class="md-nav__link">Example</a>
        </li>
        <li class="md-nav__item"><a href="#init" class="md-nav__link">init</a><nav class="md-nav">
              <ul class="md-nav__list">
        <li class="md-nav__item"><a href="#id484" class="md-nav__link">私有属性</a>
        </li></ul>
            </nav>
        </li>
        <li class="md-nav__item"><a href="#call" class="md-nav__link">call</a>
        </li>
        <li class="md-nav__item"><a href="#getitem" class="md-nav__link">getitem</a>
        </li>
        <li class="md-nav__item"><a href="#setitem" class="md-nav__link">setitem</a>
        </li>
        <li class="md-nav__item"><a href="#iterableobject" class="md-nav__link">IterableObject 可迭代对象</a>
        </li>
        <li class="md-nav__item"><a href="#id519" class="md-nav__link">字符串表现形式</a>
        </li>
        <li class="md-nav__item"><a href="#id530" class="md-nav__link">重载运算符</a>
        </li>
        <li class="md-nav__item"><a href="#hash" class="md-nav__link">hash</a>
        </li>
        <li class="md-nav__item"><a href="#id537" class="md-nav__link">一些优化</a>
        </li></ul>
            </nav>
        </li></ul>
            </nav>
        </li>
        <li class="md-nav__item"><a href="#id546" class="md-nav__link">重写</a>
        </li>
        <li class="md-nav__item"><a href="#re" class="md-nav__link">Re</a>
        </li>
        <li class="md-nav__item"><a href="#id547" class="md-nav__link">用户交互</a><nav class="md-nav">
              <ul class="md-nav__list">
        <li class="md-nav__item"><a href="#input" class="md-nav__link">Input</a><nav class="md-nav">
              <ul class="md-nav__list">
        <li class="md-nav__item"><a href="#id548" class="md-nav__link">读照片</a>
        </li></ul>
            </nav>
        </li>
        <li class="md-nav__item"><a href="#output" class="md-nav__link">output  格式化输出</a>
        </li></ul>
            </nav>
        </li>
        <li class="md-nav__item"><a href="#id549" class="md-nav__link">读写文件</a><nav class="md-nav">
              <ul class="md-nav__list">
        <li class="md-nav__item"><a href="#id550" class="md-nav__link">文件路径</a>
        </li>
        <li class="md-nav__item"><a href="#txt" class="md-nav__link">txt</a>
        </li>
        <li class="md-nav__item"><a href="#json" class="md-nav__link">json</a>
        </li>
        <li class="md-nav__item"><a href="#id561" class="md-nav__link">快速序列</a>
        </li></ul>
            </nav>
        </li>
        <li class="md-nav__item"><a href="#id562" class="md-nav__link">测试</a><nav class="md-nav">
              <ul class="md-nav__list">
        <li class="md-nav__item"><a href="#id563" class="md-nav__link">时间</a><nav class="md-nav">
              <ul class="md-nav__list">
        <li class="md-nav__item"><a href="#time" class="md-nav__link">time</a>
        </li>
        <li class="md-nav__item"><a href="#cprofile-pstats" class="md-nav__link"><cite>cProfile</cite> + <cite>pstats</cite></a>
        </li></ul>
            </nav>
        </li></ul>
            </nav>
        </li>
        <li class="md-nav__item"><a href="#error" class="md-nav__link">Error</a><nav class="md-nav">
              <ul class="md-nav__list">
        <li class="md-nav__item"><a href="#id610" class="md-nav__link">字符串相关</a>
        </li></ul>
            </nav>
        </li></ul>
            </nav>
        </li>
  </ul>
</nav>
              </div>
            </div>
          </div>
        
        <div class="md-content">
          <article class="md-content__inner md-typeset" role="main">
            
  <section id="elegant-python">
<h1 id="python-python-elegant--page-root">Elegant Python<a class="headerlink" href="#python-python-elegant--page-root" title="Link to this heading">¶</a></h1>
<div class="admonition- admonition hint">
<p class="admonition-title">迭代器 &amp; 生成器 区别 哪个更好</p>
</div>
<ul class="simple">
<li><dl class="simple">
<dt><strong>python 程序运行</strong>，<code class="docutils literal notranslate"><span class="pre">python.exe</span> <span class="pre">xxx.py</span></code> 实质上是使用&lt;kbd&gt;python.exe&lt;/kbd&gt; 解释所写的 &lt;kbd&gt;.py文件&lt;/kbd&gt; 里的代码，效率很大程度依赖 exe 解释器的效率。</dt><dd><ol class="arabic simple">
<li><p>&lt;kbd&gt;python.exe&lt;/kbd&gt;  启动</p></li>
<li><p>&lt;kbd&gt;python.exe&lt;/kbd&gt; 把&lt;kbd&gt;.py文件&lt;/kbd&gt; 里的代码当作普通文本内容由硬盘读入内存。（本质上是向操作系统发起系统调用，控制硬件完成读取。）</p></li>
<li><p>&lt;kbd&gt;python.exe&lt;/kbd&gt; 识别 python 语法，执行读入内存的代码。</p></li>
</ol>
</dd>
</dl>
</li>
</ul>
<p><span class="defi">PyObject</span> . 内存中长度可变的内置对象的 C 语言结构体。</p>
<p>[提升python执行效率的若干方法]</p>
<div class="line-block">
<div class="line">一开始应让代码结构尽可能简单。先尽可能在一个文件中完成所有的工作，确定一切都能正确运行后，再将类移到独立的模块中。先找出让你能够编写出可行代码的方式，再尝试让代码更为组织有序。</div>
<div class="line">都应紧跟在类定义后面包含一个文档字符串。这种文档字符串简要地描述类的功能，并遵循编写函数的文档字符串时采用的格式约定。</div>
</div>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="linenos">1</span><span class="n">n</span> <span class="o">=</span> <span class="mi">1</span>
<span class="linenos">2</span><span class="n">c</span> <span class="o">=</span> <span class="s1">'a'</span>
<span class="linenos">3</span><span class="n">l</span> <span class="o">=</span> <span class="p">[</span><span class="s1">'a'</span><span class="p">,</span> <span class="mi">1</span><span class="p">]</span>
<span class="linenos">4</span><span class="n">t</span> <span class="o">=</span> <span class="p">(</span><span class="s1">'a'</span><span class="p">,</span> <span class="mi">1</span><span class="p">)</span>
<span class="linenos">5</span><span class="n">s</span> <span class="o">=</span> <span class="p">{</span><span class="s1">'a'</span><span class="p">,</span> <span class="mi">1</span><span class="p">}</span>
<span class="linenos">6</span><span class="n">d</span> <span class="o">=</span> <span class="p">{</span><span class="s1">'a'</span><span class="p">:</span><span class="s1">'A'</span><span class="p">,</span> <span class="mi">1</span><span class="p">:</span><span class="s1">'one'</span><span class="p">}</span>
</pre></div>
</div>
<section id="id1">
<h2 id="id1">对象<a class="headerlink" href="#id1" title="Link to this heading">¶</a></h2>
<div class="admonition- admonition note">
<p class="admonition-title">万物皆可对象</p>
<p>一般对象 &amp; 函数对象</p>
</div>
<div class="line-block">
<div class="line">📕 属性</div>
<div class="line"><code class="docutils literal notranslate"><span class="pre">__doc__</span></code> 生成对象的帮助文本</div>
<div class="line"><code class="docutils literal notranslate"><span class="pre">__dict__</span></code> 储存用户属性</div>
</div>
<div class="line-block">
<div class="line"><code class="docutils literal notranslate"><span class="pre">dir(obj)</span></code> 查看对象属性</div>
<div class="line"><code class="docutils literal notranslate"><span class="pre">callable(obj)</span></code> 查看对象是否可调用</div>
</div>
<div class="highlight-pycon notranslate"><div class="highlight"><pre><span></span><span class="linenos">1</span><span class="gp">&gt;&gt;&gt; </span><span class="k">class</span> <span class="nc">C</span><span class="p">:</span> <span class="k">pass</span>
<span class="linenos">2</span><span class="gp">&gt;&gt;&gt; </span><span class="n">obj</span> <span class="o">=</span> <span class="n">C</span><span class="p">()</span>  <span class="c1"># 一般对象</span>
<span class="linenos">3</span><span class="gp">&gt;&gt;&gt; </span><span class="k">def</span> <span class="nf">func</span><span class="p">():</span> <span class="k">pass</span>  <span class="c1"># 函数对象</span>
<span class="linenos">4</span><span class="gp">&gt;&gt;&gt; </span><span class="nb">sorted</span><span class="p">(</span><span class="nb">set</span><span class="p">(</span><span class="nb">dir</span><span class="p">(</span><span class="n">func</span><span class="p">))</span> <span class="o">-</span> <span class="nb">set</span><span class="p">(</span><span class="nb">dir</span><span class="p">(</span><span class="n">obj</span><span class="p">)))</span>
<span class="linenos">5</span><span class="go">['__annotations__', '__builtins__', '__call__', '__closure__', '__code__',</span>
<span class="linenos">6</span><span class="go">'__defaults__', '__get__', '__globals__',</span>
<span class="linenos">7</span><span class="go">'__kwdefaults__', '__name__', '__qualname__']</span>
</pre></div>
</div>
<p><span class="defi">可调用对象</span> 。可使用 <span class="defi">调用运算符</span> <code class="docutils literal notranslate"><span class="pre">()</span></code> 的对象。可用 <code class="docutils literal notranslate"><span class="pre">callable(obj)</span></code> 进行判断。</p>
<ul class="simple">
<li><p>用户定义： 用 <code class="docutils literal notranslate"><span class="pre">def</span></code> &amp; <code class="docutils literal notranslate"><span class="pre">lambda</span></code> 创建的</p></li>
<li><p>内置函数：<cite>map</cite> &amp; <cite>filter</cite> …</p></li>
<li><p>内置方法： <cite>dict.get</cite></p></li>
<li><p>方法：在类的定义体中定义的函数</p></li>
<li><p>类：调用是会运行 <cite>__new__</cite> 创建一个实例，然后运行 <cite>__init__</cite> 初始化实例，然后返回实例</p></li>
<li><p>类的实例：如果定义了 <cite>__call__</cite> 方法</p></li>
<li><p>生成器函数：使用 <cite>yield</cite> 的 函数或方法</p></li>
</ul>
</section>
<section id="some">
<h2 id="some">Some<a class="headerlink" href="#some" title="Link to this heading">¶</a></h2>
<section id="path">
<h3 id="path">环境变量 系统路径 PATH<a class="headerlink" href="#path" title="Link to this heading">¶</a></h3>
<p>python 会在系统路径中找寻所需要的包</p>
<p><cite>import sys</cite></p>
<p>||meth|
<a href="#id611"><span class="problematic" id="id612">|--|</span></a>–|
<a href="#id613"><span class="problematic" id="id614">|查看当前系统路径|`print(sys.path)`|</span></a>
<a href="#id615"><span class="problematic" id="id616">|加入系统路径|`sys.path.append(new_path)`|</span></a>
<a href="#id617"><span class="problematic" id="id618">|查看环境变量|`os.getenv(key)`|</span></a></p>
<dl class="simple">
<dt>!!! warning “模型下载的地址 &amp; 环境变量”</dt><dd><p>模型下载一般各有各自的默认安装地址，但一般都下到个人文件夹中。如果项目在服务器上有多个分支的话，同个模型文件就会下载多次，占用大量内存。所以最好搞清下载地址，</p>
</dd>
</dl>
<p><code class="docutils literal notranslate"><span class="pre">`python</span>
<span class="pre">import</span> <span class="pre">os</span>
<span class="pre">"""hanlp"""</span>
<span class="pre">os.getenv('HANLP_HOME')</span>
<span class="pre">&gt;&gt;&gt;</span>
<span class="pre">==========</span>
<span class="pre">#为空就是系统没有储存HANLP_HOME的环境变量，</span>
<span class="pre">`</span></code></p>
</section>
</section>
<section id="id2">
<h2 id="id2">对象引用机制<a class="headerlink" href="#id2" title="Link to this heading">¶</a></h2>
<dl>
<dt>!!! danger “变量是✅贴在对象上的标注，而不是❌承载对象的盒子。”</dt><dd><p>==赋值==。是把变量分配给对象。对象在赋值之前就已经创建。
赋值语句 从右到左执行。</p>
<p><a href="#id3"><span class="problematic" id="id4">``</span></a><a href="#id5"><span class="problematic" id="id6">`</span></a>python
var = ‘obj’  # 先创建 obj 对象，再把 var 绑定给 obj (贴给 obj 上)</p>
<aside class="system-message" id="id3">
<p class="system-message-title">System Message: WARNING/2 (<span class="docutils literal">C:\Users\zxouyang\CodeProjects\PRIVATE_P\io\docs\source\python/python_elegant.rst</span>, line 101); <em><a href="#id4">backlink</a></em></p>
<p>Inline literal start-string without end-string.</p>
</aside>
<aside class="system-message" id="id5">
<p class="system-message-title">System Message: WARNING/2 (<span class="docutils literal">C:\Users\zxouyang\CodeProjects\PRIVATE_P\io\docs\source\python/python_elegant.rst</span>, line 101); <em><a href="#id6">backlink</a></em></p>
<p>Inline interpreted text or phrase reference start-string without end-string.</p>
</aside>
<p>a = b = c = 4  # 链式赋值
m, n = n, m  # 交叉赋值</p>
<p># 解压赋值
nums = [1, 2, 3, 4]
a, <a href="#id7"><span class="problematic" id="id8">*</span></a>_, e = nums
# &gt;&gt;&gt; a=1, e=4
a, _, c, _ = nums
# &gt;&gt;&gt; a=1, c=3
<a href="#id9"><span class="problematic" id="id10">``</span></a><a href="#id11"><span class="problematic" id="id12">`</span></a></p>
<aside class="system-message" id="id7">
<p class="system-message-title">System Message: WARNING/2 (<span class="docutils literal">C:\Users\zxouyang\CodeProjects\PRIVATE_P\io\docs\source\python/python_elegant.rst</span>, line 107); <em><a href="#id8">backlink</a></em></p>
<p>Inline emphasis start-string without end-string.</p>
</aside>
<aside class="system-message" id="id9">
<p class="system-message-title">System Message: WARNING/2 (<span class="docutils literal">C:\Users\zxouyang\CodeProjects\PRIVATE_P\io\docs\source\python/python_elegant.rst</span>, line 107); <em><a href="#id10">backlink</a></em></p>
<p>Inline literal start-string without end-string.</p>
</aside>
<aside class="system-message" id="id11">
<p class="system-message-title">System Message: WARNING/2 (<span class="docutils literal">C:\Users\zxouyang\CodeProjects\PRIVATE_P\io\docs\source\python/python_elegant.rst</span>, line 107); <em><a href="#id12">backlink</a></em></p>
<p>Inline interpreted text or phrase reference start-string without end-string.</p>
</aside>
</dd>
</dl>
<p>![](./pics/assign_2.png)
![](./pics/assign_1.png)</p>
<p>每个对象都有标识、类型、值。对象一旦创建，<a href="#id13"><span class="problematic" id="id14">**</span></a>标识**绝不会变。可以将标识理解为对象在内存中的地址。 <cite>id(var)</cite> 返回变量所引用的**对象标识**的整数表示。</p>
<aside class="system-message" id="id13">
<p class="system-message-title">System Message: WARNING/2 (<span class="docutils literal">C:\Users\zxouyang\CodeProjects\PRIVATE_P\io\docs\source\python/python_elegant.rst</span>, line 118); <em><a href="#id14">backlink</a></em></p>
<p>Inline strong start-string without end-string.</p>
</aside>
<section id="is">
<h3 id="is">is &amp; == 标识 &amp; 相等性<a class="headerlink" href="#is" title="Link to this heading">¶</a></h3>
<p><code class="docutils literal notranslate"><span class="pre">`python</span>
<span class="pre">var1</span> <span class="pre">=</span> <span class="pre">{'name':'Lily',</span> <span class="pre">'sex':'F'}</span>
<span class="pre">var2</span> <span class="pre">=</span> <span class="pre">var1</span>
<span class="pre">var3</span> <span class="pre">=</span> <span class="pre">{'name':'Lily',</span> <span class="pre">'sex':'F'}</span>
<span class="pre">var1</span> <span class="pre">is</span> <span class="pre">var2</span>
<span class="pre">&gt;&gt;&gt;</span> <span class="pre">True</span>
<span class="pre">==================</span>
<span class="pre">var1</span> <span class="pre">is</span> <span class="pre">var3</span>  <span class="pre">#</span> <span class="pre">id</span> <span class="pre">是唯一的标识</span>
<span class="pre">&gt;&gt;&gt;</span> <span class="pre">False</span>
<span class="pre">====================</span>
<span class="pre">var1</span> <span class="pre">:defi:`</span> <span class="pre">var3</span>  <span class="pre">#</span> <span class="pre">内容相同</span>
<span class="pre">&gt;&gt;&gt;</span> <span class="pre">True</span>
<span class="pre">==================</span>
<span class="pre">`</span></code></p>
<p><cite>A ` B</cite> 对象内容 ↔️ <cite>__eq__</cite> 【相等】
通常我们关注的是值。
<cite>A is B</cite> id地址 是否同一个对象引用。【标识】
经常用来确定是不是 <cite>None</cite>: <cite>is None</cite> &amp; <cite>is not None</cite></p>
<dl class="simple">
<dt>!!! p “<cite>is</cite> 通常比 <cite>==</cite> 快。”</dt><dd><p>因为 <cite>is</cite> 不能重载，所以 python 不需要寻找和调用特殊方法，而是直接比较两个整数ID。<cite>==</cite> 挂钩的是 <cite>__eq__</cite> 能重载，考虑更有实际意义的比较，相比于直接继承 <cite>object</cite> 的 直接比较ID的 <cite>__eq__</cite>，大多数类重载了 <cite>__eq__</cite>，设计到对象的类型、属性、可能复杂嵌套架构的值。需要多种比较。</p>
</dd>
<dt>!!! danger “<cite>is</cite> &amp; <cite>:defi:`</cite> SyntaxWarning”</dt><dd><p>从python 3.8 开始，使用 is 和 is not 运算符时，会抛出 <cite>SyntaxWarning</cite> 语句警告信息。解决方法：建议将对应语句中 is/is not 用 ` 和 != 代替</p>
</dd>
</dl>
</section>
<section id="id15">
<h3 id="id15">内存管理<a class="headerlink" href="#id15" title="Link to this heading">¶</a></h3>
<section id="id16">
<h4 id="id16">栈区和堆区<a class="headerlink" href="#id16" title="Link to this heading">¶</a></h4>
<p><strong>栈区</strong>：存放的是变量名于内存地址的对应关系，简单理解是变量名存内存地址
<strong>堆区</strong>：存放的是变量值。
<strong>直接引用</strong>：直接从&lt;u&gt;栈区找到堆区&lt;/u&gt;的关系是对变量值的直接引用
<strong>间接引用</strong>：在&lt;u&gt;堆区内找到堆区&lt;/u&gt;的关系是对变量值的间接引用</p>
<p>!!! warning “变量名的赋值、变量名的传参，传递都是==栈区==的数据，而且栈的数据是==变量名与内存地址的对应关系==，是对变量值的引用”</p>
<p><code class="docutils literal notranslate"><span class="pre">`python</span>
<span class="pre">a,</span> <span class="pre">b</span> <span class="pre">=</span> <span class="pre">1,</span> <span class="pre">[1]</span>
<span class="pre">lst</span> <span class="pre">=</span> <span class="pre">[a,</span> <span class="pre">b]</span>
<span class="pre">&gt;&gt;&gt;</span> <span class="pre">lst</span> <span class="pre">=</span> <span class="pre">[1,</span> <span class="pre">2]</span>
<span class="pre">==================================</span>
<span class="pre">lst.append(b)</span>
<span class="pre">a,</span> <span class="pre">b</span> <span class="pre">=</span> <span class="pre">2,</span> <span class="pre">4</span>
<span class="pre">&gt;&gt;&gt;</span> <span class="pre">lst</span> <span class="pre">=</span> <span class="pre">[1,</span> <span class="pre">2,</span> <span class="pre">2]</span>
<span class="pre">========================================</span>
<span class="pre">`</span></code></p>
</section>
<section id="id17">
<h4 id="id17">垃圾回收机制<a class="headerlink" href="#id17" title="Link to this heading">¶</a></h4>
<p>==垃圾变量==， 当一个值**没有任何变量名和它进行捆绑**，该变量值就会无法被访问到，涉及到**引用计数**的算法</p>
<dl>
<dt>!!! danger “<cite>del x</cite> 的理解”</dt><dd><p>解除了 x 和它所指向对象ID为*的 obj 的绑定关系
ID为* 的 obj 的引用计数 -1</p>
<p><code class="docutils literal notranslate"><span class="pre">`python</span>
<span class="pre">x</span> <span class="pre">=</span> <span class="pre">x-value</span>
<span class="pre">#</span> <span class="pre">生成</span> <span class="pre">x-value</span> <span class="pre">的</span> <span class="pre">ID为*</span> <span class="pre">的</span> <span class="pre">obj，把</span> <span class="pre">x</span> <span class="pre">变量名贴到</span> <span class="pre">ID为*</span> <span class="pre">的</span> <span class="pre">obj</span>
<span class="pre">del</span> <span class="pre">x</span>  <span class="pre">#</span> <span class="pre">解除</span>
<span class="pre">`</span></code></p>
</dd>
</dl>
<p><span class="defi">引用计数、标记清楚、分代回收</span>
<strong>引用计数</strong>，变量值被引用(指向)的数量，一旦没有引用关系(箭头指向)，引用计数=0，就当成需要回收的&lt;u&gt;垃圾&lt;/u&gt;。垃圾对象会被销毁，释放被分配的内存
<strong>标记清除</strong>，因为间接引用有可能造成&lt;u&gt;循环引用&lt;/u&gt;，导致引用计数不可能为0，以至于变量值永远不可能被删除。所以引入标记清除，将所有变量值进行扫描，若存在无法从栈区访达的变量值，则证明是&lt;u&gt;无直接引用，纯间接引用的垃圾&lt;/u&gt;
<strong>分代回收</strong>，用空间换时间，不会每时每刻地去扫描全部变量值，而是将变量值分类，以不同的频率去扫描归属不同类别的变量。刚刚新建的变量属于**新生代**的变量，有可能用完即弃，所以扫描频率会高一点；被引用过很多次的变量属于**成熟变量**，可能属于一直都要用的重要变量，所以扫描频率会低一些。</p>
<p><code class="docutils literal notranslate"><span class="pre">`mermaid</span>
<span class="pre">graph</span>
<span class="pre">subgraph</span> <span class="pre">堆区</span>
<span class="pre">A</span> <span class="pre">-.-</span> <span class="pre">B</span>
<span class="pre">B</span> <span class="pre">-.-</span> <span class="pre">A</span>
<span class="pre">end</span>
<span class="pre">subgraph</span> <span class="pre">栈区</span>
<span class="pre">None</span>
<span class="pre">end</span>
<span class="pre">`</span></code></p>
</section>
</section>
<section id="id18">
<h3 id="id18">不变 &amp; 可变<a class="headerlink" href="#id18" title="Link to this heading">¶</a></h3>
<p>==不可变==。数据结构的物理内容(即&lt;u&gt;元素保存的引用 item obj 的标识&lt;/u&gt;)不可变，与 item obj 的内容无关。
不可变类型，不能进行 item assignment。赋值会改变元素的 ID。
不可变类型，一旦内容改变，百分之百是指向了新的内容，引用的ID已经改变。</p>
<p>&gt; tuple 是不可变的，只是说 每个元素引用的 ID 不可变，元素可能引用的是可变类型的对象。如果就地修改，元素引用的ID不变，元素引用的内容发生改变。也不会产生 Error。</p>
<p><code class="docutils literal notranslate"><span class="pre">`python</span>
<span class="pre">a</span> <span class="pre">=</span> <span class="pre">(1,</span> <span class="pre">[1,</span> <span class="pre">2])</span>
<span class="pre">[id(item)</span> <span class="pre">for</span> <span class="pre">item</span> <span class="pre">in</span> <span class="pre">a]</span>
<span class="pre">&gt;&gt;&gt;</span> <span class="pre">[4309582064,</span> <span class="pre">4312627712]</span>
<span class="pre">==========================================================</span>
<span class="pre">a[1].append(3)</span>
<span class="pre">[id(item)</span> <span class="pre">for</span> <span class="pre">item</span> <span class="pre">in</span> <span class="pre">a]</span>
<span class="pre">id</span> <span class="pre">不变</span>
<span class="pre">------------</span>
<span class="pre">#</span> <span class="pre">&gt;&gt;&gt;</span> <span class="pre">a</span> <span class="pre">=</span> <span class="pre">(1,</span> <span class="pre">[1,</span> <span class="pre">2,</span> <span class="pre">3])</span>  <span class="pre">#</span> <span class="pre">内容变</span>
<span class="pre">`</span></code></p>
<dl>
<dt>!!! warning “变量名的赋值、变量名的传参，传递都是 <span class="defi">栈区</span> 的数据”</dt><dd><p>赋值就是将一个&lt;u&gt;旧的变量名&lt;/u&gt;和
- &lt;u&gt;旧值的地址&lt;/u&gt;解绑关系
- &lt;u&gt;新值的地址&lt;/u&gt;绑定关系
<a href="#id19"><span class="problematic" id="id20">``</span></a>` python
“”” 对于a重新赋值
- 与 4的地址 解绑关系
- 与 5的地址 绑定关系
“””
a = 4
# &gt;&gt;&gt; id(a) = 4373905744
a = 5
# &gt;&gt;&gt; id(a) = 4373905776
# &gt;&gt;&gt; id(4) = 4373905744
# &gt;&gt;&gt; id(5) = 4373905776</p>
<aside class="system-message" id="id19">
<p class="system-message-title">System Message: WARNING/2 (<span class="docutils literal">C:\Users\zxouyang\CodeProjects\PRIVATE_P\io\docs\source\python/python_elegant.rst</span>, line 226); <em><a href="#id20">backlink</a></em></p>
<p>Inline literal start-string without end-string.</p>
</aside>
<p>“”” 对于lst重新赋值
- 解绑关系
- 绑定关系
“””
lst = [1, 2]
# &gt;&gt;&gt; id(lst) = 4376984512
lst = [1, 3]
# &gt;&gt;&gt; id(lst) = 4376922944</p>
<p>“”” 对于lst 的 item assignment【可变】
- 不改变id地址
- 但会改变容器内的地址
“””
# &gt;&gt;&gt; lst[1] = 3
# &gt;&gt;&gt; id(lst[1]) = 4373905712
# &gt;&gt;&gt; id(3) = 4373905712
lst[1] = 2
# &gt;&gt;&gt; lst = [1, 2]
# &gt;&gt;&gt; id(lst) = 4376922944 # 和之前一致
# &gt;&gt;&gt; id(lst[1]) = 4373905680 # 改了之前的
<a href="#id21"><span class="problematic" id="id22">``</span></a><a href="#id23"><span class="problematic" id="id24">`</span></a></p>
<aside class="system-message" id="id21">
<p class="system-message-title">System Message: WARNING/2 (<span class="docutils literal">C:\Users\zxouyang\CodeProjects\PRIVATE_P\io\docs\source\python/python_elegant.rst</span>, line 250); <em><a href="#id22">backlink</a></em></p>
<p>Inline literal start-string without end-string.</p>
</aside>
<aside class="system-message" id="id23">
<p class="system-message-title">System Message: WARNING/2 (<span class="docutils literal">C:\Users\zxouyang\CodeProjects\PRIVATE_P\io\docs\source\python/python_elegant.rst</span>, line 250); <em><a href="#id24">backlink</a></em></p>
<p>Inline interpreted text or phrase reference start-string without end-string.</p>
</aside>
</dd>
</dl>
<section id="id25">
<h4 id="id25">深浅拷贝<a class="headerlink" href="#id25" title="Link to this heading">¶</a></h4>
<dl class="simple">
<dt>!!! warning “默认作浅拷贝”</dt><dd><p>对不可变类型施加的把戏：赋值时不创建副本，而是返回同一个对象的引用。因为不能进行修改，一旦修改就是 new 一个新对象 with 新 ID。</p>
</dd>
</dl>
<p>==浅拷贝==。无论如何，直接指向 item 所引用的对象地址。
<cite>b = a.copy()</cite> &amp; 构造方法 &amp; <cite>[:]</cite>
==深拷贝==。区分要拷贝的是可变的还是不可变的。
<cite>b = copy.deepcopy(a)</cite>
1️⃣ &lt;u&gt;不可变&lt;/u&gt;，指向原来的地址（地址相同，同一个对象）；
2️⃣ &lt;u&gt;可变的&lt;/u&gt;，重新构建一个，copy内容（地址不同，内容相同）。</p>
<dl>
<dt>!!! p “对于容器类型的分别：看是否在作出【修改之后 ab不一样】🟰 【a b 是独立的】”</dt><dd><p>修改从元素对象分：可变元素 &amp; 不可变元素；从ID变化分 ID变 &amp; ID不变。
不可变元素一旦改变，只能进行赋值，ID一定会变。可变元素只有在赋值的时候 ID变，就地更改时ID不会变（譬如说 item assignment）。
<cite>a = [1, (1, 2), [1, 2]]</cite></p>
<p>||不可变的赋值|可变的赋值|可变的item assignment
<a href="#id619"><span class="problematic" id="id620">|--|</span></a>–<a href="#id621"><span class="problematic" id="id622">|--|</span></a>–|
||`b[1]=’a’`</p>
</dd>
</dl>
<aside class="system-message">
<p class="system-message-title">System Message: WARNING/2 (<span class="docutils literal">C:\Users\zxouyang\CodeProjects\PRIVATE_P\io\docs\source\python/python_elegant.rst</span>, line 284)</p>
<p>Definition list ends without a blank line; unexpected unindent.</p>
</aside>
<p>元组|`b[2]=’a’`
列表|`b[2][0]=’a’`
列表的item assignment|</p>
<aside class="system-message">
<p class="system-message-title">System Message: ERROR/3 (<span class="docutils literal">C:\Users\zxouyang\CodeProjects\PRIVATE_P\io\docs\source\python/python_elegant.rst</span>, line 287)</p>
<p>Unexpected indentation.</p>
</aside>
<blockquote>
<div><p><a href="#id623"><span class="problematic" id="id624">|浅拷贝|✅|✅|✅|</span></a>
<a href="#id625"><span class="problematic" id="id626">|深拷贝|✅|✅|❌|</span></a></p>
</div></blockquote>
<p><code class="docutils literal notranslate"><span class="pre">`python</span>
<span class="pre">a,</span> <span class="pre">b</span> <span class="pre">=</span> <span class="pre">1,</span> <span class="pre">[1]</span>
<span class="pre">lst</span> <span class="pre">=</span> <span class="pre">[a,</span> <span class="pre">b]</span>
<span class="pre">&gt;&gt;&gt;</span> <span class="pre">lst=[1,</span> <span class="pre">[1]]</span>
<span class="pre">==================================</span>
<span class="pre">a</span> <span class="pre">+=</span> <span class="pre">1</span>
<span class="pre">b</span> <span class="pre">+=</span> <span class="pre">[1]</span>
<span class="pre">&gt;&gt;&gt;</span> <span class="pre">lst=[1,</span> <span class="pre">[1,</span> <span class="pre">1]]</span>
<span class="pre">========================================</span>
<span class="pre">`</span></code></p>
<p>&lt;div class=”grid” markdown&gt;
![h](pics/memory_1.png) &lt;p&gt;a 是不可变；b是可变。假设创建对象的ID从1开始。
1. 创建 ID=1的1 &amp; ID=2列表[1]
2. 把 a &amp; b 分别贴到 ID=1 &amp; ID=2上
3. 创建 ID=3的列表，把[0]位贴到ID=1，[1]位贴到ID=2。而不是贴到 a &amp; b 上
4. 创建 ID=4的2，把 a 从ID=1撕掉，给ID=3
5. 修改b，b没有撕掉，其实修改ID=3
lst的位[0]在ID=1上与a无关；位[1]在ID=3上，所以也修改了。&lt;/p&gt;
&lt;/div&gt;</p>
<p><a href="#id26"><span class="problematic" id="id27">``</span></a><a href="#id28"><span class="problematic" id="id29">`</span></a>python hl_lines=”4 5”
import copy</p>
<aside class="system-message" id="id26">
<p class="system-message-title">System Message: WARNING/2 (<span class="docutils literal">C:\Users\zxouyang\CodeProjects\PRIVATE_P\io\docs\source\python/python_elegant.rst</span>, line 311); <em><a href="#id27">backlink</a></em></p>
<p>Inline literal start-string without end-string.</p>
</aside>
<aside class="system-message" id="id28">
<p class="system-message-title">System Message: WARNING/2 (<span class="docutils literal">C:\Users\zxouyang\CodeProjects\PRIVATE_P\io\docs\source\python/python_elegant.rst</span>, line 311); <em><a href="#id29">backlink</a></em></p>
<p>Inline interpreted text or phrase reference start-string without end-string.</p>
</aside>
<p>l1 = [0, [11, 22], (7, 8)]  # [不可变, 可变， 不可变]
l2 = list(l1)
l3 = copy.deepcopy(l1)</p>
<p>id(l1) == id(l2) or id(l1)==id(l3)
&gt;&gt;&gt; False
====================
list(map(lambda i1, i2 : id(i1)==id(i1), l1 ,l2))
&gt;&gt;&gt; [True, True, True]
==============================================
list(map(lambda i1, i3 : id(i1)==id(i3), l1 ,l3))
&gt;&gt;&gt; [True, False, True]
================================================</p>
<p>l1[0] += 1
l1[1].remove(11)
l1[1]+=[33,44]
l1[2]+=(9, 10)
&gt;&gt;&gt; l1=[1, [22, 33, 44], (7, 8, 9, 10), -1]
========================================================================================
# &gt;&gt;&gt; l2=[0, [22, 33, 44], (7, 8)]
&gt;&gt;&gt; l3=[0, [11, 22], (7, 8)]
==========================================================
<a href="#id30"><span class="problematic" id="id31">``</span></a><a href="#id32"><span class="problematic" id="id33">`</span></a></p>
<aside class="system-message" id="id30">
<p class="system-message-title">System Message: WARNING/2 (<span class="docutils literal">C:\Users\zxouyang\CodeProjects\PRIVATE_P\io\docs\source\python/python_elegant.rst</span>, line 328); <em><a href="#id31">backlink</a></em></p>
<p>Inline literal start-string without end-string.</p>
</aside>
<aside class="system-message" id="id32">
<p class="system-message-title">System Message: WARNING/2 (<span class="docutils literal">C:\Users\zxouyang\CodeProjects\PRIVATE_P\io\docs\source\python/python_elegant.rst</span>, line 328); <em><a href="#id33">backlink</a></em></p>
<p>Inline interpreted text or phrase reference start-string without end-string.</p>
</aside>
<p>![](./pics/memory_2.jpg){width=90%}</p>
</section>
<section id="id34">
<h4 id="id34">整数池<a class="headerlink" href="#id34" title="Link to this heading">¶</a></h4>
<p><strong>理论上的正常情况</strong>，变量都是需要申请**内存空间（id不同）** 存储数据然后把地址返回给变量名引用。但在 Python解释器（一般是cpython）:defi:<cite>[-5, 256]</cite> 是不会申请新的内存，而都是**引用同一块早已在解释器运行时就开辟的内存,==小整数池==**，导致**id相同**。另外 pycharm/vscode 有==大整数池==的概念</p>
<p><a href="#id35"><span class="problematic" id="id36">``</span></a><a href="#id37"><span class="problematic" id="id38">`</span></a>python
“””正常来说，每次申请，id都不一样”””
a, b = 9999999999999, 9999999999999
a == b
&gt;&gt;&gt; True
==================
a is b
&gt;&gt;&gt; Fasle
====================
# &gt;&gt;&gt; id(a) = 4336403888
&gt;&gt;&gt; id(b) = 4336403152
==============================================</p>
<aside class="system-message" id="id35">
<p class="system-message-title">System Message: WARNING/2 (<span class="docutils literal">C:\Users\zxouyang\CodeProjects\PRIVATE_P\io\docs\source\python/python_elegant.rst</span>, line 346); <em><a href="#id36">backlink</a></em></p>
<p>Inline literal start-string without end-string.</p>
</aside>
<aside class="system-message" id="id37">
<p class="system-message-title">System Message: WARNING/2 (<span class="docutils literal">C:\Users\zxouyang\CodeProjects\PRIVATE_P\io\docs\source\python/python_elegant.rst</span>, line 346); <em><a href="#id38">backlink</a></em></p>
<p>Inline interpreted text or phrase reference start-string without end-string.</p>
</aside>
<p>“”” 在vscode里id依旧一样：大整数池”””
id(221111111)
&gt;&gt;&gt; 4336403952
==============================
id(221111111)
&gt;&gt;&gt; 4336403952
==============================
<a href="#id39"><span class="problematic" id="id40">``</span></a><a href="#id41"><span class="problematic" id="id42">`</span></a></p>
<aside class="system-message" id="id39">
<p class="system-message-title">System Message: WARNING/2 (<span class="docutils literal">C:\Users\zxouyang\CodeProjects\PRIVATE_P\io\docs\source\python/python_elegant.rst</span>, line 359); <em><a href="#id40">backlink</a></em></p>
<p>Inline literal start-string without end-string.</p>
</aside>
<aside class="system-message" id="id41">
<p class="system-message-title">System Message: WARNING/2 (<span class="docutils literal">C:\Users\zxouyang\CodeProjects\PRIVATE_P\io\docs\source\python/python_elegant.rst</span>, line 359); <em><a href="#id42">backlink</a></em></p>
<p>Inline interpreted text or phrase reference start-string without end-string.</p>
</aside>
<p>[小整数池]</p>
</section>
</section>
</section>
<section id="general">
<h2 id="general">General<a class="headerlink" href="#general" title="Link to this heading">¶</a></h2>
<section id="convention">
<h3 id="convention">convention<a class="headerlink" href="#convention" title="Link to this heading">¶</a></h3>
<ul class="simple">
<li><dl class="simple">
<dt>prefernce</dt><dd><ul>
<li><p>PEP8建议 <strong>indent using space 空格缩进 = 4</strong>，这既可提高可读性，又留下了足够的多级缩进空间。</p></li>
<li><p><strong>垂直参考线</strong>，帮助你遵守行长不能超过79字符的约定。</p></li>
</ul>
</dd>
</dl>
</li>
<li><dl class="simple">
<dt><cite>.py</cite> file</dt><dd><ul>
<li><p>在开头加上姓名和当前日期，再用一句话阐述程序的功能</p></li>
<li><p>声明编码方式: <cite># -*- coding:utf-8 -*-</cite></p></li>
<li><dl class="simple">
<dt>可使用空行来组织代码，但不要滥用。</dt><dd><ul>
<li><p>在类中，可使用一空行来分隔方法；</p></li>
<li><p>在模块中，可使用两个空行来分隔类</p></li>
</ul>
</dd>
</dl>
</li>
</ul>
</dd>
</dl>
</li>
<li><p>诸如 <cite>==, &gt;=, &lt;=`等**比较运算符**两边各添加一个空格，例如，`if age &lt; 4</cite> :要比 <cite>if age&lt;4</cite> 好。</p></li>
<li><p><strong>文档字符串, docstring</strong>, 的注释，描述了函数是做什么的。文档字符串用三引号括起，Python使用它们来生成有关程序中函数的文档。</p></li>
</ul>
<section id="naming-conventions">
<h4 id="naming-conventions">naming conventions<a class="headerlink" href="#naming-conventions" title="Link to this heading">¶</a></h4>
<ul>
<li><p><a href="#id43"><span class="problematic" id="id44">**</span></a>驼峰命名**的时候</p>
<aside class="system-message" id="id43">
<p class="system-message-title">System Message: WARNING/2 (<span class="docutils literal">C:\Users\zxouyang\CodeProjects\PRIVATE_P\io\docs\source\python/python_elegant.rst</span>, line 391); <em><a href="#id44">backlink</a></em></p>
<p>Inline strong start-string without end-string.</p>
</aside>
</li>
<li><p><strong>使用单数和复数式名称</strong>，可帮助你判断代码段处理的是单个列表元素还是整个列表。</p></li>
</ul>
<p><a href="#id627"><span class="problematic" id="id628">|类型|notes|</span></a>
<a href="#id629"><span class="problematic" id="id630">|--|</span></a>–|
<a href="#id631"><span class="problematic" id="id632">|Package，Module.py，全局变量，Function|全小写，下划线|</span></a>
<a href="#id633"><span class="problematic" id="id634">|实例变量 instance varaibles |^|</span></a>
<a href="#id635"><span class="problematic" id="id636">|Classes | **驼峰命名**, 所有的缩写都要大写：`HTTPSever`|</span></a>
<a href="#id637"><span class="problematic" id="id638">|常量 constant | **全大写**，下划线|</span></a></p>
<p>实例变量 instance varaibles</p>
<ul class="simple">
<li><p>Non-public instance variables should begin with a single underscore</p></li>
<li><p>If an instance name needs to be mangled, two underscores may begin its name</p></li>
</ul>
<p>[CodingConvention] | [python3-cookbook] | [Python 中的下划线命名规则]</p>
</section>
</section>
</section>
<section id="id45">
<h2 id="id45">函数<a class="headerlink" href="#id45" title="Link to this heading">¶</a></h2>
<dl>
<dt>!!! p “函数也是对象的一种，是 &lt;u&gt;`function` 类的实例&lt;/u&gt;, 所以可以赋给变量，通过变量名调用；作为参数传给别的函数。。。”</dt><dd><p><span class="defi">function 类</span>
📕 函数对象特有属性 <cite>dir(func)</cite> 查看对象属性
<cite>__call__:method-wrapper</cite>
<cite>__closure__:tuple=None</cite> <span class="defi">函数闭包</span> 对自由变量的的绑定
<cite>__defaults__:tuple</cite> 放 <a href="#id46"><span class="problematic" id="id47">**</span></a>形式参数**的默认值
<cite>__globals__:dict</cite> 所在 module 的全局变量
<cite>__kwdefaults__</cite> 放 <a href="#id48"><span class="problematic" id="id49">**</span></a>关键字形式参数**的默认值
<cite>__name__</cite> 函数名</p>
<aside class="system-message" id="id46">
<p class="system-message-title">System Message: WARNING/2 (<span class="docutils literal">C:\Users\zxouyang\CodeProjects\PRIVATE_P\io\docs\source\python/python_elegant.rst</span>, line 412); <em><a href="#id47">backlink</a></em></p>
<p>Inline strong start-string without end-string.</p>
</aside>
<aside class="system-message" id="id48">
<p class="system-message-title">System Message: WARNING/2 (<span class="docutils literal">C:\Users\zxouyang\CodeProjects\PRIVATE_P\io\docs\source\python/python_elegant.rst</span>, line 412); <em><a href="#id49">backlink</a></em></p>
<p>Inline strong start-string without end-string.</p>
</aside>
</dd>
</dl>
<p><a href="#id50"><span class="problematic" id="id51">``</span></a><a href="#id52"><span class="problematic" id="id53">`</span></a>python hl_lines=”5 7 9”
def func(n):</p>
<aside class="system-message" id="id50">
<p class="system-message-title">System Message: WARNING/2 (<span class="docutils literal">C:\Users\zxouyang\CodeProjects\PRIVATE_P\io\docs\source\python/python_elegant.rst</span>, line 421); <em><a href="#id51">backlink</a></em></p>
<p>Inline literal start-string without end-string.</p>
</aside>
<aside class="system-message" id="id52">
<p class="system-message-title">System Message: WARNING/2 (<span class="docutils literal">C:\Users\zxouyang\CodeProjects\PRIVATE_P\io\docs\source\python/python_elegant.rst</span>, line 421); <em><a href="#id53">backlink</a></em></p>
<p>Inline interpreted text or phrase reference start-string without end-string.</p>
</aside>
<aside class="system-message">
<p class="system-message-title">System Message: ERROR/3 (<span class="docutils literal">C:\Users\zxouyang\CodeProjects\PRIVATE_P\io\docs\source\python/python_elegant.rst</span>, line 423)</p>
<p>Unexpected indentation.</p>
</aside>
<blockquote>
<div><p>“”” return param “””
return n</p>
</div></blockquote>
<p>f =func
&gt;&gt;&gt; f=func=&lt;function func at 0x102fe88b0&gt;
====================================================================================
f(1)
&gt;&gt;&gt; f(1)=func(1)=1
======================================
list(map(f,range(3)))
&gt;&gt;&gt; [0, 1, 2]
============================
<a href="#id54"><span class="problematic" id="id55">``</span></a><a href="#id56"><span class="problematic" id="id57">`</span></a></p>
<aside class="system-message" id="id54">
<p class="system-message-title">System Message: WARNING/2 (<span class="docutils literal">C:\Users\zxouyang\CodeProjects\PRIVATE_P\io\docs\source\python/python_elegant.rst</span>, line 426); <em><a href="#id55">backlink</a></em></p>
<p>Inline literal start-string without end-string.</p>
</aside>
<aside class="system-message" id="id56">
<p class="system-message-title">System Message: WARNING/2 (<span class="docutils literal">C:\Users\zxouyang\CodeProjects\PRIVATE_P\io\docs\source\python/python_elegant.rst</span>, line 426); <em><a href="#id57">backlink</a></em></p>
<p>Inline interpreted text or phrase reference start-string without end-string.</p>
</aside>
<p>==higher-order func 高阶函数==。接受**函数**为参数，或把**函数**作为结果返回的函数。
&gt; map &amp; filter &amp; reduce &amp; apply &amp;…
&gt; sorted(因为能用key去接受k函数作为参数，把k函数结果作为排序的依据)</p>
<p>==函数内省 Function introspection==。是指通过一些机制来获取**函数的元信息**，例如函数名称、参数列表、返回值类型等。它使得程序能够在运行时检查函数的结构和特性，进而进行动态的操作和分析。
&gt; <cite>type()</cite>: 获取对象的类型
&gt; <cite>dir()</cite>: 返回一个对象的所有属性和方法的列表。
&gt; <cite>inspect module</cite>：<cite>inspect.isfunction(obj)</cite>:判断一个对象是否是函数，<cite>inspect.getargspec(func)</cite>: 获取函数的参数信息，<cite>inspect.signature(func)</cite> : 获取函数的签名信息。
&gt; <cite>__doc__</cite> 属性：函数的文档字符串
&gt; <cite>装饰器</cite> ：装饰器是一种修改函数行为的方式，也可以用于函数内省。通过定义一个装饰器函数，可以在函数执行前后进行一些操作，例如记录日志、计时等。装饰器可以用来动态地修改函数的行为，从而实现函数内省的目的。</p>
<p>==泛函数 generic function==。根据第一个参数的类型，以不同方式装饰</p>
<p><span class="defi">空函数</span>
应用场景：写大纲，提醒 developer 有什么功能，在预设行为的时候</p>
<section id="id58">
<h3 id="id58">参数传递<a class="headerlink" href="#id58" title="Link to this heading">¶</a></h3>
<section id="id59">
<h4 id="id59">共享传参<a class="headerlink" href="#id59" title="Link to this heading">¶</a></h4>
<dl class="simple">
<dt>!!! quote “”</dt><dd><p>参数传递 根据引用的方式分为
- 按值传递，函数得到参数的副本。
传 a 的时候，拿到 a
- 按引用传递，函数得到指向参数的指针
传 a 的时候，拿到 指向 a 的指针</p>
</dd>
</dl>
<p>==共享传参 call by sharing==。函数的各个形式的参数获得实参中各个应用的副本。</p>
<dl class="simple">
<dt>!!! danger “参数传递是按值传递，但这里的值是引用。”</dt><dd><p>参数传递是【引用】按值的传递。函数内部的形参是实参的别名，就是贴在实参所引用的对象上，但是不能解除实参和对象的绑定关系。
所以 函数内部能&lt;u&gt;修改&lt;/u&gt;作为参数传入的可变类型。</p>
</dd>
</dl>
<p><a href="#id60"><span class="problematic" id="id61">``</span></a><a href="#id62"><span class="problematic" id="id63">`</span></a>python
def f(a, b):</p>
<aside class="system-message" id="id60">
<p class="system-message-title">System Message: WARNING/2 (<span class="docutils literal">C:\Users\zxouyang\CodeProjects\PRIVATE_P\io\docs\source\python/python_elegant.rst</span>, line 472); <em><a href="#id61">backlink</a></em></p>
<p>Inline literal start-string without end-string.</p>
</aside>
<aside class="system-message" id="id62">
<p class="system-message-title">System Message: WARNING/2 (<span class="docutils literal">C:\Users\zxouyang\CodeProjects\PRIVATE_P\io\docs\source\python/python_elegant.rst</span>, line 472); <em><a href="#id63">backlink</a></em></p>
<p>Inline interpreted text or phrase reference start-string without end-string.</p>
</aside>
<aside class="system-message">
<p class="system-message-title">System Message: ERROR/3 (<span class="docutils literal">C:\Users\zxouyang\CodeProjects\PRIVATE_P\io\docs\source\python/python_elegant.rst</span>, line 474)</p>
<p>Unexpected indentation.</p>
</aside>
<blockquote>
<div><p>a += b
return a</p>
</div></blockquote>
<p>x, y = 1, 2
f(x, y)
&gt;&gt;&gt; 3
============
# &gt;&gt;&gt; x, y=(1, 2)
x, y = (1, 1), (2, 2)
f(x, y)
&gt;&gt;&gt; (1, 1, 2, 2)
==================================
# &gt;&gt;&gt; x, y=((1, 1), (2, 2))
x, y = [1, 1], [2, 2]
f(x, y)
&gt;&gt;&gt; [1, 1, 2, 2]
==================================
# &gt;&gt;&gt; x, y=([1, 1, 2, 2], [2, 2])  # 可变类型对象被修改
<a href="#id64"><span class="problematic" id="id65">``</span></a><a href="#id66"><span class="problematic" id="id67">`</span></a></p>
<aside class="system-message" id="id64">
<p class="system-message-title">System Message: WARNING/2 (<span class="docutils literal">C:\Users\zxouyang\CodeProjects\PRIVATE_P\io\docs\source\python/python_elegant.rst</span>, line 477); <em><a href="#id65">backlink</a></em></p>
<p>Inline literal start-string without end-string.</p>
</aside>
<aside class="system-message" id="id66">
<p class="system-message-title">System Message: WARNING/2 (<span class="docutils literal">C:\Users\zxouyang\CodeProjects\PRIVATE_P\io\docs\source\python/python_elegant.rst</span>, line 477); <em><a href="#id67">backlink</a></em></p>
<p>Inline interpreted text or phrase reference start-string without end-string.</p>
</aside>
<dl>
<dt>!!! danger “不要使用可变类型 <cite>[]</cite> &amp; <cite>dict{}</cite> 作为默认参数，而是选择 <cite>None</cite>”</dt><dd><p>默认参数会自建对象，如果没有指定，就一律贴在其上，所以如果可变类型变化，引用的ID对象变了，只要绑定在这个ID对象（只要不是赋值），都随着一起变化。
默认值在定义函数计算（通常在加载模块时进行对象创建），因此默认值会变成函数对象的属性，凡是没有传入，都会指向这个在一开始就创建好的默认值对象（ID为同一个）。</p>
<p><a href="#id68"><span class="problematic" id="id69">``</span></a><a href="#id70"><span class="problematic" id="id71">`</span></a>python
def func(a=[1,2]):</p>
<aside class="system-message" id="id68">
<p class="system-message-title">System Message: WARNING/2 (<span class="docutils literal">C:\Users\zxouyang\CodeProjects\PRIVATE_P\io\docs\source\python/python_elegant.rst</span>, line 498); <em><a href="#id69">backlink</a></em></p>
<p>Inline literal start-string without end-string.</p>
</aside>
<aside class="system-message" id="id70">
<p class="system-message-title">System Message: WARNING/2 (<span class="docutils literal">C:\Users\zxouyang\CodeProjects\PRIVATE_P\io\docs\source\python/python_elegant.rst</span>, line 498); <em><a href="#id71">backlink</a></em></p>
<p>Inline interpreted text or phrase reference start-string without end-string.</p>
</aside>
<aside class="system-message">
<p class="system-message-title">System Message: ERROR/3 (<span class="docutils literal">C:\Users\zxouyang\CodeProjects\PRIVATE_P\io\docs\source\python/python_elegant.rst</span>, line 500)</p>
<p>Unexpected indentation.</p>
</aside>
<blockquote>
<div><p>a.append(3)
return a</p>
</div></blockquote>
<p>func([3])
# &gt;&gt;&gt; [3, 3]  &lt;- [3]
res = func()
# &gt;&gt;&gt; res=[1, 2, 3]  &lt;- [1, 2]
res.append(-1)
# &gt;&gt;&gt; res=[1, 2, 3, -1]
func()  # 默认参数被改变
# &gt;&gt;&gt; [1, 2, 3, -1, 3] &lt;- [1, 2, 3, -1]
# &gt;&gt;&gt; res=[1, 2, 3, -1, 3]
<a href="#id72"><span class="problematic" id="id73">``</span></a><a href="#id74"><span class="problematic" id="id75">`</span></a></p>
<aside class="system-message" id="id72">
<p class="system-message-title">System Message: WARNING/2 (<span class="docutils literal">C:\Users\zxouyang\CodeProjects\PRIVATE_P\io\docs\source\python/python_elegant.rst</span>, line 503); <em><a href="#id73">backlink</a></em></p>
<p>Inline literal start-string without end-string.</p>
</aside>
<aside class="system-message" id="id74">
<p class="system-message-title">System Message: WARNING/2 (<span class="docutils literal">C:\Users\zxouyang\CodeProjects\PRIVATE_P\io\docs\source\python/python_elegant.rst</span>, line 503); <em><a href="#id75">backlink</a></em></p>
<p>Inline interpreted text or phrase reference start-string without end-string.</p>
</aside>
</dd>
</dl>
<p>!!! warning “如果定义参数接受可变参数，谨慎考虑调用方是否期望修改传入的参数。”</p>
<blockquote>
<div><p><a href="#id76"><span class="problematic" id="id77">``</span></a><a href="#id78"><span class="problematic" id="id79">`</span></a>python
class C():</p>
<aside class="system-message" id="id76">
<p class="system-message-title">System Message: WARNING/2 (<span class="docutils literal">C:\Users\zxouyang\CodeProjects\PRIVATE_P\io\docs\source\python/python_elegant.rst</span>, line 516); <em><a href="#id77">backlink</a></em></p>
<p>Inline literal start-string without end-string.</p>
</aside>
<aside class="system-message" id="id78">
<p class="system-message-title">System Message: WARNING/2 (<span class="docutils literal">C:\Users\zxouyang\CodeProjects\PRIVATE_P\io\docs\source\python/python_elegant.rst</span>, line 516); <em><a href="#id79">backlink</a></em></p>
<p>Inline interpreted text or phrase reference start-string without end-string.</p>
</aside>
<aside class="system-message">
<p class="system-message-title">System Message: ERROR/3 (<span class="docutils literal">C:\Users\zxouyang\CodeProjects\PRIVATE_P\io\docs\source\python/python_elegant.rst</span>, line 518)</p>
<p>Unexpected indentation.</p>
</aside>
<blockquote>
<div><dl class="simple">
<dt>def __init__(self,lst=None, modified=True):</dt><dd><dl class="simple">
<dt>if lst is None:  # 当需要空的时候 用 None 来判定</dt><dd><p>self.lst = []</p>
</dd>
<dt>elif modified == Ture:</dt><dd><p>self.lst = lst  # 指向传入的 ID，里面变，外面同样 ID的 也会变</p>
</dd>
<dt>elif modified == Flase:</dt><dd><p>self.lst = list(lst)  # 浅拷贝，for 元素都是不可变的
self.lst = copy.deepcopy() # 深拷贝，for 元素有可变的</p>
</dd>
</dl>
</dd>
</dl>
</div></blockquote>
<aside class="system-message">
<p class="system-message-title">System Message: WARNING/2 (<span class="docutils literal">C:\Users\zxouyang\CodeProjects\PRIVATE_P\io\docs\source\python/python_elegant.rst</span>, line 526)</p>
<p>Block quote ends without a blank line; unexpected unindent.</p>
</aside>
<p><a href="#id80"><span class="problematic" id="id81">``</span></a><a href="#id82"><span class="problematic" id="id83">`</span></a></p>
<aside class="system-message" id="id80">
<p class="system-message-title">System Message: WARNING/2 (<span class="docutils literal">C:\Users\zxouyang\CodeProjects\PRIVATE_P\io\docs\source\python/python_elegant.rst</span>, line 526); <em><a href="#id81">backlink</a></em></p>
<p>Inline literal start-string without end-string.</p>
</aside>
<aside class="system-message" id="id82">
<p class="system-message-title">System Message: WARNING/2 (<span class="docutils literal">C:\Users\zxouyang\CodeProjects\PRIVATE_P\io\docs\source\python/python_elegant.rst</span>, line 526); <em><a href="#id83">backlink</a></em></p>
<p>Inline interpreted text or phrase reference start-string without end-string.</p>
</aside>
</div></blockquote>
</section>
<section id="args-kwargs">
<h4 id="args-kwargs">args &amp; kwargs<a class="headerlink" href="#args-kwargs" title="Link to this heading">¶</a></h4>
<p>==仅限关键词参数 kwargs==。只能用**关键字模式**传递。在函数定义时放在 <cite>*args</cite> 的后面.
==一般参数 args==。定位模式 &amp; 关键字模式都可以。在函数定义时放在 <cite>*args</cite> 的前面
==定位模式，定位参数==。传入时没有用参数名捆绑，就按位置进行一一对应。用定位模式的是定位参数。
==关键字模式，关键词参数==。传入时有用参数名捆绑，用关键词模式的是关键词参数。</p>
<p>不设默认值 🟰 强制传入实参。无论是 args &amp; kwargs</p>
<p>!!! quote “<cite>*</cite> 展开 tuple 🟰 一般参数 &amp; <cite>**</cite> 展开 dict 🟰 关键词参数”</p>
<p><a href="#id84"><span class="problematic" id="id85">``</span></a><a href="#id86"><span class="problematic" id="id87">`</span></a>python hl_lines=”1 5 7 9 11 13 16 18”
def func(general, <a href="#id88"><span class="problematic" id="id89">*</span></a>args, kw_only=None, <a href="#id90"><span class="problematic" id="id91">**</span></a>kwargs):</p>
<aside class="system-message" id="id84">
<p class="system-message-title">System Message: WARNING/2 (<span class="docutils literal">C:\Users\zxouyang\CodeProjects\PRIVATE_P\io\docs\source\python/python_elegant.rst</span>, line 540); <em><a href="#id85">backlink</a></em></p>
<p>Inline literal start-string without end-string.</p>
</aside>
<aside class="system-message" id="id86">
<p class="system-message-title">System Message: WARNING/2 (<span class="docutils literal">C:\Users\zxouyang\CodeProjects\PRIVATE_P\io\docs\source\python/python_elegant.rst</span>, line 540); <em><a href="#id87">backlink</a></em></p>
<p>Inline interpreted text or phrase reference start-string without end-string.</p>
</aside>
<aside class="system-message" id="id88">
<p class="system-message-title">System Message: WARNING/2 (<span class="docutils literal">C:\Users\zxouyang\CodeProjects\PRIVATE_P\io\docs\source\python/python_elegant.rst</span>, line 540); <em><a href="#id89">backlink</a></em></p>
<p>Inline emphasis start-string without end-string.</p>
</aside>
<aside class="system-message" id="id90">
<p class="system-message-title">System Message: WARNING/2 (<span class="docutils literal">C:\Users\zxouyang\CodeProjects\PRIVATE_P\io\docs\source\python/python_elegant.rst</span>, line 540); <em><a href="#id91">backlink</a></em></p>
<p>Inline strong start-string without end-string.</p>
</aside>
<aside class="system-message">
<p class="system-message-title">System Message: ERROR/3 (<span class="docutils literal">C:\Users\zxouyang\CodeProjects\PRIVATE_P\io\docs\source\python/python_elegant.rst</span>, line 542)</p>
<p>Unexpected indentation.</p>
</aside>
<blockquote>
<div><p>print(f’<a href="#id92"><span class="problematic" id="id93">*</span></a>args={args}’)
print(f’<a href="#id94"><span class="problematic" id="id95">**</span></a>kwargs={kwargs}’)</p>
<aside class="system-message" id="id92">
<p class="system-message-title">System Message: WARNING/2 (<span class="docutils literal">C:\Users\zxouyang\CodeProjects\PRIVATE_P\io\docs\source\python/python_elegant.rst</span>, line 542); <em><a href="#id93">backlink</a></em></p>
<p>Inline emphasis start-string without end-string.</p>
</aside>
<aside class="system-message" id="id94">
<p class="system-message-title">System Message: WARNING/2 (<span class="docutils literal">C:\Users\zxouyang\CodeProjects\PRIVATE_P\io\docs\source\python/python_elegant.rst</span>, line 542); <em><a href="#id95">backlink</a></em></p>
<p>Inline strong start-string without end-string.</p>
</aside>
</div></blockquote>
<p>func()
&gt;&gt;&gt; TypeError: func() missing 1 required positional argument: ‘general’
================================================================================================================================================
func(1, ‘a’, ‘b’, ‘c’)
&gt;&gt;&gt; <a href="#id96"><span class="problematic" id="id97">*</span></a>args=(‘a’, ‘b’, ‘c’) <a href="#id98"><span class="problematic" id="id99">**</span></a>kwargs={}
============================================================================
func(1, ‘a’, ‘b’, c=’c’)
&gt;&gt;&gt; <a href="#id100"><span class="problematic" id="id101">*</span></a>args=(‘a’, ‘b’) <a href="#id102"><span class="problematic" id="id103">**</span></a>kwargs={‘c’: ‘c’}
==================================================================================
func(args=’a’, b= ‘b’, 1)
&gt;&gt;&gt; SyntaxError: positional argument follows keyword argument
============================================================================================================================
func(args=’a’, b= ‘b’, general=1)
&gt;&gt;&gt; <a href="#id104"><span class="problematic" id="id105">*</span></a>args=()  <a href="#id106"><span class="problematic" id="id107">**</span></a>kwargs={‘args’: ‘a’, ‘b’: ‘b’}
==============================================================================================
params = {‘general’: 1, ‘a’: ‘a’}
func(<a href="#id108"><span class="problematic" id="id109">**</span></a>params)
&gt;&gt;&gt; <a href="#id110"><span class="problematic" id="id111">*</span></a>args=()  <a href="#id112"><span class="problematic" id="id113">**</span></a>kwargs={‘a’: ‘a’}
====================================================================
params = (1,2,3)
func(<a href="#id114"><span class="problematic" id="id115">*</span></a>params)
&gt;&gt;&gt; <a href="#id116"><span class="problematic" id="id117">*</span></a>args=(2, 3)  <a href="#id118"><span class="problematic" id="id119">**</span></a>kwargs={}
============================================================
<a href="#id120"><span class="problematic" id="id121">``</span></a><a href="#id122"><span class="problematic" id="id123">`</span></a></p>
<aside class="system-message" id="id96">
<p class="system-message-title">System Message: WARNING/2 (<span class="docutils literal">C:\Users\zxouyang\CodeProjects\PRIVATE_P\io\docs\source\python/python_elegant.rst</span>, line 545); <em><a href="#id97">backlink</a></em></p>
<p>Inline emphasis start-string without end-string.</p>
</aside>
<aside class="system-message" id="id98">
<p class="system-message-title">System Message: WARNING/2 (<span class="docutils literal">C:\Users\zxouyang\CodeProjects\PRIVATE_P\io\docs\source\python/python_elegant.rst</span>, line 545); <em><a href="#id99">backlink</a></em></p>
<p>Inline strong start-string without end-string.</p>
</aside>
<aside class="system-message" id="id100">
<p class="system-message-title">System Message: WARNING/2 (<span class="docutils literal">C:\Users\zxouyang\CodeProjects\PRIVATE_P\io\docs\source\python/python_elegant.rst</span>, line 545); <em><a href="#id101">backlink</a></em></p>
<p>Inline emphasis start-string without end-string.</p>
</aside>
<aside class="system-message" id="id102">
<p class="system-message-title">System Message: WARNING/2 (<span class="docutils literal">C:\Users\zxouyang\CodeProjects\PRIVATE_P\io\docs\source\python/python_elegant.rst</span>, line 545); <em><a href="#id103">backlink</a></em></p>
<p>Inline strong start-string without end-string.</p>
</aside>
<aside class="system-message" id="id104">
<p class="system-message-title">System Message: WARNING/2 (<span class="docutils literal">C:\Users\zxouyang\CodeProjects\PRIVATE_P\io\docs\source\python/python_elegant.rst</span>, line 545); <em><a href="#id105">backlink</a></em></p>
<p>Inline emphasis start-string without end-string.</p>
</aside>
<aside class="system-message" id="id106">
<p class="system-message-title">System Message: WARNING/2 (<span class="docutils literal">C:\Users\zxouyang\CodeProjects\PRIVATE_P\io\docs\source\python/python_elegant.rst</span>, line 545); <em><a href="#id107">backlink</a></em></p>
<p>Inline strong start-string without end-string.</p>
</aside>
<aside class="system-message" id="id108">
<p class="system-message-title">System Message: WARNING/2 (<span class="docutils literal">C:\Users\zxouyang\CodeProjects\PRIVATE_P\io\docs\source\python/python_elegant.rst</span>, line 545); <em><a href="#id109">backlink</a></em></p>
<p>Inline strong start-string without end-string.</p>
</aside>
<aside class="system-message" id="id110">
<p class="system-message-title">System Message: WARNING/2 (<span class="docutils literal">C:\Users\zxouyang\CodeProjects\PRIVATE_P\io\docs\source\python/python_elegant.rst</span>, line 545); <em><a href="#id111">backlink</a></em></p>
<p>Inline emphasis start-string without end-string.</p>
</aside>
<aside class="system-message" id="id112">
<p class="system-message-title">System Message: WARNING/2 (<span class="docutils literal">C:\Users\zxouyang\CodeProjects\PRIVATE_P\io\docs\source\python/python_elegant.rst</span>, line 545); <em><a href="#id113">backlink</a></em></p>
<p>Inline strong start-string without end-string.</p>
</aside>
<aside class="system-message" id="id114">
<p class="system-message-title">System Message: WARNING/2 (<span class="docutils literal">C:\Users\zxouyang\CodeProjects\PRIVATE_P\io\docs\source\python/python_elegant.rst</span>, line 545); <em><a href="#id115">backlink</a></em></p>
<p>Inline emphasis start-string without end-string.</p>
</aside>
<aside class="system-message" id="id116">
<p class="system-message-title">System Message: WARNING/2 (<span class="docutils literal">C:\Users\zxouyang\CodeProjects\PRIVATE_P\io\docs\source\python/python_elegant.rst</span>, line 545); <em><a href="#id117">backlink</a></em></p>
<p>Inline emphasis start-string without end-string.</p>
</aside>
<aside class="system-message" id="id118">
<p class="system-message-title">System Message: WARNING/2 (<span class="docutils literal">C:\Users\zxouyang\CodeProjects\PRIVATE_P\io\docs\source\python/python_elegant.rst</span>, line 545); <em><a href="#id119">backlink</a></em></p>
<p>Inline strong start-string without end-string.</p>
</aside>
<aside class="system-message" id="id120">
<p class="system-message-title">System Message: WARNING/2 (<span class="docutils literal">C:\Users\zxouyang\CodeProjects\PRIVATE_P\io\docs\source\python/python_elegant.rst</span>, line 545); <em><a href="#id121">backlink</a></em></p>
<p>Inline literal start-string without end-string.</p>
</aside>
<aside class="system-message" id="id122">
<p class="system-message-title">System Message: WARNING/2 (<span class="docutils literal">C:\Users\zxouyang\CodeProjects\PRIVATE_P\io\docs\source\python/python_elegant.rst</span>, line 545); <em><a href="#id123">backlink</a></em></p>
<p>Inline interpreted text or phrase reference start-string without end-string.</p>
</aside>
<p>&lt;p&gt;&amp;#9312; kw-only 只允许使用关键字模式，因为在 <a href="#id124"><span class="problematic" id="id125">*</span></a>args 后面&lt;/p&gt;
&lt;p&gt;&amp;#9316; 没有指定默认值的，得不到参数就会报错&lt;/p&gt;
&lt;p&gt;&amp;#9318; 都是定位模式传入，按顺序进行分配，多出的不定量的参数会被 <a href="#id126"><span class="problematic" id="id127">*</span></a>args 捕获，存入元组&lt;/p&gt;
&lt;p&gt;&amp;#9320; 按定位模式传入多余的参数只会被 args 捕获，而不会被 kwargs捕获。按关键字模式传入的多余的才会被**kwargs捕获，存入字典&lt;/p&gt;
&lt;p&gt;&amp;#9322; 在传入时，定位模式的参数一定要在采用关键字模式的参数前面。&lt;/p&gt;
&lt;p&gt;&amp;#9324; 在传入时，一般参数可以使用关键字模式，此时不需要考虑位置关系。&lt;/p&gt;
&lt;p&gt;&amp;#9327; 字典传入的是纯关键字模式&lt;/p&gt;
&lt;p&gt;&amp;#9329; 元组传入的是定位模式，此时不能存在没有指定默认值的仅限关键字的参数。&lt;/p&gt;</p>
<aside class="system-message" id="id124">
<p class="system-message-title">System Message: WARNING/2 (<span class="docutils literal">C:\Users\zxouyang\CodeProjects\PRIVATE_P\io\docs\source\python/python_elegant.rst</span>, line 570); <em><a href="#id125">backlink</a></em></p>
<p>Inline emphasis start-string without end-string.</p>
</aside>
<aside class="system-message" id="id126">
<p class="system-message-title">System Message: WARNING/2 (<span class="docutils literal">C:\Users\zxouyang\CodeProjects\PRIVATE_P\io\docs\source\python/python_elegant.rst</span>, line 570); <em><a href="#id127">backlink</a></em></p>
<p>Inline emphasis start-string without end-string.</p>
</aside>
</section>
</section>
<section id="id128">
<h3 id="id128">变量作用域<a class="headerlink" href="#id128" title="Link to this heading">¶</a></h3>
<p>==名称空间 namespace==：存放名字的地方，是对栈区的划分。名称空间的”嵌套”关系是以函数定义阶段为准</p>
<p>![](./pics/namespace_1.png)</p>
<p>![](./pics/namespace_2.png)</p>
<p>按照由上至下： 内置名称空间 》 全局名称空间 》 局部名称空间。</p>
<p><strong>加载顺序</strong>：内置名称空间&gt;全局名称空间&gt;局部名称空间</p>
<p><strong>销毁顺序</strong>：局部名称空间&gt;全局名空间&gt;内置名称空间</p>
<p>名字的查找优先级：当前所在的位置向上一层一层查找
&gt; 如果当前在局部名称空间: 局部名称空间-&gt;全局名称空间-&gt;内置名称空间</p>
<dl class="simple">
<dt>!!! danger “python 在没有任何声明的前提下，假定在函数定义体内中&lt;u&gt;赋值&lt;/u&gt;的变量是==局部变量==。”</dt><dd><p>如果想在函数定义体内赋值，还想 python 解释器把其认为全局变量，需要声明 <cite>global</cite>
如果再局部想要修改全局的名字对应的值（不可变类型），需要用global
[Python 全局变量]</p>
</dd>
</dl>
<p><span class="defi">全局名称空间</span>
存放的名字：只要不是函数内定义、也不是内置的，剩下的都是全局名称空间的名字。包括 import 进来的函数和变量
存活周期：python文件执行则产生，python 文件运行完毕后销毁</p>
<p><span class="defi">局部名称空间</span>
存放的名字：在调用函数时，运行函数体代码过程中产生的函数内的名字
存活周期：在调用函数时存活，函数调用完毕后则销毁</p>
<p>==闭包==。延伸了作用域的函数，其中包含函数定义体中运用，但不在定义体内定义的**非全局变量**。一般出现在嵌套函数里。闭包是一种函数，他会保留定义函数时存在的自由变量的绑定，哪怕是定义作用域不能用，绑定也能使用。
==自由变量==。未在本地作用域内绑定的变量。用 <cite>nonlocal</cite> 声明，哪怕是在函数定义体内赋值，python 解释器会把其认为自由变量(类 <cite>global</cite> )。保存在 返回对象的`.__code__.co_afreevars`  &amp; <cite>.__closure__[idx].cell_contents</cite> 一一对应。</p>
<p><a href="#id129"><span class="problematic" id="id130">``</span></a><a href="#id131"><span class="problematic" id="id132">`</span></a>python hl_lines=”3-10”
def outer():</p>
<aside class="system-message" id="id129">
<p class="system-message-title">System Message: WARNING/2 (<span class="docutils literal">C:\Users\zxouyang\CodeProjects\PRIVATE_P\io\docs\source\python/python_elegant.rst</span>, line 615); <em><a href="#id130">backlink</a></em></p>
<p>Inline literal start-string without end-string.</p>
</aside>
<aside class="system-message" id="id131">
<p class="system-message-title">System Message: WARNING/2 (<span class="docutils literal">C:\Users\zxouyang\CodeProjects\PRIVATE_P\io\docs\source\python/python_elegant.rst</span>, line 615); <em><a href="#id132">backlink</a></em></p>
<p>Inline interpreted text or phrase reference start-string without end-string.</p>
</aside>
<aside class="system-message">
<p class="system-message-title">System Message: ERROR/3 (<span class="docutils literal">C:\Users\zxouyang\CodeProjects\PRIVATE_P\io\docs\source\python/python_elegant.rst</span>, line 617)</p>
<p>Unexpected indentation.</p>
</aside>
<blockquote>
<div><p># 3-10 inner 的闭包延伸到 inner 之外，包含 自由变量 的定义
series = []
total, count = 0, 0
def inner(new_v):</p>
<aside class="system-message">
<p class="system-message-title">System Message: ERROR/3 (<span class="docutils literal">C:\Users\zxouyang\CodeProjects\PRIVATE_P\io\docs\source\python/python_elegant.rst</span>, line 621)</p>
<p>Unexpected indentation.</p>
</aside>
<blockquote>
<div><p>nonlocal total, count
total += new_v  # 哪怕赋值了会解释自由变量。
count += 1
series.append(new_v)  # 自由变量
return f’{sum(series) / len(series)} {total/count}’</p>
</div></blockquote>
<p>return inner</p>
</div></blockquote>
<p>avg = outer()
avg(10)
&gt;&gt;&gt; ‘10.0 10.0’
================================
avg(11)
&gt;&gt;&gt; ‘10.5 10.5’
================================
avg2 = outer()
avg2(0)
&gt;&gt;&gt; ‘0 0’
====================
avg.__code__.co_freevars
&gt;&gt;&gt; (‘count’, ‘series’, ‘total’)
==================================================================
avg.__closure__[1].cell_contents
&gt;&gt;&gt; [10, 11]
==========================
<a href="#id133"><span class="problematic" id="id134">``</span></a><a href="#id135"><span class="problematic" id="id136">`</span></a></p>
<aside class="system-message" id="id133">
<p class="system-message-title">System Message: WARNING/2 (<span class="docutils literal">C:\Users\zxouyang\CodeProjects\PRIVATE_P\io\docs\source\python/python_elegant.rst</span>, line 629); <em><a href="#id134">backlink</a></em></p>
<p>Inline literal start-string without end-string.</p>
</aside>
<aside class="system-message" id="id135">
<p class="system-message-title">System Message: WARNING/2 (<span class="docutils literal">C:\Users\zxouyang\CodeProjects\PRIVATE_P\io\docs\source\python/python_elegant.rst</span>, line 629); <em><a href="#id136">backlink</a></em></p>
<p>Inline interpreted text or phrase reference start-string without end-string.</p>
</aside>
<p><a href="#id137"><span class="problematic" id="id138">``</span></a><a href="#id139"><span class="problematic" id="id140">`</span></a>python
glo = ‘a’
def func():</p>
<aside class="system-message" id="id137">
<p class="system-message-title">System Message: WARNING/2 (<span class="docutils literal">C:\Users\zxouyang\CodeProjects\PRIVATE_P\io\docs\source\python/python_elegant.rst</span>, line 648); <em><a href="#id138">backlink</a></em></p>
<p>Inline literal start-string without end-string.</p>
</aside>
<aside class="system-message" id="id139">
<p class="system-message-title">System Message: WARNING/2 (<span class="docutils literal">C:\Users\zxouyang\CodeProjects\PRIVATE_P\io\docs\source\python/python_elegant.rst</span>, line 648); <em><a href="#id140">backlink</a></em></p>
<p>Inline interpreted text or phrase reference start-string without end-string.</p>
</aside>
<aside class="system-message">
<p class="system-message-title">System Message: ERROR/3 (<span class="docutils literal">C:\Users\zxouyang\CodeProjects\PRIVATE_P\io\docs\source\python/python_elegant.rst</span>, line 651)</p>
<p>Unexpected indentation.</p>
</aside>
<blockquote>
<div><p>print(glo)  # 使用内部变量
glo = 3     # 定义内部变量
print(glo)</p>
</div></blockquote>
<aside class="system-message">
<p class="system-message-title">System Message: WARNING/2 (<span class="docutils literal">C:\Users\zxouyang\CodeProjects\PRIVATE_P\io\docs\source\python/python_elegant.rst</span>, line 654)</p>
<p>Block quote ends without a blank line; unexpected unindent.</p>
</aside>
<p>func()
&gt;&gt;&gt; UnboundLocalError: cannot access local variable ‘glo’
======================================================================================================================</p>
<dl class="simple">
<dt>def Sol_A():</dt><dd><p>global glo
print(glo)
glo = ‘A’    # 修改外部变量
print(glo)</p>
</dd>
<dt>def Sol_B():</dt><dd><p>glo = ‘B’    # 定义内部变量
print(glo)</p>
</dd>
</dl>
<p>Sol_A()
&gt;&gt;&gt; a
============
# &gt;&gt;&gt; A
print(glo)  # 外部变量改变
&gt;&gt;&gt; A
============
sol_B()
&gt;&gt;&gt; B
============
print(glo)  # 外部变量不变
&gt;&gt;&gt; A
============
<a href="#id141"><span class="problematic" id="id142">``</span></a><a href="#id143"><span class="problematic" id="id144">`</span></a></p>
<aside class="system-message" id="id141">
<p class="system-message-title">System Message: WARNING/2 (<span class="docutils literal">C:\Users\zxouyang\CodeProjects\PRIVATE_P\io\docs\source\python/python_elegant.rst</span>, line 668); <em><a href="#id142">backlink</a></em></p>
<p>Inline literal start-string without end-string.</p>
</aside>
<aside class="system-message" id="id143">
<p class="system-message-title">System Message: WARNING/2 (<span class="docutils literal">C:\Users\zxouyang\CodeProjects\PRIVATE_P\io\docs\source\python/python_elegant.rst</span>, line 668); <em><a href="#id144">backlink</a></em></p>
<p>Inline interpreted text or phrase reference start-string without end-string.</p>
</aside>
</section>
<section id="id145">
<h3 id="id145">函数分类<a class="headerlink" href="#id145" title="Link to this heading">¶</a></h3>
<section id="id146">
<h4 id="id146">用户定义的函数<a class="headerlink" href="#id146" title="Link to this heading">¶</a></h4>
<p><cite>def</cite> &amp; <cite>lambda</cite> 创建</p>
<section id="lambda">
<h5 id="lambda">lambda 匿名函数<a class="headerlink" href="#lambda" title="Link to this heading">¶</a></h5>
<p>在表达式内创建，定义体内不能赋值，不能用 while for。</p>
</section>
</section>
<section id="id147">
<h4 id="id147">内置函数<a class="headerlink" href="#id147" title="Link to this heading">¶</a></h4>
<p>生成迭代器 iterator (后续需要搭配 <cite>list</cite> 等储存)：<cite>map</cite> &amp; <cite>filter</cite></p>
<p>规约函数：<cite>sum</cite> &amp; <cite>all</cite> &amp; <cite>any</cite></p>
<section id="map">
<h5 id="map">map<a class="headerlink" href="#map" title="Link to this heading">¶</a></h5>
<dl class="simple">
<dt>!!! p “为什么 map 运行速度比 for 循环要快”</dt><dd><p>map 用 C 编写的并且经过高度优化, <strong>底层自动实现并行</strong>
使用 map() 的第二个优势与内存消耗有关。使用 for 循环，您需要将整个列表存储在系统的内存中。使用 map() 可以按需获得项目，并且在给定时间系统内存中只有一个项目。</p>
</dd>
</dl>
<p>[Python’s map(): Processing Iterables Without a Loop]</p>
<p><cite>map(function, iterable[, iterable1, iterable2,…, iterableN])</cite></p>
<p>如果我们将n序列传递给map()，则该函数必须采用n个参数，并且并行使用序列中的项，直到用尽最短的序列。</p>
<dl>
<dt>!!! danger “死循环”</dt><dd><p>纯计算无 IO 的死循环会导致致命的效率问题</p>
<p><a href="#id148"><span class="problematic" id="id149">``</span></a><a href="#id150"><span class="problematic" id="id151">`</span></a>python
# 1  有 IO 会卡 IO 所以不会死机
while True:</p>
<aside class="system-message" id="id148">
<p class="system-message-title">System Message: WARNING/2 (<span class="docutils literal">C:\Users\zxouyang\CodeProjects\PRIVATE_P\io\docs\source\python/python_elegant.rst</span>, line 719); <em><a href="#id149">backlink</a></em></p>
<p>Inline literal start-string without end-string.</p>
</aside>
<aside class="system-message" id="id150">
<p class="system-message-title">System Message: WARNING/2 (<span class="docutils literal">C:\Users\zxouyang\CodeProjects\PRIVATE_P\io\docs\source\python/python_elegant.rst</span>, line 719); <em><a href="#id151">backlink</a></em></p>
<p>Inline interpreted text or phrase reference start-string without end-string.</p>
</aside>
<aside class="system-message">
<p class="system-message-title">System Message: ERROR/3 (<span class="docutils literal">C:\Users\zxouyang\CodeProjects\PRIVATE_P\io\docs\source\python/python_elegant.rst</span>, line 722)</p>
<p>Unexpected indentation.</p>
</aside>
<blockquote>
<div><p>name = input()
print(name)</p>
</div></blockquote>
<p># 2 没有 IO 会耗尽计算资源
while True:</p>
<aside class="system-message">
<p class="system-message-title">System Message: ERROR/3 (<span class="docutils literal">C:\Users\zxouyang\CodeProjects\PRIVATE_P\io\docs\source\python/python_elegant.rst</span>, line 727)</p>
<p>Unexpected indentation.</p>
</aside>
<blockquote>
<div><p>1+1</p>
</div></blockquote>
<aside class="system-message">
<p class="system-message-title">System Message: WARNING/2 (<span class="docutils literal">C:\Users\zxouyang\CodeProjects\PRIVATE_P\io\docs\source\python/python_elegant.rst</span>, line 728)</p>
<p>Block quote ends without a blank line; unexpected unindent.</p>
</aside>
<p><a href="#id152"><span class="problematic" id="id153">``</span></a><a href="#id154"><span class="problematic" id="id155">`</span></a></p>
<aside class="system-message" id="id152">
<p class="system-message-title">System Message: WARNING/2 (<span class="docutils literal">C:\Users\zxouyang\CodeProjects\PRIVATE_P\io\docs\source\python/python_elegant.rst</span>, line 728); <em><a href="#id153">backlink</a></em></p>
<p>Inline literal start-string without end-string.</p>
</aside>
<aside class="system-message" id="id154">
<p class="system-message-title">System Message: WARNING/2 (<span class="docutils literal">C:\Users\zxouyang\CodeProjects\PRIVATE_P\io\docs\source\python/python_elegant.rst</span>, line 728); <em><a href="#id155">backlink</a></em></p>
<p>Inline interpreted text or phrase reference start-string without end-string.</p>
</aside>
</dd>
</dl>
</section>
<section id="id156">
<h5 id="id156">规约函数<a class="headerlink" href="#id156" title="Link to this heading">¶</a></h5>
<p><cite>sum(iterable)</cite> <a href="#id157"><span class="problematic" id="id158">**</span></a>累计**之前的结果求和
<cite>all(iterable)</cite> 只有全 True 才是 True
<cite>any(iterable)</cite> 一个 True 都是 True</p>
<aside class="system-message" id="id157">
<p class="system-message-title">System Message: WARNING/2 (<span class="docutils literal">C:\Users\zxouyang\CodeProjects\PRIVATE_P\io\docs\source\python/python_elegant.rst</span>, line 733); <em><a href="#id158">backlink</a></em></p>
<p>Inline strong start-string without end-string.</p>
</aside>
</section>
</section>
<section id="id159">
<h4 id="id159">装饰器<a class="headerlink" href="#id159" title="Link to this heading">¶</a></h4>
<p><span class="defi">装饰器</span> 是可调用对象，参数是另外一个函数（==被装饰的函数==）。装饰器可能： 1️⃣ 处理被装饰的函数再将其返回； 2️⃣ 将其替换成另外一个函数或可调用对象在返回。</p>
<p><a href="#id160"><span class="problematic" id="id161">``</span></a>` python
def decorate(func):  # 装饰器</p>
<aside class="system-message" id="id160">
<p class="system-message-title">System Message: WARNING/2 (<span class="docutils literal">C:\Users\zxouyang\CodeProjects\PRIVATE_P\io\docs\source\python/python_elegant.rst</span>, line 742); <em><a href="#id161">backlink</a></em></p>
<p>Inline literal start-string without end-string.</p>
</aside>
<aside class="system-message">
<p class="system-message-title">System Message: ERROR/3 (<span class="docutils literal">C:\Users\zxouyang\CodeProjects\PRIVATE_P\io\docs\source\python/python_elegant.rst</span>, line 744)</p>
<p>Unexpected indentation.</p>
</aside>
<blockquote>
<div><p>print(f’running decorator({func})’)
return function  # 必须返回**一个可调用对象或者函数**s</p>
</div></blockquote>
<p>@decorate  # 装饰
def func():</p>
<aside class="system-message">
<p class="system-message-title">System Message: ERROR/3 (<span class="docutils literal">C:\Users\zxouyang\CodeProjects\PRIVATE_P\io\docs\source\python/python_elegant.rst</span>, line 749)</p>
<p>Unexpected indentation.</p>
</aside>
<blockquote>
<div><p>pass</p>
</div></blockquote>
<aside class="system-message">
<p class="system-message-title">System Message: WARNING/2 (<span class="docutils literal">C:\Users\zxouyang\CodeProjects\PRIVATE_P\io\docs\source\python/python_elegant.rst</span>, line 750)</p>
<p>Block quote ends without a blank line; unexpected unindent.</p>
</aside>
<p><a href="#id162"><span class="problematic" id="id163">``</span></a><a href="#id164"><span class="problematic" id="id165">`</span></a></p>
<aside class="system-message" id="id162">
<p class="system-message-title">System Message: WARNING/2 (<span class="docutils literal">C:\Users\zxouyang\CodeProjects\PRIVATE_P\io\docs\source\python/python_elegant.rst</span>, line 750); <em><a href="#id163">backlink</a></em></p>
<p>Inline literal start-string without end-string.</p>
</aside>
<aside class="system-message" id="id164">
<p class="system-message-title">System Message: WARNING/2 (<span class="docutils literal">C:\Users\zxouyang\CodeProjects\PRIVATE_P\io\docs\source\python/python_elegant.rst</span>, line 750); <em><a href="#id165">backlink</a></em></p>
<p>Inline interpreted text or phrase reference start-string without end-string.</p>
</aside>
<p>!!! danger “等于的是  <cite>func = decorate(func)</cite> 而不是 <cite>func() = decorate(func)</cite>”</p>
<blockquote>
<div><ul>
<li><p>装饰器会在被装饰函数定义之后立刻执行，通常是加载模块时。即背地里运行。所以一般会分开定义。装饰器在一个模块，应用在其他模块的函数上。但是不代表马上运行被装饰的函数。</p>
<blockquote>
<div><p><code class="docutils literal notranslate"><span class="pre">`</span> <span class="pre">python</span>
<span class="pre">func</span> <span class="pre">=</span> <span class="pre">decorate(func)</span>
<span class="pre">#</span> <span class="pre">&gt;&gt;&gt;</span> <span class="pre">running</span> <span class="pre">decorator(&lt;function</span> <span class="pre">func</span> <span class="pre">at</span> <span class="pre">0x1356...&gt;)</span>
<span class="pre">`</span></code></p>
</div></blockquote>
</li>
</ul>
<aside class="system-message">
<p class="system-message-title">System Message: WARNING/2 (<span class="docutils literal">C:\Users\zxouyang\CodeProjects\PRIVATE_P\io\docs\source\python/python_elegant.rst</span>, line 760)</p>
<p>Bullet list ends without a blank line; unexpected unindent.</p>
</aside>
<p>如果 <cite>decorate</cite> 内 return 的是别的函数 🟰 <cite>func=deco.return_func</cite> ，那么 <cite>func.__name__</cite> &amp; <cite>func.__doc__</cite> 变成了 <cite>deco.return_func.__name__</cite> &amp; <cite>deco.return_func.__doc__</cite>
✏️ <cite>functools.wraps</cite>，不仅能传递，还能实现关键字传参。</p>
<ul>
<li><p>装饰器需要返回 <strong>一个可调用对象或者函数</strong>，才能在运行 <cite>func()</cite> 时返回来 跟后面的 <cite>()</cite> 继续用。&lt;u&gt;所以如果 func 需要传参，一般装饰器需要进行嵌套。&lt;/u&gt;</p>
<blockquote>
<div><p><code class="docutils literal notranslate"><span class="pre">`python</span>
<span class="pre">func()</span> <span class="pre">#</span> <span class="pre">等同于</span> <span class="pre">decorate(func)()</span>
<span class="pre">`</span></code></p>
</div></blockquote>
</li>
</ul>
</div></blockquote>
<aside class="system-message">
<p class="system-message-title">System Message: WARNING/2 (<span class="docutils literal">C:\Users\zxouyang\CodeProjects\PRIVATE_P\io\docs\source\python/python_elegant.rst</span>, line 768)</p>
<p>Block quote ends without a blank line; unexpected unindent.</p>
</aside>
<dl>
<dt>!!! warning “被装饰的函数完全是作为参数传入.”</dt><dd><blockquote>
<div><p><cite>decorate(func)</cite> ，此时没有带`()`, 所以 <cite>func</cite> 还没被调用。</p>
</div></blockquote>
<aside class="system-message">
<p class="system-message-title">System Message: WARNING/2 (<span class="docutils literal">C:\Users\zxouyang\CodeProjects\PRIVATE_P\io\docs\source\python/python_elegant.rst</span>, line 770)</p>
<p>Block quote ends without a blank line; unexpected unindent.</p>
</aside>
<p>在 <cite>deco1</cite> 函数体内 带着 <cite>()</cite> 或者在 <cite>deco2</cite> 里 被返回 才是被调用运行, <cite>deco3</cite> 就是完全没运行</p>
<p><a href="#id166"><span class="problematic" id="id167">``</span></a><a href="#id168"><span class="problematic" id="id169">`</span></a>python
def deco1(func):</p>
<aside class="system-message" id="id166">
<p class="system-message-title">System Message: WARNING/2 (<span class="docutils literal">C:\Users\zxouyang\CodeProjects\PRIVATE_P\io\docs\source\python/python_elegant.rst</span>, line 772); <em><a href="#id167">backlink</a></em></p>
<p>Inline literal start-string without end-string.</p>
</aside>
<aside class="system-message" id="id168">
<p class="system-message-title">System Message: WARNING/2 (<span class="docutils literal">C:\Users\zxouyang\CodeProjects\PRIVATE_P\io\docs\source\python/python_elegant.rst</span>, line 772); <em><a href="#id169">backlink</a></em></p>
<p>Inline interpreted text or phrase reference start-string without end-string.</p>
</aside>
<aside class="system-message">
<p class="system-message-title">System Message: ERROR/3 (<span class="docutils literal">C:\Users\zxouyang\CodeProjects\PRIVATE_P\io\docs\source\python/python_elegant.rst</span>, line 774)</p>
<p>Unexpected indentation.</p>
</aside>
<blockquote>
<div><p>res = func() + 1  # 在函数体内被运行
return res</p>
</div></blockquote>
<dl>
<dt>def deco2(func):</dt><dd><p># func = deco2(func) = func
return func  # deco2(func) () = func ()</p>
</dd>
<dt>def deco3(func):</dt><dd><p># 没运行 func 运行的是 inner
# func = deco3(func) = inner
def inner:</p>
<aside class="system-message">
<p class="system-message-title">System Message: ERROR/3 (<span class="docutils literal">C:\Users\zxouyang\CodeProjects\PRIVATE_P\io\docs\source\python/python_elegant.rst</span>, line 785)</p>
<p>Unexpected indentation.</p>
</aside>
<blockquote>
<div><p>pass</p>
</div></blockquote>
<aside class="system-message">
<p class="system-message-title">System Message: WARNING/2 (<span class="docutils literal">C:\Users\zxouyang\CodeProjects\PRIVATE_P\io\docs\source\python/python_elegant.rst</span>, line 786)</p>
<p>Block quote ends without a blank line; unexpected unindent.</p>
</aside>
<p>return inner  # deco3(func) () = inner ()</p>
</dd>
</dl>
<aside class="system-message">
<p class="system-message-title">System Message: WARNING/2 (<span class="docutils literal">C:\Users\zxouyang\CodeProjects\PRIVATE_P\io\docs\source\python/python_elegant.rst</span>, line 787)</p>
<p>Definition list ends without a blank line; unexpected unindent.</p>
</aside>
<p><a href="#id170"><span class="problematic" id="id171">``</span></a><a href="#id172"><span class="problematic" id="id173">`</span></a></p>
<aside class="system-message" id="id170">
<p class="system-message-title">System Message: WARNING/2 (<span class="docutils literal">C:\Users\zxouyang\CodeProjects\PRIVATE_P\io\docs\source\python/python_elegant.rst</span>, line 787); <em><a href="#id171">backlink</a></em></p>
<p>Inline literal start-string without end-string.</p>
</aside>
<aside class="system-message" id="id172">
<p class="system-message-title">System Message: WARNING/2 (<span class="docutils literal">C:\Users\zxouyang\CodeProjects\PRIVATE_P\io\docs\source\python/python_elegant.rst</span>, line 787); <em><a href="#id173">backlink</a></em></p>
<p>Inline interpreted text or phrase reference start-string without end-string.</p>
</aside>
</dd>
</dl>
<p>!!! p “装饰器可以叠放”</p>
<blockquote>
<div><p><a href="#id174"><span class="problematic" id="id175">``</span></a><a href="#id176"><span class="problematic" id="id177">`</span></a>python
@d1
@d2
def func():</p>
<aside class="system-message" id="id174">
<p class="system-message-title">System Message: WARNING/2 (<span class="docutils literal">C:\Users\zxouyang\CodeProjects\PRIVATE_P\io\docs\source\python/python_elegant.rst</span>, line 791); <em><a href="#id175">backlink</a></em></p>
<p>Inline literal start-string without end-string.</p>
</aside>
<aside class="system-message" id="id176">
<p class="system-message-title">System Message: WARNING/2 (<span class="docutils literal">C:\Users\zxouyang\CodeProjects\PRIVATE_P\io\docs\source\python/python_elegant.rst</span>, line 791); <em><a href="#id177">backlink</a></em></p>
<p>Inline interpreted text or phrase reference start-string without end-string.</p>
</aside>
<aside class="system-message">
<p class="system-message-title">System Message: ERROR/3 (<span class="docutils literal">C:\Users\zxouyang\CodeProjects\PRIVATE_P\io\docs\source\python/python_elegant.rst</span>, line 795)</p>
<p>Unexpected indentation.</p>
</aside>
<blockquote>
<div><p>pass</p>
</div></blockquote>
<aside class="system-message">
<p class="system-message-title">System Message: WARNING/2 (<span class="docutils literal">C:\Users\zxouyang\CodeProjects\PRIVATE_P\io\docs\source\python/python_elegant.rst</span>, line 796)</p>
<p>Block quote ends without a blank line; unexpected unindent.</p>
</aside>
<p># 等价于 func = d1(d2(func))
# func() = d1(d2(func))()
<a href="#id178"><span class="problematic" id="id179">``</span></a><a href="#id180"><span class="problematic" id="id181">`</span></a></p>
<aside class="system-message" id="id178">
<p class="system-message-title">System Message: WARNING/2 (<span class="docutils literal">C:\Users\zxouyang\CodeProjects\PRIVATE_P\io\docs\source\python/python_elegant.rst</span>, line 796); <em><a href="#id179">backlink</a></em></p>
<p>Inline literal start-string without end-string.</p>
</aside>
<aside class="system-message" id="id180">
<p class="system-message-title">System Message: WARNING/2 (<span class="docutils literal">C:\Users\zxouyang\CodeProjects\PRIVATE_P\io\docs\source\python/python_elegant.rst</span>, line 796); <em><a href="#id181">backlink</a></em></p>
<p>Inline interpreted text or phrase reference start-string without end-string.</p>
</aside>
</div></blockquote>
<p>&gt; &gt; 更新策略。
&gt;
&gt; 当商场做营销，不断更新不同的折扣活动，在结算的时候往往需要计算不同策略下的价格，然后进行比较。如果把 所有的活动写进去结算函数，会使结算函数体变长还会在更改的时候需要修改着至关重要的结算函数，使错误的可能增高。所以思路大多都是把分开一个个策略写成函数，然后放进一个全局变量的数组里，for 循环地去 call 数组里的策略。但是在维持数组需要记得相应的函数名，对数组里的元素进行添删，比较麻烦。所以采用装饰器来完成 <strong>“注册”</strong> 这一功能</p>
<p><a href="#id182"><span class="problematic" id="id183">``</span></a><a href="#id184"><span class="problematic" id="id185">`</span></a>python
promos = []</p>
<aside class="system-message" id="id182">
<p class="system-message-title">System Message: WARNING/2 (<span class="docutils literal">C:\Users\zxouyang\CodeProjects\PRIVATE_P\io\docs\source\python/python_elegant.rst</span>, line 804); <em><a href="#id183">backlink</a></em></p>
<p>Inline literal start-string without end-string.</p>
</aside>
<aside class="system-message" id="id184">
<p class="system-message-title">System Message: WARNING/2 (<span class="docutils literal">C:\Users\zxouyang\CodeProjects\PRIVATE_P\io\docs\source\python/python_elegant.rst</span>, line 804); <em><a href="#id185">backlink</a></em></p>
<p>Inline interpreted text or phrase reference start-string without end-string.</p>
</aside>
<dl class="simple">
<dt>def promotion(promo_func):</dt><dd><p>promos.appred(promo_func)  # 只是放进去，不改变 promo_func 本身
return promo_func</p>
</dd>
</dl>
<p>@promotion  # 需要就加上
def fidelity(order):</p>
<aside class="system-message">
<p class="system-message-title">System Message: ERROR/3 (<span class="docutils literal">C:\Users\zxouyang\CodeProjects\PRIVATE_P\io\docs\source\python/python_elegant.rst</span>, line 813)</p>
<p>Unexpected indentation.</p>
</aside>
<blockquote>
<div><p>…
return discount</p>
</div></blockquote>
</section>
</section>
</section>
<section id="id186">
<h2 id="id186">不需要就注释<a class="headerlink" href="#id186" title="Link to this heading">¶</a></h2>
<dl class="simple">
<dt>def large_order(order)</dt><dd><p>…
return discount</p>
</dd>
<dt>der best_promo(order):</dt><dd><p>return max(promo(order) for promo in promos)</p>
</dd>
</dl>
<aside class="system-message">
<p class="system-message-title">System Message: WARNING/2 (<span class="docutils literal">C:\Users\zxouyang\CodeProjects\PRIVATE_P\io\docs\source\python/python_elegant.rst</span>, line 824)</p>
<p>Definition list ends without a blank line; unexpected unindent.</p>
</aside>
<p><a href="#id187"><span class="problematic" id="id188">``</span></a><a href="#id189"><span class="problematic" id="id190">`</span></a></p>
<aside class="system-message" id="id187">
<p class="system-message-title">System Message: WARNING/2 (<span class="docutils literal">C:\Users\zxouyang\CodeProjects\PRIVATE_P\io\docs\source\python/python_elegant.rst</span>, line 824); <em><a href="#id188">backlink</a></em></p>
<p>Inline literal start-string without end-string.</p>
</aside>
<aside class="system-message" id="id189">
<p class="system-message-title">System Message: WARNING/2 (<span class="docutils literal">C:\Users\zxouyang\CodeProjects\PRIVATE_P\io\docs\source\python/python_elegant.rst</span>, line 824); <em><a href="#id190">backlink</a></em></p>
<p>Inline interpreted text or phrase reference start-string without end-string.</p>
</aside>
<aside class="system-message">
<p class="system-message-title">System Message: SEVERE/4 (<span class="docutils literal">C:\Users\zxouyang\CodeProjects\PRIVATE_P\io\docs\source\python/python_elegant.rst</span>, line 826)</p>
<p>Title level inconsistent:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">参数化装饰器</span>
<span class="o">++++++++++++++</span>
</pre></div>
</div>
</aside>
<ol class="arabic simple">
<li><p>被装饰的函数本身需要参数</p></li>
<li><p>装饰器本身也想拥有参数</p></li>
</ol>
<p>!!! p “装饰器需要返回 <strong>一个可调用对象或者函数</strong>，才能在运行 <cite>func()</cite> 时返回来 跟后面的 <cite>()</cite> 继续用。&lt;u&gt;所以如果 func 需要传参，一般装饰器需要进行嵌套。&lt;/u&gt;”</p>
<p>&gt; &gt; 被装饰的函数本身需要参数 + 装饰器本身也想拥有参数
&gt;
&gt; 一个参数化的注册计时装饰器</p>
<p><a href="#id191"><span class="problematic" id="id192">``</span></a><a href="#id193"><span class="problematic" id="id194">`</span></a>python hl_lines=”4 5 12 13 17 19 21 23 27 31”
import time, functools
registry = set()  # 增删更快</p>
<aside class="system-message" id="id191">
<p class="system-message-title">System Message: WARNING/2 (<span class="docutils literal">C:\Users\zxouyang\CodeProjects\PRIVATE_P\io\docs\source\python/python_elegant.rst</span>, line 838); <em><a href="#id192">backlink</a></em></p>
<p>Inline literal start-string without end-string.</p>
</aside>
<aside class="system-message" id="id193">
<p class="system-message-title">System Message: WARNING/2 (<span class="docutils literal">C:\Users\zxouyang\CodeProjects\PRIVATE_P\io\docs\source\python/python_elegant.rst</span>, line 838); <em><a href="#id194">backlink</a></em></p>
<p>Inline interpreted text or phrase reference start-string without end-string.</p>
</aside>
<dl>
<dt>def register(active=True):  # 装饰工厂函数</dt><dd><dl>
<dt>def decorate(func):  # 真正的装饰器（接受的是函数</dt><dd><p>print(f’running register={active} –&gt; decorate {func}’)
if active:  #  True 注册</p>
<aside class="system-message">
<p class="system-message-title">System Message: ERROR/3 (<span class="docutils literal">C:\Users\zxouyang\CodeProjects\PRIVATE_P\io\docs\source\python/python_elegant.rst</span>, line 846)</p>
<p>Unexpected indentation.</p>
</aside>
<blockquote>
<div><p>registry.add(func)</p>
</div></blockquote>
<aside class="system-message">
<p class="system-message-title">System Message: WARNING/2 (<span class="docutils literal">C:\Users\zxouyang\CodeProjects\PRIVATE_P\io\docs\source\python/python_elegant.rst</span>, line 847)</p>
<p>Block quote ends without a blank line; unexpected unindent.</p>
</aside>
<dl class="simple">
<dt>else:  # False 注销</dt><dd><p>registry.discard(func)</p>
</dd>
</dl>
<p>@functools.wraps(func)  # 包装一下才能接受关键词参数 &amp; 变成 func 属性
def clocked(<a href="#id195"><span class="problematic" id="id196">*</span></a>_args, <a href="#id197"><span class="problematic" id="id198">**</span></a>kwargs):  # 包装被装饰的函数</p>
<aside class="system-message" id="id195">
<p class="system-message-title">System Message: WARNING/2 (<span class="docutils literal">C:\Users\zxouyang\CodeProjects\PRIVATE_P\io\docs\source\python/python_elegant.rst</span>, line 850); <em><a href="#id196">backlink</a></em></p>
<p>Inline emphasis start-string without end-string.</p>
</aside>
<aside class="system-message" id="id197">
<p class="system-message-title">System Message: WARNING/2 (<span class="docutils literal">C:\Users\zxouyang\CodeProjects\PRIVATE_P\io\docs\source\python/python_elegant.rst</span>, line 850); <em><a href="#id198">backlink</a></em></p>
<p>Inline strong start-string without end-string.</p>
</aside>
<aside class="system-message">
<p class="system-message-title">System Message: ERROR/3 (<span class="docutils literal">C:\Users\zxouyang\CodeProjects\PRIVATE_P\io\docs\source\python/python_elegant.rst</span>, line 852)</p>
<p>Unexpected indentation.</p>
</aside>
<blockquote>
<div><p>t0 = time.time()
_result = func(<a href="#id199"><span class="problematic" id="id200">*</span></a>_args, <a href="#id201"><span class="problematic" id="id202">**</span></a>kwargs)  # 接受同样的参数
t1 = time.time()
return _result  # 返回：想要的结果</p>
<aside class="system-message" id="id199">
<p class="system-message-title">System Message: WARNING/2 (<span class="docutils literal">C:\Users\zxouyang\CodeProjects\PRIVATE_P\io\docs\source\python/python_elegant.rst</span>, line 852); <em><a href="#id200">backlink</a></em></p>
<p>Inline emphasis start-string without end-string.</p>
</aside>
<aside class="system-message" id="id201">
<p class="system-message-title">System Message: WARNING/2 (<span class="docutils literal">C:\Users\zxouyang\CodeProjects\PRIVATE_P\io\docs\source\python/python_elegant.rst</span>, line 852); <em><a href="#id202">backlink</a></em></p>
<p>Inline strong start-string without end-string.</p>
</aside>
</div></blockquote>
<p>return clocked  # 返回：函数</p>
</dd>
</dl>
<p>return decorate  # 返回：装饰器</p>
</dd>
</dl>
<p>@register(active=False)  # f1 注销
def f1():</p>
<aside class="system-message">
<p class="system-message-title">System Message: ERROR/3 (<span class="docutils literal">C:\Users\zxouyang\CodeProjects\PRIVATE_P\io\docs\source\python/python_elegant.rst</span>, line 863)</p>
<p>Unexpected indentation.</p>
</aside>
<blockquote>
<div><p>pass</p>
</div></blockquote>
<p>@register()  # 必须作为函数调用
def f2():</p>
<aside class="system-message">
<p class="system-message-title">System Message: ERROR/3 (<span class="docutils literal">C:\Users\zxouyang\CodeProjects\PRIVATE_P\io\docs\source\python/python_elegant.rst</span>, line 867)</p>
<p>Unexpected indentation.</p>
</aside>
<blockquote>
<div><p>pass</p>
</div></blockquote>
<p>f1 = register()(f1) # f1 重新注册
<a href="#id203"><span class="problematic" id="id204">``</span></a><a href="#id205"><span class="problematic" id="id206">`</span></a></p>
<aside class="system-message" id="id203">
<p class="system-message-title">System Message: WARNING/2 (<span class="docutils literal">C:\Users\zxouyang\CodeProjects\PRIVATE_P\io\docs\source\python/python_elegant.rst</span>, line 869); <em><a href="#id204">backlink</a></em></p>
<p>Inline literal start-string without end-string.</p>
</aside>
<aside class="system-message" id="id205">
<p class="system-message-title">System Message: WARNING/2 (<span class="docutils literal">C:\Users\zxouyang\CodeProjects\PRIVATE_P\io\docs\source\python/python_elegant.rst</span>, line 869); <em><a href="#id206">backlink</a></em></p>
<p>Inline interpreted text or phrase reference start-string without end-string.</p>
</aside>
<aside class="system-message">
<p class="system-message-title">System Message: SEVERE/4 (<span class="docutils literal">C:\Users\zxouyang\CodeProjects\PRIVATE_P\io\docs\source\python/python_elegant.rst</span>, line 872)</p>
<p>Title level inconsistent:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">现有的有用的装饰器</span>
<span class="o">++++++++++++++++++++</span>
</pre></div>
</div>
</aside>
<p><cite>functools.lru_cache(maxsize=128, typed=False)</cite> 做备忘。【自动优化】。储存耗时的函数调用结果，避免重新计算。
Least Recently Used  缓存不会无限增长，一段时间不用就会被扔掉。
用字典存储结果，所以用 <cite>lru_cache</cite> 修饰的函数所有参数必须是可散列的</p>
<ul class="simple">
<li><p><cite>maxsize</cite> 超过会被舍弃，建议 2的幂</p></li>
<li><p><cite>typed</cite> 是否根据类型把缓存的东西分开存放</p></li>
</ul>
<p>&gt; 第 n 个 斐波那契数 f(n) = f(n-1)+f(n-2) 当算f(6)的时候 f(2)会算5遍。。。重复计算</p>
<p><a href="#id207"><span class="problematic" id="id208">``</span></a><a href="#id209"><span class="problematic" id="id210">`</span></a>python
import functools</p>
<aside class="system-message" id="id207">
<p class="system-message-title">System Message: WARNING/2 (<span class="docutils literal">C:\Users\zxouyang\CodeProjects\PRIVATE_P\io\docs\source\python/python_elegant.rst</span>, line 884); <em><a href="#id208">backlink</a></em></p>
<p>Inline literal start-string without end-string.</p>
</aside>
<aside class="system-message" id="id209">
<p class="system-message-title">System Message: WARNING/2 (<span class="docutils literal">C:\Users\zxouyang\CodeProjects\PRIVATE_P\io\docs\source\python/python_elegant.rst</span>, line 884); <em><a href="#id210">backlink</a></em></p>
<p>Inline interpreted text or phrase reference start-string without end-string.</p>
</aside>
<p>@functools.lru_cache()
def fibonacci(n):</p>
<aside class="system-message">
<p class="system-message-title">System Message: ERROR/3 (<span class="docutils literal">C:\Users\zxouyang\CodeProjects\PRIVATE_P\io\docs\source\python/python_elegant.rst</span>, line 889)</p>
<p>Unexpected indentation.</p>
</aside>
<blockquote>
<div><dl class="simple">
<dt>if n &lt; 2:</dt><dd><p>return n</p>
</dd>
</dl>
<aside class="system-message">
<p class="system-message-title">System Message: WARNING/2 (<span class="docutils literal">C:\Users\zxouyang\CodeProjects\PRIVATE_P\io\docs\source\python/python_elegant.rst</span>, line 891)</p>
<p>Definition list ends without a blank line; unexpected unindent.</p>
</aside>
<p>return fibonacci(n-1) + fibonacci(n-2)</p>
</div></blockquote>
<aside class="system-message">
<p class="system-message-title">System Message: WARNING/2 (<span class="docutils literal">C:\Users\zxouyang\CodeProjects\PRIVATE_P\io\docs\source\python/python_elegant.rst</span>, line 892)</p>
<p>Block quote ends without a blank line; unexpected unindent.</p>
</aside>
<p><a href="#id211"><span class="problematic" id="id212">``</span></a><a href="#id213"><span class="problematic" id="id214">`</span></a></p>
<aside class="system-message" id="id211">
<p class="system-message-title">System Message: WARNING/2 (<span class="docutils literal">C:\Users\zxouyang\CodeProjects\PRIVATE_P\io\docs\source\python/python_elegant.rst</span>, line 892); <em><a href="#id212">backlink</a></em></p>
<p>Inline literal start-string without end-string.</p>
</aside>
<aside class="system-message" id="id213">
<p class="system-message-title">System Message: WARNING/2 (<span class="docutils literal">C:\Users\zxouyang\CodeProjects\PRIVATE_P\io\docs\source\python/python_elegant.rst</span>, line 892); <em><a href="#id214">backlink</a></em></p>
<p>Inline interpreted text or phrase reference start-string without end-string.</p>
</aside>
<p><cite>functools.wraps</cite>，包装使得装饰后的函数或对象拥有被装饰函数的`__doc__` &amp; <cite>__name__</cite> 等，还能实现关键字传参。
<cite>functools.singledispatch</cite> 可以吧整体方案拆分成多个模块。
使用 <cite>singledispatch</cite> 装饰的普通函数会变成 <strong>泛函数</strong>。
使用 <cite>@func.register(type)</cite> 来装饰，因为选用的函数名字没有关系，所以 <cite>_</cite> 是个不错的选择
装饰器 叠放 支持不同类型
注册的函数不一定与原来的函数放在一块，可以在不同的模块去做，也可以为不是自己写的或者不能修改那里去加。</p>
<dl class="simple">
<dt>!!! p “使用抽象基类 <cite>numbers.Integral</cite> &amp; <cite>abc.MutableSequence</cite> 而不是具体实现 <cite>int</cite> &amp; <cite>list</cite>”</dt><dd><p>可以支持抽象基类以及未来的具体子类或虚拟子类，使得代码支持的兼容类型1更广泛。</p>
</dd>
</dl>
<p>&gt; 想要生成一个标签，常规的前后用 “p” 包围。如果是
&gt; 数字：显示十进制 &amp; 16进制，前后用 “pre” 包围
&gt; str：里面的换行符“n” 变成 “br”
&gt; list：对每个元素都产生相应的标签</p>
<p><a href="#id215"><span class="problematic" id="id216">``</span></a><a href="#id217"><span class="problematic" id="id218">`</span></a>python hl_lines=”5 9 13 18-19”
from functools import singledispatch
from collections import abc
import numbers</p>
<aside class="system-message" id="id215">
<p class="system-message-title">System Message: WARNING/2 (<span class="docutils literal">C:\Users\zxouyang\CodeProjects\PRIVATE_P\io\docs\source\python/python_elegant.rst</span>, line 909); <em><a href="#id216">backlink</a></em></p>
<p>Inline literal start-string without end-string.</p>
</aside>
<aside class="system-message" id="id217">
<p class="system-message-title">System Message: WARNING/2 (<span class="docutils literal">C:\Users\zxouyang\CodeProjects\PRIVATE_P\io\docs\source\python/python_elegant.rst</span>, line 909); <em><a href="#id218">backlink</a></em></p>
<p>Inline interpreted text or phrase reference start-string without end-string.</p>
</aside>
<p>@singledispatch
def tag(obj):  # obj 类基函数</p>
<aside class="system-message">
<p class="system-message-title">System Message: ERROR/3 (<span class="docutils literal">C:\Users\zxouyang\CodeProjects\PRIVATE_P\io\docs\source\python/python_elegant.rst</span>, line 916)</p>
<p>Unexpected indentation.</p>
</aside>
<blockquote>
<div><p>return f’&lt;p&gt;{obj}&lt;/p&gt;’</p>
</div></blockquote>
<p>@tag.register(numbers.Integral)  # 是 int 的虚拟超类
def _(n):</p>
<aside class="system-message">
<p class="system-message-title">System Message: ERROR/3 (<span class="docutils literal">C:\Users\zxouyang\CodeProjects\PRIVATE_P\io\docs\source\python/python_elegant.rst</span>, line 920)</p>
<p>Unexpected indentation.</p>
</aside>
<blockquote>
<div><p>return f’&lt;pre&gt;{n} &amp; {hex(n)}&lt;/pre&gt;’</p>
</div></blockquote>
<p>@tag.register(str)
def _(string):</p>
<aside class="system-message">
<p class="system-message-title">System Message: ERROR/3 (<span class="docutils literal">C:\Users\zxouyang\CodeProjects\PRIVATE_P\io\docs\source\python/python_elegant.rst</span>, line 924)</p>
<p>Unexpected indentation.</p>
</aside>
<blockquote>
<div><p>content= string.replace(’n’, ‘</p>
</div></blockquote>
<aside class="system-message">
<p class="system-message-title">System Message: WARNING/2 (<span class="docutils literal">C:\Users\zxouyang\CodeProjects\PRIVATE_P\io\docs\source\python/python_elegant.rst</span>, line 925)</p>
<p>Block quote ends without a blank line; unexpected unindent.</p>
</aside>
<dl class="simple">
<dt>‘)</dt><dd><p>return f’&lt;p&gt;{content}&lt;p&gt;’</p>
</dd>
</dl>
<p>@tag.register(tuple)  # 叠放 支持不同类型
@tag.register(abc.MutableSequence)
def _(seq):</p>
<aside class="system-message">
<p class="system-message-title">System Message: ERROR/3 (<span class="docutils literal">C:\Users\zxouyang\CodeProjects\PRIVATE_P\io\docs\source\python/python_elegant.rst</span>, line 931)</p>
<p>Unexpected indentation.</p>
</aside>
<blockquote>
<div><p>content = ‘&lt;/li&gt;n&lt;li&gt;’.join(tag(item) for item in seq)
return f’&lt;ul&gt;n&lt;li&gt;{content}&lt;/li&gt;n&lt;ul&gt;’</p>
</div></blockquote>
<p>tag([‘a/nb’,2] )
&gt;&gt;&gt; ‘&lt;ul&gt;n&lt;li&gt;&lt;p&gt;a/nb&lt;p&gt;&lt;/li&gt;n&lt;li&gt;&lt;pre&gt;2 &amp; 0x2&lt;/pre&gt;&lt;/li&gt;n&lt;ul&gt;’
======================================================================================================================================
<a href="#id219"><span class="problematic" id="id220">``</span></a><a href="#id221"><span class="problematic" id="id222">`</span></a></p>
<aside class="system-message" id="id219">
<p class="system-message-title">System Message: WARNING/2 (<span class="docutils literal">C:\Users\zxouyang\CodeProjects\PRIVATE_P\io\docs\source\python/python_elegant.rst</span>, line 934); <em><a href="#id220">backlink</a></em></p>
<p>Inline literal start-string without end-string.</p>
</aside>
<aside class="system-message" id="id221">
<p class="system-message-title">System Message: WARNING/2 (<span class="docutils literal">C:\Users\zxouyang\CodeProjects\PRIVATE_P\io\docs\source\python/python_elegant.rst</span>, line 934); <em><a href="#id222">backlink</a></em></p>
<p>Inline interpreted text or phrase reference start-string without end-string.</p>
</aside>
<section id="id223">
<h3 id="id223">函数式编程<a class="headerlink" href="#id223" title="Link to this heading">¶</a></h3>
<p><cite>operator module</cite></p>
<ul class="simple">
<li><p>为算术运算符提供对应函数</p></li>
</ul>
<aside class="system-message">
<p class="system-message-title">System Message: WARNING/2 (<span class="docutils literal">C:\Users\zxouyang\CodeProjects\PRIVATE_P\io\docs\source\python/python_elegant.rst</span>, line 945)</p>
<p>Bullet list ends without a blank line; unexpected unindent.</p>
</aside>
<p><cite>mul(a,b)</cite> 🟰 <cite>lambda a, b: a*b</cite>
- 从序列中**取出元素** ｜ <strong>读取对象属性</strong>
<cite>itemgetter(n)</cite> 🟰 <cite>lambda seq: seq[n]</cite>
<cite>attrgetter(‘a’)</cite> 🟰`lambda obj: obj.a`
如果传入的是多个参数，返回来的就会是对应的元组</p>
<p><a href="#id224"><span class="problematic" id="id225">``</span></a>` python hl_lines=”10 12 14 16”
from operator import itemgetter, attrgetter
seq = [(‘A’, 3), (‘D’, 2), (‘B’, 2), (‘C’, 1)]
class Obj():</p>
<aside class="system-message" id="id224">
<p class="system-message-title">System Message: WARNING/2 (<span class="docutils literal">C:\Users\zxouyang\CodeProjects\PRIVATE_P\io\docs\source\python/python_elegant.rst</span>, line 951); <em><a href="#id225">backlink</a></em></p>
<p>Inline literal start-string without end-string.</p>
</aside>
<aside class="system-message">
<p class="system-message-title">System Message: ERROR/3 (<span class="docutils literal">C:\Users\zxouyang\CodeProjects\PRIVATE_P\io\docs\source\python/python_elegant.rst</span>, line 955)</p>
<p>Unexpected indentation.</p>
</aside>
<blockquote>
<div><dl class="simple">
<dt>def __init__(self, a, b):</dt><dd><p>self.a, self.b = a, b</p>
</dd>
<dt>def __repr__(self):</dt><dd><p>return f’&lt;Obj ({self.a},{self.b})&gt;’</p>
</dd>
</dl>
</div></blockquote>
<p>objs = [Obj(<a href="#id226"><span class="problematic" id="id227">*</span></a>obj) for obj in seq]
sorted(seq, key=itemgetter(1))
&gt;&gt;&gt; [(‘C’, 1), (‘D’, 2), (‘B’, 2), (‘A’, 3)]
==========================================================================================
sorted(seq, key=itemgetter(1,0))
&gt;&gt;&gt; [(‘C’, 1), (‘B’, 2), (‘D’, 2), (‘A’, 3)]
==========================================================================================
sorted(objs, key=attrgetter(‘b’))
&gt;&gt;&gt; [&lt;Obj (C,1)&gt;, &lt;Obj (D,2)&gt;, &lt;Obj (B,2)&gt;, &lt;Obj (A,3)&gt;]
==================================================================================================================
sorted(objs, key=attrgetter(‘b’,’a’))
&gt;&gt;&gt; [&lt;Obj (C,1)&gt;, &lt;Obj (B,2)&gt;, &lt;Obj (D,2)&gt;, &lt;Obj (A,3)&gt;]
==================================================================================================================
<a href="#id228"><span class="problematic" id="id229">``</span></a><a href="#id230"><span class="problematic" id="id231">`</span></a></p>
<aside class="system-message" id="id226">
<p class="system-message-title">System Message: WARNING/2 (<span class="docutils literal">C:\Users\zxouyang\CodeProjects\PRIVATE_P\io\docs\source\python/python_elegant.rst</span>, line 960); <em><a href="#id227">backlink</a></em></p>
<p>Inline emphasis start-string without end-string.</p>
</aside>
<aside class="system-message" id="id228">
<p class="system-message-title">System Message: WARNING/2 (<span class="docutils literal">C:\Users\zxouyang\CodeProjects\PRIVATE_P\io\docs\source\python/python_elegant.rst</span>, line 960); <em><a href="#id229">backlink</a></em></p>
<p>Inline literal start-string without end-string.</p>
</aside>
<aside class="system-message" id="id230">
<p class="system-message-title">System Message: WARNING/2 (<span class="docutils literal">C:\Users\zxouyang\CodeProjects\PRIVATE_P\io\docs\source\python/python_elegant.rst</span>, line 960); <em><a href="#id231">backlink</a></em></p>
<p>Inline interpreted text or phrase reference start-string without end-string.</p>
</aside>
<p><cite>functools module</cite></p>
<ul class="simple">
<li><p><cite>reduce（func, iterable, initializer)</cite></p></li>
</ul>
<aside class="system-message">
<p class="system-message-title">System Message: WARNING/2 (<span class="docutils literal">C:\Users\zxouyang\CodeProjects\PRIVATE_P\io\docs\source\python/python_elegant.rst</span>, line 978)</p>
<p>Bullet list ends without a blank line; unexpected unindent.</p>
</aside>
<dl class="simple">
<dt><cite>initializer</cite> 避免出现 <cite>TyperError：empty sequence with no initial value</cite>。如果序列为空，则返回初始值。否则在归约中作为第一个参数使用，所以应该使用恒等值</dt><dd><p>&gt; <cite>*</cite> &amp; <cite>&amp;</cite>: 1
&gt; <cite>+</cite> &amp; <cite>^</cite> &amp; <cite>|</cite>: 0</p>
</dd>
</dl>
<aside class="system-message">
<p class="system-message-title">System Message: WARNING/2 (<span class="docutils literal">C:\Users\zxouyang\CodeProjects\PRIVATE_P\io\docs\source\python/python_elegant.rst</span>, line 981)</p>
<p>Definition list ends without a blank line; unexpected unindent.</p>
</aside>
<ul class="simple">
<li><p><cite>partial</cite> <strong>部分应用**一个**函数</strong>。基于一个函数创建一个新的可调用对象，把原函数的某些参数固定。</p></li>
</ul>
<aside class="system-message">
<p class="system-message-title">System Message: WARNING/2 (<span class="docutils literal">C:\Users\zxouyang\CodeProjects\PRIVATE_P\io\docs\source\python/python_elegant.rst</span>, line 982)</p>
<p>Bullet list ends without a blank line; unexpected unindent.</p>
</aside>
<p>可以通过 <cite>func.func</cite> &amp; <cite>func.args</cite> &amp; <cite>func.keywords</cite> 来查询固定了的原函数和参数
- <cite>partialmethod</cite> 和 <cite>partial</cite> 类似，后者处理**方法**
- <cite>lru_cache</cite> 做备忘。【自动优化】。储存耗时的函数调用结果，避免重新计算。</p>
<p><a href="#id232"><span class="problematic" id="id233">``</span></a><a href="#id234"><span class="problematic" id="id235">`</span></a>python hl_lines=”4 7”
from functools import partial
from operator import mul</p>
<aside class="system-message" id="id232">
<p class="system-message-title">System Message: WARNING/2 (<span class="docutils literal">C:\Users\zxouyang\CodeProjects\PRIVATE_P\io\docs\source\python/python_elegant.rst</span>, line 986); <em><a href="#id233">backlink</a></em></p>
<p>Inline literal start-string without end-string.</p>
</aside>
<aside class="system-message" id="id234">
<p class="system-message-title">System Message: WARNING/2 (<span class="docutils literal">C:\Users\zxouyang\CodeProjects\PRIVATE_P\io\docs\source\python/python_elegant.rst</span>, line 986); <em><a href="#id235">backlink</a></em></p>
<p>Inline interpreted text or phrase reference start-string without end-string.</p>
</aside>
<p>triple = partial(mul, 3)  # 本来是 mul(a, b)，固定了 a=3
triple(7)  # 一个新的调用对象，返回3倍的结果
&gt;&gt;&gt; 21
==============
triple.func
&gt;&gt;&gt; &lt;built-in function mul&gt;
========================================================
<a href="#id236"><span class="problematic" id="id237">``</span></a><a href="#id238"><span class="problematic" id="id239">`</span></a></p>
<aside class="system-message" id="id236">
<p class="system-message-title">System Message: WARNING/2 (<span class="docutils literal">C:\Users\zxouyang\CodeProjects\PRIVATE_P\io\docs\source\python/python_elegant.rst</span>, line 990); <em><a href="#id237">backlink</a></em></p>
<p>Inline literal start-string without end-string.</p>
</aside>
<aside class="system-message" id="id238">
<p class="system-message-title">System Message: WARNING/2 (<span class="docutils literal">C:\Users\zxouyang\CodeProjects\PRIVATE_P\io\docs\source\python/python_elegant.rst</span>, line 990); <em><a href="#id239">backlink</a></em></p>
<p>Inline interpreted text or phrase reference start-string without end-string.</p>
</aside>
</section>
</section>
<section id="class">
<h2 id="class">Class<a class="headerlink" href="#class" title="Link to this heading">¶</a></h2>
<dl>
<dt>!!! danger  “方法和函數”</dt><dd><p>|||inplaced
<a href="#id639"><span class="problematic" id="id640">|--|</span></a>–<a href="#id641"><span class="problematic" id="id642">|--|</span></a>
方法| <cite>var.func()`|内置, ✅
函数|`func(var)</cite> <a href="#id240"><span class="problematic" id="id241">|</span></a>❌</p>
<aside class="system-message" id="id240">
<p class="system-message-title">System Message: WARNING/2 (<span class="docutils literal">C:\Users\zxouyang\CodeProjects\PRIVATE_P\io\docs\source\python/python_elegant.rst</span>, line 1003); <em><a href="#id241">backlink</a></em></p>
<p>Inline substitution_reference start-string without end-string.</p>
</aside>
</dd>
</dl>
<p><a href="#id643"><span class="problematic" id="id644">|按存值个数区分|||</span></a>
<a href="#id645"><span class="problematic" id="id646">|--|</span></a>–<a href="#id647"><span class="problematic" id="id648">|--|</span></a>
<a href="#id649"><span class="problematic" id="id650">|只能存一个值|标量/原子类型|数字、字符串|</span></a>
<a href="#id651"><span class="problematic" id="id652">|可以存放多个值|容器类型|列表、元组、字典|</span></a></p>
<p><a href="#id653"><span class="problematic" id="id654">|按照访问方式区分|||</span></a>
<a href="#id655"><span class="problematic" id="id656">|--|</span></a>–<a href="#id657"><span class="problematic" id="id658">|--||</span></a>
<a href="#id659"><span class="problematic" id="id660">|直接访问|只能通过变量名访问整个值|数字|</span></a>
<a href="#id661"><span class="problematic" id="id662">|顺序访问|可以用索引访问指定的值，索引I代表顺序，又称为序列类型|字符串、列表、元组|</span></a>
<a href="#id663"><span class="problematic" id="id664">|key访问|可以用key访问指定的值，又称为映射类型|字典|</span></a></p>
<p><a href="#id665"><span class="problematic" id="id666">|按可变不可变区分||</span></a>
<a href="#id667"><span class="problematic" id="id668">|--|</span></a>–|
<a href="#id669"><span class="problematic" id="id670">|可变类型|列表、宇典|</span></a>
<a href="#id671"><span class="problematic" id="id672">|不可变类型|数字、字符串、元组|</span></a></p>
<section id="none">
<h3 id="none">空 <cite>None</cite><a class="headerlink" href="#none" title="Link to this heading">¶</a></h3>
<dl class="simple">
<dt>!!! danger “数据为空不代表是空对象”</dt><dd><p>||包括|判别|
<a href="#id673"><span class="problematic" id="id674">|--|</span></a>–<a href="#id675"><span class="problematic" id="id676">|--|</span></a>
空的对象|`None`|`instance == None`
数据为空|`[], ‘’, {}, ()`,`None`,`0, False`|`not instance`</p>
</dd>
</dl>
</section>
<section id="id242">
<h3 id="id242">原子不可变对象<a class="headerlink" href="#id242" title="Link to this heading">¶</a></h3>
<p><span class="defi">可散列</span></p>
<section id="int-float">
<h4 id="int-float">数值 <cite>int</cite> &amp; <cite>float</cite><a class="headerlink" href="#int-float" title="Link to this heading">¶</a></h4>
<p>转换</p>
<p>与 <cite>char</cite> 的转换</p>
<dl class="simple">
<dt>!!! danger “万事先转 <cite>float()</cite>”</dt><dd><p>在不确定这个字符串是整形还是浮点数的情况下, 先转成`float()`，再转`int()`
[ValueError: invalid literal for int() with base 10问题处理]</p>
</dd>
</dl>
<ul class="simple">
<li><p><cite>int(str)</cite> 将**符合整数**的规定的字符串转换成 int</p></li>
<li><p><cite>float(str)</cite> 将**符合浮点型**的规定的字符串转换成 float</p></li>
<li><p><cite>str(num)</cite> 将**整数、浮点型**转换成 char</p></li>
</ul>
<p>进制之间的转换</p>
<p>[Python 二进制，十进制，十六进制转换]</p>
<ul class="simple">
<li><p>➡️ 10：<cite>int(str, origin_进制)</cite></p></li>
<li><p>10 ➡️ 2: <cite>bin(int)</cite></p></li>
<li><p>10 ➡️ 16: <cite>hex(x)</cite></p></li>
</ul>
<p><code class="docutils literal notranslate"><span class="pre">`python</span>
<span class="pre">"""</span> <span class="pre">16</span> <span class="pre">-&gt;</span> <span class="pre">10</span> <span class="pre">"""</span>
<span class="pre">&gt;&gt;&gt;</span> <span class="pre">int('B',</span> <span class="pre">16)</span>
<span class="pre">11</span>
<span class="pre">======</span>
<span class="pre">`</span></code></p>
<p>&lt;u&gt;Base convention&lt;/u&gt;：<span class="defi">除基倒取余法</span></p>
<p><strong>以10进制转2进制为例</strong>：</p>
<p>输入一个十进制数n，每次用n除以2，把余数记下来，再用商去除以2…依次循环，直到商为0结束，把余数倒着依次排列，就构成了转换后的二进制数。</p>
<p>所有进制之间的转换都是如此，2可以换成任何数字。十进制转二进制、八进制、十六进制、64进制，</p>
<p>![](./pics/baseconvertion1.png)
![](./pics/baseconvertion2.png)
![](./pics/baseconvertion3.png)</p>
<p><a href="#id243"><span class="problematic" id="id244">``</span></a><a href="#id245"><span class="problematic" id="id246">`</span></a>python
def two_ten(a: str):</p>
<aside class="system-message" id="id243">
<p class="system-message-title">System Message: WARNING/2 (<span class="docutils literal">C:\Users\zxouyang\CodeProjects\PRIVATE_P\io\docs\source\python/python_elegant.rst</span>, line 1080); <em><a href="#id244">backlink</a></em></p>
<p>Inline literal start-string without end-string.</p>
</aside>
<aside class="system-message" id="id245">
<p class="system-message-title">System Message: WARNING/2 (<span class="docutils literal">C:\Users\zxouyang\CodeProjects\PRIVATE_P\io\docs\source\python/python_elegant.rst</span>, line 1080); <em><a href="#id246">backlink</a></em></p>
<p>Inline interpreted text or phrase reference start-string without end-string.</p>
</aside>
<aside class="system-message">
<p class="system-message-title">System Message: ERROR/3 (<span class="docutils literal">C:\Users\zxouyang\CodeProjects\PRIVATE_P\io\docs\source\python/python_elegant.rst</span>, line 1082)</p>
<p>Unexpected indentation.</p>
</aside>
<blockquote>
<div><p>“”” 2 -&gt; 10 “””
ans = list(map(lambda i: int(a[-1-i])*2**i, range(len(a))))
return sum(ans)</p>
</div></blockquote>
<dl>
<dt>def ten_two(a: int):</dt><dd><p>“”” 10 -&gt; 2 “””
ans = []
while a != 0:</p>
<aside class="system-message">
<p class="system-message-title">System Message: ERROR/3 (<span class="docutils literal">C:\Users\zxouyang\CodeProjects\PRIVATE_P\io\docs\source\python/python_elegant.rst</span>, line 1090)</p>
<p>Unexpected indentation.</p>
</aside>
<blockquote>
<div><p>ans.append(str(a%2))
a = a // 2
print(ans)</p>
</div></blockquote>
<aside class="system-message">
<p class="system-message-title">System Message: WARNING/2 (<span class="docutils literal">C:\Users\zxouyang\CodeProjects\PRIVATE_P\io\docs\source\python/python_elegant.rst</span>, line 1093)</p>
<p>Block quote ends without a blank line; unexpected unindent.</p>
</aside>
<p>ans.reverse()
return ‘’.join(ans)</p>
</dd>
<dt>def two_eight(a: str):</dt><dd><p>“”” 2 -&gt; 8 “””
ans, tmp = [], 0
num, more = len(a)//3, len(a)%3
a = list(map(int, a))
tmp = 0
if more != 0:</p>
<aside class="system-message">
<p class="system-message-title">System Message: ERROR/3 (<span class="docutils literal">C:\Users\zxouyang\CodeProjects\PRIVATE_P\io\docs\source\python/python_elegant.rst</span>, line 1104)</p>
<p>Unexpected indentation.</p>
</aside>
<blockquote>
<div><dl class="simple">
<dt>for i in range(more):</dt><dd><p>tmp += a[i] * 2 ** (more-i-1)</p>
</dd>
</dl>
<aside class="system-message">
<p class="system-message-title">System Message: WARNING/2 (<span class="docutils literal">C:\Users\zxouyang\CodeProjects\PRIVATE_P\io\docs\source\python/python_elegant.rst</span>, line 1106)</p>
<p>Definition list ends without a blank line; unexpected unindent.</p>
</aside>
<p>ans.append(str(tmp))</p>
</div></blockquote>
<aside class="system-message">
<p class="system-message-title">System Message: WARNING/2 (<span class="docutils literal">C:\Users\zxouyang\CodeProjects\PRIVATE_P\io\docs\source\python/python_elegant.rst</span>, line 1107)</p>
<p>Block quote ends without a blank line; unexpected unindent.</p>
</aside>
<dl class="simple">
<dt>for i in range(num):</dt><dd><p>tmp = a[more+3*i] * 4 + a[more+ 1+3*i] * 2 + a[more+2+3*i] * 1
ans.append(str(tmp))</p>
</dd>
</dl>
<aside class="system-message">
<p class="system-message-title">System Message: WARNING/2 (<span class="docutils literal">C:\Users\zxouyang\CodeProjects\PRIVATE_P\io\docs\source\python/python_elegant.rst</span>, line 1110)</p>
<p>Definition list ends without a blank line; unexpected unindent.</p>
</aside>
<p>return ‘’.join(ans)</p>
</dd>
</dl>
<aside class="system-message">
<p class="system-message-title">System Message: WARNING/2 (<span class="docutils literal">C:\Users\zxouyang\CodeProjects\PRIVATE_P\io\docs\source\python/python_elegant.rst</span>, line 1111)</p>
<p>Definition list ends without a blank line; unexpected unindent.</p>
</aside>
<p><a href="#id247"><span class="problematic" id="id248">``</span></a><a href="#id249"><span class="problematic" id="id250">`</span></a></p>
<aside class="system-message" id="id247">
<p class="system-message-title">System Message: WARNING/2 (<span class="docutils literal">C:\Users\zxouyang\CodeProjects\PRIVATE_P\io\docs\source\python/python_elegant.rst</span>, line 1111); <em><a href="#id248">backlink</a></em></p>
<p>Inline literal start-string without end-string.</p>
</aside>
<aside class="system-message" id="id249">
<p class="system-message-title">System Message: WARNING/2 (<span class="docutils literal">C:\Users\zxouyang\CodeProjects\PRIVATE_P\io\docs\source\python/python_elegant.rst</span>, line 1111); <em><a href="#id250">backlink</a></em></p>
<p>Inline interpreted text or phrase reference start-string without end-string.</p>
</aside>
<p>格式要求</p>
</section>
</section>
<section id="id251">
<h3 id="id251">序列<a class="headerlink" href="#id251" title="Link to this heading">¶</a></h3>
<p>任何一种都满足 迭代、切片、排序、拼接</p>
<p>按&lt;u&gt;是否存放多种类型&lt;/u&gt; 🟰 &lt;u&gt;是否存放的是引用&lt;/u&gt;</p>
<ul class="simple">
<li><p>✅==容器序列==。存放的是它们所包含的**任意类型**的对象的**引用**</p></li>
</ul>
<aside class="system-message">
<p class="system-message-title">System Message: WARNING/2 (<span class="docutils literal">C:\Users\zxouyang\CodeProjects\PRIVATE_P\io\docs\source\python/python_elegant.rst</span>, line 1123)</p>
<p>Bullet list ends without a blank line; unexpected unindent.</p>
</aside>
<p>list, tuple, collections.deque
- ❌==扁平序列==。存放的是**值**, 一段连续的内存空间，更紧凑，只能存放字符、字节和数值这种**原子数据类型**。每次只能存放一种类型。
str, bytes, bytearray, memoryview, array.array</p>
<p>!!! warning “set &amp; dict 属于 容器 但是不属于序列。”</p>
<p>按&lt;u&gt;能否迭代&lt;/u&gt;</p>
<ul class="simple">
<li><p>✅==IterableObject 可迭代对象==。如果我们可以从中获取迭代器。只要对象是可迭代的, 就可以执行**分解操作**</p></li>
</ul>
<aside class="system-message">
<p class="system-message-title">System Message: WARNING/2 (<span class="docutils literal">C:\Users\zxouyang\CodeProjects\PRIVATE_P\io\docs\source\python/python_elegant.rst</span>, line 1132)</p>
<p>Bullet list ends without a blank line; unexpected unindent.</p>
</aside>
<p>str, tuple, list, dict</p>
<p>按&lt;u&gt;能否被修改&lt;/u&gt;</p>
<ul class="simple">
<li><p>✅:defi:<cite>Mutable Sequence</cite></p></li>
</ul>
<aside class="system-message">
<p class="system-message-title">System Message: WARNING/2 (<span class="docutils literal">C:\Users\zxouyang\CodeProjects\PRIVATE_P\io\docs\source\python/python_elegant.rst</span>, line 1137)</p>
<p>Bullet list ends without a blank line; unexpected unindent.</p>
</aside>
<p>list, bytearray, array.array, collections.deque, memoryview
- ❌:defi:<cite>Sequence</cite>
tuple, str, bytes</p>
<p>!!! question “一定要知道常用的容器底层都是如何实现的，最基本的就是map、set等等，否则自己写的代码，自己对其性能分析都分析不清楚
”
[collections — 容器数据类型]</p>
<dl class="simple">
<dt>!!! p “如何选序列。”</dt><dd><ul class="simple">
<li><p><cite>list</cite>: 方便又快捷，可修改，</p></li>
<li><p><cite>set</cite>: 去掉重复元素, 不关心元素的顺序问题，经常检查是否包含</p></li>
<li><p><cite>tuple</cite>: 不可变的列表</p></li>
<li><p><cite>array.array</cite> 只包含数字，尤其是浮点数。</p></li>
<li><p><cite>deque</cite> 频繁做两端增删。适合做“最近n个元素”</p></li>
</ul>
</dd>
<dt>!!! danger <cite>set</cite> &amp; <cite>dict</cite></dt><dd><p>都是 <cite>{}</cite>, 但是`a={}`默认空字典，空集合是`a=set()`
- <cite>set = {1, 2, …}</cite>
- <cite>dict = {a:1, b:2, …}</cite></p>
</dd>
</dl>
<section id="id252">
<h4 id="id252">序列操作<a class="headerlink" href="#id252" title="Link to this heading">¶</a></h4>
<p>任何一种都满足 迭代、切片、排序、拼接</p>
<section id="listcomps-genexps">
<h5 id="listcomps-genexps">listcomps &amp; genexps<a class="headerlink" href="#listcomps-genexps" title="Link to this heading">¶</a></h5>
<p>==list comprehension, listcomps，列表推导==。只用来生成列表。
原则是：只用列表推导来创建新的列表，并且尽量保持简短，<strong>不要超过了两行</strong>
[python中，(x for y in z for x in y)这个结构怎么理解？]</p>
<p><a href="#id253"><span class="problematic" id="id254">``</span></a><a href="#id255"><span class="problematic" id="id256">`</span></a>python hl_lines=”3 6 12”
“”” listcomps “””
1. 一层
============
[item for item in items]</p>
<aside class="system-message" id="id253">
<p class="system-message-title">System Message: WARNING/2 (<span class="docutils literal">C:\Users\zxouyang\CodeProjects\PRIVATE_P\io\docs\source\python/python_elegant.rst</span>, line 1169); <em><a href="#id254">backlink</a></em></p>
<p>Inline literal start-string without end-string.</p>
</aside>
<aside class="system-message" id="id255">
<p class="system-message-title">System Message: WARNING/2 (<span class="docutils literal">C:\Users\zxouyang\CodeProjects\PRIVATE_P\io\docs\source\python/python_elegant.rst</span>, line 1169); <em><a href="#id256">backlink</a></em></p>
<p>Inline interpreted text or phrase reference start-string without end-string.</p>
</aside>
</section>
</section>
</section>
</section>
</section>
<section id="id257">
<h1 id="id257">2. 二层， 可以将二维的列表展平<a class="headerlink" href="#id257" title="Link to this heading">¶</a></h1>
<p>[item for items in items_list for item in items]
for items in items_list:</p>
<aside class="system-message">
<p class="system-message-title">System Message: ERROR/3 (<span class="docutils literal">C:\Users\zxouyang\CodeProjects\PRIVATE_P\io\docs\source\python/python_elegant.rst</span>, line 1179)</p>
<p>Unexpected indentation.</p>
</aside>
<blockquote>
<div><dl class="simple">
<dt>for item in items:</dt><dd><p><a href="#id919"><span class="problematic" id="id920">list_</span></a>.append(item)</p>
</dd>
</dl>
</div></blockquote>
</section>
<section id="mix">
<h1 id="mix">3. mix 两个<a class="headerlink" href="#mix" title="Link to this heading">¶</a></h1>
<p>[(x,y) for x in list_x for y in list_y if x!=y]
for x in list_x:  # 所以是先按 y 再按 x</p>
<aside class="system-message">
<p class="system-message-title">System Message: ERROR/3 (<span class="docutils literal">C:\Users\zxouyang\CodeProjects\PRIVATE_P\io\docs\source\python/python_elegant.rst</span>, line 1186)</p>
<p>Unexpected indentation.</p>
</aside>
<blockquote>
<div><dl class="simple">
<dt>for y in list_y:</dt><dd><dl class="simple">
<dt>if x != y:</dt><dd><p>yield (x,y)</p>
</dd>
</dl>
</dd>
</dl>
</div></blockquote>
<aside class="system-message">
<p class="system-message-title">System Message: WARNING/2 (<span class="docutils literal">C:\Users\zxouyang\CodeProjects\PRIVATE_P\io\docs\source\python/python_elegant.rst</span>, line 1189)</p>
<p>Block quote ends without a blank line; unexpected unindent.</p>
</aside>
<p><a href="#id258"><span class="problematic" id="id259">``</span></a><a href="#id260"><span class="problematic" id="id261">`</span></a></p>
<aside class="system-message" id="id258">
<p class="system-message-title">System Message: WARNING/2 (<span class="docutils literal">C:\Users\zxouyang\CodeProjects\PRIVATE_P\io\docs\source\python/python_elegant.rst</span>, line 1189); <em><a href="#id259">backlink</a></em></p>
<p>Inline literal start-string without end-string.</p>
</aside>
<aside class="system-message" id="id260">
<p class="system-message-title">System Message: WARNING/2 (<span class="docutils literal">C:\Users\zxouyang\CodeProjects\PRIVATE_P\io\docs\source\python/python_elegant.rst</span>, line 1189); <em><a href="#id261">backlink</a></em></p>
<p>Inline interpreted text or phrase reference start-string without end-string.</p>
</aside>
<dl>
<dt>!!! p “笛卡尔积  with Listcomps”</dt><dd><blockquote>
<div><p><span class="math"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mtext>Cartesian Product</mtext><mo separator="true">,</mo><mi>A</mi><mo>×</mo><mi>B</mi><mo>=</mo><mo stretchy="false">{</mo><mo stretchy="false">(</mo><mi>x</mi><mo separator="true">,</mo><mi>y</mi><mo stretchy="false">)</mo><mi mathvariant="normal">∣</mi><mi>x</mi><mo>∈</mo><mi>A</mi><mo>∧</mo><mi>y</mi><mo>∈</mo><mi>B</mi><mo stretchy="false">}</mo><mo>∈</mo><msup><mi mathvariant="double-struck">R</mi><mrow><mi mathvariant="normal">#</mi><mi>A</mi><mo>∗</mo><mi mathvariant="normal">#</mi><mi>B</mi></mrow></msup></mrow><annotation encoding="application/x-tex">\text{Cartesian Product}, A×B=\{(x,y)|x∈A∧y∈B\}\in\R^{\#A*\#B}</annotation></semantics></math></span><span aria-hidden="true" class="katex-html"><span class="base"><span class="strut" style="height:0.8889em;vertical-align:-0.1944em;"></span><span class="mord text"><span class="mord">Cartesian Product</span></span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.1667em;"></span><span class="mord mathnormal">A</span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mbin">×</span><span class="mspace" style="margin-right:0.2222em;"></span></span><span class="base"><span class="strut" style="height:0.6833em;"></span><span class="mord mathnormal" style="margin-right:0.05017em;">B</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2778em;"></span></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mopen">{(</span><span class="mord mathnormal">x</span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.1667em;"></span><span class="mord mathnormal" style="margin-right:0.03588em;">y</span><span class="mclose">)</span><span class="mord">∣</span><span class="mord mathnormal">x</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">∈</span><span class="mspace" style="margin-right:0.2778em;"></span></span><span class="base"><span class="strut" style="height:0.6833em;"></span><span class="mord mathnormal">A</span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mbin">∧</span><span class="mspace" style="margin-right:0.2222em;"></span></span><span class="base"><span class="strut" style="height:0.7335em;vertical-align:-0.1944em;"></span><span class="mord mathnormal" style="margin-right:0.03588em;">y</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">∈</span><span class="mspace" style="margin-right:0.2778em;"></span></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord mathnormal" style="margin-right:0.05017em;">B</span><span class="mclose">}</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">∈</span><span class="mspace" style="margin-right:0.2778em;"></span></span><span class="base"><span class="strut" style="height:0.8491em;"></span><span class="mord"><span class="mord mathbb">R</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.8491em;"><span style="top:-3.063em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mtight">#</span><span class="mord mathnormal mtight">A</span><span class="mbin mtight">∗</span><span class="mord mtight">#</span><span class="mord mathnormal mtight" style="margin-right:0.05017em;">B</span></span></span></span></span></span></span></span></span></span></span></span></span></p>
</div></blockquote>
<p><cite>[(a, b) for a in A for b in B]</cite></p>
<p>内存里不会留下一个有组合的列表。因为在每次 for 循环的时候才会产生一个组合，所以内存变成是&lt;u&gt;一个组合的大小&lt;/u&gt;</p>
</dd>
</dl>
<p>==generator expression, genexps, 生成器表达式==。具有生成各种类型的元素并用它们来填充**除列表外其他序列**的功能。
genexps 遵守了&lt;u&gt;迭代器协议&lt;/u&gt;，<strong>可以逐个地产出元素（节省内存）</strong>，而不是先建立一个完整的列表，然后再把这个列表传递到某个构造函数里`tuple(list(range(3)))`
如果 genexps 是一个函数调用过程中的唯一参数，那么不需要额外再用括号把它围起来。
&gt; <cite>a = tuple(ord(str_) for str_ in ‘abc’)</cite> 1个括号
&gt; <cite>array.array(‘I’, (ord(str_) for str_ in ‘abc’))</cite> 2个括号</p>
<aside class="system-message">
<p class="system-message-title">System Message: SEVERE/4 (<span class="docutils literal">C:\Users\zxouyang\CodeProjects\PRIVATE_P\io\docs\source\python/python_elegant.rst</span>, line 1204)</p>
<p>Title level inconsistent:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">拆包</span>
<span class="o">++++++</span>
</pre></div>
</div>
</aside>
<p>==可迭代元素拆包==。把**任何一个可迭代对象**拆开进行</p>
<ul class="simple">
<li><p><strong>赋值</strong></p></li>
<li><p>用 <cite>*</cite> 解析作为**函数参数**。</p></li>
</ul>
<p>因为位置有意义时拆包显得格外有意义，所以一般指 Tuple 拆包。
<strong>唯一的要求：</strong> 被可迭代对象中的元素数量必须是和接受这些元素的元组的空档数一致。
允许**嵌套拆包**</p>
<dl class="simple">
<dt>!!! warning “<cite>_</cite> &amp; <cite>*</cite>”</dt><dd><p>对待&lt;u&gt;少量不需要&lt;/u&gt;的元素：<cite>_</cite> 占位符。必须数量对应，和位置对应
对待&lt;u&gt;不确定数量无谓需不需要&lt;/u&gt;的元素 <cite>*</cite>。可以出现在前中后</p>
</dd>
</dl>
<p><a href="#id262"><span class="problematic" id="id263">``</span></a><a href="#id264"><span class="problematic" id="id265">`</span></a>python hl_lines=”1 2 4 10 11 19”
a, b = (‘a’, ‘b’)  # 平行赋值
a, b = b, a  # 不使用中间变量交换两个变量
a = (20,8)
divmod(<a href="#id266"><span class="problematic" id="id267">*</span></a>a)  # 用 * 解析作为函数参数
20/8=2…4
———————-</p>
<aside class="system-message" id="id262">
<p class="system-message-title">System Message: WARNING/2 (<span class="docutils literal">C:\Users\zxouyang\CodeProjects\PRIVATE_P\io\docs\source\python/python_elegant.rst</span>, line 1220); <em><a href="#id263">backlink</a></em></p>
<p>Inline literal start-string without end-string.</p>
</aside>
<aside class="system-message" id="id264">
<p class="system-message-title">System Message: WARNING/2 (<span class="docutils literal">C:\Users\zxouyang\CodeProjects\PRIVATE_P\io\docs\source\python/python_elegant.rst</span>, line 1220); <em><a href="#id265">backlink</a></em></p>
<p>Inline interpreted text or phrase reference start-string without end-string.</p>
</aside>
<aside class="system-message" id="id266">
<p class="system-message-title">System Message: WARNING/2 (<span class="docutils literal">C:\Users\zxouyang\CodeProjects\PRIVATE_P\io\docs\source\python/python_elegant.rst</span>, line 1220); <em><a href="#id267">backlink</a></em></p>
<p>Inline emphasis start-string without end-string.</p>
</aside>
<p>filedir = ‘/home/dir1/dir2/a.txt’
filedir.split(‘/’)
&gt;&gt;&gt; [‘’, ‘home’, ‘dir1’, ‘dir2’, ‘a.txt’]
====================================================================================
_, _, _, _, filename = filedir.split(‘/’) # 只要最后面的, 必须数量一样
_, <a href="#id268"><span class="problematic" id="id269">*</span></a>dirs, filename = filedir.split(‘/’) # 每个文件储存的文件夹数量是不一定的
用占位符巧妙减少列表内存（第一个/前面的空格是不需要的）
==========================================================
filename
&gt;&gt;&gt; a.txt
====================
dirs
&gt;&gt;&gt; [‘home’, ‘dir1’, ‘dir2’]
==========================================================</p>
<aside class="system-message" id="id268">
<p class="system-message-title">System Message: WARNING/2 (<span class="docutils literal">C:\Users\zxouyang\CodeProjects\PRIVATE_P\io\docs\source\python/python_elegant.rst</span>, line 1228); <em><a href="#id269">backlink</a></em></p>
<p>Inline emphasis start-string without end-string.</p>
</aside>
<p>area = (‘Beijing’, ‘CN’, (111,222))
city, cc, (latitude, longitude) = area  # 嵌套拆包
<a href="#id270"><span class="problematic" id="id271">``</span></a><a href="#id272"><span class="problematic" id="id273">`</span></a></p>
<aside class="system-message" id="id270">
<p class="system-message-title">System Message: WARNING/2 (<span class="docutils literal">C:\Users\zxouyang\CodeProjects\PRIVATE_P\io\docs\source\python/python_elegant.rst</span>, line 1243); <em><a href="#id271">backlink</a></em></p>
<p>Inline literal start-string without end-string.</p>
</aside>
<aside class="system-message" id="id272">
<p class="system-message-title">System Message: WARNING/2 (<span class="docutils literal">C:\Users\zxouyang\CodeProjects\PRIVATE_P\io\docs\source\python/python_elegant.rst</span>, line 1243); <em><a href="#id273">backlink</a></em></p>
<p>Inline interpreted text or phrase reference start-string without end-string.</p>
</aside>
<aside class="system-message">
<p class="system-message-title">System Message: SEVERE/4 (<span class="docutils literal">C:\Users\zxouyang\CodeProjects\PRIVATE_P\io\docs\source\python/python_elegant.rst</span>, line 1247)</p>
<p>Title level inconsistent:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">切片</span>
<span class="o">++++++</span>
</pre></div>
</div>
</aside>
<dl class="simple">
<dt>!!! p “<cite>seq[n]</cite> 获得是一个元素，元素什么类型，返回就什么类型；</dt><dd><p><cite>seq[n-1:n]</cite> 获得是一个长度为1的 seq 对象，seq 什么类型，返回就什么类型。”</p>
</dd>
</dl>
<ul class="simple">
<li><p><cite>seq[a:b:c]</cite> 对 s 在  <span class="math"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mo stretchy="false">[</mo><mi>a</mi><mo separator="true">,</mo><mi>b</mi><mo stretchy="false">)</mo></mrow><annotation encoding="application/x-tex">[a, b)</annotation></semantics></math></span><span aria-hidden="true" class="katex-html"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mopen">[</span><span class="mord mathnormal">a</span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.1667em;"></span><span class="mord mathnormal">b</span><span class="mclose">)</span></span></span></span></span>  之间以 c 为间隔取值。【1d】</p></li>
</ul>
<aside class="system-message">
<p class="system-message-title">System Message: WARNING/2 (<span class="docutils literal">C:\Users\zxouyang\CodeProjects\PRIVATE_P\io\docs\source\python/python_elegant.rst</span>, line 1254)</p>
<p>Bullet list ends without a blank line; unexpected unindent.</p>
</aside>
<dl class="simple">
<dt>其实是调用 <cite>seq.__getitem__(slice(a,b,c))</cite></dt><dd><ul class="simple">
<li><p><strong>c = 1</strong>. c&gt;0 从第一个开始正向; c&lt;0 从倒数第一个开始反向。&lt;u&gt;有可能完全不一样！&lt;/u&gt;</p></li>
</ul>
</dd>
</dl>
<aside class="system-message">
<p class="system-message-title">System Message: WARNING/2 (<span class="docutils literal">C:\Users\zxouyang\CodeProjects\PRIVATE_P\io\docs\source\python/python_elegant.rst</span>, line 1256)</p>
<p>Definition list ends without a blank line; unexpected unindent.</p>
</aside>
<ul class="simple">
<li><p><cite>seq[m:n, k:l]</cite> 对 <strong>多维</strong> s 取  <span class="math"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mo stretchy="false">[</mo><mi>m</mi><mo separator="true">,</mo><mi>n</mi><mo stretchy="false">)</mo></mrow><annotation encoding="application/x-tex">[m, n)</annotation></semantics></math></span><span aria-hidden="true" class="katex-html"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mopen">[</span><span class="mord mathnormal">m</span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.1667em;"></span><span class="mord mathnormal">n</span><span class="mclose">)</span></span></span></span></span>  行  <span class="math"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mo stretchy="false">[</mo><mi>k</mi><mo separator="true">,</mo><mi>l</mi><mo stretchy="false">)</mo></mrow><annotation encoding="application/x-tex">[k, l)</annotation></semantics></math></span><span aria-hidden="true" class="katex-html"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mopen">[</span><span class="mord mathnormal" style="margin-right:0.03148em;">k</span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.1667em;"></span><span class="mord mathnormal" style="margin-right:0.01968em;">l</span><span class="mclose">)</span></span></span></span></span>  列 交叠的值。【&gt;2d】</p></li>
</ul>
<aside class="system-message">
<p class="system-message-title">System Message: WARNING/2 (<span class="docutils literal">C:\Users\zxouyang\CodeProjects\PRIVATE_P\io\docs\source\python/python_elegant.rst</span>, line 1257)</p>
<p>Bullet list ends without a blank line; unexpected unindent.</p>
</aside>
<p>其实是调用 <cite>seq.__getitem__([(m,k)(m,k+1)…])</cite></p>
<blockquote>
<div><dl class="simple">
<dt>!!! warning “<cite>seq[i, j]</cite> 取 i 行 j 列的&lt;u&gt;一个值&lt;/u&gt;”</dt><dd><p>其实是 <cite>seq.__getitem__((i,j))</cite></p>
</dd>
</dl>
</div></blockquote>
<aside class="system-message">
<p class="system-message-title">System Message: WARNING/2 (<span class="docutils literal">C:\Users\zxouyang\CodeProjects\PRIVATE_P\io\docs\source\python/python_elegant.rst</span>, line 1261)</p>
<p>Block quote ends without a blank line; unexpected unindent.</p>
</aside>
<ul class="simple">
<li><p>切片赋值</p></li>
</ul>
<aside class="system-message">
<p class="system-message-title">System Message: WARNING/2 (<span class="docutils literal">C:\Users\zxouyang\CodeProjects\PRIVATE_P\io\docs\source\python/python_elegant.rst</span>, line 1262)</p>
<p>Bullet list ends without a blank line; unexpected unindent.</p>
</aside>
<p>如果赋值的对象是一个切片，那么赋值的右边**必须**是一个&lt;u&gt;可迭代序列&lt;/u&gt;，哪怕只有单独一个值。</p>
<p><a href="#id274"><span class="problematic" id="id275">``</span></a><a href="#id276"><span class="problematic" id="id277">`</span></a>python hl_lines=”4 6 11”
s = list(‘abcd’)
s[::1]
&gt;&gt;&gt; [‘a’, ‘b’, ‘c’, ‘d’]
==================================================
s[::2]
&gt;&gt;&gt; [‘a’, ‘c’]
==============================
s[::-2]  # != s[::2]的相反
&gt;&gt;&gt; [‘d’, ‘b’]
==============================</p>
<aside class="system-message" id="id274">
<p class="system-message-title">System Message: WARNING/2 (<span class="docutils literal">C:\Users\zxouyang\CodeProjects\PRIVATE_P\io\docs\source\python/python_elegant.rst</span>, line 1264); <em><a href="#id275">backlink</a></em></p>
<p>Inline literal start-string without end-string.</p>
</aside>
<aside class="system-message" id="id276">
<p class="system-message-title">System Message: WARNING/2 (<span class="docutils literal">C:\Users\zxouyang\CodeProjects\PRIVATE_P\io\docs\source\python/python_elegant.rst</span>, line 1264); <em><a href="#id277">backlink</a></em></p>
<p>Inline interpreted text or phrase reference start-string without end-string.</p>
</aside>
<p>s[:2] = 1
&gt;&gt;&gt; TypeError: can only assign an iterable
======================================================================================
s[:2] = [1]  # 哪怕只有单独一个值。
&gt;&gt;&gt; [1, ‘d’]
==========================
<a href="#id278"><span class="problematic" id="id279">``</span></a><a href="#id280"><span class="problematic" id="id281">`</span></a></p>
<aside class="system-message" id="id278">
<p class="system-message-title">System Message: WARNING/2 (<span class="docutils literal">C:\Users\zxouyang\CodeProjects\PRIVATE_P\io\docs\source\python/python_elegant.rst</span>, line 1276); <em><a href="#id279">backlink</a></em></p>
<p>Inline literal start-string without end-string.</p>
</aside>
<aside class="system-message" id="id280">
<p class="system-message-title">System Message: WARNING/2 (<span class="docutils literal">C:\Users\zxouyang\CodeProjects\PRIVATE_P\io\docs\source\python/python_elegant.rst</span>, line 1276); <em><a href="#id281">backlink</a></em></p>
<p>Inline interpreted text or phrase reference start-string without end-string.</p>
</aside>
<aside class="system-message">
<p class="system-message-title">System Message: SEVERE/4 (<span class="docutils literal">C:\Users\zxouyang\CodeProjects\PRIVATE_P\io\docs\source\python/python_elegant.rst</span>, line 1284)</p>
<p>Title level inconsistent:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">拼接</span>
<span class="o">++++++</span>
</pre></div>
</div>
</aside>
<ul class="simple">
<li><p><cite>+</cite> 不修改原有的操作形象，而是构建一个全新的序列</p></li>
</ul>
<aside class="system-message">
<p class="system-message-title">System Message: SEVERE/4 (<span class="docutils literal">C:\Users\zxouyang\CodeProjects\PRIVATE_P\io\docs\source\python/python_elegant.rst</span>, line 1289)</p>
<p>Title level inconsistent:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">复制后拼接</span>
<span class="sd">''''''</span><span class="s1">''''''</span>
</pre></div>
</div>
</aside>
<ul>
<li><p><cite>seq * n</cite> 不修改原有的操作形象，而是构建一个全新的序列。<cite>seq[item]`➡️ `seq[item1, item1, …]</cite></p>
<blockquote>
<div><p>!!! danger seq 里的元素是引用，复制的将会是引用，<span class="defi">一改全改</span></p>
</div></blockquote>
</li>
</ul>
<aside class="system-message">
<p class="system-message-title">System Message: WARNING/2 (<span class="docutils literal">C:\Users\zxouyang\CodeProjects\PRIVATE_P\io\docs\source\python/python_elegant.rst</span>, line 1295)</p>
<p>Bullet list ends without a blank line; unexpected unindent.</p>
</aside>
<blockquote>
<div><p>seq 里的元素是值，复制的将会是值 <span class="defi">具有独立</span></p>
</div></blockquote>
<aside class="system-message">
<p class="system-message-title">System Message: WARNING/2 (<span class="docutils literal">C:\Users\zxouyang\CodeProjects\PRIVATE_P\io\docs\source\python/python_elegant.rst</span>, line 1296)</p>
<p>Block quote ends without a blank line; unexpected unindent.</p>
</aside>
<ul class="simple">
<li><p><cite>seqA(seqB for i in range(n))</cite> 对嵌套序列的序列，嵌套内的序列是存放不同内容的东西。</p></li>
</ul>
<aside class="system-message">
<p class="system-message-title">System Message: WARNING/2 (<span class="docutils literal">C:\Users\zxouyang\CodeProjects\PRIVATE_P\io\docs\source\python/python_elegant.rst</span>, line 1297)</p>
<p>Bullet list ends without a blank line; unexpected unindent.</p>
</aside>
<p>🟰`seA[seqB]`➡️ <cite>seqA[seqB1, seqB2, …]</cite> 里面相互独立。
<cite>seqA(seqB) *n</cite> 🟰 <a href="#id282"><span class="problematic" id="id283">`</span></a>seA[seqB]`➡️ <a href="#id284"><span class="problematic" id="id285">`</span></a>seqA[seqB, seqB, …]`（第一个方法，里面一改全改。）</p>
<aside class="system-message" id="id282">
<p class="system-message-title">System Message: WARNING/2 (<span class="docutils literal">C:\Users\zxouyang\CodeProjects\PRIVATE_P\io\docs\source\python/python_elegant.rst</span>, line 1297); <em><a href="#id283">backlink</a></em></p>
<p>Inline interpreted text or phrase reference start-string without end-string.</p>
</aside>
<aside class="system-message" id="id284">
<p class="system-message-title">System Message: WARNING/2 (<span class="docutils literal">C:\Users\zxouyang\CodeProjects\PRIVATE_P\io\docs\source\python/python_elegant.rst</span>, line 1297); <em><a href="#id285">backlink</a></em></p>
<p>Inline interpreted text or phrase reference start-string without end-string.</p>
</aside>
<p><a href="#id286"><span class="problematic" id="id287">``</span></a><a href="#id288"><span class="problematic" id="id289">`</span></a>python hl_lines=”1 6 11 18 25”
a = [0] * 3  # [0] 是 seq， 0 是元素 = 值
&gt;&gt;&gt; a = [0, 0, 0]
====================================
a[0]=1
&gt;&gt;&gt; a = [1, 0, 0]
====================================</p>
<aside class="system-message" id="id286">
<p class="system-message-title">System Message: WARNING/2 (<span class="docutils literal">C:\Users\zxouyang\CodeProjects\PRIVATE_P\io\docs\source\python/python_elegant.rst</span>, line 1300); <em><a href="#id287">backlink</a></em></p>
<p>Inline literal start-string without end-string.</p>
</aside>
<aside class="system-message" id="id288">
<p class="system-message-title">System Message: WARNING/2 (<span class="docutils literal">C:\Users\zxouyang\CodeProjects\PRIVATE_P\io\docs\source\python/python_elegant.rst</span>, line 1300); <em><a href="#id289">backlink</a></em></p>
<p>Inline interpreted text or phrase reference start-string without end-string.</p>
</aside>
<p>b = [[0]*3]  # [0] 是 seq，0 是元素 = 值
在 b 内层复制, b 只有1个元素 []
——————————————–
b[0]=1
&gt;&gt;&gt; b = [1]
========================</p>
<p>c = [[0]] * 3  # [[0]] 是 seq， [0] 是元素 = 引用
在 c 复制，c 有3个元素 []
————————————
c[0] = 1
&gt;&gt;&gt; c = [1, [0], [0]]
============================================
c[1][0]=2
&gt;&gt;&gt; c = [1, [2], [2]]
============================================</p>
<p>d = [[0] for i in range(3)]
&gt;&gt;&gt; d = [[0], [0], [0]]
================================================
d[0] = 1
&gt;&gt;&gt; d = [1, [0], [0]]
============================================
d[1][0]=2
&gt;&gt;&gt; d = [1, [2], [0]]
============================================</p>
<p>e = [‘-’<a href="#id290"><span class="problematic" id="id291">*</span></a>3]
&gt;&gt;&gt; e = [’—‘]
================================
<a href="#id292"><span class="problematic" id="id293">``</span></a><a href="#id294"><span class="problematic" id="id295">`</span></a></p>
<aside class="system-message" id="id290">
<p class="system-message-title">System Message: WARNING/2 (<span class="docutils literal">C:\Users\zxouyang\CodeProjects\PRIVATE_P\io\docs\source\python/python_elegant.rst</span>, line 1335); <em><a href="#id291">backlink</a></em></p>
<p>Inline emphasis start-string without end-string.</p>
</aside>
<aside class="system-message" id="id292">
<p class="system-message-title">System Message: WARNING/2 (<span class="docutils literal">C:\Users\zxouyang\CodeProjects\PRIVATE_P\io\docs\source\python/python_elegant.rst</span>, line 1335); <em><a href="#id293">backlink</a></em></p>
<p>Inline literal start-string without end-string.</p>
</aside>
<aside class="system-message" id="id294">
<p class="system-message-title">System Message: WARNING/2 (<span class="docutils literal">C:\Users\zxouyang\CodeProjects\PRIVATE_P\io\docs\source\python/python_elegant.rst</span>, line 1335); <em><a href="#id295">backlink</a></em></p>
<p>Inline interpreted text or phrase reference start-string without end-string.</p>
</aside>
<p><code class="docutils literal notranslate"><span class="pre">`mermaid</span>
<span class="pre">graph</span> <span class="pre">LR</span>
<span class="pre">subgraph</span> <span class="pre">栈区</span>
<span class="pre">c</span> <span class="pre">--一直没变--&gt;</span> <span class="pre">c_address</span>
<span class="pre">end</span>
<span class="pre">subgraph</span> <span class="pre">堆区</span>
<span class="pre">0_address</span>
<span class="pre">0</span>
<span class="pre">1</span>
<span class="pre">2</span>
<span class="pre">B[【0_address】]</span>
<span class="pre">C[【0_address,0_address,0_address】]</span>
<span class="pre">D[【1,0_address,0_address】]</span>
<span class="pre">end</span>
<span class="pre">c_address</span> <span class="pre">-.-</span> <span class="pre">B</span> <span class="pre">-.-&gt;</span> <span class="pre">0_address</span> <span class="pre">-.-</span> <span class="pre">0</span>
<span class="pre">c_address</span> <span class="pre">-.-</span> <span class="pre">C</span> <span class="pre">-.-&gt;</span> <span class="pre">0_address</span>
<span class="pre">B</span> <span class="pre">--1)复制--&gt;</span> <span class="pre">C</span>
<span class="pre">c_address</span> <span class="pre">-.-</span> <span class="pre">D</span>
<span class="pre">C</span> <span class="pre">--2)c0=1--&gt;</span> <span class="pre">D</span>
<span class="pre">D</span> <span class="pre">-.-&gt;</span> <span class="pre">0_address</span>
<span class="pre">D</span> <span class="pre">-.-</span> <span class="pre">1</span>
<span class="pre">0_address</span> <span class="pre">-.-</span> <span class="pre">2</span>
<span class="pre">0</span> <span class="pre">--3)c10=2--&gt;2</span>
<span class="pre">`</span></code></p>
<p>只有前两步改的是 <cite>c</cite> 存的的东西，最后一步其实`c` 存的的东西没变，<cite>c</cite> 存的的东西存的东西变了</p>
<aside class="system-message">
<p class="system-message-title">System Message: SEVERE/4 (<span class="docutils literal">C:\Users\zxouyang\CodeProjects\PRIVATE_P\io\docs\source\python/python_elegant.rst</span>, line 1367)</p>
<p>Title level inconsistent:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">就地加乘</span>
<span class="sd">''''''</span><span class="s1">''''</span>
</pre></div>
</div>
</aside>
<p><cite>+=</cite>, <cite>*=</cite>, <cite>__iadd__</cite>, <cite>__imul__</cite>
<strong>重要</strong>：对 <span class="defi">Seq</span> &amp; <span class="defi">MutableSeq</span> 内存地址的变化</p>
<p><code class="docutils literal notranslate"><span class="pre">`python</span> <span class="pre">hl_lines="2</span> <span class="pre">7"</span>
<span class="pre">Seq</span> <span class="pre">变了</span>
<span class="pre">==============</span>
<span class="pre">t</span> <span class="pre">=</span> <span class="pre">(1,</span> <span class="pre">2)</span>
<span class="pre">&gt;&gt;&gt;</span> <span class="pre">t=(1,2),</span> <span class="pre">id(t)=4313022720</span>
<span class="pre">============================================================</span>
<span class="pre">t</span> <span class="pre">*=</span> <span class="pre">2</span>
<span class="pre">&gt;&gt;&gt;</span> <span class="pre">t=(1,2,1,2),</span> <span class="pre">id(t)=4311067808</span>
<span class="pre">====================================================================</span>
<span class="pre">#</span> <span class="pre">MutableSeq</span> <span class="pre">不变</span>
<span class="pre">l</span> <span class="pre">=</span> <span class="pre">[1,</span> <span class="pre">2]</span>
<span class="pre">&gt;&gt;&gt;</span> <span class="pre">l=[1,2],</span> <span class="pre">id(l)=4311024448</span>
<span class="pre">============================================================</span>
<span class="pre">l</span> <span class="pre">*=</span> <span class="pre">2</span>
<span class="pre">&gt;&gt;&gt;</span> <span class="pre">l=[1,2,1,2],</span> <span class="pre">id(l)=4311024448</span>
<span class="pre">====================================================================</span>
<span class="pre">`</span></code></p>
<p>!!! warning “关于就地加乘一个还没解决的问题”</p>
<blockquote>
<div><p><code class="docutils literal notranslate"><span class="pre">`python</span>
<span class="pre">t</span> <span class="pre">=</span> <span class="pre">(1,2,[30,40])</span>
<span class="pre">t[2]+=[50,60]</span>
<span class="pre">#</span> <span class="pre">&gt;&gt;&gt;</span> <span class="pre">TypeError:</span> <span class="pre">'tuple'</span> <span class="pre">object</span> <span class="pre">does</span> <span class="pre">not</span> <span class="pre">support</span> <span class="pre">item</span> <span class="pre">assignment</span>
<span class="pre">#</span> <span class="pre">&gt;&gt;&gt;</span> <span class="pre">t=(1,</span> <span class="pre">2,</span> <span class="pre">[30,</span> <span class="pre">40,</span> <span class="pre">50,</span> <span class="pre">60])</span>
<span class="pre">`</span></code></p>
</div></blockquote>
<aside class="system-message">
<p class="system-message-title">System Message: SEVERE/4 (<span class="docutils literal">C:\Users\zxouyang\CodeProjects\PRIVATE_P\io\docs\source\python/python_elegant.rst</span>, line 1400)</p>
<p>Title level inconsistent:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">排序</span>
<span class="o">++++++</span>
</pre></div>
</div>
</aside>
<dl>
<dt>!!! p “稳定的`Timsort`  “</dt><dd><p>两个元素同样大小的情况下，在排序的时候位置是相互固定的。如果在比较长的时候，两个元素一样长，那么结果的先后会以原本本身列表的先后决定，这样相对稳定。</p>
<p><cite>lst.sort()</cite> &amp; <cite>sorted(iterableObject)</cite> 背后用的都是 Timsort。
==Timsort==。一种自适应算法，根据原始数据的顺序特点交替使用插入排序 &amp; 归并排序。=，以达到最佳效率。</p>
</dd>
</dl>
<p><strong>不需要维护排序：</strong></p>
<ul class="simple">
<li><p><cite>lst.sort()</cite> 就地排序列表，返回 None。</p></li>
<li><dl class="simple">
<dt><cite>sorted(iterableObject)</cite> 返回新建的列表。</dt><dd><ul>
<li><p>接受任何形式可迭代的对象为参数，包括不可变序列或生成器。</p></li>
</ul>
</dd>
</dl>
</li>
</ul>
<p>📗 都有两个可选的关键词参数</p>
<ul class="simple">
<li><p><cite>reverse=False</cite> 默认升序</p></li>
<li><dl class="simple">
<dt><cite>key=IdentityFunction</cite> 一个只有一个参数的函数。这个函数会被用在序列上的每一个元素上，产生元素相对应的用于排序的对比关键词。默认恒等函数，以元素自己的值来排序。</dt><dd><ul>
<li><p><cite>=len</cite> 对比长度</p></li>
<li><p><cite>=str.lower</cite> 忽略大小写的的排序</p></li>
<li><p><cite>=reverse</cite> 从左到右进行比较</p></li>
</ul>
</dd>
</dl>
</li>
</ul>
<p><code class="docutils literal notranslate"><span class="pre">`python</span> <span class="pre">hl_lines="2</span> <span class="pre">4</span> <span class="pre">6"</span>
<span class="pre">lst</span> <span class="pre">=</span> <span class="pre">['Aa',</span> <span class="pre">'b',</span> <span class="pre">'Cc']</span>
<span class="pre">sorted(lst)</span>
<span class="pre">按</span> <span class="pre">首字母</span> <span class="pre">ord</span>
<span class="pre">--------------------</span>
<span class="pre">sorted(lst,</span> <span class="pre">key=str.lower)</span>  <span class="pre">#</span> <span class="pre">按</span> <span class="pre">不分大小写</span> <span class="pre">ord</span>
<span class="pre">&gt;&gt;&gt;</span> <span class="pre">['Aa',</span> <span class="pre">'b',</span> <span class="pre">'Cc']</span>
<span class="pre">============================================</span>
<span class="pre">sorted(lst,</span> <span class="pre">key=len)</span>
<span class="pre">&gt;&gt;&gt;</span> <span class="pre">['b',</span> <span class="pre">'Aa',</span> <span class="pre">'Cc']</span>
<span class="pre">============================================</span>
<span class="pre">`</span></code></p>
<p><a href="#id296"><span class="problematic" id="id297">``</span></a>` python title=”不支持原生比较的对象”</p>
<aside class="system-message" id="id296">
<p class="system-message-title">System Message: WARNING/2 (<span class="docutils literal">C:\Users\zxouyang\CodeProjects\PRIVATE_P\io\docs\source\python/python_elegant.rst</span>, line 1436); <em><a href="#id297">backlink</a></em></p>
<p>Inline literal start-string without end-string.</p>
</aside>
<dl class="simple">
<dt>class User:</dt><dd><dl class="simple">
<dt>def __init__(self, id, age):</dt><dd><p>self.id = id
self.age = age</p>
</dd>
<dt>def __repr__(self):</dt><dd><p>return ‘User(id:{}, age:{})’.format(self.id, self.age)</p>
</dd>
</dl>
</dd>
</dl>
<p>users = [User(1, 50), User(9, 10), User(1, 30)]
print(”n— uncomparable class —“)
print(users, “n”,</p>
<aside class="system-message">
<p class="system-message-title">System Message: ERROR/3 (<span class="docutils literal">C:\Users\zxouyang\CodeProjects\PRIVATE_P\io\docs\source\python/python_elegant.rst</span>, line 1448)</p>
<p>Unexpected indentation.</p>
</aside>
<blockquote>
<div><p>“t”, sorted(users, key=lambda d: d.id), “n”,
“t”, sorted(users, key=lambda d: (d.id, d.age)))</p>
</div></blockquote>
<p>from operator import attrgetter # another
print(users, “n”,</p>
<aside class="system-message">
<p class="system-message-title">System Message: ERROR/3 (<span class="docutils literal">C:\Users\zxouyang\CodeProjects\PRIVATE_P\io\docs\source\python/python_elegant.rst</span>, line 1454)</p>
<p>Unexpected indentation.</p>
</aside>
<blockquote>
<div><p>“t”, sorted(users,  key=attrgetter(‘id’)), “n”,
“t”, sorted(users,  key=attrgetter(‘id’, ‘age’)))</p>
</div></blockquote>
<aside class="system-message">
<p class="system-message-title">System Message: WARNING/2 (<span class="docutils literal">C:\Users\zxouyang\CodeProjects\PRIVATE_P\io\docs\source\python/python_elegant.rst</span>, line 1456)</p>
<p>Block quote ends without a blank line; unexpected unindent.</p>
</aside>
<p><a href="#id298"><span class="problematic" id="id299">``</span></a><a href="#id300"><span class="problematic" id="id301">`</span></a></p>
<aside class="system-message" id="id298">
<p class="system-message-title">System Message: WARNING/2 (<span class="docutils literal">C:\Users\zxouyang\CodeProjects\PRIVATE_P\io\docs\source\python/python_elegant.rst</span>, line 1456); <em><a href="#id299">backlink</a></em></p>
<p>Inline literal start-string without end-string.</p>
</aside>
<aside class="system-message" id="id300">
<p class="system-message-title">System Message: WARNING/2 (<span class="docutils literal">C:\Users\zxouyang\CodeProjects\PRIVATE_P\io\docs\source\python/python_elegant.rst</span>, line 1456); <em><a href="#id301">backlink</a></em></p>
<p>Inline interpreted text or phrase reference start-string without end-string.</p>
</aside>
<p><strong>需要维护排序：</strong></p>
<dl class="simple">
<dt>!!! quote “已经排好了序，如何查找&amp;维护”</dt><dd><p>排序很耗时，得到有序序列后最好保持它一直有序。</p>
</dd>
</dl>
<p><cite>bisect module</cite> 底下的 <cite>bisect</cite> &amp; <cite>insort</cite> 都是用&lt;u&gt;二分查找&lt;/u&gt;在有序序列上 查找并插入元素。</p>
<p>📗 有`lo` &amp; <cite>hi</cite>,来缩小搜寻范围。</p>
<ul class="simple">
<li><p><cite>bisect.bisect(sortedlst, target)</cite> 查找索引，相同时，在同一个的右边。</p></li>
</ul>
<aside class="system-message">
<p class="system-message-title">System Message: WARNING/2 (<span class="docutils literal">C:\Users\zxouyang\CodeProjects\PRIVATE_P\io\docs\source\python/python_elegant.rst</span>, line 1468)</p>
<p>Bullet list ends without a blank line; unexpected unindent.</p>
</aside>
<p>可搭配上 <cite>sortedlst.insert(idx, target)`配合使用
有 `bisect.bisect_left</cite> 相同时，在同一个的左边。
- <cite>bisect.insort(sortedlst, target)</cite> 查找并插入。就地改变。一步到位，速度更快。
同样有 <cite>bisect.insort_left</cite></p>
<p><a href="#id302"><span class="problematic" id="id303">``</span></a><a href="#id304"><span class="problematic" id="id305">`</span></a>python
import bisect
lst = [2, 4, 6]
bisect.bisect(lst, 3)
&gt;&gt;&gt; 1
============
bisect.insort(lst, 3)
&gt;&gt;&gt; [2, 3, 4, 6]
==================================</p>
<aside class="system-message" id="id302">
<p class="system-message-title">System Message: WARNING/2 (<span class="docutils literal">C:\Users\zxouyang\CodeProjects\PRIVATE_P\io\docs\source\python/python_elegant.rst</span>, line 1473); <em><a href="#id303">backlink</a></em></p>
<p>Inline literal start-string without end-string.</p>
</aside>
<aside class="system-message" id="id304">
<p class="system-message-title">System Message: WARNING/2 (<span class="docutils literal">C:\Users\zxouyang\CodeProjects\PRIVATE_P\io\docs\source\python/python_elegant.rst</span>, line 1473); <em><a href="#id305">backlink</a></em></p>
<p>Inline interpreted text or phrase reference start-string without end-string.</p>
</aside>
</section>
<section id="id306">
<h1 id="id306">用途<a class="headerlink" href="#id306" title="Link to this heading">¶</a></h1>
<dl class="simple">
<dt>def grade(score):</dt><dd><p>breakpoints=[60, 70, 80, 90]
grades = ‘FDCBA’
i = bisect.bisect(breakpoints, score)
return grades[i]</p>
</dd>
</dl>
<p>[grade(score) for score in [33, 99, 77, 60]]
&gt;&gt;&gt; [‘F’, ‘A’, ‘C’, ‘D’]
==================================================
<a href="#id307"><span class="problematic" id="id308">``</span></a><a href="#id309"><span class="problematic" id="id310">`</span></a></p>
<aside class="system-message" id="id307">
<p class="system-message-title">System Message: WARNING/2 (<span class="docutils literal">C:\Users\zxouyang\CodeProjects\PRIVATE_P\io\docs\source\python/python_elegant.rst</span>, line 1491); <em><a href="#id308">backlink</a></em></p>
<p>Inline literal start-string without end-string.</p>
</aside>
<aside class="system-message" id="id309">
<p class="system-message-title">System Message: WARNING/2 (<span class="docutils literal">C:\Users\zxouyang\CodeProjects\PRIVATE_P\io\docs\source\python/python_elegant.rst</span>, line 1491); <em><a href="#id310">backlink</a></em></p>
<p>Inline interpreted text or phrase reference start-string without end-string.</p>
</aside>
<aside class="system-message">
<p class="system-message-title">System Message: SEVERE/4 (<span class="docutils literal">C:\Users\zxouyang\CodeProjects\PRIVATE_P\io\docs\source\python/python_elegant.rst</span>, line 1496)</p>
<p>Title level inconsistent:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="nb">list</span>
<span class="o">^^^^^^^^^^</span>
</pre></div>
</div>
</aside>
<p><span class="defi">容器</span> + <span class="defi">MutableSequence</span></p>
<ul class="simple">
<li><p>init。</p></li>
</ul>
<aside class="system-message">
<p class="system-message-title">System Message: WARNING/2 (<span class="docutils literal">C:\Users\zxouyang\CodeProjects\PRIVATE_P\io\docs\source\python/python_elegant.rst</span>, line 1502)</p>
<p>Bullet list ends without a blank line; unexpected unindent.</p>
</aside>
<p><cite>list(range(start, end, step))</cite>
将`range()`作为`list()`的参数，输出将为一个数字列表
- 增加</p>
<aside class="system-message">
<p class="system-message-title">System Message: ERROR/3 (<span class="docutils literal">C:\Users\zxouyang\CodeProjects\PRIVATE_P\io\docs\source\python/python_elegant.rst</span>, line 1505)</p>
<p>Unexpected indentation.</p>
</aside>
<blockquote>
<div><ul class="simple">
<li><p><cite>lst.append(x)</cite> 末尾</p></li>
<li><p><cite>lst.insert(idx, x)</cite> any position</p></li>
</ul>
</div></blockquote>
<aside class="system-message">
<p class="system-message-title">System Message: WARNING/2 (<span class="docutils literal">C:\Users\zxouyang\CodeProjects\PRIVATE_P\io\docs\source\python/python_elegant.rst</span>, line 1507)</p>
<p>Block quote ends without a blank line; unexpected unindent.</p>
</aside>
<ul>
<li><dl>
<dt>删除</dt><dd><p>||根据____来删除|return|
<a href="#id677"><span class="problematic" id="id678">|--|</span></a>–<a href="#id679"><span class="problematic" id="id680">|--|</span></a>
<a href="#id681"><span class="problematic" id="id682">|`del lst[idx]` |idx |❌ no-return|</span></a>
<a href="#id683"><span class="problematic" id="id684">|`lst.pop(idx)` |idx |✅ **lst[idx]**，不指定索引默认删除最后一个|</span></a>
<a href="#id685"><span class="problematic" id="id686">|`lst.remove(x)`|</span></a> value, 只删除**第一个**指定的值|✅  <a href="#id311"><span class="problematic" id="id312">**</span></a>x**|</p>
<aside class="system-message" id="id311">
<p class="system-message-title">System Message: WARNING/2 (<span class="docutils literal">C:\Users\zxouyang\CodeProjects\PRIVATE_P\io\docs\source\python/python_elegant.rst</span>, line 1508); <em><a href="#id312">backlink</a></em></p>
<p>Inline strong start-string without end-string.</p>
</aside>
</dd>
</dl>
</li>
<li><p>查 search</p></li>
</ul>
<aside class="system-message">
<p class="system-message-title">System Message: WARNING/2 (<span class="docutils literal">C:\Users\zxouyang\CodeProjects\PRIVATE_P\io\docs\source\python/python_elegant.rst</span>, line 1514)</p>
<p>Bullet list ends without a blank line; unexpected unindent.</p>
</aside>
<p><cite>lst.index(val)</cite> 返回第一个找到的idx。找不到就会 <cite>ValueError</cite></p>
<p>!!! warning “<cite>lst_1r = lst_1[:]</cite>  切片等于浅拷贝”</p>
<blockquote>
<div><p><code class="docutils literal notranslate"><span class="pre">`python</span>
<span class="pre">a</span> <span class="pre">=</span> <span class="pre">'a:a:a:b'</span>
<span class="pre">b</span> <span class="pre">=</span> <span class="pre">a[:]</span>
<span class="pre">#</span> <span class="pre">&gt;&gt;&gt;</span> <span class="pre">id(a)=id(b)=4382924912</span>
<span class="pre">`</span></code></p>
</div></blockquote>
<p>拼接</p>
<p><a href="#id687"><span class="problematic" id="id688">|？|cases|</span></a>
<a href="#id689"><span class="problematic" id="id690">|--|</span></a>–|
<a href="#id691"><span class="problematic" id="id692">|`for + append` |修改元素|</span></a>
<a href="#id693"><span class="problematic" id="id694">|`list_c = list_a + list_b` | 效率好, 不适合做大数据处理|</span></a>
<a href="#id695"><span class="problematic" id="id696">|`list_c = [*list_a, *list_b]` **通过 '*' 解构**|效率好, 不适合做大数据处理|</span></a>
<a href="#id697"><span class="problematic" id="id698">|`list_a.extend(list_b)` 内置的meth: extend|需要修改原始列表比较合适|</span></a></p>
<p>[Python3 - 6种方法拼接合并列表list]</p>
<aside class="system-message">
<p class="system-message-title">System Message: SEVERE/4 (<span class="docutils literal">C:\Users\zxouyang\CodeProjects\PRIVATE_P\io\docs\source\python/python_elegant.rst</span>, line 1535)</p>
<p>Title level inconsistent:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="nb">tuple</span>
<span class="o">^^^^^^^^^^^^</span>
</pre></div>
</div>
</aside>
<p><span class="defi">容器</span> + <span class="defi">Sequence</span>
==不可变的列表==(除了增删改，支持 list 其他所有操作)
==没有字段名的记录==(item 是携带位置信息，所以一般不搞排序)</p>
<p>虽好但是没有字段名 ➡️ <cite>namedtuple</cite></p>
<ul>
<li><dl>
<dt>init</dt><dd><ul class="simple">
<li><p>【单条记录】`tuple(val1, val2, …)`, <cite>tuple(list1)</cite></p></li>
</ul>
<aside class="system-message">
<p class="system-message-title">System Message: WARNING/2 (<span class="docutils literal">C:\Users\zxouyang\CodeProjects\PRIVATE_P\io\docs\source\python/python_elegant.rst</span>, line 1546)</p>
<p>Bullet list ends without a blank line; unexpected unindent.</p>
</aside>
<p>返回：<cite>Tuple</cite>
- 【多列合并】 <cite>list(zip(col1, col2, …))</cite></p>
<dl>
<dt>!!! warning “<cite>zip</cite>”</dt><dd><p>zip 返回来的是 <cite>&lt;zip object at 0x103abc288&gt;</cite>: 元组组成的对象。需要叠层 list。</p>
<p><code class="docutils literal notranslate"><span class="pre">`</span> <span class="pre">python</span> <span class="pre">hl_lines="2</span> <span class="pre">4"</span>
<span class="pre">col1,</span> <span class="pre">col2</span> <span class="pre">=</span> <span class="pre">[1,</span> <span class="pre">2,</span> <span class="pre">3],</span> <span class="pre">['a',</span> <span class="pre">'b',</span> <span class="pre">'c']</span>
<span class="pre">&gt;&gt;&gt;</span> <span class="pre">zip(col1,</span> <span class="pre">col2)</span>
<span class="pre">#</span> <span class="pre">&gt;&gt;&gt;</span> <span class="pre">&lt;zip</span> <span class="pre">object</span> <span class="pre">at</span> <span class="pre">0x103abc288&gt;</span>
<span class="pre">&gt;&gt;&gt;</span> <span class="pre">list(zip(col1,</span> <span class="pre">col2))</span>
<span class="pre">#</span> <span class="pre">&gt;&gt;&gt;</span> <span class="pre">[(1,</span> <span class="pre">'a'),</span> <span class="pre">(2,</span> <span class="pre">'b'),</span> <span class="pre">(3,</span> <span class="pre">'c')]</span>
<span class="pre">`</span></code></p>
</dd>
</dl>
</dd>
</dl>
</li>
<li><p>因为不可变可用作`dict`的key</p>
<blockquote>
<div><p><code class="docutils literal notranslate"><span class="pre">`</span> <span class="pre">python</span>
<span class="pre">d</span> <span class="pre">=</span> <span class="pre">{(x,</span> <span class="pre">x</span> <span class="pre">+</span> <span class="pre">1):</span> <span class="pre">x</span> <span class="pre">for</span> <span class="pre">x</span> <span class="pre">in</span> <span class="pre">range(10)}</span>
<span class="pre">print(d[(5,</span> <span class="pre">6)])</span>
<span class="pre">#</span> <span class="pre">&gt;&gt;&gt;</span> <span class="pre">5</span>
<span class="pre">`</span></code></p>
</div></blockquote>
</li>
</ul>
<aside class="system-message">
<p class="system-message-title">System Message: SEVERE/4 (<span class="docutils literal">C:\Users\zxouyang\CodeProjects\PRIVATE_P\io\docs\source\python/python_elegant.rst</span>, line 1568)</p>
<p>Title level inconsistent:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">namedtuple</span>
<span class="o">^^^^^^^^^^^^^^^^^^^^^^</span>
</pre></div>
</div>
</aside>
<p><cite>collections.namedtuple</cite>. 可以用来构建一个带字段名的元组和一个有名字的类
<span class="defi">容器</span> + <span class="defi">Sequence</span>
<span class="defi">不可变的列表</span> + <span class="defi">有字段名的记录</span></p>
<p><cite>namedtuple</cite> 构建的类的实例所&lt;u&gt;消耗的内存跟元组是一样的&lt;/u&gt;，因为字段名都被存在对应的类里面。小号的内存比普通的实例对象要小一点，因为 python 不会用 <cite>__dict__</cite> 存放实例的属性。
&gt; <a href="#id313"><span class="problematic" id="id314">`</span></a>p`的字段名都被存在对应的类`Point`里面</p>
<aside class="system-message" id="id313">
<p class="system-message-title">System Message: WARNING/2 (<span class="docutils literal">C:\Users\zxouyang\CodeProjects\PRIVATE_P\io\docs\source\python/python_elegant.rst</span>, line 1575); <em><a href="#id314">backlink</a></em></p>
<p>Inline interpreted text or phrase reference start-string without end-string.</p>
</aside>
<ul class="simple">
<li><p>init</p></li>
</ul>
<aside class="system-message">
<p class="system-message-title">System Message: WARNING/2 (<span class="docutils literal">C:\Users\zxouyang\CodeProjects\PRIVATE_P\io\docs\source\python/python_elegant.rst</span>, line 1579)</p>
<p>Bullet list ends without a blank line; unexpected unindent.</p>
</aside>
<p><cite>Records = namedtuple(typename:str, field_names:Optional(Iterable, String))</cite>
<cite>rec1 = Records(*rec1_data)</cite>
<cite>rec2 = Records._make(*rec2_data)</cite>
📕 Args:</p>
<aside class="system-message">
<p class="system-message-title">System Message: ERROR/3 (<span class="docutils literal">C:\Users\zxouyang\CodeProjects\PRIVATE_P\io\docs\source\python/python_elegant.rst</span>, line 1583)</p>
<p>Unexpected indentation.</p>
</aside>
<blockquote>
<div><ul class="simple">
<li><p>typename: 类表名的感觉</p></li>
<li><p>field_names: 由数个字符串组成的可迭代对象，或者是由**空格分隔开**的字段名组成的字符串</p></li>
</ul>
</div></blockquote>
<ul class="simple">
<li><dl class="simple">
<dt>📗 属性</dt><dd><ul>
<li><p><cite>Records._fields</cite> 包含字段名的元组</p></li>
<li><p><cite>rec1._asdict()`把 namedtuple 以 `collections.OrderedDict</cite> 形式返回。友好呈现信息</p></li>
<li><p><cite>rec1._replace(field_name=v)</cite> 修改值。</p></li>
</ul>
</dd>
</dl>
</li>
</ul>
<p><code class="docutils literal notranslate"><span class="pre">`</span> <span class="pre">python</span> <span class="pre">hl_lines="2</span> <span class="pre">3</span> <span class="pre">6"</span>
<span class="pre">from</span> <span class="pre">collections</span> <span class="pre">import</span> <span class="pre">namedtuple</span>
<span class="pre">Point</span> <span class="pre">=</span> <span class="pre">namedtuple('Point',</span> <span class="pre">['x',</span> <span class="pre">'y'])</span>
<span class="pre">p</span> <span class="pre">=</span> <span class="pre">Point(11,</span> <span class="pre">y=22)</span>  <span class="pre">#</span> <span class="pre">根据位置和kw实例化</span>
<span class="pre">p[0]</span> <span class="pre">+</span> <span class="pre">p[1]</span> <span class="pre">==</span> <span class="pre">p.x</span> <span class="pre">+</span> <span class="pre">p.y</span>  <span class="pre">#</span> <span class="pre">by</span> <span class="pre">idx</span> <span class="pre">|</span> <span class="pre">name</span>
<span class="pre">=</span> <span class="pre">33</span>
<span class="pre">----------</span>
<span class="pre">d</span> <span class="pre">=</span> <span class="pre">p._asdict()</span>  <span class="pre">#</span> <span class="pre">namedtuple</span> <span class="pre">➡️</span> <span class="pre">dict</span>
<span class="pre">&gt;&gt;&gt;</span> <span class="pre">d</span> <span class="pre">=</span> <span class="pre">{'x':</span> <span class="pre">11,</span> <span class="pre">'y':</span> <span class="pre">22}</span>
<span class="pre">======================================================</span>
<span class="pre">Point(**d)</span>      <span class="pre">#</span> <span class="pre">dict</span> <span class="pre">➡️</span> <span class="pre">namedtuple</span>
<span class="pre">&gt;&gt;&gt;</span> <span class="pre">Point(x=11,</span> <span class="pre">y=22)</span>
<span class="pre">============================================</span>
<span class="pre">p._replace(x=100)</span>
<span class="pre">&gt;&gt;&gt;</span> <span class="pre">Point(x=100,</span> <span class="pre">y=22)</span>
<span class="pre">==============================================</span>
<span class="pre">`</span></code></p>
<aside class="system-message">
<p class="system-message-title">System Message: SEVERE/4 (<span class="docutils literal">C:\Users\zxouyang\CodeProjects\PRIVATE_P\io\docs\source\python/python_elegant.rst</span>, line 1609)</p>
<p>Title level inconsistent:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">array</span> <span class="n">数组</span>
<span class="o">^^^^^^^^^^^^^^^^^^</span>
</pre></div>
</div>
</aside>
<dl class="simple">
<dt>!!! p “需要纯数字的列表是，array 比 list 更高效。”</dt><dd><p>在存数字时，array 背后存的不是 float 或者 int 对象，而是数字的机器翻译==字节表述==。
指定数据类型，当序列很大的时候，可以节省很多时间。
还提供从文件读取和存入文件更快的方法。</p>
</dd>
</dl>
<ul class="simple">
<li><p>init</p></li>
</ul>
<aside class="system-message">
<p class="system-message-title">System Message: WARNING/2 (<span class="docutils literal">C:\Users\zxouyang\CodeProjects\PRIVATE_P\io\docs\source\python/python_elegant.rst</span>, line 1618)</p>
<p>Bullet list ends without a blank line; unexpected unindent.</p>
</aside>
<p>需要**类型码**，表示底层 C 语言需要存放的数据类型</p>
<blockquote>
<div><ul class="simple">
<li><p><cite>b</cite> signed char 有符号的字符，只能存放一个字节的整数。 <span class="math"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msup><mn>2</mn><mn>7</mn></msup><mo>=</mo><mo stretchy="false">[</mo><mo>−</mo><mn>128</mn><mo separator="true">,</mo><mn>127</mn><mo stretchy="false">]</mo></mrow><annotation encoding="application/x-tex">2^7=[-128, 127]</annotation></semantics></math></span><span aria-hidden="true" class="katex-html"><span class="base"><span class="strut" style="height:0.8141em;"></span><span class="mord"><span class="mord">2</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.8141em;"><span style="top:-3.063em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">7</span></span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2778em;"></span></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mopen">[</span><span class="mord">−</span><span class="mord">128</span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.1667em;"></span><span class="mord">127</span><span class="mclose">]</span></span></span></span></span></p></li>
<li><p><cite>d</cite> 双精度浮点数组</p></li>
</ul>
</div></blockquote>
<aside class="system-message">
<p class="system-message-title">System Message: WARNING/2 (<span class="docutils literal">C:\Users\zxouyang\CodeProjects\PRIVATE_P\io\docs\source\python/python_elegant.rst</span>, line 1622)</p>
<p>Block quote ends without a blank line; unexpected unindent.</p>
</aside>
<ul class="simple">
<li><p>快速读写文件</p></li>
</ul>
<aside class="system-message">
<p class="system-message-title">System Message: WARNING/2 (<span class="docutils literal">C:\Users\zxouyang\CodeProjects\PRIVATE_P\io\docs\source\python/python_elegant.rst</span>, line 1623)</p>
<p>Bullet list ends without a blank line; unexpected unindent.</p>
</aside>
<p><cite>array.fromfile(fp)</cite> &amp; <cite>array.tofile(fp)</cite>。读写二进制文件时间比对文本文件读写要快，因为不需要转换字符和数字形式；还节省空间。
- 排序
<cite>a = array.array(a.typecode, sorted(a))</cite>
不支持就地排序方法。</p>
<p>但是不支持 浅复制 <cite>s.copy()</cite> 操作，</p>
<p><a href="#id315"><span class="problematic" id="id316">``</span></a><a href="#id317"><span class="problematic" id="id318">`</span></a>python hl_lines=”4 7 10”
from array import array
from random import random</p>
<aside class="system-message" id="id315">
<p class="system-message-title">System Message: WARNING/2 (<span class="docutils literal">C:\Users\zxouyang\CodeProjects\PRIVATE_P\io\docs\source\python/python_elegant.rst</span>, line 1630); <em><a href="#id316">backlink</a></em></p>
<p>Inline literal start-string without end-string.</p>
</aside>
<aside class="system-message" id="id317">
<p class="system-message-title">System Message: WARNING/2 (<span class="docutils literal">C:\Users\zxouyang\CodeProjects\PRIVATE_P\io\docs\source\python/python_elegant.rst</span>, line 1630); <em><a href="#id318">backlink</a></em></p>
<p>Inline interpreted text or phrase reference start-string without end-string.</p>
</aside>
<p>floats = array(‘d’, (random() for i in range(3)))
&gt;&gt;&gt; floats=array(‘d’, [0.7997733053807442, 0.15195105711939816, 0.013224926567956818])
==============================================================================================================================================================================
with open(‘floats.bin’, ‘wb’) as fp:</p>
<aside class="system-message">
<p class="system-message-title">System Message: ERROR/3 (<span class="docutils literal">C:\Users\zxouyang\CodeProjects\PRIVATE_P\io\docs\source\python/python_elegant.rst</span>, line 1638)</p>
<p>Unexpected indentation.</p>
</aside>
<blockquote>
<div><p>floats.tofile(fp)</p>
</div></blockquote>
<aside class="system-message">
<p class="system-message-title">System Message: WARNING/2 (<span class="docutils literal">C:\Users\zxouyang\CodeProjects\PRIVATE_P\io\docs\source\python/python_elegant.rst</span>, line 1639)</p>
<p>Block quote ends without a blank line; unexpected unindent.</p>
</aside>
<p>floats2 = array(‘d’)
with open(‘floats.bin’, ‘rb’) as fp:</p>
<aside class="system-message">
<p class="system-message-title">System Message: ERROR/3 (<span class="docutils literal">C:\Users\zxouyang\CodeProjects\PRIVATE_P\io\docs\source\python/python_elegant.rst</span>, line 1641)</p>
<p>Unexpected indentation.</p>
</aside>
<blockquote>
<div><p>floats2.fromfile(fp)</p>
</div></blockquote>
<aside class="system-message">
<p class="system-message-title">System Message: WARNING/2 (<span class="docutils literal">C:\Users\zxouyang\CodeProjects\PRIVATE_P\io\docs\source\python/python_elegant.rst</span>, line 1642)</p>
<p>Block quote ends without a blank line; unexpected unindent.</p>
</aside>
<p><a href="#id319"><span class="problematic" id="id320">``</span></a><a href="#id321"><span class="problematic" id="id322">`</span></a></p>
<aside class="system-message" id="id319">
<p class="system-message-title">System Message: WARNING/2 (<span class="docutils literal">C:\Users\zxouyang\CodeProjects\PRIVATE_P\io\docs\source\python/python_elegant.rst</span>, line 1642); <em><a href="#id320">backlink</a></em></p>
<p>Inline literal start-string without end-string.</p>
</aside>
<aside class="system-message" id="id321">
<p class="system-message-title">System Message: WARNING/2 (<span class="docutils literal">C:\Users\zxouyang\CodeProjects\PRIVATE_P\io\docs\source\python/python_elegant.rst</span>, line 1642); <em><a href="#id322">backlink</a></em></p>
<p>Inline interpreted text or phrase reference start-string without end-string.</p>
</aside>
<aside class="system-message">
<p class="system-message-title">System Message: SEVERE/4 (<span class="docutils literal">C:\Users\zxouyang\CodeProjects\PRIVATE_P\io\docs\source\python/python_elegant.rst</span>, line 1644)</p>
<p>Title level inconsistent:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="nb">memoryview</span> <span class="n">内存视图</span>
<span class="o">^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^</span>
</pre></div>
</div>
</aside>
<p>能在不复制内容的时候，操作同一个数组不同切片。</p>
<aside class="system-message">
<p class="system-message-title">System Message: SEVERE/4 (<span class="docutils literal">C:\Users\zxouyang\CodeProjects\PRIVATE_P\io\docs\source\python/python_elegant.rst</span>, line 1649)</p>
<p>Title level inconsistent:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">deque</span> <span class="n">双向队列</span>
<span class="o">^^^^^^^^^^^^^^^^^^^^^^</span>
</pre></div>
</div>
</aside>
<dl class="simple">
<dt>!!! quote “”</dt><dd><p>利用 <cite>.append()</cite> &amp; <cite>.pop(0)</cite> 可以把 list 当作 queue 使用。但是删除第一个或者增加到列表开始是很耗时，因为要移动其他元素。</p>
</dd>
</dl>
<p><cite>collections.deque</cite> double-end queue 线程安全，可以快速向两端添加或者删除元素。</p>
<ul class="simple">
<li><p>但是只在两端做了优化，从中间增删还是慢的。</p></li>
<li><p>append &amp; popleft 都是原子操作，deque 可以在多线程程序中安全地作为先进先出的队列使用，而不需要考虑资源锁的问题。</p></li>
</ul>
<p>!!! question “原子操作”
适合做类似“最近用到的几个元素”。因为在初始化的时候，指定队列的大小(一旦设定之后不能改)。如果满员的话，可以从**反向端**删除过期的元素，在尾端添加新元素。</p>
<ul class="simple">
<li><p>init</p></li>
</ul>
<aside class="system-message">
<p class="system-message-title">System Message: WARNING/2 (<span class="docutils literal">C:\Users\zxouyang\CodeProjects\PRIVATE_P\io\docs\source\python/python_elegant.rst</span>, line 1664)</p>
<p>Bullet list ends without a blank line; unexpected unindent.</p>
</aside>
<p><cite>q = deque([iterable[, maxlen=None])</cite>
📕
<cite>[iterable]</cite> 没有指定，新队列为空
<cite>maxlen=None</cite> ，deques 可以增长到任意长度。一旦设定之后不能改。
- 旋转
<cite>deque.rotate(n)</cite> 当 n&gt;0, 最右边的 n 个元素会被旋转到最左边；当 n&lt;0, 最左边的 n 个元素会被旋转到最右边。
- 增加 <strong>O(1)</strong>
<cite>deque.append(item)</cite> &amp; <cite>deque.appendleft(item)</cite>
<cite>deque.extend(iterable)</cite> &amp; <cite>deque.extendleft(iterable)</cite>
如果满员的话，可以从**反向端**删除过期的元素，在尾端添加新元素。</p>
<blockquote>
<div><p>!!! warning “<cite>deque.extendleft(lst)</cite> 将迭代器的元素逐个增加到队列上，最后呈现出来的是逆序。”</p>
</div></blockquote>
<aside class="system-message">
<p class="system-message-title">System Message: WARNING/2 (<span class="docutils literal">C:\Users\zxouyang\CodeProjects\PRIVATE_P\io\docs\source\python/python_elegant.rst</span>, line 1676)</p>
<p>Block quote ends without a blank line; unexpected unindent.</p>
</aside>
<ul class="simple">
<li><p>删除 <strong>O(1)</strong></p></li>
</ul>
<aside class="system-message">
<p class="system-message-title">System Message: WARNING/2 (<span class="docutils literal">C:\Users\zxouyang\CodeProjects\PRIVATE_P\io\docs\source\python/python_elegant.rst</span>, line 1677)</p>
<p>Bullet list ends without a blank line; unexpected unindent.</p>
</aside>
<p><cite>deque.pop()</cite> &amp; <cite>deque.popleft()</cite></p>
<p><a href="#id323"><span class="problematic" id="id324">``</span></a><a href="#id325"><span class="problematic" id="id326">`</span></a>python hl_lines=”3 7”
from collections import deque</p>
<aside class="system-message" id="id323">
<p class="system-message-title">System Message: WARNING/2 (<span class="docutils literal">C:\Users\zxouyang\CodeProjects\PRIVATE_P\io\docs\source\python/python_elegant.rst</span>, line 1679); <em><a href="#id324">backlink</a></em></p>
<p>Inline literal start-string without end-string.</p>
</aside>
<aside class="system-message" id="id325">
<p class="system-message-title">System Message: WARNING/2 (<span class="docutils literal">C:\Users\zxouyang\CodeProjects\PRIVATE_P\io\docs\source\python/python_elegant.rst</span>, line 1679); <em><a href="#id326">backlink</a></em></p>
<p>Inline interpreted text or phrase reference start-string without end-string.</p>
</aside>
<p>dq = deque([1,2,3], maxlen=5)
&gt;&gt;&gt; dq=deque([1, 2, 3], maxlen=5)
====================================================================
dq.extend(range(4,8))
&gt;&gt;&gt; dq=deque([3, 4, 5, 6, 7], maxlen=5)
================================================================================
dq.extendleft(range(1,3))
&gt;&gt;&gt; dq=deque([2, 1, 3, 4, 5], maxlen=5)
================================================================================
<a href="#id327"><span class="problematic" id="id328">``</span></a><a href="#id329"><span class="problematic" id="id330">`</span></a></p>
<aside class="system-message" id="id327">
<p class="system-message-title">System Message: WARNING/2 (<span class="docutils literal">C:\Users\zxouyang\CodeProjects\PRIVATE_P\io\docs\source\python/python_elegant.rst</span>, line 1682); <em><a href="#id328">backlink</a></em></p>
<p>Inline literal start-string without end-string.</p>
</aside>
<aside class="system-message" id="id329">
<p class="system-message-title">System Message: WARNING/2 (<span class="docutils literal">C:\Users\zxouyang\CodeProjects\PRIVATE_P\io\docs\source\python/python_elegant.rst</span>, line 1682); <em><a href="#id330">backlink</a></em></p>
<p>Inline interpreted text or phrase reference start-string without end-string.</p>
</aside>
<aside class="system-message">
<p class="system-message-title">System Message: SEVERE/4 (<span class="docutils literal">C:\Users\zxouyang\CodeProjects\PRIVATE_P\io\docs\source\python/python_elegant.rst</span>, line 1693)</p>
<p>Title level inconsistent:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="nb">bytes</span> <span class="n">字节</span>
<span class="o">^^^^^^^^^^^^^^^^^^</span>
</pre></div>
</div>
</aside>
<p><span class="defi">二进制序列</span> 其实是整数序列：各个元素是介于 0 ～ 255= <span class="math"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msup><mn>2</mn><mn>8</mn></msup><mo>−</mo><mn>1</mn></mrow><annotation encoding="application/x-tex">2^8-1</annotation></semantics></math></span><span aria-hidden="true" class="katex-html"><span class="base"><span class="strut" style="height:0.8974em;vertical-align:-0.0833em;"></span><span class="mord"><span class="mord">2</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.8141em;"><span style="top:-3.063em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">8</span></span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mbin">−</span><span class="mspace" style="margin-right:0.2222em;"></span></span><span class="base"><span class="strut" style="height:0.6444em;"></span><span class="mord">1</span></span></span></span></span>  之间的整数。</p>
<p><strong>为什么返回来的结果不一样？</strong>
虽然二进制序列是整数序列，但他们的字面量表示法表明其中有 ASCII 文本。所以各个字节的值可能会使用下列三种不同的文本表示：</p>
<ul class="simple">
<li><p>可打印的 ASCII 范围内的字节 ➡️  ASCII 字符本身</p></li>
<li><p>制表符、换行符、回车符、对应的字节 ➡️ 转义序列</p></li>
<li><p>其他字节的值 ➡️ 16进制转义序列</p></li>
</ul>
<p><code class="docutils literal notranslate"><span class="pre">`python</span> <span class="pre">hl_lines="3</span> <span class="pre">4"</span>
<span class="pre">b</span> <span class="pre">=</span> <span class="pre">bytes('A\t啊',</span> <span class="pre">encoding='utf8')</span>
<span class="pre">&gt;&gt;&gt;</span> <span class="pre">b=b'A\t\xe5\x95\x8a'</span>
<span class="pre">==================================================</span>
<span class="pre">#</span> <span class="pre">&gt;&gt;&gt;</span> <span class="pre">b[0]=65</span>    <span class="pre">b[1]=9</span>       <span class="pre">b[2]=229</span> <span class="pre">其实是整数</span>
<span class="pre">&gt;&gt;&gt;</span> <span class="pre">b[:1]=b'A'</span> <span class="pre">b[1:2]=b'\t'</span> <span class="pre">b[2:3]=</span> <span class="pre">b'\xe5'</span>
<span class="pre">========================================================================================</span>
<span class="pre">`</span></code></p>
<aside class="system-message">
<p class="system-message-title">System Message: SEVERE/4 (<span class="docutils literal">C:\Users\zxouyang\CodeProjects\PRIVATE_P\io\docs\source\python/python_elegant.rst</span>, line 1714)</p>
<p>Title level inconsistent:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>`str`
^^^^^^^^^^^^
</pre></div>
</div>
</aside>
<p><span class="defi">Sequence</span></p>
<p>!!! danger “<cite>s[i] = ‘n’</cite> 切片赋值 ❌  <span class="math"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mtext>  </mtext><mo>⟸</mo><mtext>  </mtext></mrow><annotation encoding="application/x-tex">\impliedby</annotation></semantics></math></span><span aria-hidden="true" class="katex-html"><span class="base"><span class="strut" style="height:0.549em;vertical-align:-0.024em;"></span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">⟸</span><span class="mspace" style="margin-right:0.2778em;"></span></span></span></span></span>  str 不可变”</p>
<p><strong>字符编码问题：</strong>
<cite>t</cite> 文本
<cite>b</cite> 二进制/bytes,非文本只能 byte 模式</p>
<dl class="simple">
<dt>!!! p “内存固定使用 &lt;kbd&gt;unicode&lt;/kbd&gt;, 我们改变的是从&lt;u&gt;内存存入硬盘的格式&lt;/u&gt;”</dt><dd><p>linux 默认 utf-8， windows 默认 gbk</p>
</dd>
<dt>!!! p “存储数据 - 大小写”</dt><dd><p>存储数据时，方法`lower()`很有用。很多时候，你无法依靠用户来提供正确的大小写，因此需要将字符串先转换为小写，再存储它们。以后需要显示这些信息时，再将其转换为最合适的大小写方式。</p>
</dd>
</dl>
<p>!!! danger “空白泛指任何非打印字符，如空格、制表符和换行符”</p>
<p><a href="#id699"><span class="problematic" id="id700">|cases|code|return=non-inplaced|</span></a>
<a href="#id701"><span class="problematic" id="id702">|--|</span></a>–<a href="#id703"><span class="problematic" id="id704">|--|</span></a>
<a href="#id705"><span class="problematic" id="id706">|大小写 | `str.upper()`,`str.lower()`, `str.capitalize()`，`str.title()`|✅ 结果|</span></a>
<a href="#id707"><span class="problematic" id="id708">|^|`str.swapcase()`|✅ 结果 大小写互换|</span></a>
<a href="#id709"><span class="problematic" id="id710">|去除前后字符串|`str.lstrip(sub_str)`, `str.rstrip(sub_str)`,`str.strip(sub_str)`|✅ 结果 默认是空白|</span></a>
<a href="#id711"><span class="problematic" id="id712">|字符串是否只由__组成|`str_.isalpha()`, 只由字母，==中文也是==|</span></a> ✅ bool|
<a href="#id713"><span class="problematic" id="id714">|^|`str_.isdigit()`,`str.isnumeric()`, `str.isdecimal()` 只由数字|^|</span></a>
<a href="#id715"><span class="problematic" id="id716">|^|`str_.isspace()`, 只由空格|^|</span></a>
<a href="#id717"><span class="problematic" id="id718">|^|`in string.punctuation` 标点|^|</span></a>
<a href="#id719"><span class="problematic" id="id720">|查找|`long_str.find(sub_str)` ➡️|✅  第一次出现的位置 or ==-1==.|</span></a>
<a href="#id721"><span class="problematic" id="id722">|^|`long_str.rfind(sub_str)`⬅️|^|</span></a>
<a href="#id723"><span class="problematic" id="id724">|^|`long_str.index(sub_str)`➡️|✅ 第一次出现的位置 or ==ValueError==|</span></a>
<a href="#id725"><span class="problematic" id="id726">|^|`long_str.rindex(sub_str)`⬅️|^|</span></a>
<a href="#id727"><span class="problematic" id="id728">|^|`str.count(sub, start= 0, end=len(str))`|✅  sub 在 str中出现的次数|</span></a>
<a href="#id729"><span class="problematic" id="id730">|执行|`eval(string)`执行一个字符串表达式|✅ 表达式的值|</span></a>
<a href="#id731"><span class="problematic" id="id732">|填充|</span></a> <cite>str.ljust(int, pad_str)</cite>,`str.rjust(int, pad_str)`, <cite>str.center(int, pad_str)`|✅ 结果 `pad_str=’ ‘`默认是空格|
|^|`str.zfill(int)`|✅ 结果 用0在前面的填充|
|修改|`s = s[:l] + s[l:][::-1]</cite> 重新赋值 <a href="#id733"><span class="problematic" id="id734">|✅ 结果|</span></a>
<a href="#id735"><span class="problematic" id="id736">|^|</span></a> <cite>string.replace(old, new)`所有都换一遍 | ✅ 结果|
|连接字符串| `s3 = s1 + s2</cite> <span class="defi">不推荐</span> | ✅ 结果|</p>
<p><code class="docutils literal notranslate"><span class="pre">`</span> <span class="pre">python</span>
<span class="pre">&gt;&gt;&gt;</span> <span class="pre">a</span> <span class="pre">=</span> <span class="pre">'string'</span>
<span class="pre">&gt;&gt;&gt;</span> <span class="pre">a.rjust(9)</span>
<span class="pre">'</span>   <span class="pre">string'</span>
<span class="pre">========================</span>
<span class="pre">&gt;&gt;&gt;</span> <span class="pre">a.center(9)</span>
<span class="pre">'</span>  <span class="pre">string</span> <span class="pre">'</span>
<span class="pre">========================</span>
<span class="pre">`</span></code></p>
<ul class="simple">
<li><p>识别数字</p></li>
</ul>
<aside class="system-message">
<p class="system-message-title">System Message: WARNING/2 (<span class="docutils literal">C:\Users\zxouyang\CodeProjects\PRIVATE_P\io\docs\source\python/python_elegant.rst</span>, line 1765)</p>
<p>Bullet list ends without a blank line; unexpected unindent.</p>
</aside>
<p>数字分：  ，</p>
<p><code class="docutils literal notranslate"><span class="pre">`python</span>
<span class="pre">num1,</span> <span class="pre">num2,</span> <span class="pre">num3,</span> <span class="pre">num4</span> <span class="pre">=</span> <span class="pre">b'4',</span> <span class="pre">u'4',</span> <span class="pre">'四'，</span> <span class="pre">'IV'</span>
<span class="pre">`</span></code></p>
<p>||bytes(二进制储存)|unicode(就是普通的数字)|中文数字|罗马数字|
<a href="#id737"><span class="problematic" id="id738">|--|</span></a>–<a href="#id739"><span class="problematic" id="id740">|--|</span></a>–<a href="#id741"><span class="problematic" id="id742">|--|</span></a>
<a href="#id743"><span class="problematic" id="id744">|`num=`|`b'4'`|`u'4'`
python3前面不带`u`就是|`'四'`|`'IV'`|</span></a>
<a href="#id745"><span class="problematic" id="id746">|`str.isdigit()`|✅|✅|❌|❌|</span></a>
<a href="#id747"><span class="problematic" id="id748">|`str.isnumeric()`|✅|✅|✅|✅|</span></a>
<a href="#id749"><span class="problematic" id="id750">|`str.isdecimal()`|❌|✅|❌|❌|</span></a></p>
<p>[Python中修改字符串的四种方法]</p>
<p>str match</p>
<ul class="simple">
<li><p><cite>str.startswith(sub_str)</cite></p></li>
<li><p><cite>str.endswith(sub_str)</cite></p></li>
</ul>
<p>str的 转换</p>
<p>list ↔️ str</p>
<ul class="simple">
<li><p><cite>str = ‘’.join(lst)</cite></p></li>
<li><dl class="simple">
<dt><cite>lst = str.split(‘:’)</cite></dt><dd><ul>
<li><p><cite>lst = str.split(‘:’, 1)</cite></p></li>
<li><p><cite>lst = str.rsplit(‘:’, 1)</cite></p></li>
</ul>
</dd>
</dl>
</li>
<li><p><cite>lst = list(str)</cite></p></li>
</ul>
<p><code class="docutils literal notranslate"><span class="pre">`python</span>
<span class="pre">a</span> <span class="pre">=</span> <span class="pre">'a:a:a:a'</span>
<span class="pre">list(a)</span>
<span class="pre">&gt;&gt;&gt;</span> <span class="pre">['a',</span> <span class="pre">':',</span> <span class="pre">'a',</span> <span class="pre">':',</span> <span class="pre">'a',</span> <span class="pre">':',</span> <span class="pre">'a']</span>
<span class="pre">================================================================================</span>
<span class="pre">a.split()</span>
<span class="pre">&gt;&gt;&gt;</span> <span class="pre">['a:a:a:a']</span>
<span class="pre">================================</span>
<span class="pre">a.split(':')</span>
<span class="pre">&gt;&gt;&gt;</span> <span class="pre">['a',</span> <span class="pre">'a',</span> <span class="pre">'a',</span> <span class="pre">'a']</span>
<span class="pre">==================================================</span>
<span class="pre">a.split(':',</span> <span class="pre">1)</span>
<span class="pre">&gt;&gt;&gt;</span> <span class="pre">['a',</span> <span class="pre">'a:a:a']</span>
<span class="pre">======================================</span>
<span class="pre">a.rsplit(':',</span> <span class="pre">1)</span>
<span class="pre">&gt;&gt;&gt;</span> <span class="pre">['a:a:a',</span> <span class="pre">'a']</span>
<span class="pre">======================================</span>
<span class="pre">`</span></code></p>
<aside class="system-message">
<p class="system-message-title">System Message: SEVERE/4 (<span class="docutils literal">C:\Users\zxouyang\CodeProjects\PRIVATE_P\io\docs\source\python/python_elegant.rst</span>, line 1815)</p>
<p>Title level inconsistent:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">散列表</span><span class="o">-</span><span class="n">support</span>
<span class="o">~~~~~~~~~~~~~~~~~~~~~~~~</span>
</pre></div>
</div>
</aside>
<p><span class="defi">查询性能出众</span> <span class="defi">无序</span> <span class="defi">键不稳定</span> <span class="defi">空间换时间</span>
是 dict &amp; set 性能出众的根本原因。虽然无序但是内容一样的话一样等价。</p>
<p>==可散列类型 hashable==。如果一个对象是可散列的，那么在这个对象**生命周期**中，它的散列值是不变的，而且这个对象需要实现 <cite>.__hash__()</cite> &amp; <cite>.__eq__()</cite> 。因为`hash()` 方法可以作用于对象上，并且如果两个可散列的对象是相等，那么散列值一定是一样。</p>
<ul>
<li><p>原子不可变类型( str &amp; bytes &amp; 数值)</p></li>
<li><p>frozenset（因为只能容纳可散列类型）</p></li>
<li><p>&lt;u&gt;包含的所有元素都是可散列的&lt;/u&gt; tuple</p></li>
<li><p>一般用户自定义的的类型的对象是可散列的。所有对象在比较的时候都是不相等，哪怕是内容一样。</p>
<blockquote>
<div><p>!!! question “散列值是 <cite>id()</cite>?”</p>
<p><a href="#id331"><span class="problematic" id="id332">``</span></a><a href="#id333"><span class="problematic" id="id334">`</span></a>python
class Fruit():</p>
<aside class="system-message" id="id331">
<p class="system-message-title">System Message: WARNING/2 (<span class="docutils literal">C:\Users\zxouyang\CodeProjects\PRIVATE_P\io\docs\source\python/python_elegant.rst</span>, line 1830); <em><a href="#id332">backlink</a></em></p>
<p>Inline literal start-string without end-string.</p>
</aside>
<aside class="system-message" id="id333">
<p class="system-message-title">System Message: WARNING/2 (<span class="docutils literal">C:\Users\zxouyang\CodeProjects\PRIVATE_P\io\docs\source\python/python_elegant.rst</span>, line 1830); <em><a href="#id334">backlink</a></em></p>
<p>Inline interpreted text or phrase reference start-string without end-string.</p>
</aside>
<aside class="system-message">
<p class="system-message-title">System Message: ERROR/3 (<span class="docutils literal">C:\Users\zxouyang\CodeProjects\PRIVATE_P\io\docs\source\python/python_elegant.rst</span>, line 1832)</p>
<p>Unexpected indentation.</p>
</aside>
<blockquote>
<div><dl class="simple">
<dt>def __init__(self, name):</dt><dd><p>self.name=name</p>
</dd>
</dl>
</div></blockquote>
<p>apple1, apple2 = Fruit(‘apple’), Fruit(‘apple’)
hash(apple1) == hash(apple2)
# &gt;&gt;&gt; False
<a href="#id335"><span class="problematic" id="id336">``</span></a><a href="#id337"><span class="problematic" id="id338">`</span></a></p>
<aside class="system-message" id="id335">
<p class="system-message-title">System Message: WARNING/2 (<span class="docutils literal">C:\Users\zxouyang\CodeProjects\PRIVATE_P\io\docs\source\python/python_elegant.rst</span>, line 1835); <em><a href="#id336">backlink</a></em></p>
<p>Inline literal start-string without end-string.</p>
</aside>
<aside class="system-message" id="id337">
<p class="system-message-title">System Message: WARNING/2 (<span class="docutils literal">C:\Users\zxouyang\CodeProjects\PRIVATE_P\io\docs\source\python/python_elegant.rst</span>, line 1835); <em><a href="#id338">backlink</a></em></p>
<p>Inline interpreted text or phrase reference start-string without end-string.</p>
</aside>
</div></blockquote>
</li>
</ul>
<dl>
<dt>!!! p “从 python3.3 开始，str &amp; byte &amp; datetime 的单列值计算多了 ==随机加盐:defi:<a href="#id339"><span class="problematic" id="id340">`</span></a>这一步。”</dt><dd><aside class="system-message" id="id339">
<p class="system-message-title">System Message: WARNING/2 (<span class="docutils literal">C:\Users\zxouyang\CodeProjects\PRIVATE_P\io\docs\source\python/python_elegant.rst</span>, line 1840); <em><a href="#id340">backlink</a></em></p>
<p>Inline interpreted text or phrase reference start-string without end-string.</p>
</aside>
<p>所加的盐值是 python 进程的一个常量，但是每次启动时 python.exe 都会生成一个不同的盐值。随机盐值是为了防止 DOS 攻击而采取的一种安全措施。</p>
</dd>
<dt>!!! danger “python 里所有不可变的类型都是 hashable ❌”</dt><dd><p>虽然 tuple 是不可变的，但是里面的元素可能是其他可变类型的引用。</p>
</dd>
</dl>
<p><strong>散列表的工作原理。</strong>
需要 <cite>hash()</cite> 来计算散列值，并且如果两个可散列的对象是相等，那么散列值一定是一样。
&gt; 1 ` 1.0  <span class="math"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mtext>  </mtext><mo>⟹</mo><mtext>  </mtext></mrow><annotation encoding="application/x-tex">\implies</annotation></semantics></math></span><span aria-hidden="true" class="katex-html"><span class="base"><span class="strut" style="height:0.549em;vertical-align:-0.024em;"></span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">⟹</span><span class="mspace" style="margin-right:0.2778em;"></span></span></span></span></span>  hash(1) == hash(1.0)
&gt; 哪怕是整型和浮点的内部结构完全不一样。</p>
<p>!!! danger “散列值一定是一样  <span class="math"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mo>⇏</mo></mrow><annotation encoding="application/x-tex">\nRightarrow</annotation></semantics></math></span><span aria-hidden="true" class="katex-html"><span class="base"><span class="strut" style="height:0.3669em;"></span><span class="mrel amsrm">⇏</span></span></span></span></span>  两个可散列的对象是相等”</p>
<p>为了让散列值能胜任散列表索引这一角色，散列值必须在索引空间尽量分散开。在最理想的情况下，越相似但不想等的两个对象的散列值差异应该越大。
==表元:defi:<cite>，散列表里的单元，所有的表元的大小一致，所以可以通过偏移量来读取某个单元。
为了查询 `search_item</cite> 是否存在在结构中：</p>
<ol class="arabic simple">
<li><p><cite>hash(search_item)</cite> 计算散列值</p></li>
<li><p>把散列值最低的几位数字当作偏移量，在散列表查找表元。</p></li>
<li><p>🟰 空，➡️ <cite>search_item</cite> 不在结构中。 🔚</p></li>
<li><p>🟰 非空，即表元存放了一个 <cite>found_item</cite>，但是散列值相同的不一定是一样的</p></li>
<li><p>比较 <cite>if search_item ` found_item</cite></p></li>
<li><p>🟰 <cite>True</cite> ，就对了。🔚</p></li>
</ol>
<aside class="system-message">
<p class="system-message-title">System Message: WARNING/2 (<span class="docutils literal">C:\Users\zxouyang\CodeProjects\PRIVATE_P\io\docs\source\python/python_elegant.rst</span>, line 1863)</p>
<p>Enumerated list ends without a blank line; unexpected unindent.</p>
</aside>
<p>7. 🟰 <cite>False</cite>，只能证明出现 &lt;u&gt;散列冲突&lt;/u&gt;。
为了解决散列冲突，算法在散列值中再另外去几位，然后用特殊的方法处理一下，得到新的散列值来在散列表查找表元，重复 2-7。
8. 直至发现 1️⃣ 表元为空 2️⃣ <cite>search_item == found_item</cite> 结束循环</p>
<p><strong>效率到底有多高？</strong>
&gt; &gt; 对 s2 里每个元素，查询是否存在 s1 里？ <cite>if s in s1</cite>
&gt;
&gt; 1）集合进行并操作，但前提是 s1 &amp; s2 都是集合
&gt; 2）s1 是 字典
&gt; 3）s1 是 集合
&gt; 4）s1 是 列表。
&gt; 在字典和集合不超出内存的前提下，无论 s1 里有多少元素，查询时间可忽略不计。
&gt; 因为列表没有散列表支持 <cite>__contains__</cite> 操作，每一次扫描都需要扫描一遍完整的列表，时间根据 s1 的大小呈**线性增加**
&gt; 虽然第一种最快，但是需要 s2 也是集合，涉及转成 set 的成本，不必强求。</p>
<p><strong>为什么元素是无序且不稳定？</strong>
键对的排列顺序与添加顺序不同，也与存储顺序不同。
<span class="defi">散列表</span> 是一个稀疏数组(<strong>总是**有空白元素)。**为了减少散列冲突的概率</strong>，python 会设法保证大概还有三分之一的表元是空白的，每快到这个阈值时，python 会重新分配内存，所有的散列表就会被复制到一个更大的空间里面。<strong>【空间换时间】</strong> 如果增加散列表的大小，散列值所占的位数和索引的位数都随之增加。
在扩容的过程中，有可能发生新的散列冲突，导致新散列表中元素的次序变化。所以是无序且不稳定。</p>
<dl class="simple">
<dt>!!! danger “不要在迭代的过程中 对 dict &amp; set 进行修改。有可能会跳过一些键。”</dt><dd><ol class="arabic simple">
<li><p>首先迭代，记录要修改的东西，再在迭代后进行更新。</p></li>
</ol>
</dd>
</dl>
<aside class="system-message">
<p class="system-message-title">System Message: SEVERE/4 (<span class="docutils literal">C:\Users\zxouyang\CodeProjects\PRIVATE_P\io\docs\source\python/python_elegant.rst</span>, line 1886)</p>
<p>Title level inconsistent:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="nb">dict</span>
<span class="o">^^^^^^^^^^</span>
</pre></div>
</div>
</aside>
<p>一系列键—值对。每个键都与一个值相关联，使用键来访问与之相关联的值。
内存开销巨大，不仅因为散列表耗费，还因为需要【重复的键】在每个记录里都要存一遍。
模块的命名空间、实例的属性、函数的关键字参数。跟它相关的内置函数在 <cite>__builtins__.__dict__</cite> 模块中</p>
<ul class="simple">
<li><p>init</p></li>
</ul>
<aside class="system-message">
<p class="system-message-title">System Message: WARNING/2 (<span class="docutils literal">C:\Users\zxouyang\CodeProjects\PRIVATE_P\io\docs\source\python/python_elegant.rst</span>, line 1894)</p>
<p>Bullet list ends without a blank line; unexpected unindent.</p>
</aside>
<p><cite>d = dict(one=1, two=2)</cite>
<cite>d = {‘one’:1, ‘two’:2}</cite>
<cite>d = dict(zip([‘one’, ‘two’],[1,2]))</cite> &amp; <cite>d = dict([(‘one’, 1),(‘two’, 2)])</cite>
<cite>d = {k: v for k, v in [(‘one’, 1),(‘two’, 2)]}</cite> 字典推导
- get. 只想查，并不想对字典更改。
<cite>d[k]</cite>, 没有就`KeyError`.
<cite>d.get(k, [default=None])</cite>, 没有就返回`default`， 纯粹 get</p>
<blockquote>
<div><blockquote>
<div><p>!!! warning “1. <cite>d.__getitem__(v)</cite> 的 call 是 <cite>d[k]</cite>； 和`d.get(..)` 一点关系都没有。</p>
</div></blockquote>
<aside class="system-message">
<p class="system-message-title">System Message: WARNING/2 (<span class="docutils literal">C:\Users\zxouyang\CodeProjects\PRIVATE_P\io\docs\source\python/python_elegant.rst</span>, line 1903)</p>
<p>Block quote ends without a blank line; unexpected unindent.</p>
</aside>
<ol class="arabic simple" start="2">
<li><p><cite>d.get(..)</cite> 不会改变原有的字典。”</p></li>
</ol>
</div></blockquote>
<aside class="system-message">
<p class="system-message-title">System Message: WARNING/2 (<span class="docutils literal">C:\Users\zxouyang\CodeProjects\PRIVATE_P\io\docs\source\python/python_elegant.rst</span>, line 1904)</p>
<p>Block quote ends without a blank line; unexpected unindent.</p>
</aside>
<ul class="simple">
<li><p>contains</p></li>
</ul>
<aside class="system-message">
<p class="system-message-title">System Message: WARNING/2 (<span class="docutils literal">C:\Users\zxouyang\CodeProjects\PRIVATE_P\io\docs\source\python/python_elegant.rst</span>, line 1905)</p>
<p>Bullet list ends without a blank line; unexpected unindent.</p>
</aside>
<p><cite>k in d.keys()</cite> &amp; <cite>k in d:</cite> &amp; <cite>v in d.values()</cite>
- loop
<cite>for k, v in d.items():</cite>
- 更新。</p>
<aside class="system-message">
<p class="system-message-title">System Message: ERROR/3 (<span class="docutils literal">C:\Users\zxouyang\CodeProjects\PRIVATE_P\io\docs\source\python/python_elegant.rst</span>, line 1909)</p>
<p>Unexpected indentation.</p>
</aside>
<blockquote>
<div><ul class="simple">
<li><p><cite>d[k]=v</cite> 只有赋值时管用。</p></li>
<li><p>更新的时候</p></li>
</ul>
<aside class="system-message">
<p class="system-message-title">System Message: WARNING/2 (<span class="docutils literal">C:\Users\zxouyang\CodeProjects\PRIVATE_P\io\docs\source\python/python_elegant.rst</span>, line 1911)</p>
<p>Bullet list ends without a blank line; unexpected unindent.</p>
</aside>
<p><cite>d.setdefault(k, default)</cite> 值的格式不统一
<cite>from collections import defaultdict</cite> 值的格式统一，都是 list | str | int</p>
</div></blockquote>
<dl>
<dt>!!! warning “为什么不用 get 的方法。【针对部分改变 v 值 情况】”</dt><dd><p>更新 1️⃣ 彻底改变 v 值(包括新增 k-v 对) 2️⃣ 部分改变 v 值（<cite>d[k]+=1</cite> &amp; <cite>d[v].append()</cite>）
对于 1️⃣：<cite>k[v]</cite> 是可以的，标准赋值语句，但是 2️⃣ 会引发 <cite>KeyError</cite> 直接报错，因为操作需要 k-v 存在。
如果用 <cite>.get()</cite> 的方法 就必须涉及二次查询，因为当不存在时，返回的 default 并没有跟 <cite>d[k]</cite> 绑定在一起，需要赋值语句进行绑定，其中涉及再次查询。</p>
<p><a href="#id341"><span class="problematic" id="id342">``</span></a><a href="#id343"><span class="problematic" id="id344">`</span></a>python hl_lines=”1 4 7”
v = d.get(k, [])  # 查一次
v.append(a)
d[k] = v  # 查两次
d.setdefault[k, []].append(a)  # 只查一次</p>
<aside class="system-message" id="id341">
<p class="system-message-title">System Message: WARNING/2 (<span class="docutils literal">C:\Users\zxouyang\CodeProjects\PRIVATE_P\io\docs\source\python/python_elegant.rst</span>, line 1919); <em><a href="#id342">backlink</a></em></p>
<p>Inline literal start-string without end-string.</p>
</aside>
<aside class="system-message" id="id343">
<p class="system-message-title">System Message: WARNING/2 (<span class="docutils literal">C:\Users\zxouyang\CodeProjects\PRIVATE_P\io\docs\source\python/python_elegant.rst</span>, line 1919); <em><a href="#id344">backlink</a></em></p>
<p>Inline interpreted text or phrase reference start-string without end-string.</p>
</aside>
<p>from collections import defaultdict
d  = defaultdict(list)  # list []
d[k].append(a)
<a href="#id345"><span class="problematic" id="id346">``</span></a><a href="#id347"><span class="problematic" id="id348">`</span></a></p>
<aside class="system-message" id="id345">
<p class="system-message-title">System Message: WARNING/2 (<span class="docutils literal">C:\Users\zxouyang\CodeProjects\PRIVATE_P\io\docs\source\python/python_elegant.rst</span>, line 1925); <em><a href="#id346">backlink</a></em></p>
<p>Inline literal start-string without end-string.</p>
</aside>
<aside class="system-message" id="id347">
<p class="system-message-title">System Message: WARNING/2 (<span class="docutils literal">C:\Users\zxouyang\CodeProjects\PRIVATE_P\io\docs\source\python/python_elegant.rst</span>, line 1925); <em><a href="#id348">backlink</a></em></p>
<p>Inline interpreted text or phrase reference start-string without end-string.</p>
</aside>
</dd>
<dt>!!! question “如非需要，<cite>defaultdict</cite> 比 <a href="#id349"><span class="problematic" id="id350">`</span></a>.setdefault()`更快”</dt><dd><aside class="system-message" id="id349">
<p class="system-message-title">System Message: WARNING/2 (<span class="docutils literal">C:\Users\zxouyang\CodeProjects\PRIVATE_P\io\docs\source\python/python_elegant.rst</span>, line 1930); <em><a href="#id350">backlink</a></em></p>
<p>Inline interpreted text or phrase reference start-string without end-string.</p>
</aside>
<p>因为一个是在创建初期就设好统一的初始值，一个是根据值的不一样，在找的时候设值
[setdefault vs defaultdict performance](<a class="reference external" href="https://stackoverflow.com/questions/38625608/setdefault-vs-defaultdict-performance">https://stackoverflow.com/questions/38625608/setdefault-vs-defaultdict-performance</a>)</p>
</dd>
</dl>
<aside class="system-message">
<p class="system-message-title">System Message: SEVERE/4 (<span class="docutils literal">C:\Users\zxouyang\CodeProjects\PRIVATE_P\io\docs\source\python/python_elegant.rst</span>, line 1934)</p>
<p>Title level inconsistent:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">defaultdict</span>
<span class="o">++++++++++++++++++++++++</span>
</pre></div>
</div>
</aside>
<p><cite>collections.defaultdict</cite> 当值的格式统一，都是 list | str | int。</p>
<p>具体而言，在实例化一个 defaultdict 对象时，给构造方法提供了一个**可调用对象(不是方法)**。当 <cite>.__getitem__</cite> 找不到键时，调用`.__missing__`, 然后 <cite>.__missing__</cite> 调用存放在 <cite>default_factory`属性的这个可调用对象，可调用对象产生默认值，让 `.__getitem__</cite> 返回。</p>
<dl>
<dt>!!! p “关键是实现了 <a href="#id351"><span class="problematic" id="id352">`</span></a>.__missing__`方法。”</dt><dd><aside class="system-message" id="id351">
<p class="system-message-title">System Message: WARNING/2 (<span class="docutils literal">C:\Users\zxouyang\CodeProjects\PRIVATE_P\io\docs\source\python/python_elegant.rst</span>, line 1941); <em><a href="#id352">backlink</a></em></p>
<p>Inline interpreted text or phrase reference start-string without end-string.</p>
</aside>
<p>为了自定义映射类型在找不到键时的反应，可以重定义`.__missing__`（见魔法方法那一节）。
基类 dict 没有定义，但是它知道，所以如果某个类继承了 dict，又是实现了 <cite>__missing__</cite> ，那么在 <cite>__getitem__</cite> 找不到键时，python 会自动调用它，而不是抛出  KeyError.</p>
</dd>
</dl>
<ul class="simple">
<li><dl class="simple">
<dt>init</dt><dd><p><cite>defaultdict([default_factory])</cite>
如果没有指定 default_factory， 找不到还是会产生 keyError</p>
</dd>
</dl>
</li>
</ul>
<p><code class="docutils literal notranslate"><span class="pre">`python</span>
<span class="pre">from</span> <span class="pre">collections</span> <span class="pre">import</span> <span class="pre">defaultdict</span>
<span class="pre">d</span> <span class="pre">=</span> <span class="pre">defaultdict(list)</span>
<span class="pre">&gt;&gt;&gt;</span> <span class="pre">defaultdict(&lt;class</span> <span class="pre">'list'&gt;,</span> <span class="pre">{})</span>
<span class="pre">========================================================================</span>
<span class="pre">d.default_factory</span>
<span class="pre">&gt;&gt;&gt;</span> <span class="pre">&lt;class</span> <span class="pre">'list'&gt;</span>
<span class="pre">======================================</span>
<span class="pre">`</span></code></p>
<p>&gt; <cite>d = defaultdict(list)</cite>，当 k 找不到的时候：
&gt; 1）调用 <cite>list()</cite> 建立一个新 list
&gt; 2）d[k] 存放 新 list 的引用
&gt; 3）返回 d[k]</p>
<aside class="system-message">
<p class="system-message-title">System Message: SEVERE/4 (<span class="docutils literal">C:\Users\zxouyang\CodeProjects\PRIVATE_P\io\docs\source\python/python_elegant.rst</span>, line 1964)</p>
<p>Title level inconsistent:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">OrderedDict</span>
<span class="o">++++++++++++++++++++++++</span>
</pre></div>
</div>
</aside>
<p><cite>collections.OrderedDict</cite>.</p>
<p>与 dict 的 区别 : 维护插入顺序的字典，区别只在于**记录了键—值对的添加顺序**
<cite>.popitem()</cite> 默认删除并返回的时字典里最后一个元素（最新添加的）</p>
<aside class="system-message">
<p class="system-message-title">System Message: SEVERE/4 (<span class="docutils literal">C:\Users\zxouyang\CodeProjects\PRIVATE_P\io\docs\source\python/python_elegant.rst</span>, line 1972)</p>
<p>Title level inconsistent:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">ChainMaps</span>
<span class="o">++++++++++++++++++++</span>
</pre></div>
</div>
</aside>
<aside class="system-message">
<p class="system-message-title">System Message: SEVERE/4 (<span class="docutils literal">C:\Users\zxouyang\CodeProjects\PRIVATE_P\io\docs\source\python/python_elegant.rst</span>, line 1975)</p>
<p>Title level inconsistent:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">Counter</span>
<span class="o">++++++++++++++++</span>
</pre></div>
</div>
</aside>
<p><cite>collections.Counter</cite> 整数计数器</p>
<p><a href="#id353"><span class="problematic" id="id354">``</span></a><a href="#id355"><span class="problematic" id="id356">`</span></a>python hl_lines=”3 5 7 9”
from collections import Counter</p>
<aside class="system-message" id="id353">
<p class="system-message-title">System Message: WARNING/2 (<span class="docutils literal">C:\Users\zxouyang\CodeProjects\PRIVATE_P\io\docs\source\python/python_elegant.rst</span>, line 1980); <em><a href="#id354">backlink</a></em></p>
<p>Inline literal start-string without end-string.</p>
</aside>
<aside class="system-message" id="id355">
<p class="system-message-title">System Message: WARNING/2 (<span class="docutils literal">C:\Users\zxouyang\CodeProjects\PRIVATE_P\io\docs\source\python/python_elegant.rst</span>, line 1980); <em><a href="#id356">backlink</a></em></p>
<p>Inline interpreted text or phrase reference start-string without end-string.</p>
</aside>
<p>ct = Counter(‘abbcbcbb’)
&gt;&gt;&gt; ct=Counter({‘b’: 5, ‘c’: 2, ‘a’: 1})
==================================================================================
ct.update(‘aaa’)
&gt;&gt;&gt; ct=Counter({‘b’: 5, ‘a’: 4, ‘c’: 2})
==================================================================================
ct.most_common(1)
&gt;&gt;&gt; [(‘b’, 5)]
==============================
sum(ct.values()) # 求总数
&gt;&gt;&gt; 11
==============
<a href="#id357"><span class="problematic" id="id358">``</span></a><a href="#id359"><span class="problematic" id="id360">`</span></a></p>
<aside class="system-message" id="id357">
<p class="system-message-title">System Message: WARNING/2 (<span class="docutils literal">C:\Users\zxouyang\CodeProjects\PRIVATE_P\io\docs\source\python/python_elegant.rst</span>, line 1983); <em><a href="#id358">backlink</a></em></p>
<p>Inline literal start-string without end-string.</p>
</aside>
<aside class="system-message" id="id359">
<p class="system-message-title">System Message: WARNING/2 (<span class="docutils literal">C:\Users\zxouyang\CodeProjects\PRIVATE_P\io\docs\source\python/python_elegant.rst</span>, line 1983); <em><a href="#id360">backlink</a></em></p>
<p>Inline interpreted text or phrase reference start-string without end-string.</p>
</aside>
<aside class="system-message">
<p class="system-message-title">System Message: SEVERE/4 (<span class="docutils literal">C:\Users\zxouyang\CodeProjects\PRIVATE_P\io\docs\source\python/python_elegant.rst</span>, line 1997)</p>
<p>Title level inconsistent:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">不可变的映射类型</span>
<span class="o">^^^^^^^^^^^^^^^^^^</span>
</pre></div>
</div>
</aside>
<p><cite>types.MappingProxyType</cite></p>
<p>提供一个映射的**只读的动态视图**。不能进行修改，但是如果原映射改了，作为的动态视图 MappingProxyType 也能看见。</p>
<p><code class="docutils literal notranslate"><span class="pre">`python</span> <span class="pre">hl_lines="3</span> <span class="pre">6</span> <span class="pre">7"</span>
<span class="pre">from</span> <span class="pre">types</span> <span class="pre">import</span> <span class="pre">MappingProxyType</span>
<span class="pre">d</span> <span class="pre">=</span> <span class="pre">{1:'A'}</span>  <span class="pre">#</span> <span class="pre">dict</span> <span class="pre">\in</span> <span class="pre">mapping</span>
<span class="pre">d_proxy</span> <span class="pre">=</span> <span class="pre">MappingProxyType(d)</span>
<span class="pre">&gt;&gt;&gt;</span> <span class="pre">d=d_proxy=mappingproxy({1:</span> <span class="pre">'A'})</span>
<span class="pre">==========================================================================</span>
<span class="pre">d_proxy[2]</span> <span class="pre">=</span> <span class="pre">'B'</span>
<span class="pre">!!!</span> <span class="pre">TypeError:</span> <span class="pre">'mappingproxy'</span> <span class="pre">object</span> <span class="pre">does</span> <span class="pre">not</span> <span class="pre">support</span> <span class="pre">item</span> <span class="pre">assignment</span>
<span class="pre">============================================================================================================================================</span>
<span class="pre">d[2]</span> <span class="pre">=</span> <span class="pre">'B'</span>
<span class="pre">&gt;&gt;&gt;</span> <span class="pre">d=d_proxy=mappingproxy({1:</span> <span class="pre">'A',</span> <span class="pre">2:</span> <span class="pre">'B'})</span>
<span class="pre">==========================================================================================</span>
<span class="pre">`</span></code></p>
<aside class="system-message">
<p class="system-message-title">System Message: SEVERE/4 (<span class="docutils literal">C:\Users\zxouyang\CodeProjects\PRIVATE_P\io\docs\source\python/python_elegant.rst</span>, line 2018)</p>
<p>Title level inconsistent:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="nb">set</span>
<span class="o">^^^^^^^^</span>
</pre></div>
</div>
</aside>
<p><span class="defi">Mutable</span> + ==去重==， <span class="defi">无序</span>
专为**检查元素是否存在**做过优化。
set 里的元素必须是 hashable，但 set 本身是 unhashable。如果set 底下是要放集合，必须放 <strong>frozenset</strong></p>
<p>!!! p “姊妹类型 frozenset ： <span class="defi">unmutable</span> + ==hashable==”</p>
<ul class="simple">
<li><p>init</p></li>
</ul>
<aside class="system-message">
<p class="system-message-title">System Message: WARNING/2 (<span class="docutils literal">C:\Users\zxouyang\CodeProjects\PRIVATE_P\io\docs\source\python/python_elegant.rst</span>, line 2028)</p>
<p>Bullet list ends without a blank line; unexpected unindent.</p>
</aside>
<p><cite>s = set()</cite> &lt;u&gt;空集合必须&lt;/u&gt;。
<cite>s = set(iterater)</cite>
<cite>s = {v for v in iterater}</cite> &amp; <cite>s = {v1, v2, …}</cite>
- element level
<cite>s.add(e)</cite>
<cite>s.discard(e)</cite> &lt;u&gt;不存在do nothing&lt;/u&gt;
<cite>s.remove(e)</cite> &lt;u&gt;不存在就报错&lt;/u&gt;
- 数学运算
同样存在 in-placed 的方法 <cite>&amp;=</cite> <cite>|=</cite> <cite>-=</cite> <cite>^=</cite>
<cite>s1 &amp; s2</cite> <span class="math"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>s</mi><mn>1</mn><mo>∩</mo><mi>s</mi><mn>2</mn></mrow><annotation encoding="application/x-tex">s1 \cap s2</annotation></semantics></math></span><span aria-hidden="true" class="katex-html"><span class="base"><span class="strut" style="height:0.6444em;"></span><span class="mord mathnormal">s</span><span class="mord">1</span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mbin">∩</span><span class="mspace" style="margin-right:0.2222em;"></span></span><span class="base"><span class="strut" style="height:0.6444em;"></span><span class="mord mathnormal">s</span><span class="mord">2</span></span></span></span></span>  交 <cite>.__and__</cite>
<cite>s1 | s2</cite> <span class="math"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>s</mi><mn>1</mn><mo>∪</mo><mi>s</mi><mn>2</mn></mrow><annotation encoding="application/x-tex">s1 \cup s2</annotation></semantics></math></span><span aria-hidden="true" class="katex-html"><span class="base"><span class="strut" style="height:0.6444em;"></span><span class="mord mathnormal">s</span><span class="mord">1</span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mbin">∪</span><span class="mspace" style="margin-right:0.2222em;"></span></span><span class="base"><span class="strut" style="height:0.6444em;"></span><span class="mord mathnormal">s</span><span class="mord">2</span></span></span></span></span>  并 <cite>.__or__</cite>
<cite>s1 - s2</cite> <span class="math"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>s</mi><mn>1</mn><mo>∖</mo><mi>s</mi><mn>2</mn></mrow><annotation encoding="application/x-tex">s1 \setminus s2</annotation></semantics></math></span><span aria-hidden="true" class="katex-html"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord mathnormal">s</span><span class="mord">1</span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mbin">∖</span><span class="mspace" style="margin-right:0.2222em;"></span></span><span class="base"><span class="strut" style="height:0.6444em;"></span><span class="mord mathnormal">s</span><span class="mord">2</span></span></span></span></span>  差 <cite>.__sub__</cite>
<cite>s1 ^ s2</cite> <span class="math"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mo stretchy="false">(</mo><mi>s</mi><mn>1</mn><mo>∪</mo><mi>s</mi><mn>2</mn><mo stretchy="false">)</mo><mo>−</mo><mo stretchy="false">(</mo><mi>s</mi><mn>1</mn><mo>∩</mo><mi>s</mi><mn>2</mn><mo stretchy="false">)</mo></mrow><annotation encoding="application/x-tex">(s1 \cup s2) - (s1 \cap s2)</annotation></semantics></math></span><span aria-hidden="true" class="katex-html"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mopen">(</span><span class="mord mathnormal">s</span><span class="mord">1</span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mbin">∪</span><span class="mspace" style="margin-right:0.2222em;"></span></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord mathnormal">s</span><span class="mord">2</span><span class="mclose">)</span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mbin">−</span><span class="mspace" style="margin-right:0.2222em;"></span></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mopen">(</span><span class="mord mathnormal">s</span><span class="mord">1</span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mbin">∩</span><span class="mspace" style="margin-right:0.2222em;"></span></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord mathnormal">s</span><span class="mord">2</span><span class="mclose">)</span></span></span></span></span>  对称差集 <cite>.__xor__</cite>
- 比较运算
重写了 <cite>__le__</cite> <cite>__lt__</cite> <cite>__ge__</cite> <cite>__gt__</cite>
<cite>s1 &lt; s2</cite> <span class="math"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>s</mi><mn>1</mn><mo>⊂</mo><mi>s</mi><mn>2</mn></mrow><annotation encoding="application/x-tex">s1 \subset s2</annotation></semantics></math></span><span aria-hidden="true" class="katex-html"><span class="base"><span class="strut" style="height:0.6835em;vertical-align:-0.0391em;"></span><span class="mord mathnormal">s</span><span class="mord">1</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">⊂</span><span class="mspace" style="margin-right:0.2778em;"></span></span><span class="base"><span class="strut" style="height:0.6444em;"></span><span class="mord mathnormal">s</span><span class="mord">2</span></span></span></span></span>
<cite>s.issuperset(it)</cite> 把可迭代 it 转换为 set，然后看 s 是否是它的子集
<cite>s1 &lt;= s2</cite> <span class="math"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>s</mi><mn>1</mn><mo>⊆</mo><mi>s</mi><mn>2</mn></mrow><annotation encoding="application/x-tex">s1 \subseteq s2</annotation></semantics></math></span><span aria-hidden="true" class="katex-html"><span class="base"><span class="strut" style="height:0.7804em;vertical-align:-0.136em;"></span><span class="mord mathnormal">s</span><span class="mord">1</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">⊆</span><span class="mspace" style="margin-right:0.2778em;"></span></span><span class="base"><span class="strut" style="height:0.6444em;"></span><span class="mord mathnormal">s</span><span class="mord">2</span></span></span></span></span></p>
<aside class="system-message">
<p class="system-message-title">System Message: SEVERE/4 (<span class="docutils literal">C:\Users\zxouyang\CodeProjects\PRIVATE_P\io\docs\source\python/python_elegant.rst</span>, line 2047)</p>
<p>Title level inconsistent:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">sparse_matrix</span>
<span class="o">~~~~~~~~~~~~~~~~~~~~~~~~~~~~</span>
</pre></div>
</div>
</aside>
<aside class="system-message">
<p class="system-message-title">System Message: SEVERE/4 (<span class="docutils literal">C:\Users\zxouyang\CodeProjects\PRIVATE_P\io\docs\source\python/python_elegant.rst</span>, line 2050)</p>
<p>Title level inconsistent:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>`scipy.sparse.coo_matrix`
^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
</pre></div>
</div>
</aside>
<p><strong>只存储非零元素</strong>
三元组`(row, col, data)`(或称为**ijv format**)的形式来存储矩阵中非零元素的信息。</p>
<ul class="simple">
<li><dl class="simple">
<dt>实际</dt><dd><ul>
<li><p>用来创建矩阵，因为`coo_matrix`**无法**对矩阵的元素进行增删改操作</p></li>
<li><p>转置、矩阵运算等，要转 <cite>csr_matrix</cite>、<cite>csc_matrix</cite></p></li>
</ul>
</dd>
</dl>
</li>
<li><p>实例</p></li>
<li><p>转化</p></li>
</ul>
<p>[Python稀疏矩阵详解]</p>
<aside class="system-message">
<p class="system-message-title">System Message: SEVERE/4 (<span class="docutils literal">C:\Users\zxouyang\CodeProjects\PRIVATE_P\io\docs\source\python/python_elegant.rst</span>, line 2064)</p>
<p>Title level inconsistent:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">堆</span>
<span class="o">~~~~</span>
</pre></div>
</div>
</aside>
<dl class="simple">
<dt>!!! p “最小的元素总是在根结点：<cite>heap[0] is smallest</cite>”</dt><dd><dl class="simple">
<dt>堆是一个二叉树，它的每个父节点的值都只会小于或等于所有孩子节点</dt><dd><p><cite>parent &lt;= childs</cite>。</p>
</dd>
</dl>
</dd>
</dl>
<ul class="simple">
<li><p>一棵完全二叉树的数组对象 = 它使用了数组来实现：</p></li>
<li><p>【最小堆】从零开始计数，对于所有的 k ，都有 <cite>heap[k] &lt;= heap[2*k+1]</cite> 和 <cite>heap[k] &lt;= heap[2*k+2]</cite>。 为了便于比较，不存在的元素被认为是无限大。</p></li>
</ul>
<aside class="system-message">
<p class="system-message-title">System Message: SEVERE/4 (<span class="docutils literal">C:\Users\zxouyang\CodeProjects\PRIVATE_P\io\docs\source\python/python_elegant.rst</span>, line 2075)</p>
<p>Title level inconsistent:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>`heapq.py` 堆队列 = 优先队列算法
^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
</pre></div>
</div>
</aside>
<p><strong>Heap queue algorithm (a.k.a. priority queue):</strong></p>
<dl class="simple">
<dt>!!! p “最小堆”</dt><dd><p><cite>heapq[0] is smallest</cite></p>
</dd>
</dl>
<ul class="simple">
<li><dl class="simple">
<dt>properties</dt><dd><ul>
<li><p><strong>排序稳定性</strong>：具有相同的优先级的话就会按他们被插入到队列的顺序返回 ——&gt; 条目计数可用来打破平局</p></li>
<li><p><strong>堆</strong> pop 操作总是返回优先级最高</p></li>
</ul>
</dd>
</dl>
</li>
<li><dl class="simple">
<dt>ref</dt><dd><ul>
<li><p>[heapq –堆队列算法]</p></li>
</ul>
</dd>
</dl>
</li>
</ul>
<aside class="system-message">
<p class="system-message-title">System Message: SEVERE/4 (<span class="docutils literal">C:\Users\zxouyang\CodeProjects\PRIVATE_P\io\docs\source\python/python_elegant.rst</span>, line 2089)</p>
<p>Title level inconsistent:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">code</span>
<span class="o">++++++++++</span>
</pre></div>
</div>
</aside>
<p><cite>heap.sort()</cite> 维护了堆的不变性</p>
<dl>
<dt>!!! danger “heapq 不是一个类而是一个模块”</dt><dd><p><a href="#id361"><span class="problematic" id="id362">``</span></a>` python
import heapq</p>
<aside class="system-message" id="id361">
<p class="system-message-title">System Message: WARNING/2 (<span class="docutils literal">C:\Users\zxouyang\CodeProjects\PRIVATE_P\io\docs\source\python/python_elegant.rst</span>, line 2095); <em><a href="#id362">backlink</a></em></p>
<p>Inline literal start-string without end-string.</p>
</aside>
<dl class="simple">
<dt>Meth:</dt><dd><ul class="simple">
<li><p>heapify(h)</p></li>
</ul>
</dd>
</dl>
<aside class="system-message">
<p class="system-message-title">System Message: WARNING/2 (<span class="docutils literal">C:\Users\zxouyang\CodeProjects\PRIVATE_P\io\docs\source\python/python_elegant.rst</span>, line 2100)</p>
<p>Definition list ends without a blank line; unexpected unindent.</p>
</aside>
<p><a href="#id363"><span class="problematic" id="id364">``</span></a><a href="#id365"><span class="problematic" id="id366">`</span></a></p>
<aside class="system-message" id="id363">
<p class="system-message-title">System Message: WARNING/2 (<span class="docutils literal">C:\Users\zxouyang\CodeProjects\PRIVATE_P\io\docs\source\python/python_elegant.rst</span>, line 2100); <em><a href="#id364">backlink</a></em></p>
<p>Inline literal start-string without end-string.</p>
</aside>
<aside class="system-message" id="id365">
<p class="system-message-title">System Message: WARNING/2 (<span class="docutils literal">C:\Users\zxouyang\CodeProjects\PRIVATE_P\io\docs\source\python/python_elegant.rst</span>, line 2100); <em><a href="#id366">backlink</a></em></p>
<p>Inline interpreted text or phrase reference start-string without end-string.</p>
</aside>
</dd>
</dl>
<p><a href="#id751"><span class="problematic" id="id752">|operations|code|return|T(n)|</span></a>
<a href="#id753"><span class="problematic" id="id754">|--|</span></a>–<a href="#id755"><span class="problematic" id="id756">|--|</span></a>–|
<a href="#id757"><span class="problematic" id="id758">|建立空堆|`h = []` |||</span></a>
<a href="#id759"><span class="problematic" id="id760">|list ➡️ heap|`heapify(h)`|❌ **in-placed** | O(n)|</span></a>
<a href="#id761"><span class="problematic" id="id762">|加入弹出|`heapq.heappush(h, x)`|❌|</span></a> <a href="#id367"><span class="problematic" id="id368">**</span></a>O(logn)**|
<a href="#id763"><span class="problematic" id="id764">|^|`heapq.heappop(h)`|</span></a> ✅ 最小`h[0]`, 空就有`IndexError`| O(logn)|
<a href="#id765"><span class="problematic" id="id766">|^|`heapq.heappushpop(h, x)`
&lt;=&gt; `push+pop`, 先加x再弹出|✅  &lt;= x(因为先加x)|比连调两个单纯函数要快|</span></a>
<a href="#id767"><span class="problematic" id="id768">|^|`heapq.heapreplace(h, x)`
&lt;=&gt; `pop+push`, |✅  :question: x(因为后加x), 空就有`IndexError`|^|</span></a></p>
<aside class="system-message" id="id367">
<p class="system-message-title">System Message: WARNING/2 (<span class="docutils literal">C:\Users\zxouyang\CodeProjects\PRIVATE_P\io\docs\source\python/python_elegant.rst</span>, line 2102); <em><a href="#id368">backlink</a></em></p>
<p>Inline strong start-string without end-string.</p>
</aside>
<section id="basic-operaions">
<h2 id="basic-operaions">Basic operaions<a class="headerlink" href="#basic-operaions" title="Link to this heading">¶</a></h2>
<section id="n">
<h3 id="n">查找最大或最小的 N 个元素<a class="headerlink" href="#n" title="Link to this heading">¶</a></h3>
<p><a href="#id769"><span class="problematic" id="id770">|简单对象||</span></a>
<a href="#id771"><span class="problematic" id="id772">|--|</span></a>–|
<a href="#id773"><span class="problematic" id="id774">|全部排序或查找Top N&lt;len(lst) 个 |`sorted(lst, *, key=None, reverse=False)`, `sorted(lst)[:N]`|</span></a>
<a href="#id775"><span class="problematic" id="id776">|查找Top N&lt;&lt;len(lst) 个|</span></a> <cite>heapq.nlargest()</cite>, <cite>heapq.smallest()`|
|最大/最小|`max(lst)</cite> <a href="#id369"><span class="problematic" id="id370">`</span></a>min(lst)`|</p>
<aside class="system-message" id="id369">
<p class="system-message-title">System Message: WARNING/2 (<span class="docutils literal">C:\Users\zxouyang\CodeProjects\PRIVATE_P\io\docs\source\python/python_elegant.rst</span>, line 2119); <em><a href="#id370">backlink</a></em></p>
<p>Inline interpreted text or phrase reference start-string without end-string.</p>
</aside>
<section id="id371">
<h4 id="id371">复杂对象<a class="headerlink" href="#id371" title="Link to this heading">¶</a></h4>
<ul>
<li><p>comparable : <cite>key=lambda</cite> or <cite>key= itemgetter()</cite></p></li>
<li><dl>
<dt>uncmparable<span class="classifier"><cite>key=lambda</cite> or <cite>key= attrgetter()</cite></span></dt><dd><p>选择使用 <cite>lambda</cite> 函数或者是 <cite>attrgetter()</cite> 可能取决于个人喜好。 但是， <cite>attrgetter()</cite> 函数通常会运行的快点，并且还能同时允许多个字段进行比较。同样适用于像 <cite>min()</cite> 和 <cite>max()</cite> 之类的函数</p>
</dd>
</dl>
</li>
</ul>
<p>[python之排序操作及heapq模块]</p>
</section>
<section id="id372">
<h4 id="id372">其他常用<a class="headerlink" href="#id372" title="Link to this heading">¶</a></h4>
<p><cite>random.choice(seq)</cite> 从一个序列中随机选出一个元素</p>
<ul class="simple">
<li><p><cite>math</cite></p></li>
</ul>
<aside class="system-message">
<p class="system-message-title">System Message: WARNING/2 (<span class="docutils literal">C:\Users\zxouyang\CodeProjects\PRIVATE_P\io\docs\source\python/python_elegant.rst</span>, line 2140)</p>
<p>Bullet list ends without a blank line; unexpected unindent.</p>
</aside>
<p><cite>.sqrt(n)</cite> <span class="math"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mo>=</mo><msqrt><mi>n</mi></msqrt></mrow><annotation encoding="application/x-tex">=\sqrt{n}</annotation></semantics></math></span><span aria-hidden="true" class="katex-html"><span class="base"><span class="strut" style="height:0.3669em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2778em;"></span></span><span class="base"><span class="strut" style="height:1.04em;vertical-align:-0.2397em;"></span><span class="mord sqrt"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.8003em;"><span class="svg-align" style="top:-3em;"><span class="pstrut" style="height:3em;"></span><span class="mord" style="padding-left:0.833em;"><span class="mord mathnormal">n</span></span></span><span style="top:-2.7603em;"><span class="pstrut" style="height:3em;"></span><span class="hide-tail" style="min-width:0.853em;height:1.08em;"><svg height="1.08em" preserveaspectratio="xMinYMin slice" viewbox="0 0 400000 1080" width="400em" xmlns="http://www.w3.org/2000/svg"><path d="M95,702
c-2.7,0,-7.17,-2.7,-13.5,-8c-5.8,-5.3,-9.5,-10,-9.5,-14
c0,-2,0.3,-3.3,1,-4c1.3,-2.7,23.83,-20.7,67.5,-54
c44.2,-33.3,65.8,-50.3,66.5,-51c1.3,-1.3,3,-2,5,-2c4.7,0,8.7,3.3,12,10
s173,378,173,378c0.7,0,35.3,-71,104,-213c68.7,-142,137.5,-285,206.5,-429
c69,-144,104.5,-217.7,106.5,-221
l0 -0
c5.3,-9.3,12,-14,20,-14
H400000v40H845.2724
s-225.272,467,-225.272,467s-235,486,-235,486c-2.7,4.7,-9,7,-19,7
c-6,0,-10,-1,-12,-3s-194,-422,-194,-422s-65,47,-65,47z
M834 80h400000v40h-400000z"></path></svg></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.2397em;"><span></span></span></span></span></span></span></span></span></span> <cite>.pow(n, a)</cite> <span class="math"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mo>=</mo><msup><mi>n</mi><mi>a</mi></msup></mrow><annotation encoding="application/x-tex">=n^a</annotation></semantics></math></span><span aria-hidden="true" class="katex-html"><span class="base"><span class="strut" style="height:0.3669em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2778em;"></span></span><span class="base"><span class="strut" style="height:0.6644em;"></span><span class="mord"><span class="mord mathnormal">n</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.6644em;"><span style="top:-3.063em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight">a</span></span></span></span></span></span></span></span></span></span></span></span> <cite>.exp(n)</cite> <span class="math"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mo>=</mo><msup><mi>e</mi><mi>n</mi></msup></mrow><annotation encoding="application/x-tex">=e^n</annotation></semantics></math></span><span aria-hidden="true" class="katex-html"><span class="base"><span class="strut" style="height:0.3669em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2778em;"></span></span><span class="base"><span class="strut" style="height:0.6644em;"></span><span class="mord"><span class="mord mathnormal">e</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.6644em;"><span style="top:-3.063em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight">n</span></span></span></span></span></span></span></span></span></span></span></span> <cite>.log(n, a)</cite> <span class="math"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mo>=</mo><msubsup><mrow><mi>log</mi><mo>⁡</mo></mrow><mn>2</mn><mi>n</mi></msubsup></mrow><annotation encoding="application/x-tex">=\log_2^n</annotation></semantics></math></span><span aria-hidden="true" class="katex-html"><span class="base"><span class="strut" style="height:0.3669em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2778em;"></span></span><span class="base"><span class="strut" style="height:0.9957em;vertical-align:-0.247em;"></span><span class="mop"><span class="mop">lo<span style="margin-right:0.01389em;">g</span></span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.7487em;"><span style="top:-2.453em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">2</span></span></span><span style="top:-3.1473em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight">n</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.247em;"><span></span></span></span></span></span></span></span></span></span></span>
<cite>.fabs(n)</cite> <span class="math"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mtext>float</mtext><mo stretchy="false">(</mo><mi mathvariant="normal">∣</mi><mi>n</mi><mi mathvariant="normal">∣</mi><mo stretchy="false">)</mo></mrow><annotation encoding="application/x-tex">\text{float}(|n|)</annotation></semantics></math></span><span aria-hidden="true" class="katex-html"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord text"><span class="mord">float</span></span><span class="mopen">(</span><span class="mord">∣</span><span class="mord mathnormal">n</span><span class="mord">∣</span><span class="mclose">)</span></span></span></span></span> <cite>abs(n)</cite> <span class="math"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mo>=</mo><mi mathvariant="normal">∣</mi><mi>n</mi><mi mathvariant="normal">∣</mi></mrow><annotation encoding="application/x-tex">=|n|</annotation></semantics></math></span><span aria-hidden="true" class="katex-html"><span class="base"><span class="strut" style="height:0.3669em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2778em;"></span></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord">∣</span><span class="mord mathnormal">n</span><span class="mord">∣</span></span></span></span></span>
<cite>.factorial(n)</cite> <span class="math"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mo>=</mo><mi>n</mi><mo stretchy="false">!</mo></mrow><annotation encoding="application/x-tex">=n!</annotation></semantics></math></span><span aria-hidden="true" class="katex-html"><span class="base"><span class="strut" style="height:0.3669em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2778em;"></span></span><span class="base"><span class="strut" style="height:0.6944em;"></span><span class="mord mathnormal">n</span><span class="mclose">!</span></span></span></span></span></p>
<blockquote>
<div><p>||`.ceil(f)`  <span class="math"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mo>=</mo><mo>≥</mo><mi>f</mi></mrow><annotation encoding="application/x-tex">=\ge f</annotation></semantics></math></span><span aria-hidden="true" class="katex-html"><span class="base"><span class="strut" style="height:0.7719em;vertical-align:-0.136em;"></span><span class="mrel">=≥</span><span class="mspace" style="margin-right:0.2778em;"></span></span><span class="base"><span class="strut" style="height:0.8889em;vertical-align:-0.1944em;"></span><span class="mord mathnormal" style="margin-right:0.10764em;">f</span></span></span></span></span> <a href="#id777"><span class="problematic" id="id778">|`.floor(f)`  :math:`=\le f` |`.trunc(f)` 只要整数部分|</span></a>
<a href="#id779"><span class="problematic" id="id780">|--|</span></a>–<a href="#id781"><span class="problematic" id="id782">|--|</span></a>–|
<a href="#id783"><span class="problematic" id="id784">|3.3|4|3|3|</span></a>
<a href="#id785"><span class="problematic" id="id786">|-2.3|</span></a>-2|-3|-2|</p>
</div></blockquote>
<section id="id373">
<h5 id="id373">并行迭代对象<a class="headerlink" href="#id373" title="Link to this heading">¶</a></h5>
<p><cite>zip(IterableA, IterableB, …)</cite> 并行多个迭代对象返回生成器，生成元组。但会在**最短**的可迭代对象耗尽时停止,但不给提示。
<cite>itertools.zip_longest(IterableA, IterableB, …, fillvalue=None)</cite> 用 fillvalue 填充缺失的值，直到**最长**的可迭代对象耗尽。</p>
<p><a href="#id374"><span class="problematic" id="id375">``</span></a><a href="#id376"><span class="problematic" id="id377">`</span></a>python
import itertools
z1 = zip(range(1,4), ‘ABC’, ‘ab’)
&gt;&gt;&gt; z1=&lt;zip object at 0x10288bf40&gt;
======================================================================
list(z1)
停止不给提示
————–</p>
<aside class="system-message" id="id374">
<p class="system-message-title">System Message: WARNING/2 (<span class="docutils literal">C:\Users\zxouyang\CodeProjects\PRIVATE_P\io\docs\source\python/python_elegant.rst</span>, line 2155); <em><a href="#id375">backlink</a></em></p>
<p>Inline literal start-string without end-string.</p>
</aside>
<aside class="system-message" id="id376">
<p class="system-message-title">System Message: WARNING/2 (<span class="docutils literal">C:\Users\zxouyang\CodeProjects\PRIVATE_P\io\docs\source\python/python_elegant.rst</span>, line 2155); <em><a href="#id377">backlink</a></em></p>
<p>Inline interpreted text or phrase reference start-string without end-string.</p>
</aside>
<p>z2 = itertools.zip_longest(range(1,4), ‘ABC’, ‘ab’, fillvalue=’?’)
&gt;&gt;&gt; z2=itertools.zip_longest(range(1,4), ‘ABC’, ‘ab’, fillvalue=’?’)
==========================================================================================================================================
list(z2)
填充
——
<a href="#id378"><span class="problematic" id="id379">``</span></a><a href="#id380"><span class="problematic" id="id381">`</span></a></p>
<aside class="system-message" id="id378">
<p class="system-message-title">System Message: WARNING/2 (<span class="docutils literal">C:\Users\zxouyang\CodeProjects\PRIVATE_P\io\docs\source\python/python_elegant.rst</span>, line 2164); <em><a href="#id379">backlink</a></em></p>
<p>Inline literal start-string without end-string.</p>
</aside>
<aside class="system-message" id="id380">
<p class="system-message-title">System Message: WARNING/2 (<span class="docutils literal">C:\Users\zxouyang\CodeProjects\PRIVATE_P\io\docs\source\python/python_elegant.rst</span>, line 2164); <em><a href="#id381">backlink</a></em></p>
<p>Inline interpreted text or phrase reference start-string without end-string.</p>
</aside>
</section>
</section>
</section>
</section>
<section id="id382">
<h2 id="id382">基本操作<a class="headerlink" href="#id382" title="Link to this heading">¶</a></h2>
<section id="id383">
<h3 id="id383">运算符<a class="headerlink" href="#id383" title="Link to this heading">¶</a></h3>
<p>!!! p “中缀运算符的基本原则是返回来一个新的值，而不改变操作对象本身。”</p>
<p><a href="#id787"><span class="problematic" id="id788">|❗算术运算符|a/b|a//b|a%b|a**b|</span></a>
<a href="#id789"><span class="problematic" id="id790">|--|</span></a>–<a href="#id791"><span class="problematic" id="id792">|--|</span></a>–<a href="#id793"><span class="problematic" id="id794">|--|</span></a>
<a href="#id795"><span class="problematic" id="id796">|a=3,b=2|整数+小数|只要整数|余数|幂|</span></a>
<a href="#id797"><span class="problematic" id="id798">|^|1.5|1|1|9|</span></a></p>
<dl>
<dt>!!! warning “逻辑运算符 not 》 and 》  or  的优先级”</dt><dd><p><span class="defi">最好用括号括起来</span>
1. 先算 <cite>not</cite>
2. 如果全 <cite>and</cite> 或 全 <cite>or</cite>,从左到右
3. 先括 <cite>and</cite></p>
<p><code class="docutils literal notranslate"><span class="pre">`python</span>
<span class="pre">0</span> <span class="pre">or</span> <span class="pre">False</span> <span class="pre">and</span> <span class="pre">1</span>
<span class="pre">#</span> <span class="pre">&gt;&gt;&gt;</span> <span class="pre">False</span>
<span class="pre">#</span> <span class="pre">0</span> <span class="pre">or</span> <span class="pre">(False</span> <span class="pre">and</span> <span class="pre">1)</span>
<span class="pre">3&gt;4</span> <span class="pre">and</span> <span class="pre">4&gt;3</span> <span class="pre">or</span> <span class="pre">1==3</span> <span class="pre">and</span> <span class="pre">'x'=='x'</span> <span class="pre">or</span> <span class="pre">3&gt;3</span>
<span class="pre">#</span> <span class="pre">&gt;&gt;&gt;</span> <span class="pre">False</span>
<span class="pre">#</span> <span class="pre">(3&gt;4</span> <span class="pre">and</span> <span class="pre">4&gt;3)</span> <span class="pre">or</span> <span class="pre">(1==3</span> <span class="pre">and</span> <span class="pre">'x'=='x')</span> <span class="pre">or</span> <span class="pre">3&gt;3</span>
<span class="pre">`</span></code></p>
</dd>
</dl>
</section>
<section id="iterator">
<h3 id="iterator">iterator 迭代器<a class="headerlink" href="#iterator" title="Link to this heading">¶</a></h3>
<p>它是访问容器（例如列表、元组等）中的元素的一种方式，可以**逐个访问容器中的元素，而不必将整个容器存储在内存中**。</p>
<ul class="simple">
<li><dl class="simple">
<dt>properties</dt><dd><ul>
<li><p>惰性计算, lazy evaluation,
惰性计算指的是在需要时才进行计算，而非提前将所有的计算都执行完毕。对于大型数据集合，惰性计算可以节省内存开销并提高程序性能</p></li>
<li><p>可逆性, reversibility
可以通过**反向迭代器（reverse iterator）** 来逆序访问容器中的元素。Python标准库中提供了`reversed()`函数用于创建反向迭代器。</p></li>
</ul>
</dd>
</dl>
</li>
</ul>
<p>||只有data|一个列表|notes|
<a href="#id799"><span class="problematic" id="id800">|--|</span></a>–<a href="#id801"><span class="problematic" id="id802">|--|</span></a>–|
<a href="#id803"><span class="problematic" id="id804">|`iter()`|</span></a> ✅|✅||
<a href="#id805"><span class="problematic" id="id806">|`enumerate(sequence, [start=0])`|</span></a> ❌ auto_index + data|✅||
<a href="#id807"><span class="problematic" id="id808">|`zip(strict)`|✅|❌ 多个|</span></a> 3.10版本设`strict=True`为严格遵守大小相等|</p>
<p><a href="#id384"><span class="problematic" id="id385">``</span></a>` python
names = [‘Alice’, ‘Bob’, ‘Charlie’]
ages = [24, 50, 18]
sexs = [‘M’,’F’, ‘M’]</p>
<aside class="system-message" id="id384">
<p class="system-message-title">System Message: WARNING/2 (<span class="docutils literal">C:\Users\zxouyang\CodeProjects\PRIVATE_P\io\docs\source\python/python_elegant.rst</span>, line 2217); <em><a href="#id385">backlink</a></em></p>
<p>Inline literal start-string without end-string.</p>
</aside>
</section>
</section>
</section>
<section id="iter-data">
<h1 id="iter-data">1. iter -&gt; data<a class="headerlink" href="#iter-data" title="Link to this heading">¶</a></h1>
<dl class="simple">
<dt>for name in iter(names):</dt><dd><p>print(“{}”.format(name))</p>
</dd>
</dl>
</section>
<section id="enumerate-index-data">
<h1 id="enumerate-index-data">2. enumerate -&gt; (index, data)<a class="headerlink" href="#enumerate-index-data" title="Link to this heading">¶</a></h1>
<dl class="simple">
<dt>for index, name in enumerate(names):</dt><dd><p>print(‘NO.{} is {}’.format(index, name))</p>
</dd>
</dl>
</section>
<section id="zip">
<h1 id="zip">3. zip -&gt;<a class="headerlink" href="#zip" title="Link to this heading">¶</a></h1>
<dl class="simple">
<dt>for (name, age, sex) in zip(names, ages, sexs):</dt><dd><p>print(‘{} - {} - {}’.format(name, age, sex))</p>
</dd>
</dl>
</section>
<section id="enumerate-zip">
<h1 id="enumerate-zip">4. enumerate + zip<a class="headerlink" href="#enumerate-zip" title="Link to this heading">¶</a></h1>
<dl class="simple">
<dt>for index, (name, age, sex) in enumerate(zip(names, ages, sexs)):</dt><dd><dl class="simple">
<dt>print(‘NO.{} is {} - {} - {}’.format(index, name, age, sex))</dt><dd><p># 0 Alice 24 M
# 1 Bob 50 F
# 2 Charlie 18 M</p>
</dd>
</dl>
</dd>
</dl>
<aside class="system-message">
<p class="system-message-title">System Message: WARNING/2 (<span class="docutils literal">C:\Users\zxouyang\CodeProjects\PRIVATE_P\io\docs\source\python/python_elegant.rst</span>, line 2245)</p>
<p>Definition list ends without a blank line; unexpected unindent.</p>
</aside>
<p><a href="#id386"><span class="problematic" id="id387">``</span></a><a href="#id388"><span class="problematic" id="id389">`</span></a></p>
<aside class="system-message" id="id386">
<p class="system-message-title">System Message: WARNING/2 (<span class="docutils literal">C:\Users\zxouyang\CodeProjects\PRIVATE_P\io\docs\source\python/python_elegant.rst</span>, line 2245); <em><a href="#id387">backlink</a></em></p>
<p>Inline literal start-string without end-string.</p>
</aside>
<aside class="system-message" id="id388">
<p class="system-message-title">System Message: WARNING/2 (<span class="docutils literal">C:\Users\zxouyang\CodeProjects\PRIVATE_P\io\docs\source\python/python_elegant.rst</span>, line 2245); <em><a href="#id389">backlink</a></em></p>
<p>Inline interpreted text or phrase reference start-string without end-string.</p>
</aside>
<p>[Python中的zip()：从多个列表中获取元素]</p>
<aside class="system-message">
<p class="system-message-title">System Message: SEVERE/4 (<span class="docutils literal">C:\Users\zxouyang\CodeProjects\PRIVATE_P\io\docs\source\python/python_elegant.rst</span>, line 2249)</p>
<p>Title level inconsistent:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>`itertools` module
~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
</pre></div>
</div>
</aside>
<dl>
<dt>!!! p “读取大型文件数据”</dt><dd><p>当我们需要处理大量数据时，将整个数据集加载到内存中可能会导致程序崩溃或效率低下。使用Python迭代器来处理大型文件数据非常理想，这种方式只在内存中维护当前处理的数据块，而不需要一次性读取整个文件。</p>
<p><a href="#id390"><span class="problematic" id="id391">``</span></a>` python
with open(‘large_file.txt’, ‘r’) as f:</p>
<aside class="system-message" id="id390">
<p class="system-message-title">System Message: WARNING/2 (<span class="docutils literal">C:\Users\zxouyang\CodeProjects\PRIVATE_P\io\docs\source\python/python_elegant.rst</span>, line 2255); <em><a href="#id391">backlink</a></em></p>
<p>Inline literal start-string without end-string.</p>
</aside>
<aside class="system-message">
<p class="system-message-title">System Message: ERROR/3 (<span class="docutils literal">C:\Users\zxouyang\CodeProjects\PRIVATE_P\io\docs\source\python/python_elegant.rst</span>, line 2257)</p>
<p>Unexpected indentation.</p>
</aside>
<blockquote>
<div><dl class="simple">
<dt>for line in f:</dt><dd><p>process_line(line)</p>
</dd>
</dl>
</div></blockquote>
<aside class="system-message">
<p class="system-message-title">System Message: WARNING/2 (<span class="docutils literal">C:\Users\zxouyang\CodeProjects\PRIVATE_P\io\docs\source\python/python_elegant.rst</span>, line 2259)</p>
<p>Block quote ends without a blank line; unexpected unindent.</p>
</aside>
<p><a href="#id392"><span class="problematic" id="id393">``</span></a><a href="#id394"><span class="problematic" id="id395">`</span></a></p>
<aside class="system-message" id="id392">
<p class="system-message-title">System Message: WARNING/2 (<span class="docutils literal">C:\Users\zxouyang\CodeProjects\PRIVATE_P\io\docs\source\python/python_elegant.rst</span>, line 2259); <em><a href="#id393">backlink</a></em></p>
<p>Inline literal start-string without end-string.</p>
</aside>
<aside class="system-message" id="id394">
<p class="system-message-title">System Message: WARNING/2 (<span class="docutils literal">C:\Users\zxouyang\CodeProjects\PRIVATE_P\io\docs\source\python/python_elegant.rst</span>, line 2259); <em><a href="#id395">backlink</a></em></p>
<p>Inline interpreted text or phrase reference start-string without end-string.</p>
</aside>
</dd>
</dl>
<p>[python迭代器详解]</p>
<p>迭代器必须实现__iter__和__next__方法，而生成器只需要实现一个yield语句即可。
生成器可以保存状态，每次调用yield语句时会自动保存当前的局部变量和执行位置，并在下一次调用时恢复执行状态，从而实现了迭代器的功能。
生成器的主要作用是生成序列，而迭代器则可以用于各种数据结构的遍历，包括序列、映射、文件等</p>
<section id="id396">
<h2 id="id396">循环<a class="headerlink" href="#id396" title="Link to this heading">¶</a></h2>
<p>想看索引  <cite>for idx, obj in enumerate(objs):</cite></p>
<p><a href="#id397"><span class="problematic" id="id398">``</span></a><a href="#id399"><span class="problematic" id="id400">`</span></a>python
animals = [‘cat’, ‘dog’, ‘monkey’]
for idx, animal in enumerate(animals):</p>
<aside class="system-message" id="id397">
<p class="system-message-title">System Message: WARNING/2 (<span class="docutils literal">C:\Users\zxouyang\CodeProjects\PRIVATE_P\io\docs\source\python/python_elegant.rst</span>, line 2272); <em><a href="#id398">backlink</a></em></p>
<p>Inline literal start-string without end-string.</p>
</aside>
<aside class="system-message" id="id399">
<p class="system-message-title">System Message: WARNING/2 (<span class="docutils literal">C:\Users\zxouyang\CodeProjects\PRIVATE_P\io\docs\source\python/python_elegant.rst</span>, line 2272); <em><a href="#id400">backlink</a></em></p>
<p>Inline interpreted text or phrase reference start-string without end-string.</p>
</aside>
<aside class="system-message">
<p class="system-message-title">System Message: ERROR/3 (<span class="docutils literal">C:\Users\zxouyang\CodeProjects\PRIVATE_P\io\docs\source\python/python_elegant.rst</span>, line 2275)</p>
<p>Unexpected indentation.</p>
</aside>
<blockquote>
<div><p>print(f’{idx} - {animal}’)</p>
</div></blockquote>
<aside class="system-message">
<p class="system-message-title">System Message: WARNING/2 (<span class="docutils literal">C:\Users\zxouyang\CodeProjects\PRIVATE_P\io\docs\source\python/python_elegant.rst</span>, line 2276)</p>
<p>Block quote ends without a blank line; unexpected unindent.</p>
</aside>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="mi">0</span> <span class="o">-</span> <span class="n">cat</span>
<span class="go">========================</span>
<span class="go"># &gt;&gt;&gt; 1 - dog</span>
<span class="gp">&gt;&gt;&gt; </span><span class="mi">2</span> <span class="o">-</span> <span class="n">monkey</span>
<span class="go">==============================</span>
<span class="go">```</span>
</pre></div>
</div>
<p>!!! danger “看清楚循环的是啥”</p>
<blockquote>
<div><p><a href="#id401"><span class="problematic" id="id402">``</span></a><a href="#id403"><span class="problematic" id="id404">`</span></a>python
for a, b, c in [‘abc’, ‘def’, ‘ghj’]:</p>
<aside class="system-message" id="id401">
<p class="system-message-title">System Message: WARNING/2 (<span class="docutils literal">C:\Users\zxouyang\CodeProjects\PRIVATE_P\io\docs\source\python/python_elegant.rst</span>, line 2285); <em><a href="#id402">backlink</a></em></p>
<p>Inline literal start-string without end-string.</p>
</aside>
<aside class="system-message" id="id403">
<p class="system-message-title">System Message: WARNING/2 (<span class="docutils literal">C:\Users\zxouyang\CodeProjects\PRIVATE_P\io\docs\source\python/python_elegant.rst</span>, line 2285); <em><a href="#id404">backlink</a></em></p>
<p>Inline interpreted text or phrase reference start-string without end-string.</p>
</aside>
<aside class="system-message">
<p class="system-message-title">System Message: ERROR/3 (<span class="docutils literal">C:\Users\zxouyang\CodeProjects\PRIVATE_P\io\docs\source\python/python_elegant.rst</span>, line 2287)</p>
<p>Unexpected indentation.</p>
</aside>
<blockquote>
<div><p>print(a, b, c)</p>
</div></blockquote>
<aside class="system-message">
<p class="system-message-title">System Message: WARNING/2 (<span class="docutils literal">C:\Users\zxouyang\CodeProjects\PRIVATE_P\io\docs\source\python/python_elegant.rst</span>, line 2288)</p>
<p>Block quote ends without a blank line; unexpected unindent.</p>
</aside>
<p># &gt;&gt;&gt; a b c
# &gt;&gt;&gt; d e f
# &gt;&gt;&gt; g h j
“””！！！！ 而不是 a d g
这种需要 zip
“””
for a, b, c in zip(‘abc’, ‘def’, ‘ghj’):</p>
<aside class="system-message">
<p class="system-message-title">System Message: ERROR/3 (<span class="docutils literal">C:\Users\zxouyang\CodeProjects\PRIVATE_P\io\docs\source\python/python_elegant.rst</span>, line 2295)</p>
<p>Unexpected indentation.</p>
</aside>
<blockquote>
<div><p>print(a, b, c)</p>
</div></blockquote>
<aside class="system-message">
<p class="system-message-title">System Message: WARNING/2 (<span class="docutils literal">C:\Users\zxouyang\CodeProjects\PRIVATE_P\io\docs\source\python/python_elegant.rst</span>, line 2296)</p>
<p>Block quote ends without a blank line; unexpected unindent.</p>
</aside>
<p># &gt;&gt;&gt; a d g
# &gt;&gt;&gt; b e h
# &gt;&gt;&gt; c f j
<a href="#id405"><span class="problematic" id="id406">``</span></a><a href="#id407"><span class="problematic" id="id408">`</span></a></p>
<aside class="system-message" id="id405">
<p class="system-message-title">System Message: WARNING/2 (<span class="docutils literal">C:\Users\zxouyang\CodeProjects\PRIVATE_P\io\docs\source\python/python_elegant.rst</span>, line 2296); <em><a href="#id406">backlink</a></em></p>
<p>Inline literal start-string without end-string.</p>
</aside>
<aside class="system-message" id="id407">
<p class="system-message-title">System Message: WARNING/2 (<span class="docutils literal">C:\Users\zxouyang\CodeProjects\PRIVATE_P\io\docs\source\python/python_elegant.rst</span>, line 2296); <em><a href="#id408">backlink</a></em></p>
<p>Inline interpreted text or phrase reference start-string without end-string.</p>
</aside>
</div></blockquote>
</section>
<section id="cls">
<h2 id="cls">类 cls<a class="headerlink" href="#cls" title="Link to this heading">¶</a></h2>
<dl class="simple">
<dt>!!! p “==实例化==。根据类来创建对象”</dt><dd><p><cite>MyClass</cite>: 类,==驼峰命名法==，即将类名中的 <strong>每个单词的首字母都大写，而不使用下划线</strong>。
<cite>myclass_1</cite>: 根据类创建的实例。实例名采用 <strong>小写格式，并在单词之间加上下划线</strong>。</p>
</dd>
</dl>
<section id="id409">
<h3 id="id409">协议<a class="headerlink" href="#id409" title="Link to this heading">¶</a></h3>
<dl class="simple">
<dt>!!! quote “==鸭子类型 duck typing==。主要是一种思想。不要去**严格验证**是不是鸭子，而是检查有没有鸭子的**重点特征和行为**。何谓重点特征和行为，取决于你想使用的类型的根本特征是什么。忽略对象的真正类别，转而关注对象又没有实现所需的 方法 &amp; 签名 &amp; 语义。”</dt><dd><p>&gt; 序列类型，只要迭代就行。🟰 只要能迭代都是序列类型，而不需要继承什么或者什么严格定义。
&gt; 说序列，是因为它的行为像序列。如果只想迭代，只需要 <cite>__iter__</cite> 就行，而不需要`__len__` 多余的但是属于序列的行为。</p>
</dd>
</dl>
<p>!!! quote “==白鹅类型==。只要 cls 是抽象基类 🟰 cls 的元类是 <cite>abc.ABCMeta</cite>，就可以使用 <cite>isinstance(obj, cls)</cite>”
==协议==。是一种约定，用于指导对象之间的交互和行为。Python并没有严格的接口定义，而是通过协议来实现接口的概念。<strong>协议是非正式的接口</strong>。对象的类型无关紧要，只要实现特定的协议即可。
协议是**动态**的：函数不关心参数的类型，只要求对象实现了部分所需协议，即使一开始定义时没有实现，<strong>也可以之后再补上</strong>。</p>
<dl>
<dt>!!! p “不一定要自己实现所需协议，如果能委托给对象的带有所需协议的属性也可以。但是单纯委托有缺点，可能会返回 委托类型，而不是自定义的类型。”</dt><dd><p>&gt; 向量的切片操作委托给 list 的切片。但是有缺点：切片返回的是 list 类型，而不是自定义的 vector 类型。
✏️ 看 getitem</p>
<p><a href="#id410"><span class="problematic" id="id411">``</span></a><a href="#id412"><span class="problematic" id="id413">`</span></a>python
class Vector():</p>
<aside class="system-message" id="id410">
<p class="system-message-title">System Message: WARNING/2 (<span class="docutils literal">C:\Users\zxouyang\CodeProjects\PRIVATE_P\io\docs\source\python/python_elegant.rst</span>, line 2323); <em><a href="#id411">backlink</a></em></p>
<p>Inline literal start-string without end-string.</p>
</aside>
<aside class="system-message" id="id412">
<p class="system-message-title">System Message: WARNING/2 (<span class="docutils literal">C:\Users\zxouyang\CodeProjects\PRIVATE_P\io\docs\source\python/python_elegant.rst</span>, line 2323); <em><a href="#id413">backlink</a></em></p>
<p>Inline interpreted text or phrase reference start-string without end-string.</p>
</aside>
<blockquote>
<div><dl class="simple">
<dt>def __init__(self, components):</dt><dd><p>self._components = list(components)</p>
</dd>
<dt>def __getitem__(self, index):  # 委托给 list 类型的 _components</dt><dd><p>return self._components[index]  # 单纯委托</p>
</dd>
</dl>
</div></blockquote>
<p>v = Vector([0,1,2])
# &gt;&gt;&gt; v[0]=0
v[:]
# &gt;&gt;&gt; [0, 1, 2]  # list not vetor
<a href="#id414"><span class="problematic" id="id415">``</span></a><a href="#id416"><span class="problematic" id="id417">`</span></a></p>
<aside class="system-message" id="id414">
<p class="system-message-title">System Message: WARNING/2 (<span class="docutils literal">C:\Users\zxouyang\CodeProjects\PRIVATE_P\io\docs\source\python/python_elegant.rst</span>, line 2332); <em><a href="#id415">backlink</a></em></p>
<p>Inline literal start-string without end-string.</p>
</aside>
<aside class="system-message" id="id416">
<p class="system-message-title">System Message: WARNING/2 (<span class="docutils literal">C:\Users\zxouyang\CodeProjects\PRIVATE_P\io\docs\source\python/python_elegant.rst</span>, line 2332); <em><a href="#id417">backlink</a></em></p>
<p>Inline interpreted text or phrase reference start-string without end-string.</p>
</aside>
</dd>
</dl>
<p>==序列类型==。</p>
<p><code class="docutils literal notranslate"><span class="pre">`mermaid</span>
<span class="pre">classDiagram</span>
<span class="pre">class</span> <span class="pre">Container</span>
<span class="pre">Container:</span> <span class="pre">__contains__</span> <span class="pre">@</span>
<span class="pre">class</span> <span class="pre">Iterable</span>
<span class="pre">Iterable:</span> <span class="pre">__iter__</span> <span class="pre">@</span>
<span class="pre">class</span> <span class="pre">Sized</span>
<span class="pre">Sized:</span> <span class="pre">__len__</span> <span class="pre">@</span>
<span class="pre">class</span> <span class="pre">Sequence</span>
<span class="pre">Sequence:</span> <span class="pre">__getitem__</span> <span class="pre">@</span>
<span class="pre">Sequence:</span> <span class="pre">__contains__</span>
<span class="pre">Sequence:</span> <span class="pre">__iter__</span>
<span class="pre">Sequence:</span> <span class="pre">__reversed__</span>
<span class="pre">Sequence:</span> <span class="pre">index</span>
<span class="pre">Sequence:</span> <span class="pre">count</span>
<span class="pre">class</span> <span class="pre">MutableSequence</span>
<span class="pre">MutableSequence:</span> <span class="pre">__setitem__</span> <span class="pre">@</span>
<span class="pre">MutableSequence:</span> <span class="pre">__delitem__</span> <span class="pre">@</span>
<span class="pre">MutableSequence:</span> <span class="pre">insert/append/extend</span>
<span class="pre">MutableSequence:</span> <span class="pre">pop/remove</span>
<span class="pre">MutableSequence:</span> <span class="pre">__iadd__</span>
<span class="pre">Container</span> <span class="pre">&lt;|--</span> <span class="pre">Sequence</span>
<span class="pre">Iterable</span> <span class="pre">&lt;|--</span> <span class="pre">Sequence</span>
<span class="pre">Sized</span> <span class="pre">&lt;|--</span> <span class="pre">Sequence</span>
<span class="pre">Sequence</span> <span class="pre">&lt;|--</span> <span class="pre">MutableSequence</span>
<span class="pre">`</span></code></p>
<p>具体方法和抽象方法是面向对象编程中的两个概念，用于描述类中的方法的特性和行为。
==抽象方法 Abstract Methods==。(后面加`@`)在类中声明**但没有具体实现**，它只包含方法的签名（返回类型、方法名和参数列表），没有方法体。<strong>子类必须实现抽象方法</strong>，才能创建对象并调用这个方法。否则就会产生 <cite>NotImplentedError</cite>，或子类也必须声明为抽象类。
==具体方法Concrete Methods==。在类中实现了具体功能的方法，它**包含了具体的代码实现**。</p>
<dl>
<dt>!!! p “Sequence 抽象方法没有 <cite>__iter__</cite>。”</dt><dd><p>python 存在一种**后备机制**：当有 <cite>__getitem__</cite> 时，python 会调用它，传入从 0 开始的整数索引，尝试迭代对象。哪怕是没有 <cite>__iter__</cite> &amp; <cite>__contains__</cite> python 也会设法使迭代 &amp; in 可用。</p>
</dd>
<dt>!!! p “猴子补丁：运行时实现协议。”</dt><dd><p>&gt; FrenchDeck 类已经定义好了，但是突然想实现可变协议，就是需要添加 <a href="#id418"><span class="problematic" id="id419">`</span></a>__setitem__`方法。
✏️ 在运行时修改修改类或模块，而**不改动源码**。但是关键是要和源码耦合十分紧密（即知道源码，并对上来写</p>
<aside class="system-message" id="id418">
<p class="system-message-title">System Message: WARNING/2 (<span class="docutils literal">C:\Users\zxouyang\CodeProjects\PRIVATE_P\io\docs\source\python/python_elegant.rst</span>, line 2375); <em><a href="#id419">backlink</a></em></p>
<p>Inline interpreted text or phrase reference start-string without end-string.</p>
</aside>
<p><a href="#id420"><span class="problematic" id="id421">``</span></a>` python hl_lines=”5”
# 终端台写
def set_card(deck, pos, card):</p>
<aside class="system-message" id="id420">
<p class="system-message-title">System Message: WARNING/2 (<span class="docutils literal">C:\Users\zxouyang\CodeProjects\PRIVATE_P\io\docs\source\python/python_elegant.rst</span>, line 2378); <em><a href="#id421">backlink</a></em></p>
<p>Inline literal start-string without end-string.</p>
</aside>
<aside class="system-message">
<p class="system-message-title">System Message: ERROR/3 (<span class="docutils literal">C:\Users\zxouyang\CodeProjects\PRIVATE_P\io\docs\source\python/python_elegant.rst</span>, line 2381)</p>
<p>Unexpected indentation.</p>
</aside>
<blockquote>
<div><p>deck._card[pos] = card</p>
</div></blockquote>
<p>FrenchDeck.__setitem__ = set_card  # 把函数赋给属性
<a href="#id422"><span class="problematic" id="id423">``</span></a><a href="#id424"><span class="problematic" id="id425">`</span></a></p>
<aside class="system-message" id="id422">
<p class="system-message-title">System Message: WARNING/2 (<span class="docutils literal">C:\Users\zxouyang\CodeProjects\PRIVATE_P\io\docs\source\python/python_elegant.rst</span>, line 2383); <em><a href="#id423">backlink</a></em></p>
<p>Inline literal start-string without end-string.</p>
</aside>
<aside class="system-message" id="id424">
<p class="system-message-title">System Message: WARNING/2 (<span class="docutils literal">C:\Users\zxouyang\CodeProjects\PRIVATE_P\io\docs\source\python/python_elegant.rst</span>, line 2383); <em><a href="#id425">backlink</a></em></p>
<p>Inline interpreted text or phrase reference start-string without end-string.</p>
</aside>
</dd>
</dl>
<p><code class="docutils literal notranslate"><span class="pre">`</span> <span class="pre">python</span>
<span class="pre">import</span> <span class="pre">module</span>
<span class="pre">myclass</span> <span class="pre">=</span> <span class="pre">module.MyClass()</span>
<span class="pre">`</span></code></p>
</section>
<section id="id426">
<h3 id="id426">借口<a class="headerlink" href="#id426" title="Link to this heading">¶</a></h3>
<ul class="simple">
<li><p>导入</p></li>
</ul>
<aside class="system-message">
<p class="system-message-title">System Message: WARNING/2 (<span class="docutils literal">C:\Users\zxouyang\CodeProjects\PRIVATE_P\io\docs\source\python/python_elegant.rst</span>, line 2395)</p>
<p>Bullet list ends without a blank line; unexpected unindent.</p>
</aside>
<p>导入整个模块，再使用句点表示法访问需要的类。需要从一个模块中导入很多类时，最好导入整个模块，并使用 <cite>module_name.class_name</cite> 语法来访问类。</p>
<p>修改属性的值</p>
<ul class="simple">
<li><p>直接通过实例进行修改</p></li>
<li><p>通过方法进行设置-</p></li>
<li><p>通过方法进行递增（增加特定的值）。</p></li>
</ul>
</section>
<section id="id427">
<h3 id="id427">继承类<a class="headerlink" href="#id427" title="Link to this heading">¶</a></h3>
<p>如果你要编写的类是另一个现成类的特殊版本，可使用继承。一个类继承另一个类时，它将自动获得另一个类的所有属性和方法；</p>
<ul class="simple">
<li><p>原有的类称为父类，父类也称为超类（<cite>superclass</cite>）</p></li>
<li><p>新类称为子类。</p></li>
<li><p>子类继承了其父类的所有属性和方法，同时还可以定义自己的属性和方法。</p></li>
</ul>
<section id="id428">
<h4 id="id428">可继承的类<a class="headerlink" href="#id428" title="Link to this heading">¶</a></h4>
<section id="userdict">
<h5 id="userdict">UserDict<a class="headerlink" href="#userdict" title="Link to this heading">¶</a></h5>
<dl class="simple">
<dt>!!! p “quote 更倾向继承 UserDict 而不是 dict”</dt><dd><p>dict 会在某些方法的实现上走一些捷径，如果继承的话，可能需要在子类中重写这些方法。
==UserDict==。把标准 dict 用纯 python 实现了一遍，所以就不会遇到这个问题。</p>
</dd>
</dl>
<p>!!! question “UserDict 不是 Dict 的子类，但是 用来给 UserDict 最终存储数据的 <cite>UserDict.data</cite> 属性是 dict 的实例。所以”</p>
</section>
</section>
</section>
<section id="id429">
<h3 id="id429">魔法方法<a class="headerlink" href="#id429" title="Link to this heading">¶</a></h3>
<p>==magic method 魔法方法 dunder method 双下划线方法==。类似**前后带双下划线**的`__method__():<a href="#id430"><span class="problematic" id="id431">`</span></a>内置函数的昵称。在这个方法的名称中，开头和末尾各有两个下划线，这是一种约定，旨在避免Python默认方法与普通方法发生名称冲突。
<strong>工作方式</strong>：当对象接收到一个消息，但在该对象上没有对应的方法时，会自动查找并调用该对象所在类中的特殊方法，从而实现对该消息的处理。</p>
<aside class="system-message" id="id430">
<p class="system-message-title">System Message: WARNING/2 (<span class="docutils literal">C:\Users\zxouyang\CodeProjects\PRIVATE_P\io\docs\source\python/python_elegant.rst</span>, line 2427); <em><a href="#id431">backlink</a></em></p>
<p>Inline interpreted text or phrase reference start-string without end-string.</p>
</aside>
<p>&gt; 如min、max、all、map等都是用C语言实现的。运算会更快</p>
<p><a href="#id809"><span class="problematic" id="id810">|magic meth|call|解释|</span></a>
<a href="#id811"><span class="problematic" id="id812">|--|</span></a>–<a href="#id813"><span class="problematic" id="id814">|--|</span></a>
<a href="#id815"><span class="problematic" id="id816">|`__abs__(self)`|`abs(myclass)`|取模|</span></a>
<a href="#id817"><span class="problematic" id="id818">|`__bool__(self)`|`bool(myclass)`
`if myclass:`|判断真假|</span></a>
<a href="#id819"><span class="problematic" id="id820">|`__call__(self, *args, **kwargs):`|`mycalss(params)`|&lt;u&gt;可调用对象协议&lt;/u&gt; ()操作|</span></a>
<a href="#id821"><span class="problematic" id="id822">|`__contains__(self, a)`|`a in myclass`|包含|</span></a>
<a href="#id823"><span class="problematic" id="id824">|`__getitem__(self, idx):`|`myclass[idx]` |&lt;u&gt;序列协议&lt;/u&gt;[]操作|</span></a>
<a href="#id825"><span class="problematic" id="id826">|`__init__(self, *args, **kwargs)`|</span></a> <cite>MyClass()`step2| 初始化实例|
|`__iter__(self)`|`iter(myclass)</cite>
<cite>for i in myclass`|&lt;u&gt;迭代协议&lt;/u&gt;|
|`__len__(self)</cite> <a href="#id827"><span class="problematic" id="id828">|`len(myclass)` |长度|</span></a>
<a href="#id829"><span class="problematic" id="id830">|`__missing__`|</span></a>?|映射找不到键|
<a href="#id831"><span class="problematic" id="id832">|`__new__(self)` |`MyClass()` step1|</span></a> 新建实例|
<a href="#id833"><span class="problematic" id="id834">|`__repr__(self)` |&lt;kbd&gt;控制台&lt;/kbd&gt;`myclass`|表达是什么东西
方便调试和记录日志|</span></a>
<a href="#id835"><span class="problematic" id="id836">|`__setitem__(self, idx，new):`|`myclass[idx]=new` | &lt;u&gt;序列类修改&lt;/u&gt;|</span></a>
<a href="#id837"><span class="problematic" id="id838">|`__slots__`|</span></a> ?|节省内存|
<a href="#id839"><span class="problematic" id="id840">|`__str__`|</span></a> <cite>print(myclass)</cite></p>
<aside class="system-message">
<p class="system-message-title">System Message: ERROR/3 (<span class="docutils literal">C:\Users\zxouyang\CodeProjects\PRIVATE_P\io\docs\source\python/python_elegant.rst</span>, line 2451)</p>
<p>Unexpected indentation.</p>
</aside>
<blockquote>
<div><p><a href="#id432"><span class="problematic" id="id433">`</span></a>str(myclass)`|对终端用户友好|</p>
<aside class="system-message" id="id432">
<p class="system-message-title">System Message: WARNING/2 (<span class="docutils literal">C:\Users\zxouyang\CodeProjects\PRIVATE_P\io\docs\source\python/python_elegant.rst</span>, line 2451); <em><a href="#id433">backlink</a></em></p>
<p>Inline interpreted text or phrase reference start-string without end-string.</p>
</aside>
</div></blockquote>
<p>运算符的重载在它那个章节</p>
<ul class="simple">
<li><p><cite>__bool__(self)</cite> ➡️ <cite>if myclass</cite> | <cite>bool(myclass)</cite></p></li>
</ul>
<aside class="system-message">
<p class="system-message-title">System Message: WARNING/2 (<span class="docutils literal">C:\Users\zxouyang\CodeProjects\PRIVATE_P\io\docs\source\python/python_elegant.rst</span>, line 2456)</p>
<p>Bullet list ends without a blank line; unexpected unindent.</p>
</aside>
<p>默认情况下，我们自己定义的类的实例总认为是真，除非这个类对`__bool__` | <cite>__len__</cite> 有自己的实现。
因为这个判断真假会先去搜 <cite>__bool__</cite> 存在吗，如果不存在就会去找 <cite>__len__</cite>。<strong>一般默认模为0就是假的</strong>
- <cite>__call__(self)</cite> ➡️ <cite>myclass()</cite></p>
<aside class="system-message">
<p class="system-message-title">System Message: ERROR/3 (<span class="docutils literal">C:\Users\zxouyang\CodeProjects\PRIVATE_P\io\docs\source\python/python_elegant.rst</span>, line 2459)</p>
<p>Unexpected indentation.</p>
</aside>
<blockquote>
<div><p>成为可调用对象，也可以作为类方法的快捷方式。</p>
<p><a href="#id434"><span class="problematic" id="id435">``</span></a><a href="#id436"><span class="problematic" id="id437">`</span></a>python hl_lines=”5 6”
class MyClass():</p>
<aside class="system-message" id="id434">
<p class="system-message-title">System Message: WARNING/2 (<span class="docutils literal">C:\Users\zxouyang\CodeProjects\PRIVATE_P\io\docs\source\python/python_elegant.rst</span>, line 2461); <em><a href="#id435">backlink</a></em></p>
<p>Inline literal start-string without end-string.</p>
</aside>
<aside class="system-message" id="id436">
<p class="system-message-title">System Message: WARNING/2 (<span class="docutils literal">C:\Users\zxouyang\CodeProjects\PRIVATE_P\io\docs\source\python/python_elegant.rst</span>, line 2461); <em><a href="#id437">backlink</a></em></p>
<p>Inline interpreted text or phrase reference start-string without end-string.</p>
</aside>
<aside class="system-message">
<p class="system-message-title">System Message: ERROR/3 (<span class="docutils literal">C:\Users\zxouyang\CodeProjects\PRIVATE_P\io\docs\source\python/python_elegant.rst</span>, line 2463)</p>
<p>Unexpected indentation.</p>
</aside>
<blockquote>
<div><dl class="simple">
<dt>def func1(self):</dt><dd><p>…</p>
</dd>
<dt>def __call__(self):</dt><dd><p>return self.func1(self)  # mycalss() = myclass.func1()</p>
</dd>
</dl>
</div></blockquote>
<aside class="system-message">
<p class="system-message-title">System Message: WARNING/2 (<span class="docutils literal">C:\Users\zxouyang\CodeProjects\PRIVATE_P\io\docs\source\python/python_elegant.rst</span>, line 2468)</p>
<p>Block quote ends without a blank line; unexpected unindent.</p>
</aside>
<p><a href="#id438"><span class="problematic" id="id439">``</span></a><a href="#id440"><span class="problematic" id="id441">`</span></a></p>
<aside class="system-message" id="id438">
<p class="system-message-title">System Message: WARNING/2 (<span class="docutils literal">C:\Users\zxouyang\CodeProjects\PRIVATE_P\io\docs\source\python/python_elegant.rst</span>, line 2468); <em><a href="#id439">backlink</a></em></p>
<p>Inline literal start-string without end-string.</p>
</aside>
<aside class="system-message" id="id440">
<p class="system-message-title">System Message: WARNING/2 (<span class="docutils literal">C:\Users\zxouyang\CodeProjects\PRIVATE_P\io\docs\source\python/python_elegant.rst</span>, line 2468); <em><a href="#id441">backlink</a></em></p>
<p>Inline interpreted text or phrase reference start-string without end-string.</p>
</aside>
</div></blockquote>
<ul class="simple">
<li><p><cite>__contains__(self, a)`➡️`a in myclass</cite></p></li>
</ul>
<aside class="system-message">
<p class="system-message-title">System Message: WARNING/2 (<span class="docutils literal">C:\Users\zxouyang\CodeProjects\PRIVATE_P\io\docs\source\python/python_elegant.rst</span>, line 2471)</p>
<p>Bullet list ends without a blank line; unexpected unindent.</p>
</aside>
<p>如果没有实现，<cite>in</cite> 就会按顺序做迭代搜索
- <cite>__getitem__(self, idx):</cite> ➡️ <cite>myclass[idx]</cite> &lt;u&gt;[]操作&lt;/u&gt;
支持的话, 自动支持切片操作，变成可迭代。
- <cite>__len__(self)`➡️ `len(myclass)</cite>
如果是 python 内置类型，CPython 就会抄近路，实际直接返回 PyObject 里的 <cite>ob_size</cite> 属性.会比调用这个方法更快。
- <cite>__missing__</cite> 映射找不到键
所有的映射类型在处理找不到键时，都会牵扯`.__missing__` 方法。<cite>.__missing__`会调用 `default_factory</cite> 里存的可调用对象产生默认值，给 <cite>__getitem__</cite> 返回。
基类 dict 没有定义，但是它知道，所以如果某个类继承了 dict，又是实现了 <cite>__missing__</cite> ，那么在 <cite>__getitem__</cite> 找不到键时，python 会自动调用它，而不是抛出  KeyError.</p>
<blockquote>
<div><p>!!! warning “<cite>__missing__</cite> 只会被 <cite>__getitem__</cite> 调用，对 <cite>.get(k)</cite> &amp; <cite>__contains__</cite> 没有影响。所以”</p>
</div></blockquote>
<section id="example">
<h4 id="example">Example<a class="headerlink" href="#example" title="Link to this heading">¶</a></h4>
<p>&gt; 一叠纸牌</p>
<p><a href="#id442"><span class="problematic" id="id443">``</span></a><a href="#id444"><span class="problematic" id="id445">`</span></a>python hl_lines=”4”
class FrenchDeck():
def __init__(self, a:int):</p>
<aside class="system-message" id="id442">
<p class="system-message-title">System Message: WARNING/2 (<span class="docutils literal">C:\Users\zxouyang\CodeProjects\PRIVATE_P\io\docs\source\python/python_elegant.rst</span>, line 2487); <em><a href="#id443">backlink</a></em></p>
<p>Inline literal start-string without end-string.</p>
</aside>
<aside class="system-message" id="id444">
<p class="system-message-title">System Message: WARNING/2 (<span class="docutils literal">C:\Users\zxouyang\CodeProjects\PRIVATE_P\io\docs\source\python/python_elegant.rst</span>, line 2487); <em><a href="#id445">backlink</a></em></p>
<p>Inline interpreted text or phrase reference start-string without end-string.</p>
</aside>
<aside class="system-message">
<p class="system-message-title">System Message: ERROR/3 (<span class="docutils literal">C:\Users\zxouyang\CodeProjects\PRIVATE_P\io\docs\source\python/python_elegant.rst</span>, line 2490)</p>
<p>Unexpected indentation.</p>
</aside>
<blockquote>
<div><blockquote>
<div><p>self._cards = list(range(a))</p>
</div></blockquote>
<aside class="system-message">
<p class="system-message-title">System Message: WARNING/2 (<span class="docutils literal">C:\Users\zxouyang\CodeProjects\PRIVATE_P\io\docs\source\python/python_elegant.rst</span>, line 2491)</p>
<p>Block quote ends without a blank line; unexpected unindent.</p>
</aside>
<dl class="simple">
<dt>def __getitem__(self, idx):</dt><dd><p>return self._cards[idx]</p>
</dd>
</dl>
</div></blockquote>
<aside class="system-message">
<p class="system-message-title">System Message: WARNING/2 (<span class="docutils literal">C:\Users\zxouyang\CodeProjects\PRIVATE_P\io\docs\source\python/python_elegant.rst</span>, line 2493)</p>
<p>Block quote ends without a blank line; unexpected unindent.</p>
</aside>
<p><a href="#id446"><span class="problematic" id="id447">``</span></a><a href="#id448"><span class="problematic" id="id449">`</span></a></p>
<aside class="system-message" id="id446">
<p class="system-message-title">System Message: WARNING/2 (<span class="docutils literal">C:\Users\zxouyang\CodeProjects\PRIVATE_P\io\docs\source\python/python_elegant.rst</span>, line 2493); <em><a href="#id447">backlink</a></em></p>
<p>Inline literal start-string without end-string.</p>
</aside>
<aside class="system-message" id="id448">
<p class="system-message-title">System Message: WARNING/2 (<span class="docutils literal">C:\Users\zxouyang\CodeProjects\PRIVATE_P\io\docs\source\python/python_elegant.rst</span>, line 2493); <em><a href="#id449">backlink</a></em></p>
<p>Inline interpreted text or phrase reference start-string without end-string.</p>
</aside>
<p>&gt; 二维向量
&gt; 为生成字节序列，将 typecode 转成字节序列，然后迭代实例得到数组，再将数组转成字节序列。</p>
<p><a href="#id450"><span class="problematic" id="id451">``</span></a><a href="#id452"><span class="problematic" id="id453">`</span></a>python hl_lines=”5 7 9 11”
from math import sqrt
class Vector():</p>
<aside class="system-message" id="id450">
<p class="system-message-title">System Message: WARNING/2 (<span class="docutils literal">C:\Users\zxouyang\CodeProjects\PRIVATE_P\io\docs\source\python/python_elegant.rst</span>, line 2498); <em><a href="#id451">backlink</a></em></p>
<p>Inline literal start-string without end-string.</p>
</aside>
<aside class="system-message" id="id452">
<p class="system-message-title">System Message: WARNING/2 (<span class="docutils literal">C:\Users\zxouyang\CodeProjects\PRIVATE_P\io\docs\source\python/python_elegant.rst</span>, line 2498); <em><a href="#id453">backlink</a></em></p>
<p>Inline interpreted text or phrase reference start-string without end-string.</p>
</aside>
<aside class="system-message">
<p class="system-message-title">System Message: ERROR/3 (<span class="docutils literal">C:\Users\zxouyang\CodeProjects\PRIVATE_P\io\docs\source\python/python_elegant.rst</span>, line 2501)</p>
<p>Unexpected indentation.</p>
</aside>
<blockquote>
<div><p>typecode = ‘d’  # 类属性，在 Vector 实例 &amp; 字节序列之间转换时使用
def __init__(self, x, y):</p>
<aside class="system-message">
<p class="system-message-title">System Message: ERROR/3 (<span class="docutils literal">C:\Users\zxouyang\CodeProjects\PRIVATE_P\io\docs\source\python/python_elegant.rst</span>, line 2503)</p>
<p>Unexpected indentation.</p>
</aside>
<blockquote>
<div><p>self.x, self.y = float(x), float(y)  # 格式转换 为统一 也为尽早捕捉错误参数</p>
</div></blockquote>
<aside class="system-message">
<p class="system-message-title">System Message: WARNING/2 (<span class="docutils literal">C:\Users\zxouyang\CodeProjects\PRIVATE_P\io\docs\source\python/python_elegant.rst</span>, line 2504)</p>
<p>Block quote ends without a blank line; unexpected unindent.</p>
</aside>
<dl>
<dt>def __iter__(self):  # 只有实现可迭代，才能类里的属性拆包 <a href="#id454"><span class="problematic" id="id455">*</span></a>self</dt><dd><aside class="system-message" id="id454">
<p class="system-message-title">System Message: WARNING/2 (<span class="docutils literal">C:\Users\zxouyang\CodeProjects\PRIVATE_P\io\docs\source\python/python_elegant.rst</span>, line 2504); <em><a href="#id455">backlink</a></em></p>
<p>Inline emphasis start-string without end-string.</p>
</aside>
<p>return (i for i in (self.x, self.y))</p>
</dd>
<dt>def __repr__(self):</dt><dd><p>class_name = type(self).__name__
return f’{class_name}({self.x}, {self.y})’</p>
</dd>
<dt>def __str__(self):</dt><dd><p>return str(tuple(self))</p>
</dd>
<dt>def __bytes__(self):</dt><dd><p>return (bytes([ord(self.typecode)]) + bytes(array(self.typecode, self)))</p>
</dd>
<dt>def __eq__(self, other):  # 为了快速比较所有分量</dt><dd><p>return tuple(self) == tuple(other)</p>
</dd>
<dt>def __abs__(self):</dt><dd><p>return sqrt(self.x**2 + self.y**2)</p>
</dd>
<dt>def __bool__(self):</dt><dd><p># 换bool 是因为直接的话可能就会返回真的元素那一个值，而不是TF
return bool(self.x or self.y)</p>
</dd>
<dt>def __format__(self, fmt_spec):</dt><dd><p>data = (format(c, fmt_spec) for c in self)
return ‘({0}, {1})’.format(<a href="#id456"><span class="problematic" id="id457">*</span></a>data)</p>
<aside class="system-message" id="id456">
<p class="system-message-title">System Message: WARNING/2 (<span class="docutils literal">C:\Users\zxouyang\CodeProjects\PRIVATE_P\io\docs\source\python/python_elegant.rst</span>, line 2521); <em><a href="#id457">backlink</a></em></p>
<p>Inline emphasis start-string without end-string.</p>
</aside>
</dd>
</dl>
</div></blockquote>
<p>v1, v2 = Vector(3,4), Vector(0,0)
v1
&gt;&gt;&gt; Vector(3.0, 4.0)
==========================================
print(v1)
&gt;&gt;&gt; (3.0, 4.0)
==============================
# &gt;&gt;&gt; abs(v1)=5.0
&gt;&gt;&gt; bool(v1)=True
====================================
# &gt;&gt;&gt; abs(v2)=0.0
bool(v2)
如果不是重写了bool 实例就会默认为真
——————————————
format(v1)  # default
default
—————-
format(v1, ‘.3f’)
小数点后三位的小数
——————–
format(v1, ‘0.1%’)
小数点后一位的百分数
———————-
<a href="#id458"><span class="problematic" id="id459">``</span></a><a href="#id460"><span class="problematic" id="id461">`</span></a></p>
<aside class="system-message" id="id458">
<p class="system-message-title">System Message: WARNING/2 (<span class="docutils literal">C:\Users\zxouyang\CodeProjects\PRIVATE_P\io\docs\source\python/python_elegant.rst</span>, line 2524); <em><a href="#id459">backlink</a></em></p>
<p>Inline literal start-string without end-string.</p>
</aside>
<aside class="system-message" id="id460">
<p class="system-message-title">System Message: WARNING/2 (<span class="docutils literal">C:\Users\zxouyang\CodeProjects\PRIVATE_P\io\docs\source\python/python_elegant.rst</span>, line 2524); <em><a href="#id461">backlink</a></em></p>
<p>Inline interpreted text or phrase reference start-string without end-string.</p>
</aside>
<p>&gt; &gt; general 向量
&gt;
&gt; 序列类型：不限元素个数，接受可迭代对象
&gt; 同时用 <cite>array</cite> 存，检查类型
&gt; 受保护类型
&gt; 个数太多用 <cite>…</cite> 表示</p>
<p><a href="#id462"><span class="problematic" id="id463">``</span></a><a href="#id464"><span class="problematic" id="id465">`</span></a>python
from array import array
import reprlib
import math
import numbers
import functools
import operator
import itertools</p>
<aside class="system-message" id="id462">
<p class="system-message-title">System Message: WARNING/2 (<span class="docutils literal">C:\Users\zxouyang\CodeProjects\PRIVATE_P\io\docs\source\python/python_elegant.rst</span>, line 2556); <em><a href="#id463">backlink</a></em></p>
<p>Inline literal start-string without end-string.</p>
</aside>
<aside class="system-message" id="id464">
<p class="system-message-title">System Message: WARNING/2 (<span class="docutils literal">C:\Users\zxouyang\CodeProjects\PRIVATE_P\io\docs\source\python/python_elegant.rst</span>, line 2556); <em><a href="#id465">backlink</a></em></p>
<p>Inline interpreted text or phrase reference start-string without end-string.</p>
</aside>
<dl>
<dt>class Vector():</dt><dd><p>type_code = ‘d’  # 什么类型数组
def __init__(self, components):  # 接受可迭代对象</p>
<aside class="system-message">
<p class="system-message-title">System Message: ERROR/3 (<span class="docutils literal">C:\Users\zxouyang\CodeProjects\PRIVATE_P\io\docs\source\python/python_elegant.rst</span>, line 2568)</p>
<p>Unexpected indentation.</p>
</aside>
<blockquote>
<div><p>self._components = array(self.type_code, components)</p>
</div></blockquote>
<dl>
<dt>def __iter__(self):</dt><dd><p>return iter(self._components)  # 委托给 array 的实现</p>
</dd>
<dt>def __len__(self):</dt><dd><p>return len(self._components)</p>
</dd>
<dt>def __getitem__(self, index):</dt><dd><p>cls = type(self)  # for init
if isinstance(index, slice):  # 切片</p>
<aside class="system-message">
<p class="system-message-title">System Message: ERROR/3 (<span class="docutils literal">C:\Users\zxouyang\CodeProjects\PRIVATE_P\io\docs\source\python/python_elegant.rst</span>, line 2579)</p>
<p>Unexpected indentation.</p>
</aside>
<blockquote>
<div><p>return cls(self._components[index])  # 构造序列类型</p>
</div></blockquote>
<aside class="system-message">
<p class="system-message-title">System Message: WARNING/2 (<span class="docutils literal">C:\Users\zxouyang\CodeProjects\PRIVATE_P\io\docs\source\python/python_elegant.rst</span>, line 2580)</p>
<p>Block quote ends without a blank line; unexpected unindent.</p>
</aside>
<dl class="simple">
<dt>elif isinstance(index, numbers.Integral):  # 单索引</dt><dd><p>return self._components[index]</p>
</dd>
<dt>else:</dt><dd><p>msg = f’{cls.__name__} indices must be integers’
raise TypeError(msg)</p>
</dd>
</dl>
</dd>
<dt>def __repr__(self):</dt><dd><p>components = reprlib.repr(self._components)  # return str
components = components[components.find(‘[’) : -1]  # 删去构造细节 array
# reprlib.repr(array(‘d’, [1.0, 2.0, 3.0, 4.0, 5.0, 6.0]))
# &gt;&gt;&gt; “array(‘d’, [1.0, 2.0, 3.0, 4.0, 5.0, …])”
# 同样的结果有两种方法：1 直接传 array 生成 str + find 2 变成 list 再传，不需要 find
# 选第一种是为了减少 生成数组时的复制成本。
return f’Vector({components})’  # 只显示 类型 &amp; 数值</p>
</dd>
<dt>def __str__(self):</dt><dd><p>return str(tuple(self))</p>
</dd>
<dt>def __bytes__(self):</dt><dd><p>return (bytes(ord(self.type_code)) + bytes(self._components))</p>
</dd>
<dt>def __hash__(self):</dt><dd><p>hashes = map(hash, self._components)
return functools.reduce(operator.xor, hashes, 0)</p>
</dd>
<dt>def __eq__(self, other):</dt><dd><p>return len(self) == len(other) and all (a==b for a, b in zip(self, other))</p>
</dd>
<dt>def __abs__(self):</dt><dd><p>return math.sqrt(sum(x ** 2 for x in self))</p>
</dd>
<dt>def __neg__(self):</dt><dd><p>return Vector(-x for x in self)</p>
</dd>
<dt>def __pos__(self):</dt><dd><p># return Vector(+x for x in self)  # Wrong
return Vector(self)</p>
</dd>
<dt>def __add__(self, other):</dt><dd><p>paris = itertools.zip_longest(self, other, fillvalue=0.0)
return Vector(map(add, pairs))</p>
</dd>
<dt>def __radd__(self, other):</dt><dd><p>return self + other  # 委托给 add 因为数值相加不讲求顺序</p>
</dd>
<dt>def __bool__(self):</dt><dd><p>return all (self)</p>
</dd>
</dl>
</dd>
</dl>
<p>v = Vector([1,2,3,4,5,6])
&gt;&gt;&gt; v=Vector([1.0, 2.0, 3.0, 4.0, 5.0, …])
==========================================================================================
v2 = Vector([0, 0 ,0, 0, 0 ,0])
bool(v2)
&gt;&gt;&gt; False
====================
v == v2
&gt;&gt;&gt; True
==================
v[:2]
Vector([1.0, 2.0])
v[‘a’]
&gt;&gt;&gt; TypeError: Vector indices must be integers
==============================================================================================
<a href="#id466"><span class="problematic" id="id467">``</span></a><a href="#id468"><span class="problematic" id="id469">`</span></a></p>
<aside class="system-message" id="id466">
<p class="system-message-title">System Message: WARNING/2 (<span class="docutils literal">C:\Users\zxouyang\CodeProjects\PRIVATE_P\io\docs\source\python/python_elegant.rst</span>, line 2628); <em><a href="#id467">backlink</a></em></p>
<p>Inline literal start-string without end-string.</p>
</aside>
<aside class="system-message" id="id468">
<p class="system-message-title">System Message: WARNING/2 (<span class="docutils literal">C:\Users\zxouyang\CodeProjects\PRIVATE_P\io\docs\source\python/python_elegant.rst</span>, line 2628); <em><a href="#id469">backlink</a></em></p>
<p>Inline interpreted text or phrase reference start-string without end-string.</p>
</aside>
<p>&gt; <cite>__missing__</cite>
&gt; 当字典里存放的键有英文 &amp; 数字时，为了保持一致性，在存入时希望将所有的键都转成 str。但是在查询的时候，为了方便查询，用数字做键也可以。<cite>d[13]=d[‘13’]</cite>，但是存的时候是 str，注定不会找到，所以在 <cite>__missing__</cite> 里进行再转 str 再查询。</p>
<p><a href="#id470"><span class="problematic" id="id471">``</span></a><a href="#id472"><span class="problematic" id="id473">`</span></a>python
from collections import UserDict
class StrKeyDict(UserDict):</p>
<aside class="system-message" id="id470">
<p class="system-message-title">System Message: WARNING/2 (<span class="docutils literal">C:\Users\zxouyang\CodeProjects\PRIVATE_P\io\docs\source\python/python_elegant.rst</span>, line 2648); <em><a href="#id471">backlink</a></em></p>
<p>Inline literal start-string without end-string.</p>
</aside>
<aside class="system-message" id="id472">
<p class="system-message-title">System Message: WARNING/2 (<span class="docutils literal">C:\Users\zxouyang\CodeProjects\PRIVATE_P\io\docs\source\python/python_elegant.rst</span>, line 2648); <em><a href="#id473">backlink</a></em></p>
<p>Inline interpreted text or phrase reference start-string without end-string.</p>
</aside>
<aside class="system-message">
<p class="system-message-title">System Message: ERROR/3 (<span class="docutils literal">C:\Users\zxouyang\CodeProjects\PRIVATE_P\io\docs\source\python/python_elegant.rst</span>, line 2651)</p>
<p>Unexpected indentation.</p>
</aside>
<blockquote>
<div><dl>
<dt>def __missing__(self, k):</dt><dd><dl class="simple">
<dt>if isinstance(k, str):</dt><dd><p>raise KeyError(key)</p>
</dd>
</dl>
<aside class="system-message">
<p class="system-message-title">System Message: WARNING/2 (<span class="docutils literal">C:\Users\zxouyang\CodeProjects\PRIVATE_P\io\docs\source\python/python_elegant.rst</span>, line 2654)</p>
<p>Definition list ends without a blank line; unexpected unindent.</p>
</aside>
<p>return self[str(key)]</p>
</dd>
</dl>
</div></blockquote>
<aside class="system-message">
<p class="system-message-title">System Message: WARNING/2 (<span class="docutils literal">C:\Users\zxouyang\CodeProjects\PRIVATE_P\io\docs\source\python/python_elegant.rst</span>, line 2655)</p>
<p>Block quote ends without a blank line; unexpected unindent.</p>
</aside>
<p><a href="#id474"><span class="problematic" id="id475">``</span></a><a href="#id476"><span class="problematic" id="id477">`</span></a></p>
<aside class="system-message" id="id474">
<p class="system-message-title">System Message: WARNING/2 (<span class="docutils literal">C:\Users\zxouyang\CodeProjects\PRIVATE_P\io\docs\source\python/python_elegant.rst</span>, line 2655); <em><a href="#id475">backlink</a></em></p>
<p>Inline literal start-string without end-string.</p>
</aside>
<aside class="system-message" id="id476">
<p class="system-message-title">System Message: WARNING/2 (<span class="docutils literal">C:\Users\zxouyang\CodeProjects\PRIVATE_P\io\docs\source\python/python_elegant.rst</span>, line 2655); <em><a href="#id477">backlink</a></em></p>
<p>Inline interpreted text or phrase reference start-string without end-string.</p>
</aside>
</section>
<section id="init">
<h4 id="init">init<a class="headerlink" href="#init" title="Link to this heading">¶</a></h4>
<p><cite>__init__(self, *args, **kwargs)</cite> ➡️ <cite>myclass = MyClass(params)</cite>
根据类**创建新实例**时，Python都会自动运行它。
不用显式地包含return语句，但Python自动返回一个表示 <cite>NewClass</cite> 的实例</p>
<p>!!! p “序列类型的构造最好接受可迭代的对象参数”</p>
<p>创建子类时，父类必须包含在当前文件中，且位于子类前面。子类必须在括号内指定父类的名称</p>
<ul class="simple">
<li><p><cite>super()</cite> 是一个特殊函数，帮助 Python 将父类和子类关联起来。这行代码让 Python 调用 <cite>NewClass</cite> 的父类的方法`__init__()`，让 <cite>NewClass</cite> 实例包含父类的所有属性</p></li>
</ul>
<dl>
<dt><a href="#id478"><span class="problematic" id="id479">``</span></a>` python</dt><dd><aside class="system-message" id="id478">
<p class="system-message-title">System Message: WARNING/2 (<span class="docutils literal">C:\Users\zxouyang\CodeProjects\PRIVATE_P\io\docs\source\python/python_elegant.rst</span>, line 2670); <em><a href="#id479">backlink</a></em></p>
<p>Inline literal start-string without end-string.</p>
</aside>
<p>def SuperClass():</p>
<blockquote>
<div><dl class="simple">
<dt>def __init__(self, attr1):</dt><dd><p>self.attr1 = attr1</p>
</dd>
</dl>
</div></blockquote>
<p>def NewClass(SuperClass):</p>
<blockquote>
<div><dl class="simple">
<dt>def __init__(self, attr1, attr2):</dt><dd><p>super().__init__(attr1)
self.attr2 = attr2</p>
</dd>
</dl>
</div></blockquote>
</dd>
</dl>
<aside class="system-message">
<p class="system-message-title">System Message: WARNING/2 (<span class="docutils literal">C:\Users\zxouyang\CodeProjects\PRIVATE_P\io\docs\source\python/python_elegant.rst</span>, line 2682)</p>
<p>Definition list ends without a blank line; unexpected unindent.</p>
</aside>
<p><a href="#id480"><span class="problematic" id="id481">``</span></a><a href="#id482"><span class="problematic" id="id483">`</span></a></p>
<aside class="system-message" id="id480">
<p class="system-message-title">System Message: WARNING/2 (<span class="docutils literal">C:\Users\zxouyang\CodeProjects\PRIVATE_P\io\docs\source\python/python_elegant.rst</span>, line 2682); <em><a href="#id481">backlink</a></em></p>
<p>Inline literal start-string without end-string.</p>
</aside>
<aside class="system-message" id="id482">
<p class="system-message-title">System Message: WARNING/2 (<span class="docutils literal">C:\Users\zxouyang\CodeProjects\PRIVATE_P\io\docs\source\python/python_elegant.rst</span>, line 2682); <em><a href="#id483">backlink</a></em></p>
<p>Inline interpreted text or phrase reference start-string without end-string.</p>
</aside>
<section id="id484">
<h5 id="id484">私有属性<a class="headerlink" href="#id484" title="Link to this heading">¶</a></h5>
<p>1️⃣ 遵循 python 的设定 <cite>__`两个前导线(尾巴没有或最多一个)标记属性为**私有的**。
==名称改写，name mangling==。为了避免意外访问(但是如果用户知道了私有属性也不能防止用户修改。) python 会自动把这种的属性名存入实例的 `__dict__</cite> 属性中，而且会在前面加上”一个下划线+类名“ <cite>_MyClass</cite> 变成 <cite>_MyClass__private</cite>。
2️⃣ 遵循私下约定俗成的设定 <a href="#id485"><span class="problematic" id="id486">`</span></a><a href="#id487"><span class="problematic" id="id488">_`</span></a>一个前导线。标记为**受保护的**
python 不会对这种的属性进行特殊处理。</p>
<aside class="system-message" id="id485">
<p class="system-message-title">System Message: WARNING/2 (<span class="docutils literal">C:\Users\zxouyang\CodeProjects\PRIVATE_P\io\docs\source\python/python_elegant.rst</span>, line 2687); <em><a href="#id486">backlink</a></em></p>
<p>Inline interpreted text or phrase reference start-string without end-string.</p>
</aside>
<aside class="system-message" id="id487">
<p class="system-message-title">System Message: WARNING/2 (<span class="docutils literal">C:\Users\zxouyang\CodeProjects\PRIVATE_P\io\docs\source\python/python_elegant.rst</span>, line 2687); <em><a href="#id488">backlink</a></em></p>
<p>Inline target start-string without end-string.</p>
</aside>
<p>!!! warning “其实不能实现真正的私有和不可变。”</p>
<p><a href="#id489"><span class="problematic" id="id490">``</span></a><a href="#id491"><span class="problematic" id="id492">`</span></a>python hl_lines=”4 10 12 14 16”
class Vector():</p>
<aside class="system-message" id="id489">
<p class="system-message-title">System Message: WARNING/2 (<span class="docutils literal">C:\Users\zxouyang\CodeProjects\PRIVATE_P\io\docs\source\python/python_elegant.rst</span>, line 2694); <em><a href="#id490">backlink</a></em></p>
<p>Inline literal start-string without end-string.</p>
</aside>
<aside class="system-message" id="id491">
<p class="system-message-title">System Message: WARNING/2 (<span class="docutils literal">C:\Users\zxouyang\CodeProjects\PRIVATE_P\io\docs\source\python/python_elegant.rst</span>, line 2694); <em><a href="#id492">backlink</a></em></p>
<p>Inline interpreted text or phrase reference start-string without end-string.</p>
</aside>
<aside class="system-message">
<p class="system-message-title">System Message: ERROR/3 (<span class="docutils literal">C:\Users\zxouyang\CodeProjects\PRIVATE_P\io\docs\source\python/python_elegant.rst</span>, line 2696)</p>
<p>Unexpected indentation.</p>
</aside>
<blockquote>
<div><dl class="simple">
<dt>def __init__(self, x, y):</dt><dd><p>self.__x = x  # 两个下划线标记为 私有属性
self.__y = y</p>
</dd>
</dl>
<p>@property  # 把读值方法标记为特性
def x(self):  # 读值方法名称 x(self) =&gt; 公开属性 self.x</p>
<aside class="system-message">
<p class="system-message-title">System Message: ERROR/3 (<span class="docutils literal">C:\Users\zxouyang\CodeProjects\PRIVATE_P\io\docs\source\python/python_elegant.rst</span>, line 2702)</p>
<p>Unexpected indentation.</p>
</aside>
<blockquote>
<div><p>return self.__x</p>
</div></blockquote>
<p>@property
def yy(self):  # 读值方法名称 yy(self) =&gt; 公开属性 self.yy</p>
<aside class="system-message">
<p class="system-message-title">System Message: ERROR/3 (<span class="docutils literal">C:\Users\zxouyang\CodeProjects\PRIVATE_P\io\docs\source\python/python_elegant.rst</span>, line 2706)</p>
<p>Unexpected indentation.</p>
</aside>
<blockquote>
<div><p>return self.__y</p>
</div></blockquote>
</div></blockquote>
<aside class="system-message">
<p class="system-message-title">System Message: WARNING/2 (<span class="docutils literal">C:\Users\zxouyang\CodeProjects\PRIVATE_P\io\docs\source\python/python_elegant.rst</span>, line 2707)</p>
<p>Block quote ends without a blank line; unexpected unindent.</p>
</aside>
<p>v1 = Vector(1,1)
v1.__dict__
&gt;&gt;&gt; {‘_Vector__x’: 1, ‘_Vector__y’: 1}
==============================================================================
v1._Vector__x = 2  # 知道之后故意修改
&gt;&gt;&gt; v1 = (2, 1)
==================================
<a href="#id493"><span class="problematic" id="id494">``</span></a><a href="#id495"><span class="problematic" id="id496">`</span></a></p>
<aside class="system-message" id="id493">
<p class="system-message-title">System Message: WARNING/2 (<span class="docutils literal">C:\Users\zxouyang\CodeProjects\PRIVATE_P\io\docs\source\python/python_elegant.rst</span>, line 2707); <em><a href="#id494">backlink</a></em></p>
<p>Inline literal start-string without end-string.</p>
</aside>
<aside class="system-message" id="id495">
<p class="system-message-title">System Message: WARNING/2 (<span class="docutils literal">C:\Users\zxouyang\CodeProjects\PRIVATE_P\io\docs\source\python/python_elegant.rst</span>, line 2707); <em><a href="#id496">backlink</a></em></p>
<p>Inline interpreted text or phrase reference start-string without end-string.</p>
</aside>
</section>
</section>
<section id="call">
<h4 id="call">call<a class="headerlink" href="#call" title="Link to this heading">¶</a></h4>
<p>!!! p “对象也可以成为函数类对象。实现 <cite>__call__</cite>”</p>
<p><a href="#id497"><span class="problematic" id="id498">``</span></a><a href="#id499"><span class="problematic" id="id500">`</span></a>python hl_lines=”8”
class NormClass():</p>
<aside class="system-message" id="id497">
<p class="system-message-title">System Message: WARNING/2 (<span class="docutils literal">C:\Users\zxouyang\CodeProjects\PRIVATE_P\io\docs\source\python/python_elegant.rst</span>, line 2721); <em><a href="#id498">backlink</a></em></p>
<p>Inline literal start-string without end-string.</p>
</aside>
<aside class="system-message" id="id499">
<p class="system-message-title">System Message: WARNING/2 (<span class="docutils literal">C:\Users\zxouyang\CodeProjects\PRIVATE_P\io\docs\source\python/python_elegant.rst</span>, line 2721); <em><a href="#id500">backlink</a></em></p>
<p>Inline interpreted text or phrase reference start-string without end-string.</p>
</aside>
<aside class="system-message">
<p class="system-message-title">System Message: ERROR/3 (<span class="docutils literal">C:\Users\zxouyang\CodeProjects\PRIVATE_P\io\docs\source\python/python_elegant.rst</span>, line 2723)</p>
<p>Unexpected indentation.</p>
</aside>
<blockquote>
<div><dl class="simple">
<dt>def __init__(self):</dt><dd><p>self.a = 1</p>
</dd>
</dl>
</div></blockquote>
<dl class="simple">
<dt>class FuncClass():</dt><dd><dl class="simple">
<dt>def __init__(self):</dt><dd><p>self.a = 1</p>
</dd>
<dt>def __call__(self):</dt><dd><p>self.a = 2</p>
</dd>
</dl>
</dd>
</dl>
<p>norm, func = NormClass(), FuncClass()
&gt;&gt;&gt; norm.a = norm.b =1
==============================================
callable(nor)
&gt;&gt;&gt; False
====================
callable(func)
&gt;&gt;&gt; True
==================
func()
&gt;&gt;&gt; func.a =2
============================
<a href="#id501"><span class="problematic" id="id502">``</span></a><a href="#id503"><span class="problematic" id="id504">`</span></a></p>
<aside class="system-message" id="id501">
<p class="system-message-title">System Message: WARNING/2 (<span class="docutils literal">C:\Users\zxouyang\CodeProjects\PRIVATE_P\io\docs\source\python/python_elegant.rst</span>, line 2732); <em><a href="#id502">backlink</a></em></p>
<p>Inline literal start-string without end-string.</p>
</aside>
<aside class="system-message" id="id503">
<p class="system-message-title">System Message: WARNING/2 (<span class="docutils literal">C:\Users\zxouyang\CodeProjects\PRIVATE_P\io\docs\source\python/python_elegant.rst</span>, line 2732); <em><a href="#id504">backlink</a></em></p>
<p>Inline interpreted text or phrase reference start-string without end-string.</p>
</aside>
</section>
<section id="getitem">
<h4 id="getitem">getitem<a class="headerlink" href="#getitem" title="Link to this heading">¶</a></h4>
<p>==切片 slice==。</p>
<p>如果切片传入不合格：一般返回 <cite>msg = f’{cls.__name__} indices must be integers’</cite></p>
<dl>
<dt>!!!  warning “如果单个索引，就会返回一个元素，<strong>元素类型</strong>。</dt><dd><dl class="simple">
<dt>一般切片之后，返回一个子序列，<strong>序列的类型</strong>”</dt><dd><p>如果有底层序列类型，可以委托，但不能单纯委托给具有序列协议的属性，需要 额外处理一下
如果没有底层的序列类型，可以用 <cite>slice</cite> 进行操作。（参见向量类型）</p>
</dd>
</dl>
</dd>
<dt>!!! p “切片原理”</dt><dd><p>单个切片返回 <cite>silce(start, stop, step)</cite>; 多个切片(有 <cite>,</cite> )返回 <cite>tuple(slice)</cite>
==slice==。内置类。有个属性 <cite>.indices(len)-&gt;(start, stop, stride)</cite> 给定长度 len 的序列，计算 S 表示的扩展切片的起始 &amp; 结尾 &amp; 步伐，使其不超出列表序列长度&amp;转换负数。</p>
<p><a href="#id505"><span class="problematic" id="id506">``</span></a><a href="#id507"><span class="problematic" id="id508">`</span></a>python hl_lines=”5 9 10”
class Seq():</p>
<aside class="system-message" id="id505">
<p class="system-message-title">System Message: WARNING/2 (<span class="docutils literal">C:\Users\zxouyang\CodeProjects\PRIVATE_P\io\docs\source\python/python_elegant.rst</span>, line 2762); <em><a href="#id506">backlink</a></em></p>
<p>Inline literal start-string without end-string.</p>
</aside>
<aside class="system-message" id="id507">
<p class="system-message-title">System Message: WARNING/2 (<span class="docutils literal">C:\Users\zxouyang\CodeProjects\PRIVATE_P\io\docs\source\python/python_elegant.rst</span>, line 2762); <em><a href="#id508">backlink</a></em></p>
<p>Inline interpreted text or phrase reference start-string without end-string.</p>
</aside>
<aside class="system-message">
<p class="system-message-title">System Message: ERROR/3 (<span class="docutils literal">C:\Users\zxouyang\CodeProjects\PRIVATE_P\io\docs\source\python/python_elegant.rst</span>, line 2764)</p>
<p>Unexpected indentation.</p>
</aside>
<blockquote>
<div><dl class="simple">
<dt>def __getitem__(self, index):</dt><dd><p>return index</p>
</dd>
</dl>
</div></blockquote>
<aside class="system-message">
<p class="system-message-title">System Message: WARNING/2 (<span class="docutils literal">C:\Users\zxouyang\CodeProjects\PRIVATE_P\io\docs\source\python/python_elegant.rst</span>, line 2766)</p>
<p>Block quote ends without a blank line; unexpected unindent.</p>
</aside>
<p>s = Seq()
# &gt;&gt;&gt; s[1] =1 单索引就是想要的索引
# &gt;&gt;&gt; s[:]=slice(None, None, None)
# &gt;&gt;&gt; s[1:4:2]=slice(1, 4, 2)
# &gt;&gt;&gt; s[1:4, 9]=(slice(1, 4, None), 9)
# &gt;&gt;&gt; s[1:4, 5:7]=(slice(1, 4, None), slice(5, 7, None))
slice(-3, None, None).indices(5)
# &gt;&gt;&gt; (2, 5, 1)
<a href="#id509"><span class="problematic" id="id510">``</span></a><a href="#id511"><span class="problematic" id="id512">`</span></a></p>
<aside class="system-message" id="id509">
<p class="system-message-title">System Message: WARNING/2 (<span class="docutils literal">C:\Users\zxouyang\CodeProjects\PRIVATE_P\io\docs\source\python/python_elegant.rst</span>, line 2766); <em><a href="#id510">backlink</a></em></p>
<p>Inline literal start-string without end-string.</p>
</aside>
<aside class="system-message" id="id511">
<p class="system-message-title">System Message: WARNING/2 (<span class="docutils literal">C:\Users\zxouyang\CodeProjects\PRIVATE_P\io\docs\source\python/python_elegant.rst</span>, line 2766); <em><a href="#id512">backlink</a></em></p>
<p>Inline interpreted text or phrase reference start-string without end-string.</p>
</aside>
</dd>
</dl>
<p>==动态存取==。</p>
<p>如果序列里有太多分量，为了方便访问，通过单字母访问前几个分量。</p>
<p>属性查找失败后，解释器会调用</p>
</section>
<section id="setitem">
<h4 id="setitem">setitem<a class="headerlink" href="#setitem" title="Link to this heading">¶</a></h4>
<p><cite>__setitem__(self, idx, new):</cite> ➡️ <cite>myclass[idx]=new</cite> &lt;u&gt;[]修改&lt;/u&gt;
在不破坏类的封装性的同时，对序列类进行修改。</p>
<p>随机打乱 shuffle 需要调转序列中元素的位置，即**可变协议**，需要`__setitem__`</p>
</section>
<section id="iterableobject">
<h4 id="iterableobject">IterableObject 可迭代对象<a class="headerlink" href="#iterableobject" title="Link to this heading">¶</a></h4>
<p>如果我们可以从中获取迭代器，则该对象称为 iterable 的。
只要对象是可迭代的, 就可以执行:defi:<cite>分解操作</cite></p>
<p><strong>IterableObject</strong> 必须实现两个特殊meth:</p>
<ol class="arabic">
<li><p>支持协议（二选一满足即可）
- 迭代协议，iteration protocol，<cite>__iter__(self)</cite>  并返回`self`
- 序列协议，sequence protocol <cite>__getitem__()</cite></p></li>
<li><p><cite>__next __(self)</cite>, 逐个访问容器中的元素。</p>
<blockquote>
<div><dl class="simple">
<dt>!!! danger “<cite>StopIteration</cite> 异常”</dt><dd><p>超出范围</p>
</dd>
</dl>
</div></blockquote>
</li>
</ol>
<p><a href="#id513"><span class="problematic" id="id514">``</span></a>` python hl_lines=”6 14 29 30 32 33”
class Users:</p>
<aside class="system-message" id="id513">
<p class="system-message-title">System Message: WARNING/2 (<span class="docutils literal">C:\Users\zxouyang\CodeProjects\PRIVATE_P\io\docs\source\python/python_elegant.rst</span>, line 2806); <em><a href="#id514">backlink</a></em></p>
<p>Inline literal start-string without end-string.</p>
</aside>
<aside class="system-message">
<p class="system-message-title">System Message: ERROR/3 (<span class="docutils literal">C:\Users\zxouyang\CodeProjects\PRIVATE_P\io\docs\source\python/python_elegant.rst</span>, line 2808)</p>
<p>Unexpected indentation.</p>
</aside>
<blockquote>
<div><dl>
<dt>def __init__(self, data):</dt><dd><p>self.data = data
self.index = 0</p>
</dd>
<dt>def __iter__(self):</dt><dd><p>“””
<a class="reference external" href="mailto:#%40summary">#<span>@</span>summary</a>: 初始化一个迭代器对象
<a class="reference external" href="mailto:#%40call">#<span>@</span>call</a>: iter(users)
通常只会返回self，它持有当前实例
“””
return self</p>
</dd>
<dt>def __next__(self):</dt><dd><p>“””
<a class="reference external" href="mailto:#%40summary">#<span>@</span>summary</a>: 逐个访问容器中的元素.
<a class="reference external" href="mailto:#%40call">#<span>@</span>call</a>: next(Iterator)
# for循环调用该方法，不断访问下一个，当没有的时候会 StopIteration Error
“””
if self.index &lt; len(self.data):</p>
<aside class="system-message">
<p class="system-message-title">System Message: ERROR/3 (<span class="docutils literal">C:\Users\zxouyang\CodeProjects\PRIVATE_P\io\docs\source\python/python_elegant.rst</span>, line 2827)</p>
<p>Unexpected indentation.</p>
</aside>
<blockquote>
<div><p>value = self.data[self.index]
self.index += 1
return value</p>
</div></blockquote>
<aside class="system-message">
<p class="system-message-title">System Message: WARNING/2 (<span class="docutils literal">C:\Users\zxouyang\CodeProjects\PRIVATE_P\io\docs\source\python/python_elegant.rst</span>, line 2830)</p>
<p>Block quote ends without a blank line; unexpected unindent.</p>
</aside>
<dl class="simple">
<dt>else:</dt><dd><p>raise StopIteration</p>
</dd>
</dl>
<aside class="system-message">
<p class="system-message-title">System Message: WARNING/2 (<span class="docutils literal">C:\Users\zxouyang\CodeProjects\PRIVATE_P\io\docs\source\python/python_elegant.rst</span>, line 2832)</p>
<p>Definition list ends without a blank line; unexpected unindent.</p>
</aside>
<p>…</p>
</dd>
</dl>
</div></blockquote>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">users</span> <span class="o">=</span> <span class="n">Users</span><span class="p">(</span><span class="n">data</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">users_iterator</span> <span class="o">=</span> <span class="nb">iter</span><span class="p">(</span><span class="n">users</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="k">for</span> <span class="n">user</span> <span class="ow">in</span> <span class="n">users_iterator</span><span class="p">:</span>
<span class="gp">&gt;&gt;&gt; </span>   <span class="o">...</span>
<span class="gp">&gt;&gt;&gt; </span><span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="n">users_iterator</span><span class="p">)):</span>
<span class="gp">&gt;&gt;&gt; </span>   <span class="n">user</span> <span class="o">=</span> <span class="nb">next</span><span class="p">(</span><span class="n">users_iterator</span><span class="p">)</span>
<span class="go">```</span>
</pre></div>
</div>
<dl>
<dt>!!! warning “可迭代对象的赋值”</dt><dd><p>不需要或者不定量的时候, <a href="#id515"><span class="problematic" id="id516">`</span></a><a href="#id517"><span class="problematic" id="id518">*</span></a>variables`可在开头也可在结尾</p>
<aside class="system-message" id="id515">
<p class="system-message-title">System Message: WARNING/2 (<span class="docutils literal">C:\Users\zxouyang\CodeProjects\PRIVATE_P\io\docs\source\python/python_elegant.rst</span>, line 2843); <em><a href="#id516">backlink</a></em></p>
<p>Inline interpreted text or phrase reference start-string without end-string.</p>
</aside>
<aside class="system-message" id="id517">
<p class="system-message-title">System Message: WARNING/2 (<span class="docutils literal">C:\Users\zxouyang\CodeProjects\PRIVATE_P\io\docs\source\python/python_elegant.rst</span>, line 2843); <em><a href="#id518">backlink</a></em></p>
<p>Inline emphasis start-string without end-string.</p>
</aside>
<p><code class="docutils literal notranslate"><span class="pre">`</span> <span class="pre">python</span>
<span class="pre">&gt;&gt;&gt;</span> <span class="pre">lst</span> <span class="pre">=</span> <span class="pre">[1,</span> <span class="pre">2,</span> <span class="pre">3,</span> <span class="pre">4]</span>
<span class="pre">&gt;&gt;&gt;</span> <span class="pre">*dontneed,</span> <span class="pre">a,</span> <span class="pre">b</span> <span class="pre">=</span> <span class="pre">lst</span>
<span class="pre">#</span> <span class="pre">dontneed=[1,</span> <span class="pre">2],</span> <span class="pre">a=3,</span> <span class="pre">b=4</span>
<span class="pre">`</span></code></p>
</dd>
</dl>
</section>
<section id="id519">
<h4 id="id519">字符串表现形式<a class="headerlink" href="#id519" title="Link to this heading">¶</a></h4>
<p>==字符串表现形式==。把一个对象用字符串的形式&lt;u&gt;表达出来&lt;/u&gt;。返回的应该是&lt;u&gt;字符串&lt;/u&gt;。</p>
<ul class="simple">
<li><p><cite>__repr__(self)</cite> ↔️ &lt;kbd&gt;控制台&lt;/kbd&gt;`myclass`  | <cite>repr(myclass)</cite></p></li>
</ul>
<aside class="system-message">
<p class="system-message-title">System Message: WARNING/2 (<span class="docutils literal">C:\Users\zxouyang\CodeProjects\PRIVATE_P\io\docs\source\python/python_elegant.rst</span>, line 2857)</p>
<p>Bullet list ends without a blank line; unexpected unindent.</p>
</aside>
<p>便于**开发者**理解。返回的字符串应该准确、无歧义、并且尽可能表达出如何用这个代码创建出这个被打印的对象。方便调试和记录日志
- <cite>__str__(self)</cite> ↔️ <cite>print(myclass)</cite> | <cite>str(myclass)</cite>
便于**用户**理解。
- <cite>__bytes__(self)</cite> ↔️ <cite>bytes()</cite>
获取对象的**字节序列**表现形式。
- <cite>__format__(self, format_spec)</cite> ↔️ <cite>format(obj, format_spec)</cite> | <cite>str.format()</cite>
<cite>format_spec</cite> 格式说明符号 <cite>‘.4f’</cite>
使用**特殊的格式**显示对象的字符串表现形式。
如果没有定义`__format__`, <cite>format()</cite> 会找`__str__`，但不能传入 format_spec，否则就会 <cite>TypeError</cite></p>
<p>!!! p “如果非要二者选其一来实现，<cite>__repr__</cite> 是更好的选择。因为当没有 <cite>__str__</cite> 时， 解释器会找 <cite>__repr__</cite>”</p>
<dl>
<dt>!!! quote “==格式规范微语言 format_spec==。指导格式的字符串。”</dt><dd><p>int ：<cite>bedoxXn</cite> ; float：<cite>eEfFgGcn</cite>； str：<cite>s</cite>
自定义格式代码尽量避免使用已有的，而不至于使别的读者困惑。
&gt; <cite>‘b’</cite> 二进制 int &amp; <cite>‘x’</cite> 十六进制 int
&gt; <cite>‘f’</cite> 小数形式 float <cite>‘.4f’</cite> &amp; <cite>‘%’</cite> 百分数形式 float</p>
</dd>
<dt>!!! p “关于显示上”</dt><dd><ul class="simple">
<li><p>如果分量太多，考虑用 <cite>…</cite> 表示截断部分，而不需要展开很多的数据占据视窗，同时提醒不止展现这几行.</p></li>
</ul>
<aside class="system-message">
<p class="system-message-title">System Message: WARNING/2 (<span class="docutils literal">C:\Users\zxouyang\CodeProjects\PRIVATE_P\io\docs\source\python/python_elegant.rst</span>, line 2877)</p>
<p>Bullet list ends without a blank line; unexpected unindent.</p>
</aside>
<p><cite>reprlib.repr(data)</cite> 超过6个元素，用省略号代替。用于生成大型结构或递归结构的**安全表现形式**，限制字符串输出长度。</p>
<p><code class="docutils literal notranslate"><span class="pre">`python</span>
<span class="pre">import</span> <span class="pre">reprlib</span>
<span class="pre">reprlib.repr([1,2,3,4,5,6,7,8])</span>
<span class="pre">#</span> <span class="pre">&gt;&gt;&gt;</span> <span class="pre">'[1,</span> <span class="pre">2,</span> <span class="pre">3,</span> <span class="pre">4,</span> <span class="pre">5,</span> <span class="pre">6,</span> <span class="pre">...]'</span>
<span class="pre">reprlib.repr([1,2,3])</span>
<span class="pre">#</span> <span class="pre">&gt;&gt;&gt;</span> <span class="pre">'[1,</span> <span class="pre">2,</span> <span class="pre">3]'</span>
<span class="pre">`</span></code>
- 重点是在对象，而不是构造细节。在显示上可以简化，只出现内容。
&gt; <cite>Vector(1, 2)</cite> &amp; <cite>Vector(array(‘d’, [1, 2]))</cite> array 是实现细节，不需要展示以免复杂。</p>
</dd>
</dl>
<p>&gt; 二维向量</p>
<p><a href="#id520"><span class="problematic" id="id521">``</span></a><a href="#id522"><span class="problematic" id="id523">`</span></a>python
class Vector():</p>
<aside class="system-message" id="id520">
<p class="system-message-title">System Message: WARNING/2 (<span class="docutils literal">C:\Users\zxouyang\CodeProjects\PRIVATE_P\io\docs\source\python/python_elegant.rst</span>, line 2891); <em><a href="#id521">backlink</a></em></p>
<p>Inline literal start-string without end-string.</p>
</aside>
<aside class="system-message" id="id522">
<p class="system-message-title">System Message: WARNING/2 (<span class="docutils literal">C:\Users\zxouyang\CodeProjects\PRIVATE_P\io\docs\source\python/python_elegant.rst</span>, line 2891); <em><a href="#id523">backlink</a></em></p>
<p>Inline interpreted text or phrase reference start-string without end-string.</p>
</aside>
<aside class="system-message">
<p class="system-message-title">System Message: ERROR/3 (<span class="docutils literal">C:\Users\zxouyang\CodeProjects\PRIVATE_P\io\docs\source\python/python_elegant.rst</span>, line 2893)</p>
<p>Unexpected indentation.</p>
</aside>
<blockquote>
<div><p>…
def __abs__(self):</p>
<aside class="system-message">
<p class="system-message-title">System Message: ERROR/3 (<span class="docutils literal">C:\Users\zxouyang\CodeProjects\PRIVATE_P\io\docs\source\python/python_elegant.rst</span>, line 2895)</p>
<p>Unexpected indentation.</p>
</aside>
<blockquote>
<div><p>“”” 模 “””</p>
</div></blockquote>
<aside class="system-message">
<p class="system-message-title">System Message: WARNING/2 (<span class="docutils literal">C:\Users\zxouyang\CodeProjects\PRIVATE_P\io\docs\source\python/python_elegant.rst</span>, line 2896)</p>
<p>Block quote ends without a blank line; unexpected unindent.</p>
</aside>
<dl>
<dt>def __angle__(self):</dt><dd><p>“”” 角度 “””</p>
</dd>
<dt>def __format__(self, fmt_spec=’’):</dt><dd><dl class="simple">
<dt>if fmt_spc.endswith(‘p’):  # 极坐标</dt><dd><p>fmt_spec = fmt_spec[:-1]
coords = (abs(self), self.angle())
outer_fmt = ‘&lt;{},{}&gt;’</p>
</dd>
<dt>else:  # 直角坐标</dt><dd><p>coords = self
outer_fmt = ‘({},{})’</p>
</dd>
</dl>
<aside class="system-message">
<p class="system-message-title">System Message: WARNING/2 (<span class="docutils literal">C:\Users\zxouyang\CodeProjects\PRIVATE_P\io\docs\source\python/python_elegant.rst</span>, line 2906)</p>
<p>Definition list ends without a blank line; unexpected unindent.</p>
</aside>
<p>data = (format(item, fmt_spec) for item in coords)
return outer_fmt.format(<a href="#id524"><span class="problematic" id="id525">*</span></a>data)</p>
<aside class="system-message" id="id524">
<p class="system-message-title">System Message: WARNING/2 (<span class="docutils literal">C:\Users\zxouyang\CodeProjects\PRIVATE_P\io\docs\source\python/python_elegant.rst</span>, line 2906); <em><a href="#id525">backlink</a></em></p>
<p>Inline emphasis start-string without end-string.</p>
</aside>
</dd>
</dl>
</div></blockquote>
<p>v = Vector(1, 1)
format(v, ‘.3ep’)
&gt;&gt;&gt; ‘&lt;1.414e+00, 7.854e-01&gt;’
==========================================================
format(v, ‘.5fp’)
&gt;&gt;&gt; ‘&lt;1.41421, 0.78540&gt;’
==================================================
<a href="#id526"><span class="problematic" id="id527">``</span></a><a href="#id528"><span class="problematic" id="id529">`</span></a></p>
<aside class="system-message" id="id526">
<p class="system-message-title">System Message: WARNING/2 (<span class="docutils literal">C:\Users\zxouyang\CodeProjects\PRIVATE_P\io\docs\source\python/python_elegant.rst</span>, line 2909); <em><a href="#id527">backlink</a></em></p>
<p>Inline literal start-string without end-string.</p>
</aside>
<aside class="system-message" id="id528">
<p class="system-message-title">System Message: WARNING/2 (<span class="docutils literal">C:\Users\zxouyang\CodeProjects\PRIVATE_P\io\docs\source\python/python_elegant.rst</span>, line 2909); <em><a href="#id529">backlink</a></em></p>
<p>Inline interpreted text or phrase reference start-string without end-string.</p>
</aside>
</section>
<section id="id530">
<h4 id="id530">重载运算符<a class="headerlink" href="#id530" title="Link to this heading">¶</a></h4>
<p>重载运算符是为了让自定义对象使用 中缀运算符 <cite>+ |</cite> &amp; 一元运算符 <cite>- ~</cite></p>
<dl class="simple">
<dt>!!! p “中缀运算符的基本原则是**创建并返回类型合适的一个新的对象，而不改变操作对象本身**。只有增量赋值可能修改第一个操作对象</dt><dd><p>不能重载内置类型的运算符
不能新建运算符，只能重载。
不能重载 <cite>is and or not</cite>
当序列进行按元素运算，要处理序列**长度不一的情况**。（迭代多个可迭代对象`itertools.zip_longest(.., fillvalue=None)`）”</p>
</dd>
</dl>
<p><a href="#id841"><span class="problematic" id="id842">|magic|运算符|meaning|</span></a>
<a href="#id843"><span class="problematic" id="id844">|--|</span></a>–<a href="#id845"><span class="problematic" id="id846">|---|</span></a>
<a href="#id847"><span class="problematic" id="id848">|`__add__(self, other)`|`a+b`|相加
序列一般**拼接**|</span></a>
<a href="#id849"><span class="problematic" id="id850">|`__mul__(self, other)`|`a*b`|标量积相乘
序列一般**复制**|</span></a>
<a href="#id851"><span class="problematic" id="id852">|`__neg__(self)`|`-a`|一元取反|</span></a>
<a href="#id853"><span class="problematic" id="id854">|`__pos__(self)`|`+a`|一元取正 通常 `x==+x`|</span></a>
<a href="#id855"><span class="problematic" id="id856">|`__invert__(self)`|`~a`|对整数按位取反|</span></a></p>
<dl class="simple">
<dt>!!! p “<cite>i</cite> 就地运算，增量赋值可能修改第一个操作对象</dt><dd><dl class="simple">
<dt><cite>r</cite> 反向运算，右位”</dt><dd><p><cite>__radd___</cite> 是 <cite>__add__</cite> 的 反射 reflected | 反向 reversed
&gt; <cite>__add__(a,b) = a+b</cite> 左位 &amp; <cite>__iadd__(a,b)= a+=b</cite> &amp; <cite>__radd__(a,b) = b+a</cite> 右位</p>
</dd>
</dl>
</dd>
</dl>
<p>特殊的分配机制。</p>
<p>![](./pics/operate_1.jpeg)</p>
<p>算 <cite>a+b</cite>，a左b右。先找 a 有没有左加b(1.有没有左加；2.能不能左加b)，不能的话再找b有没有右加a(1.有没有右加；2.能不能右加a)</p>
<dl class="simple">
<dt>!!! quote “”</dt><dd><p><cite>x==+x</cite> 的特殊情况:当精度不一样的时候会 <cite>False</cite></p>
</dd>
</dl>
</section>
<section id="hash">
<h4 id="hash">hash<a class="headerlink" href="#hash" title="Link to this heading">¶</a></h4>
<dl class="simple">
<dt>!!! quote “”</dt><dd><p>==可散列类型 hashable==。如果一个对象是可散列的，那么在这个对象**生命周期**中，它的散列值是不变的，而且这个对象需要实现 <cite>.__hash__()</cite> &amp; <cite>.__eq__()</cite> 。因为`hash()` 方法可以作用于对象上，并且如果两个可散列的对象是相等，那么散列值一定是一样。</p>
</dd>
</dl>
<p><strong>目的</strong>：
对象不可修改。将自定义类里的 <cite>__init__</cite> 里的元素设为&lt;u&gt;只读模式&lt;/u&gt;
散列值唯一。推荐使用位运算符异或 <cite>^</cite> 混合个分量的散列值</p>
<ol class="arabic simple">
<li><p><cite>__</cite></p></li>
</ol>
<p><a href="#id531"><span class="problematic" id="id532">``</span></a>` python hl_lines=”17”
class Vector():</p>
<aside class="system-message" id="id531">
<p class="system-message-title">System Message: WARNING/2 (<span class="docutils literal">C:\Users\zxouyang\CodeProjects\PRIVATE_P\io\docs\source\python/python_elegant.rst</span>, line 2965); <em><a href="#id532">backlink</a></em></p>
<p>Inline literal start-string without end-string.</p>
</aside>
<aside class="system-message">
<p class="system-message-title">System Message: ERROR/3 (<span class="docutils literal">C:\Users\zxouyang\CodeProjects\PRIVATE_P\io\docs\source\python/python_elegant.rst</span>, line 2967)</p>
<p>Unexpected indentation.</p>
</aside>
<blockquote>
<div><dl class="simple">
<dt>def __init__(self, x, y):</dt><dd><p>self.__x = x  # 两个下划线标记为 私有属性
self.__y = y</p>
</dd>
</dl>
<p>@property  # 把读值方法标记为特性
def x(self):  # 读值方法名称 x(self) =&gt; 公开属性 self.x</p>
<aside class="system-message">
<p class="system-message-title">System Message: ERROR/3 (<span class="docutils literal">C:\Users\zxouyang\CodeProjects\PRIVATE_P\io\docs\source\python/python_elegant.rst</span>, line 2973)</p>
<p>Unexpected indentation.</p>
</aside>
<blockquote>
<div><p>return self.__x</p>
</div></blockquote>
<p>@property
def yy(self):  # 读值方法名称 yy(self) =&gt; 公开属性 self.yy</p>
<aside class="system-message">
<p class="system-message-title">System Message: ERROR/3 (<span class="docutils literal">C:\Users\zxouyang\CodeProjects\PRIVATE_P\io\docs\source\python/python_elegant.rst</span>, line 2977)</p>
<p>Unexpected indentation.</p>
</aside>
<blockquote>
<div><p>return self.__y</p>
</div></blockquote>
<dl class="simple">
<dt>def __iter__(self):</dt><dd><p>return (i for i in (self.x, self.yy))</p>
</dd>
<dt>def __hash__(self):  # 异或 ‘^’ 混合个分量的散列值</dt><dd><p>return hash(self.x) ^ hash(self.yy)</p>
</dd>
<dt>def __eq__(self, other):</dt><dd><p>return tuple(self) == tuple(other)</p>
</dd>
<dt>def __repr__(self):</dt><dd><p>return f’({self.x}, {self.yy})’</p>
</dd>
</dl>
</div></blockquote>
<p>set([Vector(1,1), Vector(1,1), Vector(1,2)])
&gt;&gt;&gt; {(1, 1), (1, 2)}
==========================================
<a href="#id533"><span class="problematic" id="id534">``</span></a><a href="#id535"><span class="problematic" id="id536">`</span></a></p>
<aside class="system-message" id="id533">
<p class="system-message-title">System Message: WARNING/2 (<span class="docutils literal">C:\Users\zxouyang\CodeProjects\PRIVATE_P\io\docs\source\python/python_elegant.rst</span>, line 2991); <em><a href="#id534">backlink</a></em></p>
<p>Inline literal start-string without end-string.</p>
</aside>
<aside class="system-message" id="id535">
<p class="system-message-title">System Message: WARNING/2 (<span class="docutils literal">C:\Users\zxouyang\CodeProjects\PRIVATE_P\io\docs\source\python/python_elegant.rst</span>, line 2991); <em><a href="#id536">backlink</a></em></p>
<p>Inline interpreted text or phrase reference start-string without end-string.</p>
</aside>
</section>
<section id="id537">
<h4 id="id537">一些优化<a class="headerlink" href="#id537" title="Link to this heading">¶</a></h4>
<p>!!! p “如果数百万个数值，使用 numpy”</p>
<p><cite>__slots__</cite> 节省空间，建议储存数百万（而不是几千）使用，而且内存严重不足时。
为提高访问速度，python 在实例中将属性存进 <strong>dict</strong>，但消耗大量内存。使用 <cite>__slots__</cite>，python 在实例中将属性存进 <strong>tuple</strong>， 节省内存。（有点像 namedtuple，告诉 python 这个类中所有的实例属性都在这里）</p>
<p>!!! warning 【副作用】在类中定义了 <cite>__slots__</cite> 外，实例中不允许 <cite>__slots__</cite> 存储名称以外的属性。</p>
<p><a href="#id538"><span class="problematic" id="id539">``</span></a><a href="#id540"><span class="problematic" id="id541">`</span></a>python
class Vector():</p>
<aside class="system-message" id="id538">
<p class="system-message-title">System Message: WARNING/2 (<span class="docutils literal">C:\Users\zxouyang\CodeProjects\PRIVATE_P\io\docs\source\python/python_elegant.rst</span>, line 3006); <em><a href="#id539">backlink</a></em></p>
<p>Inline literal start-string without end-string.</p>
</aside>
<aside class="system-message" id="id540">
<p class="system-message-title">System Message: WARNING/2 (<span class="docutils literal">C:\Users\zxouyang\CodeProjects\PRIVATE_P\io\docs\source\python/python_elegant.rst</span>, line 3006); <em><a href="#id541">backlink</a></em></p>
<p>Inline interpreted text or phrase reference start-string without end-string.</p>
</aside>
<aside class="system-message">
<p class="system-message-title">System Message: ERROR/3 (<span class="docutils literal">C:\Users\zxouyang\CodeProjects\PRIVATE_P\io\docs\source\python/python_elegant.rst</span>, line 3008)</p>
<p>Unexpected indentation.</p>
</aside>
<blockquote>
<div><p>__slots__ = (‘x’, ‘y’)  # 由字符串组成的可迭代对象，各个元素表示属性
# __slots__ = (‘__x’, ‘__y’)</p>
<dl class="simple">
<dt>def __init__(self, x, y):</dt><dd><p>…</p>
</dd>
</dl>
</div></blockquote>
<aside class="system-message">
<p class="system-message-title">System Message: WARNING/2 (<span class="docutils literal">C:\Users\zxouyang\CodeProjects\PRIVATE_P\io\docs\source\python/python_elegant.rst</span>, line 3013)</p>
<p>Block quote ends without a blank line; unexpected unindent.</p>
</aside>
<p><a href="#id542"><span class="problematic" id="id543">``</span></a><a href="#id544"><span class="problematic" id="id545">`</span></a></p>
<aside class="system-message" id="id542">
<p class="system-message-title">System Message: WARNING/2 (<span class="docutils literal">C:\Users\zxouyang\CodeProjects\PRIVATE_P\io\docs\source\python/python_elegant.rst</span>, line 3013); <em><a href="#id543">backlink</a></em></p>
<p>Inline literal start-string without end-string.</p>
</aside>
<aside class="system-message" id="id544">
<p class="system-message-title">System Message: WARNING/2 (<span class="docutils literal">C:\Users\zxouyang\CodeProjects\PRIVATE_P\io\docs\source\python/python_elegant.rst</span>, line 3013); <em><a href="#id545">backlink</a></em></p>
<p>Inline interpreted text or phrase reference start-string without end-string.</p>
</aside>
</section>
</section>
</section>
<section id="id546">
<h2 id="id546">重写<a class="headerlink" href="#id546" title="Link to this heading">¶</a></h2>
<p>对于父类的方法，只要它不符合子类模拟的实物的行为，都可对其进行重写。为此，可在子类中定义一个这样的方法，即它与要重写的父类方法同名。这样，Python将不会考虑这个父类方法，而只关注你在子类中定义的相应方法</p>
</section>
<section id="re">
<h2 id="re">Re<a class="headerlink" href="#re" title="Link to this heading">¶</a></h2>
<ul class="simple">
<li><dl class="simple">
<dt><cite>flags=0</cite> 用于控制正则表达式的匹配方式，如：是否区分大小写，多行匹配等等</dt><dd><ul>
<li><p>re.I 忽略大小写</p></li>
<li><p>re.X 为了增加可读性，忽略规则表达式中的空白和注释，并允许使用 ’#’ 来引导一个注释。这样可以让你把规则写得更美观些。</p></li>
</ul>
</dd>
</dl>
</li>
</ul>
<p><a href="#id857"><span class="problematic" id="id858">|symbol|meaning|special usage|</span></a>
<a href="#id859"><span class="problematic" id="id860">|--|</span></a>–<a href="#id861"><span class="problematic" id="id862">|--|</span></a>
<a href="#id863"><span class="problematic" id="id864">|`\D`|任何非十进制数字的字符|`re.sub(r'\D', '', string)` 只保留十进制数字|</span></a>
<a href="#id865"><span class="problematic" id="id866">|`[0-9-]+`|0-9 还有`-`号, `+`：不止一个|`re.match('[0-9-]+', string)` 提取的仅包含数字和-的电话号码|</span></a></p>
<hr class="docutils"/>
<ul class="simple">
<li><dl class="simple">
<dt><cite>re.match(pattern, string, flags=0)</cite></dt><dd><ul>
<li><p>从字符串的**起始位置**匹配一个模式</p></li>
<li><dl class="simple">
<dt>成功 <cite>return &lt;re.Match object; span=(0, end_idx), match=pattern&gt;</cite></dt><dd><ul>
<li><p><cite>&lt;re.Match object&gt;.group()</cite> 返回正则匹配的字符串</p></li>
<li><p><cite>&lt;re.Match object&gt;.start()</cite>, <cite>&lt;re.Match object&gt;.end()</cite></p></li>
<li><p><cite>&lt;re.Match object&gt;.span()</cite>: (start, end)</p></li>
<li><p>不是起始位置匹配成功 <cite>return None</cite></p></li>
</ul>
</dd>
</dl>
</li>
</ul>
</dd>
</dl>
</li>
<li><dl class="simple">
<dt><cite>re.sub(pattern, repl, string, count=0, flags=0)</cite></dt><dd><ul>
<li><p><cite>count=0</cite>: 模式匹配后替换的最大次数，默认 0 表示替换所有的匹配。</p></li>
</ul>
</dd>
</dl>
</li>
</ul>
</section>
<section id="id547">
<h2 id="id547">用户交互<a class="headerlink" href="#id547" title="Link to this heading">¶</a></h2>
<section id="input">
<h3 id="input">Input<a class="headerlink" href="#input" title="Link to this heading">¶</a></h3>
<p>!!! danger “input 接收后字符串性质”</p>
<p><code class="docutils literal notranslate"><span class="pre">`python</span>
<span class="pre">a</span> <span class="pre">=</span> <span class="pre">input('plz</span> <span class="pre">input</span> <span class="pre">a</span> <span class="pre">number:')</span>
<span class="pre">&gt;&gt;&gt;</span> <span class="pre">plz</span> <span class="pre">input</span> <span class="pre">a</span> <span class="pre">number:</span> <span class="pre">9</span>
<span class="pre">====================================================</span>
<span class="pre">#</span> <span class="pre">&gt;&gt;&gt;</span> <span class="pre">a</span> <span class="pre">=</span> <span class="pre">'9'</span>
<span class="pre">`</span></code></p>
<section id="id548">
<h4 id="id548">读照片<a class="headerlink" href="#id548" title="Link to this heading">¶</a></h4>
<p><code class="docutils literal notranslate"><span class="pre">`</span> <span class="pre">python</span>
<span class="pre">from</span> <span class="pre">PIL</span> <span class="pre">import</span> <span class="pre">Image</span>
<span class="pre">img</span> <span class="pre">=</span> <span class="pre">Image.open(image_path)</span> <span class="pre">#</span> <span class="pre">PIL.....</span>
<span class="pre">`</span></code></p>
</section>
</section>
<section id="output">
<h3 id="output">output  格式化输出<a class="headerlink" href="#output" title="Link to this heading">¶</a></h3>
<ul>
<li><p>print</p>
<blockquote>
<div><ul class="simple">
<li><p><cite>end = ‘n’</cite></p></li>
<li><p><cite>sep = ‘’</cite></p></li>
</ul>
<p><code class="docutils literal notranslate"><span class="pre">`python</span>
<span class="pre">print("aaaa",end='')</span>
<span class="pre">print("bbbb",end='&amp;')</span>
<span class="pre">print("cccc",end='@')</span>
<span class="pre">#</span> <span class="pre">&gt;&gt;&gt;</span> <span class="pre">aaaabbbb&amp;cccc@</span>
<span class="pre">print('a',</span> <span class="pre">'b',</span> <span class="pre">sep='__',</span> <span class="pre">end</span> <span class="pre">=</span> <span class="pre">'@')</span>
<span class="pre">#</span> <span class="pre">&gt;&gt;&gt;</span> <span class="pre">a__b@</span>
<span class="pre">`</span></code></p>
</div></blockquote>
</li>
<li><p>str.format</p></li>
<li><p>f-string</p></li>
</ul>
<aside class="system-message">
<p class="system-message-title">System Message: WARNING/2 (<span class="docutils literal">C:\Users\zxouyang\CodeProjects\PRIVATE_P\io\docs\source\python/python_elegant.rst</span>, line 3087)</p>
<p>Bullet list ends without a blank line; unexpected unindent.</p>
</aside>
<p>Python3.6 新增了一种 f-字符串格式化，也可以写成print(f”训练数据集的长度为:{train_data_size}”)</p>
</section>
</section>
<section id="id549">
<h2 id="id549">读写文件<a class="headerlink" href="#id549" title="Link to this heading">¶</a></h2>
<section id="id550">
<h3 id="id550">文件路径<a class="headerlink" href="#id550" title="Link to this heading">¶</a></h3>
<p><code class="docutils literal notranslate"><span class="pre">`python</span>
<span class="pre">import</span> <span class="pre">os</span>
<span class="pre">files_lst</span> <span class="pre">=</span> <span class="pre">os.listdir('dirctory_path')</span>
<span class="pre">`</span></code></p>
<p>文件内容分类</p>
<p>文件操作分类</p>
<p>||`r`只读|`w`只写|`a`只追加写|`+`|
<a href="#id867"><span class="problematic" id="id868">|--|</span></a>–<a href="#id869"><span class="problematic" id="id870">|--|</span></a>–<a href="#id871"><span class="problematic" id="id872">|--|</span></a>
<a href="#id873"><span class="problematic" id="id874">|文件不存在|❌||||</span></a>
<a href="#id875"><span class="problematic" id="id876">|指针|开头||||</span></a></p>
<dl class="simple">
<dt>!!! danger “留意指针”</dt><dd><p>写完再读就会读不出东西</p>
</dd>
</dl>
</section>
<section id="txt">
<h3 id="txt">txt<a class="headerlink" href="#txt" title="Link to this heading">¶</a></h3>
<p>read(), readline(), readlines()</p>
<p>||`read(limit)`
limit:int 限制读的内存字节|`readline()`|`readlines()`|
<a href="#id877"><span class="problematic" id="id878">|--|</span></a>–<a href="#id879"><span class="problematic" id="id880">|--|</span></a>–|
<a href="#id881"><span class="problematic" id="id882">|读取|全部|逐行|全部|</span></a>
<a href="#id883"><span class="problematic" id="id884">|返回|str|str|list|</span></a>
<a href="#id885"><span class="problematic" id="id886">|每一行分离|❌|✔|✔|</span></a>
<a href="#id887"><span class="problematic" id="id888">|notes|全部读取的需要考虑内存|||</span></a>
<a href="#id889"><span class="problematic" id="id890">|^|`readlines()`比`readline()`快|||</span></a></p>
<p><a href="#id551"><span class="problematic" id="id552">``</span></a><a href="#id553"><span class="problematic" id="id554">`</span></a>python hl_lines=”8 13 20”
“””1.txt
aaa
bbb</p>
<aside class="system-message" id="id551">
<p class="system-message-title">System Message: WARNING/2 (<span class="docutils literal">C:\Users\zxouyang\CodeProjects\PRIVATE_P\io\docs\source\python/python_elegant.rst</span>, line 3126); <em><a href="#id552">backlink</a></em></p>
<p>Inline literal start-string without end-string.</p>
</aside>
<aside class="system-message" id="id553">
<p class="system-message-title">System Message: WARNING/2 (<span class="docutils literal">C:\Users\zxouyang\CodeProjects\PRIVATE_P\io\docs\source\python/python_elegant.rst</span>, line 3126); <em><a href="#id554">backlink</a></em></p>
<p>Inline interpreted text or phrase reference start-string without end-string.</p>
</aside>
<p>“””
with open(‘1.txt’, ‘r’, encoding=’utf-8’) as f:</p>
<aside class="system-message">
<p class="system-message-title">System Message: ERROR/3 (<span class="docutils literal">C:\Users\zxouyang\CodeProjects\PRIVATE_P\io\docs\source\python/python_elegant.rst</span>, line 3134)</p>
<p>Unexpected indentation.</p>
</aside>
<blockquote>
<div><p>res = f.read()  # 读全部</p>
</div></blockquote>
<aside class="system-message">
<p class="system-message-title">System Message: WARNING/2 (<span class="docutils literal">C:\Users\zxouyang\CodeProjects\PRIVATE_P\io\docs\source\python/python_elegant.rst</span>, line 3135)</p>
<p>Block quote ends without a blank line; unexpected unindent.</p>
</aside>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="s1">'aaa</span><span class="se">\n</span><span class="s1">bbb</span><span class="se">\n\n</span><span class="s1">'</span>
<span class="go">======================================</span>
</pre></div>
</div>
<dl>
<dt>with open(‘1.txt’, ‘r’, encoding=’utf-8’) as f:</dt><dd><p>res = []
line =  f.readline()  # 第一行
while line is not None and line != ‘’:</p>
<aside class="system-message">
<p class="system-message-title">System Message: ERROR/3 (<span class="docutils literal">C:\Users\zxouyang\CodeProjects\PRIVATE_P\io\docs\source\python/python_elegant.rst</span>, line 3142)</p>
<p>Unexpected indentation.</p>
</aside>
<blockquote>
<div><p>res.append(line)
line =  f.readline()  # 逐行读取</p>
</div></blockquote>
</dd>
</dl>
<aside class="system-message">
<p class="system-message-title">System Message: WARNING/2 (<span class="docutils literal">C:\Users\zxouyang\CodeProjects\PRIVATE_P\io\docs\source\python/python_elegant.rst</span>, line 3144)</p>
<p>Definition list ends without a blank line; unexpected unindent.</p>
</aside>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="p">[</span><span class="s1">'aaa</span><span class="se">\n</span><span class="s1">'</span><span class="p">,</span> <span class="s1">'bbb</span><span class="se">\n</span><span class="s1">'</span><span class="p">,</span> <span class="s1">'</span><span class="se">\n</span><span class="s1">'</span><span class="p">]</span>
<span class="go">==========================================================</span>
</pre></div>
</div>
<dl class="simple">
<dt>with open(‘1.txt’, ‘r’, encoding=’utf-8’) as f:</dt><dd><p>res = f.readlines()</p>
</dd>
</dl>
<aside class="system-message">
<p class="system-message-title">System Message: WARNING/2 (<span class="docutils literal">C:\Users\zxouyang\CodeProjects\PRIVATE_P\io\docs\source\python/python_elegant.rst</span>, line 3149)</p>
<p>Definition list ends without a blank line; unexpected unindent.</p>
</aside>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="p">[</span><span class="s1">'aaa</span><span class="se">\n</span><span class="s1">'</span><span class="p">,</span> <span class="s1">'bbb</span><span class="se">\n</span><span class="s1">'</span><span class="p">,</span> <span class="s1">'</span><span class="se">\n</span><span class="s1">'</span><span class="p">]</span>
<span class="go">==========================================================</span>
<span class="go">```</span>
</pre></div>
</div>
</section>
<section id="json">
<h3 id="json">json<a class="headerlink" href="#json" title="Link to this heading">¶</a></h3>
<p><a href="#id555"><span class="problematic" id="id556">``</span></a>` python
import json
try:</p>
<aside class="system-message" id="id555">
<p class="system-message-title">System Message: WARNING/2 (<span class="docutils literal">C:\Users\zxouyang\CodeProjects\PRIVATE_P\io\docs\source\python/python_elegant.rst</span>, line 3156); <em><a href="#id556">backlink</a></em></p>
<p>Inline literal start-string without end-string.</p>
</aside>
<aside class="system-message">
<p class="system-message-title">System Message: ERROR/3 (<span class="docutils literal">C:\Users\zxouyang\CodeProjects\PRIVATE_P\io\docs\source\python/python_elegant.rst</span>, line 3159)</p>
<p>Unexpected indentation.</p>
</aside>
<blockquote>
<div><dl class="simple">
<dt>with open(json_path, ‘r’, encoding=’utf-8’) as f:</dt><dd><p>data_dict = json.load(f)</p>
</dd>
</dl>
</div></blockquote>
<aside class="system-message">
<p class="system-message-title">System Message: WARNING/2 (<span class="docutils literal">C:\Users\zxouyang\CodeProjects\PRIVATE_P\io\docs\source\python/python_elegant.rst</span>, line 3161)</p>
<p>Block quote ends without a blank line; unexpected unindent.</p>
</aside>
<dl class="simple">
<dt>except FileNotFoundError:</dt><dd><p>print(f’{json_path} doesnt exist.’)
return ‘’</p>
</dd>
<dt>with open(‘./built-in.json’, ‘w’, encoding=’utf-8’) as f:</dt><dd><p>json.dump(res, f, indent=4, ensure_ascii=False)</p>
</dd>
</dl>
<aside class="system-message">
<p class="system-message-title">System Message: WARNING/2 (<span class="docutils literal">C:\Users\zxouyang\CodeProjects\PRIVATE_P\io\docs\source\python/python_elegant.rst</span>, line 3167)</p>
<p>Definition list ends without a blank line; unexpected unindent.</p>
</aside>
<p><a href="#id557"><span class="problematic" id="id558">``</span></a><a href="#id559"><span class="problematic" id="id560">`</span></a></p>
<aside class="system-message" id="id557">
<p class="system-message-title">System Message: WARNING/2 (<span class="docutils literal">C:\Users\zxouyang\CodeProjects\PRIVATE_P\io\docs\source\python/python_elegant.rst</span>, line 3167); <em><a href="#id558">backlink</a></em></p>
<p>Inline literal start-string without end-string.</p>
</aside>
<aside class="system-message" id="id559">
<p class="system-message-title">System Message: WARNING/2 (<span class="docutils literal">C:\Users\zxouyang\CodeProjects\PRIVATE_P\io\docs\source\python/python_elegant.rst</span>, line 3167); <em><a href="#id560">backlink</a></em></p>
<p>Inline interpreted text or phrase reference start-string without end-string.</p>
</aside>
</section>
<section id="id561">
<h3 id="id561">快速序列<a class="headerlink" href="#id561" title="Link to this heading">¶</a></h3>
<ul class="simple">
<li><p><cite>pickle</cite></p></li>
</ul>
<aside class="system-message">
<p class="system-message-title">System Message: WARNING/2 (<span class="docutils literal">C:\Users\zxouyang\CodeProjects\PRIVATE_P\io\docs\source\python/python_elegant.rst</span>, line 3173)</p>
<p>Bullet list ends without a blank line; unexpected unindent.</p>
</aside>
<p>快速序列化数字类型。可以处理几乎所有的类型。</p>
</section>
</section>
<section id="id562">
<h2 id="id562">测试<a class="headerlink" href="#id562" title="Link to this heading">¶</a></h2>
<section id="id563">
<h3 id="id563">时间<a class="headerlink" href="#id563" title="Link to this heading">¶</a></h3>
<p>简单感觉时间可用time，但是对优化来说，得看quota，看哪部分占比比较明显，如果是那些外调的函数比较明显的话，那也木有办法。</p>
<p>!!! warning “加载模型尽量在外部一次加载，load是比较慢的，不要每次调每次都加载。”</p>
<section id="time">
<h4 id="time">time<a class="headerlink" href="#time" title="Link to this heading">¶</a></h4>
<p><a href="#id564"><span class="problematic" id="id565">``</span></a><a href="#id566"><span class="problematic" id="id567">`</span></a>python
import time</p>
<aside class="system-message" id="id564">
<p class="system-message-title">System Message: WARNING/2 (<span class="docutils literal">C:\Users\zxouyang\CodeProjects\PRIVATE_P\io\docs\source\python/python_elegant.rst</span>, line 3188); <em><a href="#id565">backlink</a></em></p>
<p>Inline literal start-string without end-string.</p>
</aside>
<aside class="system-message" id="id566">
<p class="system-message-title">System Message: WARNING/2 (<span class="docutils literal">C:\Users\zxouyang\CodeProjects\PRIVATE_P\io\docs\source\python/python_elegant.rst</span>, line 3188); <em><a href="#id567">backlink</a></em></p>
<p>Inline interpreted text or phrase reference start-string without end-string.</p>
</aside>
<p>start = time.time()
main()
print(time.time()-start)  # 秒
<a href="#id568"><span class="problematic" id="id569">``</span></a><a href="#id570"><span class="problematic" id="id571">`</span></a></p>
<aside class="system-message" id="id568">
<p class="system-message-title">System Message: WARNING/2 (<span class="docutils literal">C:\Users\zxouyang\CodeProjects\PRIVATE_P\io\docs\source\python/python_elegant.rst</span>, line 3191); <em><a href="#id569">backlink</a></em></p>
<p>Inline literal start-string without end-string.</p>
</aside>
<aside class="system-message" id="id570">
<p class="system-message-title">System Message: WARNING/2 (<span class="docutils literal">C:\Users\zxouyang\CodeProjects\PRIVATE_P\io\docs\source\python/python_elegant.rst</span>, line 3191); <em><a href="#id571">backlink</a></em></p>
<p>Inline interpreted text or phrase reference start-string without end-string.</p>
</aside>
</section>
<section id="cprofile-pstats">
<h4 id="cprofile-pstats"><cite>cProfile</cite> + <cite>pstats</cite><a class="headerlink" href="#cprofile-pstats" title="Link to this heading">¶</a></h4>
<p><a href="#id891"><span class="problematic" id="id892">|`cProfile` 结果列|意思|</span></a>
<a href="#id893"><span class="problematic" id="id894">|--|</span></a>–|
<a href="#id895"><span class="problematic" id="id896">|ncalls|调用次数|</span></a>
<a href="#id897"><span class="problematic" id="id898">|tottime|在指定函数中消耗的总时间&lt;u&gt;（不包括调用子函数的时间）&lt;/u&gt;|</span></a>
<a href="#id899"><span class="problematic" id="id900">|percall|</span></a> = tottime / ncalls|
<a href="#id901"><span class="problematic" id="id902">|cumtime|指定的函数&lt;u&gt;及其所有子函数&lt;/u&gt;（从调用到退出）消耗的总时间。|</span></a>
<a href="#id903"><span class="problematic" id="id904">|percall|</span></a> = cumtime / ncalls, 函数运行一次的平均时间|
<a href="#id905"><span class="problematic" id="id906">|filename|函数名|</span></a></p>
<p><a href="#id907"><span class="problematic" id="id908">|`pstats` 函数|意思|</span></a>
<a href="#id909"><span class="problematic" id="id910">|--|</span></a>–|
<a href="#id911"><span class="problematic" id="id912">|strip_dirs() |移除了所有模块名称中的多余路径|</span></a>
<a href="#id913"><span class="problematic" id="id914">|sort_stats(key) |对key列==降序==排序|</span></a>
<a href="#id915"><span class="problematic" id="id916">|print_stats(n) | 打印统计数据 , default n = all|</span></a>
<a href="#id917"><span class="problematic" id="id918">|print_callers(n)|每个被列出的函数的调用方列表 , default n = all|</span></a></p>
<ol class="arabic">
<li><p>step1</p>
<blockquote>
<div><p><a href="#id572"><span class="problematic" id="id573">``</span></a><a href="#id574"><span class="problematic" id="id575">`</span></a>python title=”main.py”
def run():</p>
<aside class="system-message" id="id572">
<p class="system-message-title">System Message: WARNING/2 (<span class="docutils literal">C:\Users\zxouyang\CodeProjects\PRIVATE_P\io\docs\source\python/python_elegant.rst</span>, line 3217); <em><a href="#id573">backlink</a></em></p>
<p>Inline literal start-string without end-string.</p>
</aside>
<aside class="system-message" id="id574">
<p class="system-message-title">System Message: WARNING/2 (<span class="docutils literal">C:\Users\zxouyang\CodeProjects\PRIVATE_P\io\docs\source\python/python_elegant.rst</span>, line 3217); <em><a href="#id575">backlink</a></em></p>
<p>Inline interpreted text or phrase reference start-string without end-string.</p>
</aside>
<aside class="system-message">
<p class="system-message-title">System Message: ERROR/3 (<span class="docutils literal">C:\Users\zxouyang\CodeProjects\PRIVATE_P\io\docs\source\python/python_elegant.rst</span>, line 3219)</p>
<p>Unexpected indentation.</p>
</aside>
<blockquote>
<div><p>pass</p>
</div></blockquote>
<dl class="simple">
<dt>if __name__ == ‘__main__’:</dt><dd><dl class="simple">
<dt>for i in rang(10):</dt><dd><p>run()</p>
</dd>
</dl>
</dd>
</dl>
<aside class="system-message">
<p class="system-message-title">System Message: WARNING/2 (<span class="docutils literal">C:\Users\zxouyang\CodeProjects\PRIVATE_P\io\docs\source\python/python_elegant.rst</span>, line 3224)</p>
<p>Definition list ends without a blank line; unexpected unindent.</p>
</aside>
<p><a href="#id576"><span class="problematic" id="id577">``</span></a><a href="#id578"><span class="problematic" id="id579">`</span></a></p>
<aside class="system-message" id="id576">
<p class="system-message-title">System Message: WARNING/2 (<span class="docutils literal">C:\Users\zxouyang\CodeProjects\PRIVATE_P\io\docs\source\python/python_elegant.rst</span>, line 3224); <em><a href="#id577">backlink</a></em></p>
<p>Inline literal start-string without end-string.</p>
</aside>
<aside class="system-message" id="id578">
<p class="system-message-title">System Message: WARNING/2 (<span class="docutils literal">C:\Users\zxouyang\CodeProjects\PRIVATE_P\io\docs\source\python/python_elegant.rst</span>, line 3224); <em><a href="#id579">backlink</a></em></p>
<p>Inline interpreted text or phrase reference start-string without end-string.</p>
</aside>
</div></blockquote>
</li>
<li><p>&lt;kbd&gt;python -m cProfile -o output_file main.py&lt;/kbd&gt;</p>
<ul class="simple">
<li><p><cite>-o</cite> 将结果写入文件</p></li>
</ul>
</li>
<li><p>step3</p>
<blockquote>
<div><p><a href="#id580"><span class="problematic" id="id581">``</span></a><a href="#id582"><span class="problematic" id="id583">`</span></a>python title=”analysis.py”
import pstats
from pstats import SortKey
p = pstats.Stats(‘./output_file’)</p>
<aside class="system-message" id="id580">
<p class="system-message-title">System Message: WARNING/2 (<span class="docutils literal">C:\Users\zxouyang\CodeProjects\PRIVATE_P\io\docs\source\python/python_elegant.rst</span>, line 3232); <em><a href="#id581">backlink</a></em></p>
<p>Inline literal start-string without end-string.</p>
</aside>
<aside class="system-message" id="id582">
<p class="system-message-title">System Message: WARNING/2 (<span class="docutils literal">C:\Users\zxouyang\CodeProjects\PRIVATE_P\io\docs\source\python/python_elegant.rst</span>, line 3232); <em><a href="#id583">backlink</a></em></p>
<p>Inline interpreted text or phrase reference start-string without end-string.</p>
</aside>
<p># 按一个函数中的累计时间对性能分析数据进行排序,打印多的30行
p.sort_stats(SortKey.CUMULATIVE).print_stats(30)
# 每个函数耗费的时间进行排序，然后打印前十个函数的统计数据
p.sort_stats(SortKey.TIME).print_stats(10)
# 以时间为主键，并以累计时间为次键进行排序，然后打印10条
p.sort_stats(SortKey.TIME, SortKey.CUMULATIVE).print_stats(.5)
<a href="#id584"><span class="problematic" id="id585">``</span></a><a href="#id586"><span class="problematic" id="id587">`</span></a></p>
<aside class="system-message" id="id584">
<p class="system-message-title">System Message: WARNING/2 (<span class="docutils literal">C:\Users\zxouyang\CodeProjects\PRIVATE_P\io\docs\source\python/python_elegant.rst</span>, line 3237); <em><a href="#id585">backlink</a></em></p>
<p>Inline literal start-string without end-string.</p>
</aside>
<aside class="system-message" id="id586">
<p class="system-message-title">System Message: WARNING/2 (<span class="docutils literal">C:\Users\zxouyang\CodeProjects\PRIVATE_P\io\docs\source\python/python_elegant.rst</span>, line 3237); <em><a href="#id587">backlink</a></em></p>
<p>Inline interpreted text or phrase reference start-string without end-string.</p>
</aside>
</div></blockquote>
</li>
</ol>
</section>
</section>
</section>
<section id="error">
<h2 id="error">Error<a class="headerlink" href="#error" title="Link to this heading">¶</a></h2>
<p><a href="#id588"><span class="problematic" id="id589">``</span></a><a href="#id590"><span class="problematic" id="id591">`</span></a>mermaid
graph LR</p>
<aside class="system-message" id="id588">
<p class="system-message-title">System Message: WARNING/2 (<span class="docutils literal">C:\Users\zxouyang\CodeProjects\PRIVATE_P\io\docs\source\python/python_elegant.rst</span>, line 3248); <em><a href="#id589">backlink</a></em></p>
<p>Inline literal start-string without end-string.</p>
</aside>
<aside class="system-message" id="id590">
<p class="system-message-title">System Message: WARNING/2 (<span class="docutils literal">C:\Users\zxouyang\CodeProjects\PRIVATE_P\io\docs\source\python/python_elegant.rst</span>, line 3248); <em><a href="#id591">backlink</a></em></p>
<p>Inline interpreted text or phrase reference start-string without end-string.</p>
</aside>
<p>try –No_error–&gt; else –&gt; finally
try –except有的error–&gt; except –&gt; finally
try –except没有的error –&gt;A{报错} –&gt; finally
<a href="#id592"><span class="problematic" id="id593">``</span></a><a href="#id594"><span class="problematic" id="id595">`</span></a></p>
<aside class="system-message" id="id592">
<p class="system-message-title">System Message: WARNING/2 (<span class="docutils literal">C:\Users\zxouyang\CodeProjects\PRIVATE_P\io\docs\source\python/python_elegant.rst</span>, line 3251); <em><a href="#id593">backlink</a></em></p>
<p>Inline literal start-string without end-string.</p>
</aside>
<aside class="system-message" id="id594">
<p class="system-message-title">System Message: WARNING/2 (<span class="docutils literal">C:\Users\zxouyang\CodeProjects\PRIVATE_P\io\docs\source\python/python_elegant.rst</span>, line 3251); <em><a href="#id595">backlink</a></em></p>
<p>Inline interpreted text or phrase reference start-string without end-string.</p>
</aside>
<p><a href="#id596"><span class="problematic" id="id597">``</span></a>` python
def numb(a):</p>
<aside class="system-message" id="id596">
<p class="system-message-title">System Message: WARNING/2 (<span class="docutils literal">C:\Users\zxouyang\CodeProjects\PRIVATE_P\io\docs\source\python/python_elegant.rst</span>, line 3256); <em><a href="#id597">backlink</a></em></p>
<p>Inline literal start-string without end-string.</p>
</aside>
<aside class="system-message">
<p class="system-message-title">System Message: ERROR/3 (<span class="docutils literal">C:\Users\zxouyang\CodeProjects\PRIVATE_P\io\docs\source\python/python_elegant.rst</span>, line 3258)</p>
<p>Unexpected indentation.</p>
</aside>
<blockquote>
<div><dl class="simple">
<dt>try:</dt><dd><p>a = int(a)</p>
</dd>
<dt>except (ValueError, OverflowError):</dt><dd><p>print(f’{a} is not valid’)</p>
</dd>
<dt>else:</dt><dd><p>print(a)</p>
</dd>
<dt>finally:</dt><dd><p>print(“It is over.”)</p>
</dd>
</dl>
</div></blockquote>
<p>numb(2.1)
&gt;&gt;&gt; 2
============
# &gt;&gt;&gt; It is over.
numb(‘a’)
&gt;&gt;&gt; a is not valid
======================================
# &gt;&gt;&gt; It is over.
<a href="#id598"><span class="problematic" id="id599">``</span></a><a href="#id600"><span class="problematic" id="id601">`</span></a></p>
<aside class="system-message" id="id598">
<p class="system-message-title">System Message: WARNING/2 (<span class="docutils literal">C:\Users\zxouyang\CodeProjects\PRIVATE_P\io\docs\source\python/python_elegant.rst</span>, line 3267); <em><a href="#id599">backlink</a></em></p>
<p>Inline literal start-string without end-string.</p>
</aside>
<aside class="system-message" id="id600">
<p class="system-message-title">System Message: WARNING/2 (<span class="docutils literal">C:\Users\zxouyang\CodeProjects\PRIVATE_P\io\docs\source\python/python_elegant.rst</span>, line 3267); <em><a href="#id601">backlink</a></em></p>
<p>Inline interpreted text or phrase reference start-string without end-string.</p>
</aside>
<dl>
<dt>!!! danger “NotImplementedError 未实现父类接口重写”</dt><dd><p>在继承的时候，父类有可能留下接口需要子类去重写，但子类并没有重写.
==Sol==: 重写方法</p>
<p><a href="#id602"><span class="problematic" id="id603">``</span></a><a href="#id604"><span class="problematic" id="id605">`</span></a>python
class Parent():</p>
<aside class="system-message" id="id602">
<p class="system-message-title">System Message: WARNING/2 (<span class="docutils literal">C:\Users\zxouyang\CodeProjects\PRIVATE_P\io\docs\source\python/python_elegant.rst</span>, line 3281); <em><a href="#id603">backlink</a></em></p>
<p>Inline literal start-string without end-string.</p>
</aside>
<aside class="system-message" id="id604">
<p class="system-message-title">System Message: WARNING/2 (<span class="docutils literal">C:\Users\zxouyang\CodeProjects\PRIVATE_P\io\docs\source\python/python_elegant.rst</span>, line 3281); <em><a href="#id605">backlink</a></em></p>
<p>Inline interpreted text or phrase reference start-string without end-string.</p>
</aside>
<aside class="system-message">
<p class="system-message-title">System Message: ERROR/3 (<span class="docutils literal">C:\Users\zxouyang\CodeProjects\PRIVATE_P\io\docs\source\python/python_elegant.rst</span>, line 3283)</p>
<p>Unexpected indentation.</p>
</aside>
<blockquote>
<div><dl class="simple">
<dt>def talk(self):</dt><dd><p>rasie NotImplementedError(“没有重写talk方法”)  # 实现原理</p>
</dd>
</dl>
</div></blockquote>
<dl class="simple">
<dt>class Children(Parent):</dt><dd><p>pass</p>
</dd>
</dl>
<aside class="system-message">
<p class="system-message-title">System Message: WARNING/2 (<span class="docutils literal">C:\Users\zxouyang\CodeProjects\PRIVATE_P\io\docs\source\python/python_elegant.rst</span>, line 3288)</p>
<p>Definition list ends without a blank line; unexpected unindent.</p>
</aside>
<p>a = Children()
a.talk()
# &gt;&gt;&gt; NotImplementedError: 没有重写talk方法</p>
<dl class="simple">
<dt>class TrueChildren(Parent):</dt><dd><dl class="simple">
<dt>def talk(self):</dt><dd><p>print(“aaaaa”)</p>
</dd>
</dl>
</dd>
</dl>
<aside class="system-message">
<p class="system-message-title">System Message: WARNING/2 (<span class="docutils literal">C:\Users\zxouyang\CodeProjects\PRIVATE_P\io\docs\source\python/python_elegant.rst</span>, line 3295)</p>
<p>Definition list ends without a blank line; unexpected unindent.</p>
</aside>
<p>b = TrueChildren()
b.talk()
# &gt;&gt;&gt; aaaaa
<a href="#id606"><span class="problematic" id="id607">``</span></a><a href="#id608"><span class="problematic" id="id609">`</span></a></p>
<aside class="system-message" id="id606">
<p class="system-message-title">System Message: WARNING/2 (<span class="docutils literal">C:\Users\zxouyang\CodeProjects\PRIVATE_P\io\docs\source\python/python_elegant.rst</span>, line 3295); <em><a href="#id607">backlink</a></em></p>
<p>Inline literal start-string without end-string.</p>
</aside>
<aside class="system-message" id="id608">
<p class="system-message-title">System Message: WARNING/2 (<span class="docutils literal">C:\Users\zxouyang\CodeProjects\PRIVATE_P\io\docs\source\python/python_elegant.rst</span>, line 3295); <em><a href="#id609">backlink</a></em></p>
<p>Inline interpreted text or phrase reference start-string without end-string.</p>
</aside>
</dd>
</dl>
<section id="id610">
<h3 id="id610">字符串相关<a class="headerlink" href="#id610" title="Link to this heading">¶</a></h3>
<p>==UnicodeEncodeError==。选定的编码方式不能编码这个字符。
==UnicodeDecodeError==。选定的解码方式不能解码这个字符。</p>
<dl class="simple">
<dt>!!! danger “文本存取乱码问题”</dt><dd><ul class="simple">
<li><p>存乱了，编码格式应该设置成支持文本内字符串的格式。日文就不要用 &lt;kbd&gt;gbk&lt;/kbd&gt;</p></li>
<li><p>取乱了，编码格式应该对应该文件存入硬盘的格式</p></li>
</ul>
</dd>
</dl>
<p><cite>string.encode(encoding, errors=’strict’)</cite> &amp; <cite>string.decode(encoding, errors=’strict’)</cite>
✏️  指定 errors 参数</p>
<ul class="simple">
<li><p><cite>=’strict’</cite> 抛出 Error</p></li>
<li><p><cite>=’ignore’</cite> 忽略跳过字符</p></li>
<li><p><cite>=’replace’</cite> 替换成官方指定符号，表示未知字符</p></li>
</ul>
<aside class="system-message">
<p class="system-message-title">System Message: WARNING/2 (<span class="docutils literal">C:\Users\zxouyang\CodeProjects\PRIVATE_P\io\docs\source\python/python_elegant.rst</span>, line 3316)</p>
<p>Bullet list ends without a blank line; unexpected unindent.</p>
</aside>
<p>en：? &amp; de: � (U+FFFD)</p>
<p><code class="docutils literal notranslate"><span class="pre">`python</span>
<span class="pre">'啊'.encode('shift-jis',</span> <span class="pre">errors='replace')</span>
<span class="pre">&gt;&gt;&gt;</span> <span class="pre">b'?'</span>
<span class="pre">==================</span>
<span class="pre">b'\xe9'.decode('utf-8',</span> <span class="pre">errors='replace')</span>
<span class="pre">&gt;&gt;&gt;</span> <span class="pre">'�'</span>
<span class="pre">================</span>
<span class="pre">`</span></code></p>
<p>==SyntaxError==。使用预期以之外的编码记载模块。
✏️ 在文件顶部添加 coding 注释</p>
<p><code class="docutils literal notranslate"><span class="pre">`python</span>
<span class="pre">coding:</span> <span class="pre">gbk</span>
<span class="pre">========================</span>
<span class="pre">`</span></code></p>
<p>[ValueError: invalid literal for int() with base 10问题处理]: <a class="reference external" href="https://www.cnblogs.com/chaojiyingxiong/p/10189357.html">https://www.cnblogs.com/chaojiyingxiong/p/10189357.html</a>
[CodingConvention]: <a class="reference external" href="https://visualgit.readthedocs.io/en/latest/pages/naming_convention.html#modules">https://visualgit.readthedocs.io/en/latest/pages/naming_convention.html#modules</a>
[python3-cookbook]: <a class="reference external" href="https://python3-cookbook.readthedocs.io/zh_CN/latest/c01/p03_keep_last_n_items.html">https://python3-cookbook.readthedocs.io/zh_CN/latest/c01/p03_keep_last_n_items.html</a>
[Python 中的下划线命名规则]: <a class="reference external" href="https://zhuanlan.zhihu.com/p/42228723">https://zhuanlan.zhihu.com/p/42228723</a>
[python迭代器详解]: <a class="reference external" href="https://blog.csdn.net/weixin_43796670/article/details/129699669">https://blog.csdn.net/weixin_43796670/article/details/129699669</a>
[Python 二进制，十进制，十六进制转换]: <a class="reference external" href="https://blog.csdn.net/u012063703/article/details/42609833">https://blog.csdn.net/u012063703/article/details/42609833</a>
[Python3 - 6种方法拼接合并列表list]: <a class="reference external" href="https://mediumcn.com/python3/how-to-concatenate-a-list">https://mediumcn.com/python3/how-to-concatenate-a-list</a>
[Python中的zip()：从多个列表中获取元素]: <a class="reference external" href="https://note.nkmk.me/en/python-zip-usage-for/">https://note.nkmk.me/en/python-zip-usage-for/</a>
[python中，(x for y in z for x in y)这个结构怎么理解？]: <a class="reference external" href="https://blog.csdn.net/weixin_42427638/article/details/85261284">https://blog.csdn.net/weixin_42427638/article/details/85261284</a>
[Python’s map(): Processing Iterables Without a Loop]: <a class="reference external" href="https://realpython.com/python-map-function/">https://realpython.com/python-map-function/</a>
[提升python执行效率的若干方法]: <a class="reference external" href="https://mdnice.com/writing/f4237ac1c4b6432c8a36138495886fc4">https://mdnice.com/writing/f4237ac1c4b6432c8a36138495886fc4</a>
[Python中修改字符串的四种方法]: <a class="reference external" href="https://zhuanlan.zhihu.com/p/119420131">https://zhuanlan.zhihu.com/p/119420131</a>
[heapq –堆队列算法]: <a class="reference external" href="https://docs.python.org/zh-cn/3/library/heapq.html">https://docs.python.org/zh-cn/3/library/heapq.html</a>
[collections — 容器数据类型]:<a class="reference external" href="https://docs.python.org/zh-cn/3/library/collections.html?highlight=deque">https://docs.python.org/zh-cn/3/library/collections.html?highlight=deque</a>
[Python稀疏矩阵详解]: <a class="reference external" href="https://zhuanlan.zhihu.com/p/456904535">https://zhuanlan.zhihu.com/p/456904535</a>
[python之排序操作及heapq模块]: <a class="reference external" href="https://segmentfault.com/a/1190000017383322">https://segmentfault.com/a/1190000017383322</a>
[小整数池]: <a class="reference external" href="https://zhuanlan.zhihu.com/p/371758783">https://zhuanlan.zhihu.com/p/371758783</a>
[Python 全局变量]: <a class="reference external" href="https://www.freecodecamp.org/chinese/news/python-global-variables-examples/">https://www.freecodecamp.org/chinese/news/python-global-variables-examples/</a></p>
</section>
</section>
</section>


          </article>
        </div>
      </div>
    </main>
  </div>
  <footer class="md-footer">
    <div class="md-footer-nav">
      <nav class="md-footer-nav__inner md-grid">
          
          
        </a>
        
      </nav>
    </div>
    <div class="md-footer-meta md-typeset">
      <div class="md-footer-meta__inner md-grid">
        <div class="md-footer-copyright">
          <div class="md-footer-copyright__highlight">
              &#169; Copyright 2024, coconut.
              
          </div>
            Created using
            <a href="http://www.sphinx-doc.org/">Sphinx</a> 7.3.7.
             and
            <a href="https://github.com/bashtage/sphinx-material/">Material for
              Sphinx</a>
        </div>
      </div>
    </div>
  </footer>
  <script src="../_static/javascripts/application.js"></script>
  <script>app.initialize({version: "1.0.4", url: {base: ".."}})</script>
  </body>
</html>