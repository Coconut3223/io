<!DOCTYPE html>

<html lang="zh-CN" data-content_root="../">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" /><meta name="viewport" content="width=device-width, initial-scale=1" />

  <meta name="viewport" content="width=device-width,initial-scale=1">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <meta name="lang:clipboard.copy" content="Copy to clipboard">
  <meta name="lang:clipboard.copied" content="Copied to clipboard">
  <meta name="lang:search.language" content="en">
  <meta name="lang:search.pipeline.stopwords" content="True">
  <meta name="lang:search.pipeline.trimmer" content="True">
  <meta name="lang:search.result.none" content="No matching documents">
  <meta name="lang:search.result.one" content="1 matching document">
  <meta name="lang:search.result.other" content="# matching documents">
  <meta name="lang:search.tokenizer" content="[\s\-]+">

  
    <link href="https://fonts.gstatic.com/" rel="preconnect" crossorigin>
    <link href="https://fonts.googleapis.com/css?family=Roboto+Mono:400,500,700|Roboto:300,400,400i,700&display=fallback" rel="stylesheet">

    <style>
      body,
      input {
        font-family: "Roboto", "Helvetica Neue", Helvetica, Arial, sans-serif
      }

      code,
      kbd,
      pre {
        font-family: "Roboto Mono", "Courier New", Courier, monospace
      }
    </style>
  

  <link rel="stylesheet" href="../_static/stylesheets/application.css"/>
  <link rel="stylesheet" href="../_static/stylesheets/application-palette.css"/>
  <link rel="stylesheet" href="../_static/stylesheets/application-fixes.css"/>
  
  <link rel="stylesheet" href="../_static/fonts/material-icons.css"/>
  
  <meta name="theme-color" content="#3f51b5">
  <script src="../_static/javascripts/modernizr.js"></script>
  
  
  
    <title>Enhanced Python &#8212; HomePage</title>
    <link rel="stylesheet" type="text/css" href="../_static/pygments.css?v=83e35b93" />
    <link rel="stylesheet" type="text/css" href="../_static/material.css?v=79c92029" />
    <link rel="stylesheet" type="text/css" href="../_static/copybutton.css?v=76b2166b" />
    <link rel="stylesheet" type="text/css" href="../_static/sphinx-design.min.css?v=87e54e7c" />
    <link rel="stylesheet" type="text/css" href="https://cdn.jsdelivr.net/npm/katex@0.16.10/dist/katex.min.css" />
    <link rel="stylesheet" type="text/css" href="../_static/katex-math.css?v=91adb8b6" />
    <link rel="stylesheet" type="text/css" href="../_static/css/def.css?v=5a9d86bd" />
    <script src="../_static/documentation_options.js?v=7d86a446"></script>
    <script src="../_static/doctools.js?v=9a2dae69"></script>
    <script src="../_static/sphinx_highlight.js?v=dc90522c"></script>
    <script src="../_static/clipboard.min.js?v=a7894cd8"></script>
    <script src="../_static/copybutton.js?v=6dbb43f8"></script>
    <script src="../_static/translations.js?v=beaddf03"></script>
    <script src="../_static/design-tabs.js?v=f930bc37"></script>
    <link rel="index" title="索引" href="../genindex.html" />
    <link rel="search" title="搜索" href="../search.html" />
    <link rel="next" title="Numpy &amp; Scipy" href="numpy.html" />
    <link rel="prev" title="Elegant Python" href="python_elegant.html" />
  
   

  </head>
  <body dir=ltr
        data-md-color-primary=blue data-md-color-accent=light-blue>
  
  <svg class="md-svg">
    <defs data-children-count="0">
      
      <svg xmlns="http://www.w3.org/2000/svg" width="416" height="448" viewBox="0 0 416 448" id="__github"><path fill="currentColor" d="M160 304q0 10-3.125 20.5t-10.75 19T128 352t-18.125-8.5-10.75-19T96 304t3.125-20.5 10.75-19T128 256t18.125 8.5 10.75 19T160 304zm160 0q0 10-3.125 20.5t-10.75 19T288 352t-18.125-8.5-10.75-19T256 304t3.125-20.5 10.75-19T288 256t18.125 8.5 10.75 19T320 304zm40 0q0-30-17.25-51T296 232q-10.25 0-48.75 5.25Q229.5 240 208 240t-39.25-2.75Q130.75 232 120 232q-29.5 0-46.75 21T56 304q0 22 8 38.375t20.25 25.75 30.5 15 35 7.375 37.25 1.75h42q20.5 0 37.25-1.75t35-7.375 30.5-15 20.25-25.75T360 304zm56-44q0 51.75-15.25 82.75-9.5 19.25-26.375 33.25t-35.25 21.5-42.5 11.875-42.875 5.5T212 416q-19.5 0-35.5-.75t-36.875-3.125-38.125-7.5-34.25-12.875T37 371.5t-21.5-28.75Q0 312 0 260q0-59.25 34-99-6.75-20.5-6.75-42.5 0-29 12.75-54.5 27 0 47.5 9.875t47.25 30.875Q171.5 96 212 96q37 0 70 8 26.25-20.5 46.75-30.25T376 64q12.75 25.5 12.75 54.5 0 21.75-6.75 42 34 40 34 99.5z"/></svg>
      
    </defs>
  </svg>
  
  <input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="__drawer">
  <input class="md-toggle" data-md-toggle="search" type="checkbox" id="__search">
  <label class="md-overlay" data-md-component="overlay" for="__drawer"></label>
  <a href="#python/enhanced" tabindex="1" class="md-skip"> Skip to content </a>
  <header class="md-header" data-md-component="header">
  <nav class="md-header-nav md-grid">
    <div class="md-flex navheader">
      <div class="md-flex__cell md-flex__cell--shrink">
        <a href="../index.html" title="HomePage"
           class="md-header-nav__button md-logo">
          
            <i class="md-icon">&#xe869</i>
          
        </a>
      </div>
      <div class="md-flex__cell md-flex__cell--shrink">
        <label class="md-icon md-icon--menu md-header-nav__button" for="__drawer"></label>
      </div>
      <div class="md-flex__cell md-flex__cell--stretch">
        <div class="md-flex__ellipsis md-header-nav__title" data-md-component="title">
          <span class="md-header-nav__topic">Cocobook</span>
          <span class="md-header-nav__topic"> Enhanced Python </span>
        </div>
      </div>
      <div class="md-flex__cell md-flex__cell--shrink">
        <label class="md-icon md-icon--search md-header-nav__button" for="__search"></label>
        
<div class="md-search" data-md-component="search" role="dialog">
  <label class="md-search__overlay" for="__search"></label>
  <div class="md-search__inner" role="search">
    <form class="md-search__form" action="../search.html" method="get" name="search">
      <input type="text" class="md-search__input" name="q" placeholder=""Search""
             autocapitalize="off" autocomplete="off" spellcheck="false"
             data-md-component="query" data-md-state="active">
      <label class="md-icon md-search__icon" for="__search"></label>
      <button type="reset" class="md-icon md-search__icon" data-md-component="reset" tabindex="-1">
        &#xE5CD;
      </button>
    </form>
    <div class="md-search__output">
      <div class="md-search__scrollwrap" data-md-scrollfix>
        <div class="md-search-result" data-md-component="result">
          <div class="md-search-result__meta">
            Type to start searching
          </div>
          <ol class="md-search-result__list"></ol>
        </div>
      </div>
    </div>
  </div>
</div>

      </div>
      
        <div class="md-flex__cell md-flex__cell--shrink">
          <div class="md-header-nav__source">
            <a href="https://github.com/Coconut3223/io/" title="Go to repository" class="md-source" data-md-source="github">

    <div class="md-source__icon">
      <svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" viewBox="0 0 24 24" width="28" height="28">
        <use xlink:href="#__github" width="24" height="24"></use>
      </svg>
    </div>
  
  <div class="md-source__repository">
    io
  </div>
</a>
          </div>
        </div>
      
      
  
  <script src="../_static/javascripts/version_dropdown.js"></script>
  <script>
    var json_loc = "../"versions.json"",
        target_loc = "../../",
        text = "Versions";
    $( document ).ready( add_version_dropdown(json_loc, target_loc, text));
  </script>
  

    </div>
  </nav>
</header>

  
  <div class="md-container">
    
    
    
  <nav class="md-tabs" data-md-component="tabs">
    <div class="md-tabs__inner md-grid">
      <ul class="md-tabs__list">
          <li class="md-tabs__item"><a href="../index.html" class="md-tabs__link">HomePage</a></li>
            
            <li class="md-tabs__item"><a href="../index.html" class="md-tabs__link">Homepage</a></li>
            
            <li class="md-tabs__item"><a href="../AI/index.html" class="md-tabs__link">AI</a></li>
            
            <li class="md-tabs__item"><a href="index.html" class="md-tabs__link">Python</a></li>
            
            <li class="md-tabs__item"><a href="../NLP/index.html" class="md-tabs__link">NLP</a></li>
            
            <li class="md-tabs__item"><a href="../SQL/main.html" class="md-tabs__link">SQL</a></li>
            
            <li class="md-tabs__item"><a href="../utils/index.html" class="md-tabs__link">Utils</a></li>
          <li class="md-tabs__item"><a href="index.html" class="md-tabs__link">Python</a></li>
      </ul>
    </div>
  </nav>
    <main class="md-main">
      <div class="md-main__inner md-grid" data-md-component="container">
        
          <div class="md-sidebar md-sidebar--primary" data-md-component="navigation">
            <div class="md-sidebar__scrollwrap">
              <div class="md-sidebar__inner">
                <nav class="md-nav md-nav--primary" data-md-level="0">
  <label class="md-nav__title md-nav__title--site" for="__drawer">
    <a href="../index.html" title="HomePage" class="md-nav__button md-logo">
      
        <i class="md-icon">&#xe869</i>
      
    </a>
    <a href="../index.html"
       title="HomePage">Cocobook</a>
  </label>
    <div class="md-nav__source">
      <a href="https://github.com/Coconut3223/io/" title="Go to repository" class="md-source" data-md-source="github">

    <div class="md-source__icon">
      <svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" viewBox="0 0 24 24" width="28" height="28">
        <use xlink:href="#__github" width="24" height="24"></use>
      </svg>
    </div>
  
  <div class="md-source__repository">
    io
  </div>
</a>
    </div>
  
  

  
  <ul class="md-nav__list">
    <li class="md-nav__item">
    
      <span class="md-nav__link caption"><span class="caption-text">Content</span></span>
    
    </li>
    <li class="md-nav__item">
    
    
      <a href="../AI/index.html" class="md-nav__link">AI</a>
      
    
    </li>
    <li class="md-nav__item">
    
    
      <a href="../AI/ML/index.html" class="md-nav__link">ML</a>
      
    
    </li>
    <li class="md-nav__item">
    
    
      <a href="../AI/DL/index.html" class="md-nav__link">DL</a>
      
    
    </li>
    <li class="md-nav__item">
    
    
      <a href="../CV/index.html" class="md-nav__link">CV</a>
      
    
    </li>
    <li class="md-nav__item">
    
    
      <a href="../NLP/index.html" class="md-nav__link">NLP</a>
      
    
    </li>
    <li class="md-nav__item">
    
    
      <a href="index.html" class="md-nav__link">python</a>
      
    
    </li>
    <li class="md-nav__item">
    
    
      <a href="../utils/index.html" class="md-nav__link">utils</a>
      
    
    </li>
  </ul>
  

</nav>
              </div>
            </div>
          </div>
          <div class="md-sidebar md-sidebar--secondary" data-md-component="toc">
            <div class="md-sidebar__scrollwrap">
              <div class="md-sidebar__inner">
                
<nav class="md-nav md-nav--secondary">
    <label class="md-nav__title" for="__toc">"Contents"</label>
  <ul class="md-nav__list" data-md-scrollfix="">
        <li class="md-nav__item"><a href="#python-enhanced--page-root" class="md-nav__link">Enhanced Python</a><nav class="md-nav">
              <ul class="md-nav__list">
        <li class="md-nav__item"><a href="#script-module-package" class="md-nav__link">Script & Module & Package</a><nav class="md-nav">
              <ul class="md-nav__list">
        <li class="md-nav__item"><a href="#id1" class="md-nav__link">顶层代码</a>
        </li>
        <li class="md-nav__item"><a href="#module" class="md-nav__link">Module</a>
        </li>
        <li class="md-nav__item"><a href="#package" class="md-nav__link">Package</a><nav class="md-nav">
              <ul class="md-nav__list">
        <li class="md-nav__item"><a href="#init-py" class="md-nav__link"><code class="docutils literal notranslate"><span class="pre">__init__.py</span></code></a>
        </li>
        <li class="md-nav__item"><a href="#main-py" class="md-nav__link"><code class="docutils literal notranslate"><span class="pre">__main__.py</span></code></a>
        </li></ul>
            </nav>
        </li>
        <li class="md-nav__item"><a href="#import" class="md-nav__link">import</a><nav class="md-nav">
              <ul class="md-nav__list">
        <li class="md-nav__item"><a href="#id2" class="md-nav__link">从内容区分</a>
        </li>
        <li class="md-nav__item"><a href="#id3" class="md-nav__link">从方式区分</a>
        </li></ul>
            </nav>
        </li></ul>
            </nav>
        </li>
        <li class="md-nav__item"><a href="#id4" class="md-nav__link">路径相关</a><nav class="md-nav">
              <ul class="md-nav__list">
        <li class="md-nav__item"><a href="#import-module" class="md-nav__link">import - module 搜索路径</a>
        </li></ul>
            </nav>
        </li>
        <li class="md-nav__item"><a href="#others" class="md-nav__link">Others</a>
        </li>
        <li class="md-nav__item"><a href="#todo" class="md-nav__link">Todo</a>
        </li></ul>
            </nav>
        </li>
  </ul>
</nav>
              </div>
            </div>
          </div>
        
        <div class="md-content">
          <article class="md-content__inner md-typeset" role="main">
            
  <section id="enhanced-python">
<h1 id="python-enhanced--page-root">Enhanced Python<a class="headerlink" href="#python-enhanced--page-root" title="Link to this heading">¶</a></h1>
<section id="script-module-package">
<h2 id="script-module-package">Script &amp; Module &amp; Package<a class="headerlink" href="#script-module-package" title="Link to this heading">¶</a></h2>
<p><span class="defi">script 脚本</span> 。是一个包含可执行代码的文件，一个 py 文件，更多时候是指可以直接运行的 py 文件。为一个特定任务写成。
<span class="defi">顶层代码</span> 。由用户指定的最先开始运行的那一个 py 文件，是应用程序的入口点。 它的 <code class="docutils literal notranslate"><span class="pre">__name__</span></code>  被设为  <code class="docutils literal notranslate"><span class="pre">__main__</span></code>
<span class="defi">module 模块</span> 。主要是被引用，包含了 <strong>相关性较高</strong> 的程式码。
<span class="defi">package 包</span> 。包含了一个或多个的 Module ，并且拥有  <code class="docutils literal notranslate"><span class="pre">__init__.py</span></code>
<span class="defi">library 库</span> 。</p>
<section id="id1">
<h3 id="id1">顶层代码<a class="headerlink" href="#id1" title="Link to this heading">¶</a></h3>
<p><span class="defi">顶层代码</span> 。由用户指定的最先开始运行的那一个 py 文件，是应用程序的入口点。</p>
<div class="admonition-name-main admonition note">
<p class="admonition-title">顶层代码的 <code class="docutils literal notranslate"><span class="pre">__name__</span></code>  被设为  <code class="docutils literal notranslate"><span class="pre">__main__</span></code> 。”</p>
<p>module 如果是 被 import，它的  <code class="docutils literal notranslate"><span class="pre">__name__</span></code>  就会是它自己名字；如果是以 <strong>脚本方式执行</strong>，会把  <code class="docutils literal notranslate"><span class="pre">__name__</span> <span class="pre">=</span> <span class="pre">"__main__"</span></code></p>
<div class="sd-container-fluid sd-sphinx-override sd-mb-4 docutils">
<div class="sd-row sd-row-cols-2 sd-row-cols-xs-2 sd-row-cols-sm-2 sd-row-cols-md-2 sd-row-cols-lg-2 docutils">
<div class="sd-col sd-d-flex-column docutils">
<div class="literal-block-wrapper docutils container" id="id5">
<div class="code-block-caption"><span class="caption-text">dir</span><a class="headerlink" href="#id5" title="Link to this code">¶</a></div>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>+ A
    A1.py
    A2.py
    + subA
        a1.py
</pre></div>
</div>
</div>
</div>
<div class="sd-col sd-d-flex-column docutils">
<div class="literal-block-wrapper docutils container" id="id6">
<div class="code-block-caption"><span class="caption-text">dirA1.py</span><a class="headerlink" href="#id6" title="Link to this code">¶</a></div>
<div class="highlight-py notranslate"><div class="highlight"><pre><span></span><span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s1">'in A1: </span><span class="si">{</span><span class="vm">__name__</span><span class="si">}</span><span class="s1">'</span><span class="p">)</span>
</pre></div>
</div>
</div>
</div>
<div class="sd-col sd-d-flex-column docutils">
<div class="literal-block-wrapper docutils container" id="id7">
<div class="code-block-caption"><span class="caption-text">A2.py</span><a class="headerlink" href="#id7" title="Link to this code">¶</a></div>
<div class="highlight-py notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">A1</span> <span class="kn">import</span> <span class="o">*</span>
<span class="kn">from</span> <span class="nn">subA.a1</span> <span class="kn">import</span> <span class="o">*</span>
<span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s1">'in A2: </span><span class="si">{</span><span class="vm">__name__</span><span class="si">}</span><span class="s1">'</span><span class="p">)</span>
</pre></div>
</div>
</div>
</div>
<div class="sd-col sd-d-flex-column docutils">
<div class="literal-block-wrapper docutils container" id="id8">
<div class="code-block-caption"><span class="caption-text">a1.py</span><a class="headerlink" href="#id8" title="Link to this code">¶</a></div>
<div class="highlight-py notranslate"><div class="highlight"><pre><span></span><span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s1">'in a1: </span><span class="si">{</span><span class="vm">__name__</span><span class="si">}</span><span class="s1">'</span><span class="p">)</span>
</pre></div>
</div>
</div>
</div>
</div>
</div>
<p>运行  <code class="docutils literal notranslate"><span class="pre">python</span> <span class="pre">A2.py</span></code> ， A2 是被运行的顶层代码， A1 &amp; a1 时被 import 的module</p>
<div class="highlight-pycon notranslate"><div class="highlight"><pre><span></span><span class="go">in A1: A1</span>
<span class="go">in a2: subA.a2  # 如果有上层，就会把上层文件也展示</span>
<span class="go">in A2: __main__  # A2 是被运行的顶层代码，被改为  ``__main__``</span>
</pre></div>
</div>
<div class="admonition-notes admonition note">
<p class="admonition-title">notes</p>
<p>可以利用 <code class="docutils literal notranslate"><span class="pre">if</span> <span class="pre">__name__</span> <span class="pre">:defi:`</span> <span class="pre">'__main__':</span></code> 来控制 <strong>执行</strong> 和 <strong>被引用时</strong> 的运行的代码内容。
最好用  <code class="docutils literal notranslate"><span class="pre">main</span></code>  进行封装，再调用。如果直接放在  <code class="docutils literal notranslate"><span class="pre">if</span> <span class="pre">__name__</span> <span class="pre">`</span> <span class="pre">'__main__':</span></code>  下的变量会成为 <strong>全局变量</strong>。</p>
</div>
</div>
<div class="admonition-main-py-in-package-package-section admonition note">
<p class="admonition-title"><code class="docutils literal notranslate"><span class="pre">__main__.py</span></code>  in package 参见 package section</p>
</div>
</section>
<section id="module">
<h3 id="module">Module<a class="headerlink" href="#module" title="Link to this heading">¶</a></h3>
<p><span class="defi">module 模块</span> 。主要是被引用，包含了 <strong>相关性较高</strong> 的程式码。</p>
<ul class="simple">
<li><p>在 <strong>模块内部</strong> ，模块名 通过全局变量  <code class="docutils literal notranslate"><span class="pre">__name__</span></code>  获取.</p></li>
<li><p>每个模块都有自己的 <strong>私有命名空间</strong> ，它会被用作模块中定义的所有函数的全局命名空间。</p></li>
</ul>
</section>
<section id="package">
<h3 id="package">Package<a class="headerlink" href="#package" title="Link to this heading">¶</a></h3>
<p><span class="defi">package 包</span> 。包含了一个或多个的 Module ，并且拥有  <code class="docutils literal notranslate"><span class="pre">__init__.py</span></code> 。</p>
<p>但是一个比较齐全的包是：</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>+ package
    __init__.py
    __main__.py
    module1.py
</pre></div>
</div>
<section id="init-py">
<h4 id="init-py"><code class="docutils literal notranslate"><span class="pre">__init__.py</span></code><a class="headerlink" href="#init-py" title="Link to this heading">¶</a></h4>
<div class="admonition-init-py-python admonition danger">
<p class="admonition-title">需要有  <code class="docutils literal notranslate"><span class="pre">__init__.py</span></code>  文件才能让 Python 将包含该文件的目录当作包来处理</p>
</div>
<div class="line-block">
<div class="line">从一个 package 里面调用东西的时候， <code class="docutils literal notranslate"><span class="pre">__init__.py</span></code>  的代码会 <strong>被首先执行</strong>.</div>
<div class="line">能帮助 package 完成 <strong>批量导入和规范化导入</strong></div>
</div>
<div class="admonition- admonition warning">
<p class="admonition-title">其可见性的维护是靠一套需要大家自觉遵守的”约定”</p>
<div class="line-block">
<div class="line">[Python中的__all__]: 使用  <code class="docutils literal notranslate"><span class="pre">from</span> <span class="pre">xxx</span> <span class="pre">import</span> <span class="pre">*</span></code>  导入该文件时，只会导入  <code class="docutils literal notranslate"><span class="pre">__all__</span></code>  列出的成员，可以其他成员都被排除在外。</div>
<div class="line">但是直接定位到精确调用是可以的</div>
</div>
<div class="admonition-notes admonition note">
<p class="admonition-title">notes</p>
<p>修改一个暴露的接口只修改一行，方便版本控制的时候看 diff</p>
<div class="sd-container-fluid sd-sphinx-override sd-mb-4 docutils">
<div class="sd-row sd-row-cols-2 sd-row-cols-xs-2 sd-row-cols-sm-2 sd-row-cols-md-2 sd-row-cols-lg-2 docutils">
<div class="sd-col sd-d-flex-column docutils">
<div class="literal-block-wrapper docutils container" id="id9">
<div class="code-block-caption"><span class="caption-text">dir</span><a class="headerlink" href="#id9" title="Link to this code">¶</a></div>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>+ A
    __init__.py
    A1.py
    A2.py
    + subA
        a1.py
        __init___.py
</pre></div>
</div>
</div>
</div>
<div class="sd-col sd-d-flex-column docutils">
<div class="literal-block-wrapper docutils container" id="id10">
<div class="code-block-caption"><span class="caption-text">subA.a1.py</span><a class="headerlink" href="#id10" title="Link to this code">¶</a></div>
<div class="highlight-py notranslate"><div class="highlight"><pre><span></span><span class="k">def</span> <span class="nf">f1</span><span class="p">():</span>
    <span class="nb">print</span><span class="p">(</span><span class="s2">"F1"</span><span class="p">)</span>
<span class="k">def</span> <span class="nf">f2</span><span class="p">():</span>
    <span class="nb">print</span><span class="p">(</span><span class="s2">"F2"</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="literal-block-wrapper docutils container" id="id11">
<div class="code-block-caption"><span class="caption-text">subA.__init__.py</span><a class="headerlink" href="#id11" title="Link to this code">¶</a></div>
<div class="highlight-py notranslate"><div class="highlight"><pre><span></span><span class="c1"># 在 package 级别暴露接口</span>
<span class="kn">from</span> <span class="nn">sub.a1</span> <span class="kn">import</span> <span class="o">*</span>
<span class="n">__all__</span> <span class="o">=</span> <span class="p">[</span>
    <span class="s2">"f1"</span>
<span class="p">]</span>
</pre></div>
</div>
</div>
</div>
</div>
</div>
</div>
<p>在 package 级别暴露接口，module level 也类似。</p>
<div class="sd-container-fluid sd-sphinx-override sd-mb-4 docutils">
<div class="sd-row sd-row-cols-2 sd-row-cols-xs-2 sd-row-cols-sm-2 sd-row-cols-md-2 sd-row-cols-lg-2 docutils">
<div class="sd-col sd-d-flex-column docutils">
<p>如果采用 <code class="docutils literal notranslate"><span class="pre">from</span> <span class="pre">package</span> <span class="pre">import</span> <span class="pre">*</span></code></p>
<div class="literal-block-wrapper docutils container" id="id12">
<div class="code-block-caption"><span class="caption-text">A1.py</span><a class="headerlink" href="#id12" title="Link to this code">¶</a></div>
<div class="highlight-pycon notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">subA</span> <span class="kn">import</span> <span class="o">*</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">f1</span><span class="p">()</span>
<span class="go">F1  # 成功了</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">f2</span><span class="p">()</span>
<span class="go">NameError: name 'f2' is not defined.</span>
<span class="go">Did you mean: 'f1'?</span>
</pre></div>
</div>
</div>
</div>
<div class="sd-col sd-d-flex-column docutils">
<p>如果采用  <code class="docutils literal notranslate"><span class="pre">from</span> <span class="pre">package.module</span> <span class="pre">import</span> <span class="pre">func</span></code>  精确调用</p>
<div class="literal-block-wrapper docutils container" id="id13">
<div class="code-block-caption"><span class="caption-text">A2.py</span><a class="headerlink" href="#id13" title="Link to this code">¶</a></div>
<div class="highlight-pycon notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">subA.a1</span> <span class="kn">import</span> <span class="n">f1</span><span class="p">,</span> <span class="n">f2</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">f1</span><span class="p">()</span>
<span class="go">F1</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">f2</span><span class="p">()</span>
<span class="go">F2</span>
</pre></div>
</div>
</div>
</div>
</div>
</div>
</div>
</section>
<section id="main-py">
<h4 id="main-py"><code class="docutils literal notranslate"><span class="pre">__main__.py</span></code><a class="headerlink" href="#main-py" title="Link to this heading">¶</a></h4>
<p><code class="docutils literal notranslate"><span class="pre">python</span> <span class="pre">-m</span> <span class="pre">package</span></code> 。 使用  <code class="docutils literal notranslate"><span class="pre">-m</span></code>  从命令行直接调用软件包本身时，将执行  <code class="docutils literal notranslate"><span class="pre">__main__.py</span></code> 。</p>
<p><code class="docutils literal notranslate"><span class="pre">__main__.py</span></code>  的内容通常不会用  <code class="docutils literal notranslate"><span class="pre">if</span> <span class="pre">__name__＝＝'__main__'</span></code>  块围起来。相反，这些文件会保持简短 <strong>并从其他模块导入函数来执行。 这样其他模块就可以很容易地进行单元测试并可以适当地重用。</strong></p>
<div class="admonition-package-module-main-py admonition note">
<p class="admonition-title">package 里的 module 的单元测试是在  <code class="docutils literal notranslate"><span class="pre">__main__.py</span></code>  进行.</p>
</div>
</section>
</section>
<section id="import">
<h3 id="import">import<a class="headerlink" href="#import" title="Link to this heading">¶</a></h3>
<p>为了 <strong>快速加载模块（不是加速执行）</strong> ，Python 把 <strong>模块的编译版本</strong> 缓存在  <code class="docutils literal notranslate"><span class="pre">__pycache__</span> <span class="pre">dir</span></code>  中，文件名为  <code class="docutils literal notranslate"><span class="pre">module.version.pyc，version</span></code>  对编译文件格式进行编码</p>
<div class="admonition-notes admonition hint">
<p class="admonition-title">notes</p>
<p>CPython 的 3.3 发行版中，spam.py 的编译版本 ==  <code class="docutils literal notranslate"><span class="pre">__pycache__/spam.cpython-33.pyc</span></code></p>
</div>
<div class="admonition- admonition note">
<p class="admonition-title">为什么没有 运行脚本的已编译档案？</p>
<p>运行脚本 当作程式的进入点，所以每一次执行  <code class="docutils literal notranslate"><span class="pre">python</span> <span class="pre">xxx.py</span></code>  指令时，Python编译器都要进行编译，所以没有将  <code class="docutils literal notranslate"><span class="pre">xxx.py</span></code>  进行快取的动作。</p>
</div>
<section id="id2">
<h4 id="id2">从内容区分<a class="headerlink" href="#id2" title="Link to this heading">¶</a></h4>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">import</span> <span class="pre">module</span></code>  = 调用 》  <code class="docutils literal notranslate"><span class="pre">module.specific_func()</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">from</span> <span class="pre">module</span> <span class="pre">import</span> <span class="pre">specific_func</span></code>  = 调用 》  <code class="docutils literal notranslate"><span class="pre">specific_func()</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">from</span> <span class="pre">module</span> <span class="pre">import</span> <span class="pre">*</span></code>  = 调用 》  <code class="docutils literal notranslate"><span class="pre">specific_func()</span></code></p></li>
</ul>
<div class="admonition-from-module-import admonition warning">
<p class="admonition-title">尽量不要用  <code class="docutils literal notranslate"><span class="pre">from</span> <span class="pre">module</span> <span class="pre">import</span> <span class="pre">*</span></code> ，这种方式向解释器导入了一批未知的名称，可能会覆盖已经定义的名称。</p>
</div>
<div class="admonition-from-module-import admonition note">
<p class="admonition-title"><code class="docutils literal notranslate"><span class="pre">from</span> <span class="pre">module</span> <span class="pre">import</span> <span class="pre">*</span></code>  会导入 <strong>所有不以下划线（_）开头</strong> 的名称。</p>
</div>
<div class="admonition-notes admonition danger">
<p class="admonition-title">notes</p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">from</span> <span class="pre">package</span> <span class="pre">import</span> <span class="pre">item</span></code>  时，item 可以是包的子模块（或子包），也可以是包中定义的函数、类或变量等其他名称。</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">import</span> <span class="pre">item.subitem.subsubitem</span></code>  时，除最后一项外， <strong>每个 item 都必须是包；最后一项可以是模块或包</strong> ，但不能是上一项中定义的类、函数或变量。</p></li>
</ul>
</div>
</section>
<section id="id3">
<h4 id="id3">从方式区分<a class="headerlink" href="#id3" title="Link to this heading">¶</a></h4>
<p>See 路径相关的 section</p>
<ul class="simple">
<li><p>绝对导入</p></li>
<li><p>相对导入</p></li>
</ul>
</section>
</section>
</section>
<section id="id4">
<h2 id="id4">路径相关<a class="headerlink" href="#id4" title="Link to this heading">¶</a></h2>
<div class="admonition-python-xxx-py-working-directory-script-path admonition danger">
<p class="admonition-title">如果不是从脚本所在路径  <code class="docutils literal notranslate"><span class="pre">python</span> <span class="pre">./xxx.py</span></code>  运行脚本，就会有 working directory &amp; script path 区别</p>
<div class="line-block">
<div class="line">用户在磁盘上寻找文件或子目录时，所历经的线路叫路径。</div>
<div class="line">目录和文件夹是一个意思</div>
</div>
</div>
<p><span class="defi">工作目录 working directory cwd</span> 。用户当前目录。 <code class="docutils literal notranslate"><span class="pre">os.getcwd()</span></code>
<span class="defi">脚本路径 script path</span> 。脚本文件所在的路径。  <code class="docutils literal notranslate"><span class="pre">__file__</span></code>
<span class="defi">系统路径 system path sys</span> 。操作系统用来查找 <strong>可执行文件和库文件</strong> 的一组目录路径。 <code class="docutils literal notranslate"><span class="pre">sys.path:List</span></code></p>
<ul class="simple">
<li><p>加入sys  <code class="docutils literal notranslate"><span class="pre">sys.path.append(new_path)</span></code></p></li>
<li><p>查看  <code class="docutils literal notranslate"><span class="pre">sys.path</span></code></p></li>
</ul>
<p>【process】</p>
<ul class="simple">
<li><dl class="simple">
<dt>程序将&lt;u&gt;脚本所在的目录&lt;/u&gt;加入到 &lt;u&gt;sys&lt;/u&gt; 中，用来查找 <strong>可执行文件和库文件</strong></dt><dd><p><code class="docutils literal notranslate"><span class="pre">os.path.dirname(__file__)</span> <span class="pre">==</span> <span class="pre">sys.path[0]</span></code></p>
</dd>
</dl>
</li>
<li><p>程序会实行&lt;u&gt;脚本里的代码&lt;/u&gt;，在&lt;u&gt;cwd&lt;/u&gt; 进行查找创造文件。</p></li>
</ul>
<div class="sd-container-fluid sd-sphinx-override sd-mb-4 docutils">
<div class="sd-row sd-row-cols-2 sd-row-cols-xs-2 sd-row-cols-sm-2 sd-row-cols-md-2 sd-row-cols-lg-2 docutils">
<div class="sd-col sd-d-flex-column docutils">
<div class="literal-block-wrapper docutils container" id="id14">
<div class="code-block-caption"><span class="caption-text">dir</span><a class="headerlink" href="#id14" title="Link to this code">¶</a></div>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>+ A
    A1.py
    + subA
        a1.py
</pre></div>
</div>
</div>
</div>
<div class="sd-col sd-d-flex-column docutils">
<div class="literal-block-wrapper docutils container" id="id15">
<div class="code-block-caption"><span class="caption-text">A1.py</span><a class="headerlink" href="#id15" title="Link to this code">¶</a></div>
<div class="highlight-py notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span> <span class="nn">os</span><span class="o">,</span> <span class="nn">sys</span>

<span class="k">if</span> <span class="vm">__name__</span><span class="o">==</span><span class="s2">"__main__"</span><span class="p">:</span>
    <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s1">'working_directory = </span><span class="si">{</span><span class="n">os</span><span class="o">.</span><span class="n">getcwd</span><span class="p">()</span><span class="si">}</span><span class="s1">'</span><span class="p">)</span>
    <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s1">'script_path = </span><span class="si">{</span><span class="vm">__file__</span><span class="si">}</span><span class="s1">'</span> <span class="p">)</span>
    <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s1">'system_path[0] = </span><span class="si">{</span><span class="n">sys</span><span class="o">.</span><span class="n">path</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="si">}</span><span class="s1">'</span><span class="p">)</span>
    <span class="k">with</span> <span class="nb">open</span><span class="p">(</span><span class="s1">'1.txt'</span><span class="p">,</span> <span class="s1">'w'</span><span class="p">):</span>
        <span class="o">...</span>
</pre></div>
</div>
</div>
</div>
</div>
</div>
<p>在 subA 底下运行  <code class="docutils literal notranslate"><span class="pre">A1.py</span></code> <code class="docutils literal notranslate"><span class="pre">.../python.exe</span> <span class="pre">.../A/A1.py</span></code></p>
<div class="highlight-sh notranslate"><div class="highlight"><pre><span></span><span class="nv">working_directory</span><span class="w"> </span><span class="o">=</span><span class="w"> </span>...<span class="se">\A\s</span>ubA
<span class="nv">script_path</span><span class="w"> </span><span class="o">=</span><span class="w"> </span>...<span class="se">\A\A</span><span class="m">1</span>.py
system_path<span class="o">[</span><span class="m">0</span><span class="o">]</span><span class="w"> </span><span class="o">=</span><span class="w"> </span>...<span class="se">\A</span>
<span class="m">1</span>.txt<span class="w"> </span>在<span class="w"> </span>subA<span class="w"> </span>底下，<span class="w"> </span><span class="c1"># 在工作目录对应进行创建</span>
</pre></div>
</div>
<section id="import-module">
<h3 id="import-module">import - module 搜索路径<a class="headerlink" href="#import-module" title="Link to this heading">¶</a></h3>
<p>当  <code class="docutils literal notranslate"><span class="pre">import</span> <span class="pre">spam</span></code> ，解释器：</p>
<ol class="arabic simple">
<li><p>搜索  <code class="docutils literal notranslate"><span class="pre">spam</span></code>  的内置模块。这些模块的名称在  <code class="docutils literal notranslate"><span class="pre">sys.builtin_module_names</span></code>  中列出。</p></li>
<li><p>如果未找到，它将在变量  <code class="docutils literal notranslate"><span class="pre">sys.path</span></code>  所给出的目录列表中搜索</p></li>
</ol>
<p><strong>sys.path的初始化：</strong></p>
<ul class="simple">
<li><p>被 <strong>命令行直接运行的脚本所在的目录</strong>。</p></li>
<li><p>PYTHONPATH （目录列表，与 shell 变量 PATH 的语法一样）。</p></li>
<li><p>依赖于安装的默认值（按照惯例包括一个 site-packages 目录，由 site 模块处理）。</p></li>
</ul>
<div class="admonition-notes admonition note">
<p class="admonition-title">notes</p>
<p>程序将&lt;u&gt; <code class="docutils literal notranslate"><span class="pre">run.py</span></code>  脚本所在的目录&lt;/u&gt;加入到 &lt;u&gt;sys&lt;/u&gt; 中，用来查找 <strong>可执行文件和库文件</strong></p>
</div>
<p>自己写的包注意 import 路径，从系统路径中能不能找到，能不能形成可到达的路径</p>
<ol class="arabic simple">
<li><p>通过  <code class="docutils literal notranslate"><span class="pre">sys</span></code>  添加搜索路径  <code class="docutils literal notranslate"><span class="pre">sys.path.append('package</span> <span class="pre">path')</span></code></p></li>
<li><p>绝对引用。当包由多个子包构成时，可以使用绝对导入来引用 <strong>同级包的子模块</strong>。</p></li>
<li><p>相对引用。</p></li>
</ol>
<div class="admonition-u-u admonition danger">
<p class="admonition-title">主模块始终使用 &lt;u&gt;绝对导入&lt;/u&gt;</p>
<p>相对导入基于当前模块名 <code class="docutils literal notranslate"><span class="pre">module.__name__</span></code> 。</p>
<ul class="simple">
<li><p>模块作为 <strong>顶层文件被执行</strong> 时， <code class="docutils literal notranslate"><span class="pre">__name__="__main__"</span></code> ，不包含任何包的名字</p></li>
<li><p>但作为 <strong>普通模块被 import</strong>， 就会被包含包。</p></li>
</ul>
</div>
<div class="admonition- admonition note">
<p class="admonition-title">绝对引用 &amp; 相对引用</p>
<div class="sd-container-fluid sd-sphinx-override sd-mb-4 docutils">
<div class="sd-row sd-row-cols-2 sd-row-cols-xs-2 sd-row-cols-sm-2 sd-row-cols-md-2 sd-row-cols-lg-2 docutils">
<div class="sd-col sd-d-flex-column docutils">
<div class="literal-block-wrapper docutils container" id="id16">
<div class="code-block-caption"><span class="caption-text">dir</span><a class="headerlink" href="#id16" title="Link to this code">¶</a></div>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>+ A
    A1.py
    A2.py
</pre></div>
</div>
</div>
</div>
<div class="sd-col sd-d-flex-column docutils">
<div class="literal-block-wrapper docutils container" id="id17">
<div class="code-block-caption"><span class="caption-text">A1.py</span><a class="headerlink" href="#id17" title="Link to this code">¶</a></div>
<div class="highlight-py notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span> <span class="nn">A2</span>  <span class="c1"># 绝对引用</span>
<span class="kn">import</span> <span class="nn">.A2</span>  <span class="c1"># 相对引用</span>
</pre></div>
</div>
</div>
</div>
</div>
</div>
</div>
<p>[import 问题浅谈]</p>
</section>
</section>
<section id="others">
<h2 id="others">Others<a class="headerlink" href="#others" title="Link to this heading">¶</a></h2>
<ul>
<li><dl>
<dt>Magic Number 魔数（中性词）</dt><dd><div class="line-block">
<div class="line">[编程中的「魔数」（magic number）是什么意思？平时我们能接触到哪些魔数？]</div>
<div class="line">一般是指 <strong>硬写到代码里的整数常量</strong>，数值是编程者自己指定的，其他人不知道数值有什么具体意义，表示不明觉厉，就称作magic number。编程教材书用magic number指代 <strong>初学者不定义常量直接写数的不良习惯。</strong></div>
</div>
<blockquote>
<div><ul>
<li><dl>
<dt><strong>贬义词</strong>: 指的是代码中出现的没有说明的数字。代码中突然出现一个没说明用途的数字会让其它阅读代码、维护代码的的人非常难受。</dt><dd><div class="admonition-notes admonition hint">
<p class="admonition-title">notes</p>
<p>例如写3.1416这种数字，也应该改为数学库中的π常数，例如Unity中的Mathf.PI。</p>
</div>
</dd>
</dl>
</li>
<li><p><strong>褒义词</strong>: 通过一些底层原理实现骚操作</p></li>
<li><dl>
<dt><strong>中性词</strong>：</dt><dd><div class="admonition-example admonition hint">
<p class="admonition-title">Example</p>
<div class="line-block">
<div class="line">ELF文件头会写入一个magic number，检查这个数和自己预想的是否一致可以判断文件是否损坏。</div>
<div class="line">如果你用16进制编辑器打开一个文件，它的开头不是FFD8FF，那就不是jpg文件。这个魔数一般会在相关文件标准中进行规定，所有人都要遵守</div>
</div>
</div>
</dd>
</dl>
</li>
</ul>
</div></blockquote>
</dd>
</dl>
</li>
</ul>
</section>
<section id="todo">
<h2 id="todo">Todo<a class="headerlink" href="#todo" title="Link to this heading">¶</a></h2>
<p>[import雜談之三———sys.path的洪荒之時]</p>
<p>[import雜談之三———sys.path的洪荒之時]: <a class="reference external" href="https://ithelp.ithome.com.tw/articles/10196901">https://ithelp.ithome.com.tw/articles/10196901</a>
[Python中的__all__]:<a class="reference external" href="https://zhuanlan.zhihu.com/p/54274339">https://zhuanlan.zhihu.com/p/54274339</a>
[import 问题浅谈]:<a class="reference external" href="https://zhuanlan.zhihu.com/p/69099185">https://zhuanlan.zhihu.com/p/69099185</a>
[编程中的「魔数」（magic number）是什么意思？平时我们能接触到哪些魔数？]:<a class="reference external" href="https://www.zhihu.com/question/22018894">https://www.zhihu.com/question/22018894</a></p>
</section>
</section>


          </article>
        </div>
      </div>
    </main>
  </div>
  <footer class="md-footer">
    <div class="md-footer-nav">
      <nav class="md-footer-nav__inner md-grid">
          
            <a href="python_elegant.html" title="Elegant Python"
               class="md-flex md-footer-nav__link md-footer-nav__link--prev"
               rel="prev">
              <div class="md-flex__cell md-flex__cell--shrink">
                <i class="md-icon md-icon--arrow-back md-footer-nav__button"></i>
              </div>
              <div class="md-flex__cell md-flex__cell--stretch md-footer-nav__title">
                <span class="md-flex__ellipsis">
                  <span
                      class="md-footer-nav__direction"> "Previous" </span> Elegant Python </span>
              </div>
            </a>
          
          
            <a href="numpy.html" title="Numpy &amp; Scipy"
               class="md-flex md-footer-nav__link md-footer-nav__link--next"
               rel="next">
            <div class="md-flex__cell md-flex__cell--stretch md-footer-nav__title"><span
                class="md-flex__ellipsis"> <span
                class="md-footer-nav__direction"> "Next" </span> Numpy &amp; Scipy </span>
            </div>
            <div class="md-flex__cell md-flex__cell--shrink"><i
                class="md-icon md-icon--arrow-forward md-footer-nav__button"></i>
            </div>
          
        </a>
        
      </nav>
    </div>
    <div class="md-footer-meta md-typeset">
      <div class="md-footer-meta__inner md-grid">
        <div class="md-footer-copyright">
          <div class="md-footer-copyright__highlight">
              &#169; Copyright 2024, coconut.
              
          </div>
            Created using
            <a href="http://www.sphinx-doc.org/">Sphinx</a> 7.3.7.
             and
            <a href="https://github.com/bashtage/sphinx-material/">Material for
              Sphinx</a>
        </div>
      </div>
    </div>
  </footer>
  <script src="../_static/javascripts/application.js"></script>
  <script>app.initialize({version: "1.0.4", url: {base: ".."}})</script>
  </body>
</html>